/*! For license information please see main.9daa27af.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),o=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function c(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function l(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(c(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var p=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),w=Symbol.for("react.consumer"),k=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),E=Symbol.for("react.lazy");Symbol.for("react.scope");var I=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var A=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var x=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}var P=Symbol.for("react.client.reference");function M(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===P?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case _:return"Suspense";case C:return"SuspenseList";case I:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case k:return e.displayName||"Context";case w:return(e._context.displayName||"Context")+".Consumer";case S:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:M(e.type)||"Memo";case E:t=e._payload,e=e._init;try{return M(e(t))}catch(n){}}return null}var O=Array.isArray,N=o.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},F=[],q=-1;function U(e){return{current:e}}function z(e){0>q||(e.current=F[q],F[q]=null,q--)}function H(e,t){q++,F[q]=e.current,e.current=t}var B,j,W=U(null),K=U(null),G=U(null),V=U(null);function Q(e,t){switch(H(G,t),H(K,e),H(W,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=vd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(W),H(W,e)}function Y(){z(W),z(K),z(G)}function J(e){null!==e.memoizedState&&H(V,e);var t=W.current,n=vd(t,e.type);t!==n&&(H(K,e),H(W,n))}function $(e){K.current===e&&(z(W),z(K)),V.current===e&&(z(V),uh._currentValue=L)}function X(e){if(void 0===B)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",j=-1<n.stack.indexOf("\n    at")?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+j}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(o){var r=o}Reflect.construct(e,[],n)}else{try{n.call()}catch(i){r=i}e.call(n.prototype)}}else{try{throw Error()}catch(a){r=a}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],s=i[1];if(a&&s){var c=a.split("\n"),l=s.split("\n");for(o=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;o<l.length&&!l[o].includes("DetermineComponentFrameRoot");)o++;if(r===c.length||o===l.length)for(r=c.length-1,o=l.length-1;1<=r&&0<=o&&c[r]!==l[o];)o--;for(;1<=r&&0<=o;r--,o--)if(c[r]!==l[o]){if(1!==r||1!==o)do{if(r--,0>--o||c[r]!==l[o]){var u="\n"+c[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=o);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?X(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return X(e.type);case 16:return X("Lazy");case 13:return e.child!==t&&null!==t?X("Suspense Fallback"):X("Suspense");case 19:return X("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return X("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(r){return"\nError generating stack: "+r.message+"\n"+r.stack}}var re=Object.prototype.hasOwnProperty,oe=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,se=r.unstable_requestPaint,ce=r.unstable_now,le=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,pe=r.unstable_LowPriority,fe=r.unstable_IdlePriority,me=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof me&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var we=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ke(e)/Se|0)|0},ke=Math.log,Se=Math.LN2;var _e=256,Ce=262144,Te=4194304;function Ee(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ie(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var o=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~i)?o=Ee(r):0!==(a&=s)?o=Ee(a):n||0!==(n=s&~e)&&(o=Ee(n)):0!==(s=r&~i)?o=Ee(s):0!==a?o=Ee(a):n||0!==(n=r&~e)&&(o=Ee(n)),0===o?0:0!==t&&t!==o&&0===(t&i)&&((i=o&-o)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:o}function Ae(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Re(){var e=Te;return 0===(62914560&(Te<<=1))&&(Te=4194304),e}function Pe(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Me(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Oe(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-we(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function Ne(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-we(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}function De(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Fe(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function qe(){var e=D.p;return 0!==e?e:void 0===(e=window.event)?32:Eh(e.type)}function Ue(e,t){var n=D.p;try{return D.p=e,t()}finally{D.p=n}}var ze=Math.random().toString(36).slice(2),He="__reactFiber$"+ze,Be="__reactProps$"+ze,je="__reactContainer$"+ze,We="__reactEvents$"+ze,Ke="__reactListeners$"+ze,Ge="__reactHandles$"+ze,Ve="__reactResources$"+ze,Qe="__reactMarker$"+ze;function Ye(e){delete e[He],delete e[Be],delete e[We],delete e[Ke],delete e[Ge]}function Je(e){var t=e[He];if(t)return t;for(var n=e.parentNode;n;){if(t=n[je]||n[He]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Ld(e);null!==e;){if(n=e[He])return n;e=Ld(e)}return t}n=(e=n).parentNode}return null}function $e(e){if(e=e[He]||e[je]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function Xe(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ze(e){var t=e[Ve];return t||(t=e[Ve]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){ot(e,t),ot(e+"Capture",t)}function ot(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},st={};function ct(e,t,n){if(o=t,re.call(st,o)||!re.call(at,o)&&(it.test(o)?st[o]=!0:(at[o]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var o}function lt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function pt(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function ft(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function mt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,o,i,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?wt(e,a,dt(t)):null!=n?wt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==o&&null!=i&&(e.defaultChecked=!!i),null!=o&&(e.checked=o&&"function"!==typeof o&&"symbol"!==typeof o),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+dt(s):e.removeAttribute("name")}function bt(e,t,n,r,o,i,a,s){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void pt(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:o)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),pt(e)}function wt(e,t,n){"number"===t&&mt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function kt(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n)return e[o].selected=!0,void(r&&(e[o].defaultSelected=!0));null!==t||e[o].disabled||(t=e[o])}null!==t&&(t.selected=!0)}}function St(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function _t(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(O(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),pt(e)}function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Tt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Tt.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function It(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var o in t)r=t[o],t.hasOwnProperty(o)&&n[o]!==r&&Et(e,o,r)}else for(var i in t)t.hasOwnProperty(i)&&Et(e,i,t[i])}function At(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Rt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pt(e){return Rt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Mt(){}var Ot=null;function Nt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Dt=null,Lt=null;function Ft(e){var t=$e(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=r[Be]||null;if(!o)throw Error(a(90));vt(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ft(r)}break e;case"textarea":St(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&kt(e,!!n.multiple,t,!1)}}}var qt=!1;function Ut(e,t,n){if(qt)return e(t,n);qt=!0;try{return e(t)}finally{if(qt=!1,(null!==Dt||null!==Lt)&&(Zl(),Dt&&(t=Dt,e=Lt,Lt=Dt=null,Ft(t),e)))for(t=0;t<e.length;t++)Ft(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ht=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Ht)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch($h){Bt=!1}var Wt=null,Kt=null,Gt=null;function Vt(){if(Gt)return Gt;var e,t,n=Kt,r=n.length,o="value"in Wt?Wt.value:Wt.textContent,i=o.length;for(e=0;e<r&&n[e]===o[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===o[i-t];t++);return Gt=o.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Jt(){return!1}function $t(e){function t(t,n,r,o,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=o,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(null!=o.defaultPrevented?o.defaultPrevented:!1===o.returnValue)?Yt:Jt,this.isPropagationStopped=Jt,this}return p(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var Xt,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=$t(tn),rn=p({},tn,{view:0,detail:0}),on=$t(rn),an=p({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?(Xt=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=Xt=0,en=e),Xt)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),sn=$t(an),cn=$t(p({},an,{dataTransfer:0})),ln=$t(p({},rn,{relatedTarget:0})),un=$t(p({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=$t(p({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=$t(p({},tn,{data:0})),pn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},mn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=mn[e])&&!!t[e]}function yn(){return gn}var vn=$t(p({},rn,{key:function(e){if(e.key){var t=pn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?fn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=$t(p({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wn=$t(p({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),kn=$t(p({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Sn=$t(p({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_n=$t(p({},tn,{newState:0,oldState:0})),Cn=[9,13,27,32],Tn=Ht&&"CompositionEvent"in window,En=null;Ht&&"documentMode"in document&&(En=document.documentMode);var In=Ht&&"TextEvent"in window&&!En,An=Ht&&(!Tn||En&&8<En&&11>=En),xn=String.fromCharCode(32),Rn=!1;function Pn(e,t){switch(e){case"keyup":return-1!==Cn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var On=!1;var Nn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Nn[e.type]:"textarea"===t}function Ln(e,t,n,r){Dt?Lt?Lt.push(r):Lt=[r]:Dt=r,0<(t=rd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fn=null,qn=null;function Un(e){Yu(e,0)}function zn(e){if(ft(Xe(e)))return e}function Hn(e,t){if("change"===e)return t}var Bn=!1;if(Ht){var jn;if(Ht){var Wn="oninput"in document;if(!Wn){var Kn=document.createElement("div");Kn.setAttribute("oninput","return;"),Wn="function"===typeof Kn.oninput}jn=Wn}else jn=!1;Bn=jn&&(!document.documentMode||9<document.documentMode)}function Gn(){Fn&&(Fn.detachEvent("onpropertychange",Vn),qn=Fn=null)}function Vn(e){if("value"===e.propertyName&&zn(qn)){var t=[];Ln(t,qn,e,Nt(e)),Ut(Un,t)}}function Qn(e,t,n){"focusin"===e?(Gn(),qn=n,(Fn=t).attachEvent("onpropertychange",Vn)):"focusout"===e&&Gn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(qn)}function Jn(e,t){if("click"===e)return zn(t)}function $n(e,t){if("input"===e||"change"===e)return zn(t)}var Xn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if(Xn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!re.call(t,o)||!Xn(e[o],t[o]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=mt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=mt((e=t.contentWindow).document)}return t}function or(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Ht&&"documentMode"in document&&11>=document.documentMode,ar=null,sr=null,cr=null,lr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;lr||null==ar||ar!==mt(r)||("selectionStart"in(r=ar)&&or(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},cr&&Zn(cr,r)||(cr=r,0<(r=rd(sr,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},pr={},fr={};function mr(e){if(pr[e])return pr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in fr)return pr[e]=n[t];return e}Ht&&(fr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=mr("animationend"),yr=mr("animationiteration"),vr=mr("animationstart"),br=mr("transitionrun"),wr=mr("transitionstart"),kr=mr("transitioncancel"),Sr=mr("transitionend"),_r=new Map,Cr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(e,t){_r.set(e,t),rt(t,[e])}Cr.push("scrollEnd");var Er="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ir=[],Ar=0,xr=0;function Rr(){for(var e=Ar,t=xr=Ar=0;t<e;){var n=Ir[t];Ir[t++]=null;var r=Ir[t];Ir[t++]=null;var o=Ir[t];Ir[t++]=null;var i=Ir[t];if(Ir[t++]=null,null!==r&&null!==o){var a=r.pending;null===a?o.next=o:(o.next=a.next,a.next=o),r.pending=o}0!==i&&Nr(n,o,i)}}function Pr(e,t,n,r){Ir[Ar++]=e,Ir[Ar++]=t,Ir[Ar++]=n,Ir[Ar++]=r,xr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Mr(e,t,n,r){return Pr(e,t,n,r),Dr(e)}function Or(e,t){return Pr(e,null,null,t),Dr(e)}function Nr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var o=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(o=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,o&&null!==t&&(o=31-we(n),null===(r=(e=i.hiddenUpdates)[o])?e[o]=[t]:r.push(t),t.lane=536870912|n),i):null}function Dr(e){if(50<Wl)throw Wl=0,Kl=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Lr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(e,t,n,r){return new Fr(e,t,n,r)}function Ur(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zr(e,t){var n=e.alternate;return null===n?((n=qr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Hr(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Br(e,t,n,r,o,i){var s=0;if(r=e,"function"===typeof e)Ur(e)&&(s=1);else if("string"===typeof e)s=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,W.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case I:return(e=qr(31,n,t,o)).elementType=I,e.lanes=i,e;case y:return jr(n.children,o,i,t);case v:s=8,o|=24;break;case b:return(e=qr(12,n,t,2|o)).elementType=b,e.lanes=i,e;case _:return(e=qr(13,n,t,o)).elementType=_,e.lanes=i,e;case C:return(e=qr(19,n,t,o)).elementType=C,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case w:s=9;break e;case S:s=11;break e;case T:s=14;break e;case E:s=16,r=null;break e}s=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=qr(s,n,t,o)).elementType=e,t.type=r,t.lanes=i,t}function jr(e,t,n,r){return(e=qr(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=qr(6,e,null,t)).lanes=n,e}function Kr(e){var t=qr(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=qr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Vr=new WeakMap;function Qr(e,t){if("object"===typeof e&&null!==e){var n=Vr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Vr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Yr=[],Jr=0,$r=null,Xr=0,Zr=[],eo=0,to=null,no=1,ro="";function oo(e,t){Yr[Jr++]=Xr,Yr[Jr++]=$r,$r=e,Xr=t}function io(e,t,n){Zr[eo++]=no,Zr[eo++]=ro,Zr[eo++]=to,to=e;var r=no;e=ro;var o=32-we(r)-1;r&=~(1<<o),n+=1;var i=32-we(t)+o;if(30<i){var a=o-o%5;i=(r&(1<<a)-1).toString(32),r>>=a,o-=a,no=1<<32-we(t)+o|n<<o|r,ro=i+e}else no=1<<i|n<<o|r,ro=e}function ao(e){null!==e.return&&(oo(e,1),io(e,1,0))}function so(e){for(;e===$r;)$r=Yr[--Jr],Yr[Jr]=null,Xr=Yr[--Jr],Yr[Jr]=null;for(;e===to;)to=Zr[--eo],Zr[eo]=null,ro=Zr[--eo],Zr[eo]=null,no=Zr[--eo],Zr[eo]=null}function co(e,t){Zr[eo++]=no,Zr[eo++]=ro,Zr[eo++]=to,no=t.id,ro=t.overflow,to=e}var lo=null,uo=null,ho=!1,po=null,fo=!1,mo=Error(a(519));function go(e){throw So(Qr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),mo}function yo(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[He]=e,t[Be]=r,n){case"dialog":Ju("cancel",t),Ju("close",t);break;case"iframe":case"object":case"embed":Ju("load",t);break;case"video":case"audio":for(n=0;n<Vu.length;n++)Ju(Vu[n],t);break;case"source":Ju("error",t);break;case"img":case"image":case"link":Ju("error",t),Ju("load",t);break;case"details":Ju("toggle",t);break;case"input":Ju("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ju("invalid",t);break;case"textarea":Ju("invalid",t),_t(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ld(t.textContent,n)?(null!=r.popover&&(Ju("beforetoggle",t),Ju("toggle",t)),null!=r.onScroll&&Ju("scroll",t),null!=r.onScrollEnd&&Ju("scrollend",t),null!=r.onClick&&(t.onclick=Mt),t=!0):t=!1,t||go(e,!0)}function vo(e){for(lo=e.return;lo;)switch(lo.tag){case 5:case 31:case 13:return void(fo=!1);case 27:case 3:return void(fo=!0);default:lo=lo.return}}function bo(e){if(e!==lo)return!1;if(!ho)return vo(e),ho=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||bd(e.type,e.memoizedProps)),t=!t),t&&uo&&go(e),vo(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));uo=Dd(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));uo=Dd(e)}else 27===n?(n=uo,Ed(e.type)?(e=Nd,Nd=null,uo=e):uo=n):uo=lo?Od(e.stateNode.nextSibling):null;return!0}function wo(){uo=lo=null,ho=!1}function ko(){var e=po;return null!==e&&(null===Rl?Rl=e:Rl.push.apply(Rl,e),po=null),e}function So(e){null===po?po=[e]:po.push(e)}var _o=U(null),Co=null,To=null;function Eo(e,t,n){H(_o,t._currentValue),t._currentValue=n}function Io(e){e._currentValue=_o.current,z(_o)}function Ao(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function xo(e,t,n,r){var o=e.child;for(null!==o&&(o.return=e);null!==o;){var i=o.dependencies;if(null!==i){var s=o.child;i=i.firstContext;e:for(;null!==i;){var c=i;i=o;for(var l=0;l<t.length;l++)if(c.context===t[l]){i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ao(i.return,n,e),r||(s=null);break e}i=c.next}}else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(i=s.alternate)&&(i.lanes|=n),Ao(s,n,e),s=null}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===e){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}}function Ro(e,t,n,r){e=null;for(var o=t,i=!1;null!==o;){if(!i)if(0!==(524288&o.flags))i=!0;else if(0!==(262144&o.flags))break;if(10===o.tag){var s=o.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var c=o.type;Xn(o.pendingProps.value,s.value)||(null!==e?e.push(c):e=[c])}}else if(o===V.current){if(null===(s=o.alternate))throw Error(a(387));s.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(null!==e?e.push(uh):e=[uh])}o=o.return}null!==e&&xo(t,e,n,r),t.flags|=262144}function Po(e){for(e=e.firstContext;null!==e;){if(!Xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Mo(e){Co=e,To=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Oo(e){return Do(Co,e)}function No(e,t){return null===Co&&Mo(e),Do(e,t)}function Do(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===To){if(null===e)throw Error(a(308));To=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else To=To.next=t;return n}var Lo="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Fo=r.unstable_scheduleCallback,qo=r.unstable_NormalPriority,Uo={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zo(){return{controller:new Lo,data:new Map,refCount:0}}function Ho(e){e.refCount--,0===e.refCount&&Fo(qo,function(){e.controller.abort()})}var Bo=null,jo=0,Wo=0,Ko=null;function Go(){if(0===--jo&&null!==Bo){null!==Ko&&(Ko.status="fulfilled");var e=Bo;Bo=null,Wo=0,Ko=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vo=N.S;N.S=function(e,t){Ol=ce(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bo){var n=Bo=[];jo=0,Wo=Bu(),Ko={status:"pending",value:void 0,then:function(e){n.push(e)}}}jo++,t.then(Go,Go)}(0,t),null!==Vo&&Vo(e,t)};var Qo=U(null);function Yo(){var e=Qo.current;return null!==e?e:fl.pooledCache}function Jo(e,t){H(Qo,null===t?Qo.current:t.pool)}function $o(){var e=Yo();return null===e?null:{parent:Uo._currentValue,pool:e}}var Xo=Error(a(460)),Zo=Error(a(474)),ei=Error(a(542)),ti={then:function(){}};function ni(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ri(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Mt,Mt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw si(e=t.reason),e;default:if("string"===typeof t.status)t.then(Mt,Mt);else{if(null!==(e=fl)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw si(e=t.reason),e}throw ii=t,Xo}}function oi(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"===typeof t&&"function"===typeof t.then)throw ii=t,Xo;throw t}}var ii=null;function ai(){if(null===ii)throw Error(a(459));var e=ii;return ii=null,e}function si(e){if(e===Xo||e===ei)throw Error(a(483))}var ci=null,li=0;function ui(e){var t=li;return li+=1,null===ci&&(ci=[]),ri(ci,e,t)}function di(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function pi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function o(e,t){return(e=zr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=o(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===E&&oi(i)===t.type)?(di(t=o(t,n.props),n),t.return=e,t):(di(t=Br(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=o(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=jr(n,e.mode,r,i)).return=e,t):((t=o(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return di(n=Br(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Gr(t,e.mode,n)).return=e,t;case E:return h(e,t=oi(t),n)}if(O(t)||R(t))return(t=jr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ui(t),n);if(t.$$typeof===k)return h(e,No(e,t),n);hi(e,t)}return null}function p(e,t,n,r){var o=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==o?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===o?l(e,t,n,r):null;case g:return n.key===o?u(e,t,n,r):null;case E:return p(e,t,n=oi(n),r)}if(O(n)||R(n))return null!==o?null:d(e,t,n,r,null);if("function"===typeof n.then)return p(e,t,ui(n),r);if(n.$$typeof===k)return p(e,t,No(e,n),r);hi(e,n)}return null}function f(e,t,n,r,o){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return c(t,e=e.get(n)||null,""+r,o);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return l(t,e=e.get(null===r.key?n:r.key)||null,r,o);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,o);case E:return f(e,t,n,r=oi(r),o)}if(O(r)||R(r))return d(t,e=e.get(n)||null,r,o,null);if("function"===typeof r.then)return f(e,t,n,ui(r),o);if(r.$$typeof===k)return f(e,t,n,No(t,r),o);hi(t,r)}return null}function v(c,l,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==l;){if(l.key===b){if((b=u.type)===y){if(7===l.tag){n(c,l.sibling),(d=o(l,u.props.children)).return=c,c=d;break e}}else if(l.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===E&&oi(b)===l.type){n(c,l.sibling),di(d=o(l,u.props),u),d.return=c,c=d;break e}n(c,l);break}t(c,l),l=l.sibling}u.type===y?((d=jr(u.props.children,c.mode,d,u.key)).return=c,c=d):(di(d=Br(u.type,u.key,u.props,null,c.mode,d),u),d.return=c,c=d)}return s(c);case g:e:{for(b=u.key;null!==l;){if(l.key===b){if(4===l.tag&&l.stateNode.containerInfo===u.containerInfo&&l.stateNode.implementation===u.implementation){n(c,l.sibling),(d=o(l,u.children||[])).return=c,c=d;break e}n(c,l);break}t(c,l),l=l.sibling}(d=Gr(u,c.mode,d)).return=c,c=d}return s(c);case E:return v(c,l,u=oi(u),d)}if(O(u))return function(o,a,s,c){for(var l=null,u=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=p(o,d,s[m],c);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(o,d),a=i(y,a,m),null===u?l=y:u.sibling=y,u=y,d=g}if(m===s.length)return n(o,d),ho&&oo(o,m),l;if(null===d){for(;m<s.length;m++)null!==(d=h(o,s[m],c))&&(a=i(d,a,m),null===u?l=d:u.sibling=d,u=d);return ho&&oo(o,m),l}for(d=r(d);m<s.length;m++)null!==(g=f(d,o,m,s[m],c))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=i(g,a,m),null===u?l=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(o,e)}),ho&&oo(o,m),l}(c,l,u,d);if(R(u)){if("function"!==typeof(b=R(u)))throw Error(a(150));return function(o,s,c,l){if(null==c)throw Error(a(151));for(var u=null,d=null,m=s,g=s=0,y=null,v=c.next();null!==m&&!v.done;g++,v=c.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=p(o,m,v.value,l);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(o,m),s=i(b,s,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(o,m),ho&&oo(o,g),u;if(null===m){for(;!v.done;g++,v=c.next())null!==(v=h(o,v.value,l))&&(s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return ho&&oo(o,g),u}for(m=r(m);!v.done;g++,v=c.next())null!==(v=f(m,o,g,v.value,l))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=i(v,s,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(o,e)}),ho&&oo(o,g),u}(c,l,u=b.call(u),d)}if("function"===typeof u.then)return v(c,l,ui(u),d);if(u.$$typeof===k)return v(c,l,No(c,u),d);hi(c,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==l&&6===l.tag?(n(c,l.sibling),(d=o(l,u)).return=c,c=d):(n(c,l),(d=Wr(u,c.mode,d)).return=c,c=d),s(c)):n(c,l)}return function(e,t,n,r){try{li=0;var o=v(e,t,n,r);return ci=null,o}catch(a){if(a===Xo||a===ei)throw a;var i=qr(29,a,null,e.mode);return i.lanes=r,i.return=e,i}}}var fi=pi(!0),mi=pi(!1),gi=!1;function yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&pl)){var o=r.pending;return null===o?t.next=t:(t.next=o.next,o.next=t),r.pending=t,t=Dr(e),Nr(e,null,n),t}return Pr(e,r,t,n),Dr(e)}function ki(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}function Si(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var o=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?o=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?o=i=t:i=i.next=t}else o=i=t;return n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var _i=!1;function Ci(){if(_i){if(null!==Ko)throw Ko}}function Ti(e,t,n,r){_i=!1;var o=e.updateQueue;gi=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,s=o.shared.pending;if(null!==s){o.shared.pending=null;var c=s,l=c.next;c.next=null,null===a?i=l:a.next=l,a=c;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=l:s.next=l,u.lastBaseUpdate=c))}if(null!==i){var d=o.baseState;for(a=0,u=l=c=null,s=i;;){var h=-536870913&s.lane,f=h!==s.lane;if(f?(gl&h)===h:(r&h)===h){0!==h&&h===Wo&&(_i=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(y,d,h);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=g.payload)?m.call(y,d,h):m)||void 0===h)break e;d=p({},d,h);break e;case 2:gi=!0}}null!==(h=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=o.callbacks)?o.callbacks=[h]:f.push(h))}else f={lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(l=u=f,c=d):u=u.next=f,a|=h;if(null===(s=s.next)){if(null===(s=o.shared.pending))break;s=(f=s).next,f.next=null,o.lastBaseUpdate=f,o.shared.pending=null}}null===u&&(c=d),o.baseState=c,o.firstBaseUpdate=l,o.lastBaseUpdate=u,null===i&&(o.shared.lanes=0),Cl|=a,e.lanes=a,e.memoizedState=d}}function Ei(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Ii(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)Ei(n[e],t)}var Ai=U(null),xi=U(0);function Ri(e,t){H(xi,e=Sl),H(Ai,t),Sl=e|t.baseLanes}function Pi(){H(xi,Sl),H(Ai,Ai.current)}function Mi(){Sl=xi.current,z(Ai),z(xi)}var Oi=U(null),Ni=null;function Di(e){var t=e.alternate;H(zi,1&zi.current),H(Oi,e),null===Ni&&(null===t||null!==Ai.current||null!==t.memoizedState)&&(Ni=e)}function Li(e){H(zi,zi.current),H(Oi,e),null===Ni&&(Ni=e)}function Fi(e){22===e.tag?(H(zi,zi.current),H(Oi,e),null===Ni&&(Ni=e)):qi()}function qi(){H(zi,zi.current),H(Oi,Oi.current)}function Ui(e){z(Oi),Ni===e&&(Ni=null),z(zi)}var zi=U(0);function Hi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||Md(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=0,ji=null,Wi=null,Ki=null,Gi=!1,Vi=!1,Qi=!1,Yi=0,Ji=0,$i=null,Xi=0;function Zi(){throw Error(a(321))}function ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xn(e[n],t[n]))return!1;return!0}function ta(e,t,n,r,o,i){return Bi=i,ji=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,N.H=null===e||null===e.memoizedState?gs:ys,Qi=!1,i=n(r,o),Qi=!1,Vi&&(i=ra(t,n,r,o)),na(e),i}function na(e){N.H=ms;var t=null!==Wi&&null!==Wi.next;if(Bi=0,Ki=Wi=ji=null,Gi=!1,Ji=0,$i=null,t)throw Error(a(300));null===e||Os||null!==(e=e.dependencies)&&Po(e)&&(Os=!0)}function ra(e,t,n,r){ji=e;var o=0;do{if(Vi&&($i=null),Ji=0,Vi=!1,25<=o)throw Error(a(301));if(o+=1,Ki=Wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}N.H=vs,i=t(n,r)}while(Vi);return i}function oa(){var e=N.H,t=e.useState()[0];return t="function"===typeof t.then?ua(t):t,e=e.useState()[0],(null!==Wi?Wi.memoizedState:null)!==e&&(ji.flags|=1024),t}function ia(){var e=0!==Yi;return Yi=0,e}function aa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function sa(e){if(Gi){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Gi=!1}Bi=0,Ki=Wi=ji=null,Vi=!1,Ji=Yi=0,$i=null}function ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ki?ji.memoizedState=Ki=e:Ki=Ki.next=e,Ki}function la(){if(null===Wi){var e=ji.alternate;e=null!==e?e.memoizedState:null}else e=Wi.next;var t=null===Ki?ji.memoizedState:Ki.next;if(null!==t)Ki=t,Wi=e;else{if(null===e){if(null===ji.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Wi=e).memoizedState,baseState:Wi.baseState,baseQueue:Wi.baseQueue,queue:Wi.queue,next:null},null===Ki?ji.memoizedState=Ki=e:Ki=Ki.next=e}return Ki}function ua(e){var t=Ji;return Ji+=1,null===$i&&($i=[]),e=ri($i,e,t),t=ji,null===(null===Ki?t.memoizedState:Ki.next)&&(t=t.alternate,N.H=null===t||null===t.memoizedState?gs:ys),e}function da(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ua(e);if(e.$$typeof===k)return Oo(e)}throw Error(a(438,String(e)))}function ha(e){var t=null,n=ji.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=ji.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},ji.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=A;return t.index++,n}function pa(e,t){return"function"===typeof t?t(e):t}function fa(e){return ma(la(),Wi,e)}function ma(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var o=e.baseQueue,i=r.pending;if(null!==i){if(null!==o){var s=o.next;o.next=i.next,i.next=s}t.baseQueue=o=i,r.pending=null}if(i=e.baseState,null===o)e.memoizedState=i;else{var c=s=null,l=null,u=t=o.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(gl&h)===h:(Bi&h)===h){var p=u.revertLane;if(0===p)null!==l&&(l=l.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Wo&&(d=!0);else{if((Bi&p)===p){u=u.next,p===Wo&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=h,s=i):l=l.next=h,ji.lanes|=p,Cl|=p}h=u.action,Qi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===l?(c=l=p,s=i):l=l.next=p,ji.lanes|=h,Cl|=h;u=u.next}while(null!==u&&u!==t);if(null===l?s=i:l.next=c,!Xn(i,e.memoizedState)&&(Os=!0,d&&null!==(n=Ko)))throw n;e.memoizedState=i,e.baseState=s,e.baseQueue=l,r.lastRenderedState=i}return null===o&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ga(e){var t=la(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,i=t.memoizedState;if(null!==o){n.pending=null;var s=o=o.next;do{i=e(i,s.action),s=s.next}while(s!==o);Xn(i,t.memoizedState)||(Os=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ya(e,t,n){var r=ji,o=la(),i=ho;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var s=!Xn((Wi||o).memoizedState,n);if(s&&(o.memoizedState=n,Os=!0),o=o.queue,Ba(wa.bind(null,r,o,e),[e]),o.getSnapshot!==t||s||null!==Ki&&1&Ki.memoizedState.tag){if(r.flags|=2048,Fa(9,{destroy:void 0},ba.bind(null,r,o,n,t),null),null===fl)throw Error(a(349));i||0!==(127&Bi)||va(r,t,n)}return n}function va(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ji.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},ji.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ba(e,t,n,r){t.value=n,t.getSnapshot=r,ka(t)&&Sa(e)}function wa(e,t,n){return n(function(){ka(t)&&Sa(e)})}function ka(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xn(e,n)}catch(r){return!0}}function Sa(e){var t=Or(e,2);null!==t&&Ql(t,e,2)}function _a(e){var t=ca();if("function"===typeof e){var n=e;if(e=n(),Qi){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:e},t}function Ca(e,t,n,r){return e.baseState=n,ma(e,Wi,"function"===typeof r?r:pa)}function Ta(e,t,n,r,o){if(hs(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==N.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,Ea(t,i)):(i.next=n.next,t.pending=n.next=i)}}function Ea(e,t){var n=t.action,r=t.payload,o=e.state;if(t.isTransition){var i=N.T,a={};N.T=a;try{var s=n(o,r),c=N.S;null!==c&&c(a,s),Ia(e,t,s)}catch(l){xa(e,t,l)}finally{null!==i&&null!==a.types&&(i.types=a.types),N.T=i}}else try{Ia(e,t,i=n(o,r))}catch(u){xa(e,t,u)}}function Ia(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Aa(e,t,n)},function(n){return xa(e,t,n)}):Aa(e,t,n)}function Aa(e,t,n){t.status="fulfilled",t.value=n,Ra(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,Ea(e,n)))}function xa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ra(t),t=t.next}while(t!==r)}e.action=null}function Ra(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Pa(e,t){return t}function Ma(e,t){if(ho){var n=fl.formState;if(null!==n){e:{var r=ji;if(ho){if(uo){t:{for(var o=uo,i=fo;8!==o.nodeType;){if(!i){o=null;break t}if(null===(o=Od(o.nextSibling))){o=null;break t}}o="F!"===(i=o.data)||"F"===i?o:null}if(o){uo=Od(o.nextSibling),r="F!"===o.data;break e}}go(r)}r=!1}r&&(t=n[0])}}return(n=ca()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},n.queue=r,n=ls.bind(null,ji,r),r.dispatch=n,r=_a(!1),i=ds.bind(null,ji,!1,r.queue),o={state:t,dispatch:null,action:e,pending:null},(r=ca()).queue=o,n=Ta.bind(null,ji,o,i,n),o.dispatch=n,r.memoizedState=e,[t,n,!1]}function Oa(e){return Na(la(),Wi,e)}function Na(e,t,n){if(t=ma(e,t,Pa)[0],e=fa(pa)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ua(t)}catch(a){if(a===Xo)throw ei;throw a}else r=t;var o=(t=la()).queue,i=o.dispatch;return n!==t.memoizedState&&(ji.flags|=2048,Fa(9,{destroy:void 0},Da.bind(null,o,n),null)),[r,i,e]}function Da(e,t){e.action=t}function La(e){var t=la(),n=Wi;if(null!==n)return Na(t,n,e);la(),t=t.memoizedState;var r=(n=la()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Fa(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=ji.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},ji.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qa(){return la().memoizedState}function Ua(e,t,n,r){var o=ca();ji.flags|=e,o.memoizedState=Fa(1|t,{destroy:void 0},n,void 0===r?null:r)}function za(e,t,n,r){var o=la();r=void 0===r?null:r;var i=o.memoizedState.inst;null!==Wi&&null!==r&&ea(r,Wi.memoizedState.deps)?o.memoizedState=Fa(t,i,n,r):(ji.flags|=e,o.memoizedState=Fa(1|t,i,n,r))}function Ha(e,t){Ua(8390656,8,e,t)}function Ba(e,t){za(2048,8,e,t)}function ja(e){var t=la().memoizedState;return function(e){ji.flags|=4;var t=ji.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},ji.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&pl))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Wa(e,t){return za(4,2,e,t)}function Ka(e,t){return za(4,4,e,t)}function Ga(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Va(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Ga.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ja(e,t){var n=la();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ea(t,r[1]))return r[0];if(r=e(),Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function $a(e,t,n){return void 0===n||0!==(1073741824&Bi)&&0===(261930&gl)?e.memoizedState=t:(e.memoizedState=n,e=Vl(),ji.lanes|=e,Cl|=e,n)}function Xa(e,t,n,r){return Xn(n,t)?n:null!==Ai.current?(e=$a(e,n,r),Xn(e,t)||(Os=!0),e):0===(42&Bi)||0!==(1073741824&Bi)&&0===(261930&gl)?(Os=!0,e.memoizedState=n):(e=Vl(),ji.lanes|=e,Cl|=e,t)}function Za(e,t,n,r,o){var i=D.p;D.p=0!==i&&8>i?i:8;var a=N.T,s={};N.T=s,ds(e,!1,t,n);try{var c=o(),l=N.S;if(null!==l&&l(s,c),null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(c,r);us(e,t,u,Gl())}else us(e,t,r,Gl())}catch(d){us(e,t,{then:function(){},status:"rejected",reason:d},Gl())}finally{D.p=i,null!==a&&null!==s.types&&(a.types=s.types),N.T=a}}function es(){}function ts(e,t,n,r){if(5!==e.tag)throw Error(a(476));var o=ns(e).queue;Za(e,o,t,L,null===n?es:function(){return rs(e),n(r)})}function ns(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function rs(e){var t=ns(e);null===t.next&&(t=e.alternate.memoizedState),us(e,t.next.queue,{},Gl())}function os(){return Oo(uh)}function is(){return la().memoizedState}function as(){return la().memoizedState}function ss(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gl(),r=wi(t,e=bi(n),n);return null!==r&&(Ql(r,t,n),ki(r,t,n)),t={cache:zo()},void(e.payload=t)}t=t.return}}function cs(e,t,n){var r=Gl();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hs(e)?ps(t,n):null!==(n=Mr(e,t,n,r))&&(Ql(n,e,r),fs(n,t,r))}function ls(e,t,n){us(e,t,n,Gl())}function us(e,t,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hs(e))ps(t,o);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=i(a,n);if(o.hasEagerState=!0,o.eagerState=s,Xn(s,a))return Pr(e,t,o,0),null===fl&&Rr(),!1}catch(c){}if(null!==(n=Mr(e,t,o,r)))return Ql(n,e,r),fs(n,t,r),!0}return!1}function ds(e,t,n,r){if(r={lane:2,revertLane:Bu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},hs(e)){if(t)throw Error(a(479))}else null!==(t=Mr(e,n,r,2))&&Ql(t,e,2)}function hs(e){var t=e.alternate;return e===ji||null!==t&&t===ji}function ps(e,t){Vi=Gi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fs(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Ne(e,n)}}var ms={readContext:Oo,use:da,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};ms.useEffectEvent=Zi;var gs={readContext:Oo,use:da,useCallback:function(e,t){return ca().memoizedState=[e,void 0===t?null:t],e},useContext:Oo,useEffect:Ha,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ga.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){Ua(4,2,e,t)},useMemo:function(e,t){var n=ca();t=void 0===t?null:t;var r=e();if(Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=ca();if(void 0!==n){var o=n(t);if(Qi){be(!0);try{n(t)}finally{be(!1)}}}else o=t;return r.memoizedState=r.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},r.queue=e,e=e.dispatch=cs.bind(null,ji,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ca().memoizedState=e},useState:function(e){var t=(e=_a(e)).queue,n=ls.bind(null,ji,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qa,useDeferredValue:function(e,t){return $a(ca(),e,t)},useTransition:function(){var e=_a(!1);return e=Za.bind(null,ji,e.queue,!0,!1),ca().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=ji,o=ca();if(ho){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===fl)throw Error(a(349));0!==(127&gl)||va(r,t,n)}o.memoizedState=n;var i={value:n,getSnapshot:t};return o.queue=i,Ha(wa.bind(null,r,i,e),[e]),r.flags|=2048,Fa(9,{destroy:void 0},ba.bind(null,r,i,n,t),null),n},useId:function(){var e=ca(),t=fl.identifierPrefix;if(ho){var n=ro;t="_"+t+"R_"+(n=(no&~(1<<32-we(no)-1)).toString(32)+n),0<(n=Yi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=Xi++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:os,useFormState:Ma,useActionState:Ma,useOptimistic:function(e){var t=ca();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ds.bind(null,ji,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return ca().memoizedState=ss.bind(null,ji)},useEffectEvent:function(e){var t=ca(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&pl))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},ys={readContext:Oo,use:da,useCallback:Ya,useContext:Oo,useEffect:Ba,useImperativeHandle:Va,useInsertionEffect:Wa,useLayoutEffect:Ka,useMemo:Ja,useReducer:fa,useRef:qa,useState:function(){return fa(pa)},useDebugValue:Qa,useDeferredValue:function(e,t){return Xa(la(),Wi.memoizedState,e,t)},useTransition:function(){var e=fa(pa)[0],t=la().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:is,useHostTransitionStatus:os,useFormState:Oa,useActionState:Oa,useOptimistic:function(e,t){return Ca(la(),0,e,t)},useMemoCache:ha,useCacheRefresh:as};ys.useEffectEvent=ja;var vs={readContext:Oo,use:da,useCallback:Ya,useContext:Oo,useEffect:Ba,useImperativeHandle:Va,useInsertionEffect:Wa,useLayoutEffect:Ka,useMemo:Ja,useReducer:ga,useRef:qa,useState:function(){return ga(pa)},useDebugValue:Qa,useDeferredValue:function(e,t){var n=la();return null===Wi?$a(n,e,t):Xa(n,Wi.memoizedState,e,t)},useTransition:function(){var e=ga(pa)[0],t=la().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:is,useHostTransitionStatus:os,useFormState:La,useActionState:La,useOptimistic:function(e,t){var n=la();return null!==Wi?Ca(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:as};function bs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:p({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}vs.useEffectEvent=ja;var ws={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gl(),o=bi(r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=wi(e,o,r))&&(Ql(t,e,r),ki(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gl(),o=bi(r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=wi(e,o,r))&&(Ql(t,e,r),ki(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gl(),r=bi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=wi(e,r,n))&&(Ql(t,e,n),ki(t,e,n))}};function ks(e,t,n,r,o,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(o,i))}function Ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ws.enqueueReplaceState(t,t.state,null)}function _s(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var o in n===t&&(n=p({},n)),e)void 0===n[o]&&(n[o]=e[o]);return n}function Cs(e){Er(e)}function Ts(e){console.error(e)}function Es(e){Er(e)}function Is(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function As(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function xs(e,t,n){return(n=bi(n)).tag=3,n.payload={element:null},n.callback=function(){Is(e,t)},n}function Rs(e){return(e=bi(e)).tag=3,e}function Ps(e,t,n,r){var o=n.type.getDerivedStateFromError;if("function"===typeof o){var i=r.value;e.payload=function(){return o(i)},e.callback=function(){As(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){As(t,n,r),"function"!==typeof o&&(null===Ll?Ll=new Set([this]):Ll.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ms=Error(a(461)),Os=!1;function Ns(e,t,n,r){t.child=null===e?mi(t,null,n,r):fi(t,e.child,n,r)}function Ds(e,t,n,r,o){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Mo(t),r=ta(e,t,n,a,i,o),s=ia(),null===e||Os?(ho&&s&&ao(t),t.flags|=1,Ns(e,t,r,o),t.child):(aa(e,t,o),oc(e,t,o))}function Ls(e,t,n,r,o){if(null===e){var i=n.type;return"function"!==typeof i||Ur(i)||void 0!==i.defaultProps||null!==n.compare?((e=Br(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Fs(e,t,i,r,o))}if(i=e.child,!ic(e,o)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(a,r)&&e.ref===t.ref)return oc(e,t,o)}return t.flags|=1,(e=zr(i,r)).ref=t.ref,e.return=t,t.child=e}function Fs(e,t,n,r,o){if(null!==e){var i=e.memoizedProps;if(Zn(i,r)&&e.ref===t.ref){if(Os=!1,t.pendingProps=r=i,!ic(e,o))return t.lanes=e.lanes,oc(e,t,o);0!==(131072&e.flags)&&(Os=!0)}}return Ws(e,t,n,r,o)}function qs(e,t,n,r){var o=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,o=0;null!==r;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~i}else r=0,t.child=null;return zs(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,zs(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Jo(0,null!==i?i.cachePool:null),null!==i?Ri(t,i):Pi(),Fi(t)}else null!==i?(Jo(0,i.cachePool),Ri(t,i),qi(),t.memoizedState=null):(null!==e&&Jo(0,null),Pi(),qi());return Ns(e,t,o,n),t.child}function Us(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function zs(e,t,n,r,o){var i=Yo();return i=null===i?null:{parent:Uo._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Jo(0,null),Pi(),Fi(t),null!==e&&Ro(e,t,r,!0),t.childLanes=o,null}function Hs(e,t){return(t=Zs({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Bs(e,t,n){return fi(t,e.child,null,n),(e=Hs(t,t.pendingProps)).flags|=2,Ui(t),t.memoizedState=null,e}function js(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Ws(e,t,n,r,o){return Mo(t),n=ta(e,t,n,r,void 0,o),r=ia(),null===e||Os?(ho&&r&&ao(t),t.flags|=1,Ns(e,t,n,o),t.child):(aa(e,t,o),oc(e,t,o))}function Ks(e,t,n,r,o,i){return Mo(t),t.updateQueue=null,n=ra(t,r,n,o),na(e),r=ia(),null===e||Os?(ho&&r&&ao(t),t.flags|=1,Ns(e,t,n,i),t.child):(aa(e,t,i),oc(e,t,i))}function Gs(e,t,n,r,o){if(Mo(t),null===t.stateNode){var i=Lr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Oo(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=ws,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},yi(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Oo(a):Lr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(bs(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&ws.enqueueReplaceState(i,i.state,null),Ti(t,r,i,o),Ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var s=t.memoizedProps,c=_s(n,s);i.props=c;var l=i.context,u=n.contextType;a=Lr,"object"===typeof u&&null!==u&&(a=Oo(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(s||l!==a)&&Ss(t,i,r,a),gi=!1;var h=t.memoizedState;i.state=h,Ti(t,r,i,o),Ci(),l=t.memoizedState,s||h!==l||gi?("function"===typeof d&&(bs(t,n,d,r),l=t.memoizedState),(c=gi||ks(t,n,c,r,h,l,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),i.props=r,i.state=l,i.context=a,r=c):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,vi(e,t),u=_s(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,l=n.contextType,c=Lr,"object"===typeof l&&null!==l&&(c=Oo(l)),(l="function"===typeof(s=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==c)&&Ss(t,i,r,c),gi=!1,h=t.memoizedState,i.state=h,Ti(t,r,i,o),Ci();var p=t.memoizedState;a!==d||h!==p||gi||null!==e&&null!==e.dependencies&&Po(e.dependencies)?("function"===typeof s&&(bs(t,n,s,r),p=t.memoizedState),(u=gi||ks(t,n,u,r,h,p,c)||null!==e&&null!==e.dependencies&&Po(e.dependencies))?(l||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,c),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,c)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=c,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,js(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=fi(t,e.child,null,o),t.child=fi(t,null,n,o)):Ns(e,t,n,o),t.memoizedState=i.state,e=t.child):e=oc(e,t,o),e}function Vs(e,t,n,r){return wo(),t.flags|=256,Ns(e,t,n,r),t.child}var Qs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ys(e){return{baseLanes:e,cachePool:$o()}}function Js(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Il),e}function $s(e,t,n){var r,o=t.pendingProps,i=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&zi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(ho){if(i?Di(t):qi(),(e=uo)?null!==(e=null!==(e=Rd(e,fo))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,lo=t,uo=null):e=null,null===e)throw go(t);return Md(e)?t.lanes=32:t.lanes=536870912,null}var c=o.children;return o=o.fallback,i?(qi(),c=Zs({mode:"hidden",children:c},i=t.mode),o=jr(o,i,n,null),c.return=t,o.return=t,c.sibling=o,t.child=c,(o=t.child).memoizedState=Ys(n),o.childLanes=Js(e,r,n),t.memoizedState=Qs,Us(null,o)):(Di(t),Xs(t,c))}var l=e.memoizedState;if(null!==l&&null!==(c=l.dehydrated)){if(s)256&t.flags?(Di(t),t.flags&=-257,t=ec(e,t,n)):null!==t.memoizedState?(qi(),t.child=e.child,t.flags|=128,t=null):(qi(),c=o.fallback,i=t.mode,o=Zs({mode:"visible",children:o.children},i),(c=jr(c,i,n,null)).flags|=2,o.return=t,c.return=t,o.sibling=c,t.child=o,fi(t,e.child,null,n),(o=t.child).memoizedState=Ys(n),o.childLanes=Js(e,r,n),t.memoizedState=Qs,t=Us(null,o));else if(Di(t),Md(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(o=Error(a(419))).stack="",o.digest=r,So({value:o,source:null,stack:null}),t=ec(e,t,n)}else if(Os||Ro(e,t,n,!1),r=0!==(n&e.childLanes),Os||r){if(null!==(r=fl)&&(0!==(o=De(r,n))&&o!==l.retryLane))throw l.retryLane=o,Or(e,o),Ql(r,e,o),Ms;Pd(c)||au(),t=ec(e,t,n)}else Pd(c)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,uo=Od(c.nextSibling),lo=t,ho=!0,po=null,fo=!1,null!==e&&co(t,e),(t=Xs(t,o.children)).flags|=4096);return t}return i?(qi(),c=o.fallback,i=t.mode,u=(l=e.child).sibling,(o=zr(l,{mode:"hidden",children:o.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?c=zr(u,c):(c=jr(c,i,n,null)).flags|=2,c.return=t,o.return=t,o.sibling=c,t.child=o,Us(null,o),o=t.child,null===(c=e.child.memoizedState)?c=Ys(n):(null!==(i=c.cachePool)?(l=Uo._currentValue,i=i.parent!==l?{parent:l,pool:l}:i):i=$o(),c={baseLanes:c.baseLanes|n,cachePool:i}),o.memoizedState=c,o.childLanes=Js(e,r,n),t.memoizedState=Qs,Us(e.child,o)):(Di(t),e=(n=e.child).sibling,(n=zr(n,{mode:"visible",children:o.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Xs(e,t){return(t=Zs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zs(e,t){return(e=qr(22,e,null,t)).lanes=0,e}function ec(e,t,n){return fi(t,e.child,null,n),(e=Xs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function tc(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ao(e.return,t,n)}function nc(e,t,n,r,o,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o,a.treeForkCount=i)}function rc(e,t,n){var r=t.pendingProps,o=r.revealOrder,i=r.tail;r=r.children;var a=zi.current,s=0!==(2&a);if(s?(a=1&a|2,t.flags|=128):a&=1,H(zi,a),Ns(e,t,r,n),r=ho?Xr:0,!s&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&tc(e,n,t);else if(19===e.tag)tc(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;null!==n;)null!==(e=n.alternate)&&null===Hi(e)&&(o=n),n=n.sibling;null===(n=o)?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),nc(t,!1,o,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;null!==o;){if(null!==(e=o.alternate)&&null===Hi(e)){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}nc(t,!0,n,null,i,r);break;case"together":nc(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function oc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Cl|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ro(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=zr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ic(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Po(e))}function ac(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Os=!0;else{if(!ic(e,n)&&0===(128&t.flags))return Os=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),Eo(0,Uo,e.memoizedState.cache),wo();break;case 27:case 5:J(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:Eo(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Li(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Di(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$s(e,t,n):(Di(t),null!==(e=oc(e,t,n))?e.sibling:null);Di(t);break;case 19:var o=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ro(e,t,n,!1),r=0!==(n&t.childLanes)),o){if(r)return rc(e,t,n);t.flags|=128}if(null!==(o=t.memoizedState)&&(o.rendering=null,o.tail=null,o.lastEffect=null),H(zi,zi.current),r)break;return null;case 22:return t.lanes=0,qs(e,t,n,t.pendingProps);case 24:Eo(0,Uo,e.memoizedState.cache)}return oc(e,t,n)}(e,t,n);Os=0!==(131072&e.flags)}else Os=!1,ho&&0!==(1048576&t.flags)&&io(t,Xr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=oi(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var o=e.$$typeof;if(o===S){t.tag=11,t=Ds(null,t,e,r,n);break e}if(o===T){t.tag=14,t=Ls(null,t,e,r,n);break e}}throw t=M(e)||e,Error(a(306,t,""))}Ur(e)?(r=_s(e,r),t.tag=1,t=Gs(null,t,e,r,n)):(t.tag=0,t=Ws(null,t,e,r,n))}return t;case 0:return Ws(e,t,t.type,t.pendingProps,n);case 1:return Gs(e,t,r=t.type,o=_s(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;o=i.element,vi(e,t),Ti(t,r,null,n);var s=t.memoizedState;if(r=s.cache,Eo(0,Uo,r),r!==i.cache&&xo(t,[Uo],n,!0),Ci(),r=s.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Vs(e,t,r,n);break e}if(r!==o){So(o=Qr(Error(a(424)),t)),t=Vs(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(uo=Od(e.firstChild),lo=t,ho=!0,po=null,fo=!0,n=mi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(wo(),r===o){t=oc(e,t,n);break e}Ns(e,t,r,n)}t=t.child}return t;case 26:return js(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:ho||(n=t.type,e=t.pendingProps,(r=gd(G.current).createElement(n))[He]=t,r[Be]=e,hd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return J(t),null===e&&ho&&(r=t.stateNode=Fd(t.type,t.pendingProps,G.current),lo=t,fo=!0,o=uo,Ed(t.type)?(Nd=o,uo=Od(r.firstChild)):uo=o),Ns(e,t,t.pendingProps.children,n),js(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ho&&((o=r=uo)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==o.rel||e.getAttribute("href")!==(null==o.href||""===o.href?null:o.href)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin)||e.getAttribute("title")!==(null==o.title?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==o.src?null:o.src)||e.getAttribute("type")!==(null==o.type?null:o.type)||e.getAttribute("crossorigin")!==(null==o.crossOrigin?null:o.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==o.name?null:""+o.name;if("hidden"===o.type&&e.getAttribute("name")===i)return e}if(null===(e=Od(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,fo))?(t.stateNode=r,lo=t,uo=Od(r.firstChild),fo=!1,o=!0):o=!1),o||go(t)),J(t),o=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,r=i.children,bd(o,i)?r=null:null!==s&&bd(o,s)&&(t.flags|=32),null!==t.memoizedState&&(o=ta(e,t,oa,null,null,n),uh._currentValue=o),js(e,t),Ns(e,t,r,n),t.child;case 6:return null===e&&ho&&((e=n=uo)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Od(e.nextSibling)))return null}return e}(n,t.pendingProps,fo))?(t.stateNode=n,lo=t,uo=null,e=!0):e=!1),e||go(t)),null;case 13:return $s(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=fi(t,null,r,n):Ns(e,t,r,n),t.child;case 11:return Ds(e,t,t.type,t.pendingProps,n);case 7:return Ns(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ns(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,Eo(0,t.type,r.value),Ns(e,t,r.children,n),t.child;case 9:return o=t.type._context,r=t.pendingProps.children,Mo(t),r=r(o=Oo(o)),t.flags|=1,Ns(e,t,r,n),t.child;case 14:return Ls(e,t,t.type,t.pendingProps,n);case 15:return Fs(e,t,t.type,t.pendingProps,n);case 19:return rc(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,o=0!==(128&t.flags);if(t.flags&=-129,null===e){if(ho){if("hidden"===r.mode)return e=Hs(t,r),t.lanes=536870912,Us(null,e);if(Li(t),(e=uo)?null!==(e=null!==(e=Rd(e,fo))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==to?{id:no,overflow:ro}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,lo=t,uo=null):e=null,null===e)throw go(t);return t.lanes=536870912,null}return Hs(t,r)}var i=e.memoizedState;if(null!==i){var s=i.dehydrated;if(Li(t),o)if(256&t.flags)t.flags&=-257,t=Bs(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Os||Ro(e,t,n,!1),o=0!==(n&e.childLanes),Os||o){if(null!==(r=fl)&&0!==(s=De(r,n))&&s!==i.retryLane)throw i.retryLane=s,Or(e,s),Ql(r,e,s),Ms;au(),t=Bs(e,t,n)}else e=i.treeContext,uo=Od(s.nextSibling),lo=t,ho=!0,po=null,fo=!1,null!==e&&co(t,e),(t=Hs(t,r)).flags|=4096;return t}return(e=zr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return qs(e,t,n,t.pendingProps);case 24:return Mo(t),r=Oo(Uo),null===e?(null===(o=Yo())&&(o=fl,i=zo(),o.pooledCache=i,i.refCount++,null!==i&&(o.pooledCacheLanes|=n),o=i),t.memoizedState={parent:r,cache:o},yi(t),Eo(0,Uo,o)):(0!==(e.lanes&n)&&(vi(e,t),Ti(t,null,null,n),Ci()),o=e.memoizedState,i=t.memoizedState,o.parent!==r?(o={parent:r,cache:r},t.memoizedState=o,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=o),Eo(0,Uo,r)):(r=i.cache,Eo(0,Uo,r),r!==o.cache&&xo(t,[Uo],n,!0))),Ns(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function sc(e){e.flags|=4}function cc(e,t,n,r,o){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&o)===o)if(e.stateNode.complete)e.flags|=8192;else{if(!ru())throw ii=ti,Zo;e.flags|=8192}}else e.flags&=-16777217}function lc(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!oh(t)){if(!ru())throw ii=ti,Zo;e.flags|=8192}}function uc(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Re():536870912,e.lanes|=t,Al|=t)}function dc(e,t){if(!ho)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function hc(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=65011712&o.subtreeFlags,r|=65011712&o.flags,o.return=e,o=o.sibling;else for(o=e.child;null!==o;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function pc(e,t,n){var r=t.pendingProps;switch(so(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return hc(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Io(Uo),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bo(t)?sc(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ko())),hc(t),null;case 26:var o=t.type,i=t.memoizedState;return null===e?(sc(t),null!==i?(hc(t),lc(t,i)):(hc(t),cc(t,o,0,0,n))):i?i!==e.memoizedState?(sc(t),hc(t),lc(t,i)):(hc(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&sc(t),hc(t),cc(t,o,0,0,n)),null;case 27:if($(t),n=G.current,o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sc(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hc(t),null}e=W.current,bo(t)?yo(t):(e=Fd(o,r,n),t.stateNode=e,sc(t))}return hc(t),null;case 5:if($(t),o=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&sc(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return hc(t),null}if(i=W.current,bo(t))yo(t);else{var s=gd(G.current);switch(i){case 1:i=s.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=s.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=s.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":(i=s.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?s.createElement(o,{is:r.is}):s.createElement(o)}}i[He]=t,i[Be]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)i.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=i;e:switch(hd(i,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&sc(t)}}return hc(t),cc(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&sc(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=G.current,bo(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(o=lo))switch(o.tag){case 27:case 5:r=o.memoizedProps}e[He]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ld(e.nodeValue,n)))||go(t,!0)}else(e=gd(e).createTextNode(r))[He]=t,t.stateNode=e}return hc(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bo(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[He]=t}else wo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hc(t),e=!1}else n=ko(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ui(t),t):(Ui(t),null);if(0!==(128&t.flags))throw Error(a(558))}return hc(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(o=bo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[He]=t}else wo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;hc(t),o=!1}else o=ko(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return 256&t.flags?(Ui(t),t):(Ui(t),null)}return Ui(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(o=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(o=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==o&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),uc(t,t.updateQueue),hc(t),null);case 4:return Y(),null===e&&Zu(t.stateNode.containerInfo),hc(t),null;case 10:return Io(t.type),hc(t),null;case 19:if(z(zi),null===(r=t.memoizedState))return hc(t),null;if(o=0!==(128&t.flags),null===(i=r.rendering))if(o)dc(r,!1);else{if(0!==_l||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Hi(e))){for(t.flags|=128,dc(r,!1),e=i.updateQueue,t.updateQueue=e,uc(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Hr(n,e),n=n.sibling;return H(zi,1&zi.current|2),ho&&oo(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&ce()>Nl&&(t.flags|=128,o=!0,dc(r,!1),t.lanes=4194304)}else{if(!o)if(null!==(e=Hi(i))){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,uc(t,e),dc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!ho)return hc(t),null}else 2*ce()-r.renderingStartTime>Nl&&536870912!==n&&(t.flags|=128,o=!0,dc(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=ce(),e.sibling=null,n=zi.current,H(zi,o?1&n|2:1&n),ho&&oo(t,r.treeForkCount),e):(hc(t),null);case 22:case 23:return Ui(t),Mi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(hc(t),6&t.subtreeFlags&&(t.flags|=8192)):hc(t),null!==(n=t.updateQueue)&&uc(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Qo),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),Io(Uo),hc(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function fc(e,t){switch(so(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Io(Uo),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return $(t),null;case 31:if(null!==t.memoizedState){if(Ui(t),null===t.alternate)throw Error(a(340));wo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ui(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));wo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(zi),null;case 4:return Y(),null;case 10:return Io(t.type),null;case 22:case 23:return Ui(t),Mi(),null!==e&&z(Qo),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Io(Uo),null;default:return null}}function mc(e,t){switch(so(t),t.tag){case 3:Io(Uo),Y();break;case 26:case 27:case 5:$(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Ui(t);break;case 13:Ui(t);break;case 19:z(zi);break;case 10:Io(t.type);break;case 22:case 23:Ui(t),Mi(),null!==e&&z(Qo);break;case 24:Io(Uo)}}function gc(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var o=r.next;n=o;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==o)}}catch(s){_u(t,t.return,s)}}function yc(e,t,n){try{var r=t.updateQueue,o=null!==r?r.lastEffect:null;if(null!==o){var i=o.next;r=i;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,o=t;var c=n,l=s;try{l()}catch(u){_u(o,c,u)}}}r=r.next}while(r!==i)}}catch(u){_u(t,t.return,u)}}function vc(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ii(t,n)}catch(r){_u(e,e.return,r)}}}function bc(e,t,n){n.props=_s(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){_u(e,t,r)}}function wc(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(o){_u(e,t,o)}}function kc(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(o){_u(e,t,o)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){_u(e,t,i)}else n.current=null}function Sc(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){_u(e,e.return,o)}}function _c(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,i=null,s=null,c=null,l=null,u=null,d=null;for(f in n){var h=n[f];if(n.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":l=h;default:r.hasOwnProperty(f)||ud(e,t,f,null,r,h)}}for(var p in r){var f=r[p];if(h=n[p],r.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":o=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":s=f;break;case"defaultValue":c=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==h&&ud(e,t,p,f,r,h)}}return void vt(e,s,c,l,u,d,i,o);case"select":for(i in f=s=c=p=null,n)if(l=n[i],n.hasOwnProperty(i)&&null!=l)switch(i){case"value":break;case"multiple":f=l;default:r.hasOwnProperty(i)||ud(e,t,i,null,r,l)}for(o in r)if(i=r[o],l=n[o],r.hasOwnProperty(o)&&(null!=i||null!=l))switch(o){case"value":p=i;break;case"defaultValue":c=i;break;case"multiple":s=i;default:i!==l&&ud(e,t,o,i,r,l)}return t=c,n=s,r=f,void(null!=p?kt(e,!!n,p,!1):!!r!==!!n&&(null!=t?kt(e,!!n,t,!0):kt(e,!!n,n?[]:"",!1)));case"textarea":for(c in f=p=null,n)if(o=n[c],n.hasOwnProperty(c)&&null!=o&&!r.hasOwnProperty(c))switch(c){case"value":case"children":break;default:ud(e,t,c,null,r,o)}for(s in r)if(o=r[s],i=n[s],r.hasOwnProperty(s)&&(null!=o||null!=i))switch(s){case"value":p=o;break;case"defaultValue":f=o;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=o)throw Error(a(91));break;default:o!==i&&ud(e,t,s,o,r,i)}return void St(e,p,f);case"option":for(var m in n)if(p=n[m],n.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else ud(e,t,m,null,r,p);for(l in r)if(p=r[l],f=n[l],r.hasOwnProperty(l)&&p!==f&&(null!=p||null!=f))if("selected"===l)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else ud(e,t,l,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)p=n[g],n.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&ud(e,t,g,null,r,p);for(u in r)if(p=r[u],f=n[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:ud(e,t,u,p,r,f)}return;default:if(At(t)){for(var y in n)p=n[y],n.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&dd(e,t,y,void 0,r,p);for(d in r)p=r[d],f=n[d],!r.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||dd(e,t,d,p,r,f);return}}for(var v in n)p=n[v],n.hasOwnProperty(v)&&null!=p&&!r.hasOwnProperty(v)&&ud(e,t,v,null,r,p);for(h in r)p=r[h],f=n[h],!r.hasOwnProperty(h)||p===f||null==p&&null==f||ud(e,t,h,p,r,f)}(r,e.type,n,t),r[Be]=t}catch(o){_u(e,e.return,o)}}function Cc(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ed(e.type)||4===e.tag}function Tc(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Cc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ed(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Ec(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Mt));else if(4!==r&&(27===r&&Ed(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Ec(e,t,n),e=e.sibling;null!==e;)Ec(e,t,n),e=e.sibling}function Ic(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ed(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Ic(e,t,n),e=e.sibling;null!==e;)Ic(e,t,n),e=e.sibling}function Ac(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);hd(t,r,n),t[He]=e,t[Be]=n}catch(i){_u(e,e.return,i)}}var xc=!1,Rc=!1,Pc=!1,Mc="function"===typeof WeakSet?WeakSet:Set,Oc=null;function Nc(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Qc(e,n),4&r&&gc(5,n);break;case 1:if(Qc(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){_u(n,n.return,a)}else{var o=_s(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){_u(n,n.return,s)}}64&r&&vc(n),512&r&&wc(n,n.return);break;case 3:if(Qc(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ii(e,t)}catch(a){_u(n,n.return,a)}}break;case 27:null===t&&4&r&&Ac(n);case 26:case 5:Qc(e,n),null===t&&4&r&&Sc(n),512&r&&wc(n,n.return);break;case 12:Qc(e,n);break;case 31:Qc(e,n),4&r&&zc(e,n);break;case 13:Qc(e,n),4&r&&Hc(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Iu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||xc)){t=null!==t&&null!==t.memoizedState||Rc,o=xc;var i=Rc;xc=r,(Rc=t)&&!i?Jc(e,n,0!==(8772&n.subtreeFlags)):Qc(e,n),xc=o,Rc=i}break;case 30:break;default:Qc(e,n)}}function Dc(e){var t=e.alternate;null!==t&&(e.alternate=null,Dc(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lc=null,Fc=!1;function qc(e,t,n){for(n=n.child;null!==n;)Uc(e,t,n),n=n.sibling}function Uc(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:Rc||kc(n,t),qc(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Rc||kc(n,t);var r=Lc,o=Fc;Ed(n.type)&&(Lc=n.stateNode,Fc=!1),qc(e,t,n),qd(n.stateNode),Lc=r,Fc=o;break;case 5:Rc||kc(n,t);case 6:if(r=Lc,o=Fc,Lc=null,qc(e,t,n),Fc=o,null!==(Lc=r))if(Fc)try{(9===Lc.nodeType?Lc.body:"HTML"===Lc.nodeName?Lc.ownerDocument.body:Lc).removeChild(n.stateNode)}catch(a){_u(n,t,a)}else try{Lc.removeChild(n.stateNode)}catch(a){_u(n,t,a)}break;case 18:null!==Lc&&(Fc?(Id(9===(e=Lc).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):Id(Lc,n.stateNode));break;case 4:r=Lc,o=Fc,Lc=n.stateNode.containerInfo,Fc=!0,qc(e,t,n),Lc=r,Fc=o;break;case 0:case 11:case 14:case 15:yc(2,n,t),Rc||yc(4,n,t),qc(e,t,n);break;case 1:Rc||(kc(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&bc(n,t,r)),qc(e,t,n);break;case 21:qc(e,t,n);break;case 22:Rc=(r=Rc)||null!==n.memoizedState,qc(e,t,n),Rc=r;break;default:qc(e,t,n)}}function zc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){_u(t,t.return,n)}}}function Hc(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){_u(t,t.return,n)}}function Bc(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Mc),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Mc),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=Au.bind(null,e,t);t.then(r,r)}})}function jc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var o=n[r],i=e,s=t,c=s;e:for(;null!==c;){switch(c.tag){case 27:if(Ed(c.type)){Lc=c.stateNode,Fc=!1;break e}break;case 5:Lc=c.stateNode,Fc=!1;break e;case 3:case 4:Lc=c.stateNode.containerInfo,Fc=!0;break e}c=c.return}if(null===Lc)throw Error(a(160));Uc(i,s,o),Lc=null,Fc=!1,null!==(i=o.alternate)&&(i.return=null),o.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kc(t,e),t=t.sibling}var Wc=null;function Kc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:jc(t,e),Gc(e),4&r&&(yc(3,e,e.return),gc(3,e),yc(5,e,e.return));break;case 1:jc(t,e),Gc(e),512&r&&(Rc||null===n||kc(n,n.return)),64&r&&xc&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var o=Wc;if(jc(t,e),Gc(e),512&r&&(Rc||null===n||kc(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":(!(i=o.getElementsByTagName("title")[0])||i[Qe]||i[He]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=o.createElement(r),o.head.insertBefore(i,o.querySelector("head > title"))),hd(i,r,n),i[He]=e,et(i),r=i;break e;case"link":var s=nh("link","href",o).get(r+(n.href||""));if(s)for(var c=0;c<s.length;c++)if((i=s[c]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){s.splice(c,1);break t}hd(i=o.createElement(r),r,n),o.head.appendChild(i);break;case"meta":if(s=nh("meta","content",o).get(r+(n.content||"")))for(c=0;c<s.length;c++)if((i=s[c]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){s.splice(c,1);break t}hd(i=o.createElement(r),r,n),o.head.appendChild(i);break;default:throw Error(a(468,r))}i[He]=e,et(i),r=i}e.stateNode=r}else rh(o,e.type,e.stateNode);else e.stateNode=$d(o,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?rh(o,e.type,e.stateNode):$d(o,r,e.memoizedProps)):null===r&&null!==e.stateNode&&_c(e,e.memoizedProps,n.memoizedProps)}break;case 27:jc(t,e),Gc(e),512&r&&(Rc||null===n||kc(n,n.return)),null!==n&&4&r&&_c(e,e.memoizedProps,n.memoizedProps);break;case 5:if(jc(t,e),Gc(e),512&r&&(Rc||null===n||kc(n,n.return)),32&e.flags){o=e.stateNode;try{Ct(o,"")}catch(m){_u(e,e.return,m)}}4&r&&null!=e.stateNode&&_c(e,o=e.memoizedProps,null!==n?n.memoizedProps:o),1024&r&&(Pc=!0);break;case 6:if(jc(t,e),Gc(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){_u(e,e.return,m)}}break;case 3:if(th=null,o=Wc,Wc=Hd(t.containerInfo),jc(t,e),Wc=o,Gc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(m){_u(e,e.return,m)}Pc&&(Pc=!1,Vc(e));break;case 4:r=Wc,Wc=Hd(e.stateNode.containerInfo),jc(t,e),Gc(e),Wc=r;break;case 12:default:jc(t,e),Gc(e);break;case 31:case 19:jc(t,e),Gc(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bc(e,r)));break;case 13:jc(t,e),Gc(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Ml=ce()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Bc(e,r)));break;case 22:o=null!==e.memoizedState;var l=null!==n&&null!==n.memoizedState,u=xc,d=Rc;if(xc=u||o,Rc=d||l,jc(t,e),Rc=d,xc=u,Gc(e),8192&r)e:for(t=e.stateNode,t._visibility=o?-2&t._visibility:1|t._visibility,o&&(null===n||l||xc||Rc||Yc(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){l=n=t;try{if(i=l.stateNode,o)"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{c=l.stateNode;var h=l.memoizedProps.style,p=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;c.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(m){_u(l,l.return,m)}}}else if(6===t.tag){if(null===n){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(m){_u(l,l.return,m)}}}else if(18===t.tag){if(null===n){l=t;try{var f=l.stateNode;o?Ad(f,!0):Ad(l.stateNode,!1)}catch(m){_u(l,l.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Bc(e,n))));case 30:case 21:}}function Gc(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(Cc(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var o=n.stateNode;Ic(e,Tc(e),o);break;case 5:var i=n.stateNode;32&n.flags&&(Ct(i,""),n.flags&=-33),Ic(e,Tc(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;Ec(e,Tc(e),s);break;default:throw Error(a(161))}}catch(c){_u(e,e.return,c)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Vc(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Vc(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Qc(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Nc(e,t.alternate,t),t=t.sibling}function Yc(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yc(4,t,t.return),Yc(t);break;case 1:kc(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&bc(t,t.return,n),Yc(t);break;case 27:qd(t.stateNode);case 26:case 5:kc(t,t.return),Yc(t);break;case 22:null===t.memoizedState&&Yc(t);break;default:Yc(t)}e=e.sibling}}function Jc(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,o=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Jc(o,i,n),gc(4,i);break;case 1:if(Jc(o,i,n),"function"===typeof(o=(r=i).stateNode).componentDidMount)try{o.componentDidMount()}catch(l){_u(r,r.return,l)}if(null!==(o=(r=i).updateQueue)){var s=r.stateNode;try{var c=o.shared.hiddenCallbacks;if(null!==c)for(o.shared.hiddenCallbacks=null,o=0;o<c.length;o++)Ei(c[o],s)}catch(l){_u(r,r.return,l)}}n&&64&a&&vc(i),wc(i,i.return);break;case 27:Ac(i);case 26:case 5:Jc(o,i,n),n&&null===r&&4&a&&Sc(i),wc(i,i.return);break;case 12:Jc(o,i,n);break;case 31:Jc(o,i,n),n&&4&a&&zc(o,i);break;case 13:Jc(o,i,n),n&&4&a&&Hc(o,i);break;case 22:null===i.memoizedState&&Jc(o,i,n),wc(i,i.return);break;case 30:break;default:Jc(o,i,n)}t=t.sibling}}function $c(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ho(n))}function Xc(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ho(e))}function Zc(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)el(e,t,n,r),t=t.sibling}function el(e,t,n,r){var o=t.flags;switch(t.tag){case 0:case 11:case 15:Zc(e,t,n,r),2048&o&&gc(9,t);break;case 1:case 31:case 13:default:Zc(e,t,n,r);break;case 3:Zc(e,t,n,r),2048&o&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ho(e)));break;case 12:if(2048&o){Zc(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,s=i.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(c){_u(t,t.return,c)}}else Zc(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Zc(e,t,n,r):nl(e,t):2&i._visibility?Zc(e,t,n,r):(i._visibility|=2,tl(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&o&&$c(a,t);break;case 24:Zc(e,t,n,r),2048&o&&Xc(t.alternate,t)}}function tl(e,t,n,r,o){for(o=o&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,s=n,c=r,l=a.flags;switch(a.tag){case 0:case 11:case 15:tl(i,a,s,c,o),gc(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?tl(i,a,s,c,o):nl(i,a):(u._visibility|=2,tl(i,a,s,c,o)),o&&2048&l&&$c(a.alternate,a);break;case 24:tl(i,a,s,c,o),o&&2048&l&&Xc(a.alternate,a);break;default:tl(i,a,s,c,o)}t=t.sibling}}function nl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,o=r.flags;switch(r.tag){case 22:nl(n,r),2048&o&&$c(r.alternate,r);break;case 24:nl(n,r),2048&o&&Xc(r.alternate,r);break;default:nl(n,r)}t=t.sibling}}var rl=8192;function ol(e,t,n){if(e.subtreeFlags&rl)for(e=e.child;null!==e;)il(e,t,n),e=e.sibling}function il(e,t,n){switch(e.tag){case 26:ol(e,t,n),e.flags&rl&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var o=Gd(r.href),i=t.querySelector(Vd(o));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=ah.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Qd(r),(o=Ud.get(o))&&Zd(r,o),et(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),hd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=ah.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wc,e.memoizedState,e.memoizedProps);break;case 5:default:ol(e,t,n);break;case 3:case 4:var r=Wc;Wc=Hd(e.stateNode.containerInfo),ol(e,t,n),Wc=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=rl,rl=16777216,ol(e,t,n),rl=r):ol(e,t,n))}}function al(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function sl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Oc=r,ul(r,e)}al(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cl(e),e=e.sibling}function cl(e){switch(e.tag){case 0:case 11:case 15:sl(e),2048&e.flags&&yc(9,e,e.return);break;case 3:case 12:default:sl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,ll(e)):sl(e)}}function ll(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Oc=r,ul(r,e)}al(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yc(8,t,t.return),ll(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,ll(t));break;default:ll(t)}e=e.sibling}}function ul(e,t){for(;null!==Oc;){var n=Oc;switch(n.tag){case 0:case 11:case 15:yc(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ho(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Oc=r;else e:for(n=e;null!==Oc;){var o=(r=Oc).sibling,i=r.return;if(Dc(r),r===n){Oc=null;break e}if(null!==o){o.return=i,Oc=o;break e}Oc=i}}}var dl={getCacheForType:function(e){var t=Oo(Uo),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Oo(Uo).controller.signal}},hl="function"===typeof WeakMap?WeakMap:Map,pl=0,fl=null,ml=null,gl=0,yl=0,vl=null,bl=!1,wl=!1,kl=!1,Sl=0,_l=0,Cl=0,Tl=0,El=0,Il=0,Al=0,xl=null,Rl=null,Pl=!1,Ml=0,Ol=0,Nl=1/0,Dl=null,Ll=null,Fl=0,ql=null,Ul=null,zl=0,Hl=0,Bl=null,jl=null,Wl=0,Kl=null;function Gl(){return 0!==(2&pl)&&0!==gl?gl&-gl:null!==N.T?Bu():qe()}function Vl(){if(0===Il)if(0===(536870912&gl)||ho){var e=Ce;0===(3932160&(Ce<<=1))&&(Ce=262144),Il=e}else Il=536870912;return null!==(e=Oi.current)&&(e.flags|=32),Il}function Ql(e,t,n){(e!==fl||2!==yl&&9!==yl)&&null===e.cancelPendingCommit||(tu(e,0),Xl(e,gl,Il,!1)),Me(e,n),0!==(2&pl)&&e===fl||(e===fl&&(0===(2&pl)&&(Tl|=n),4===_l&&Xl(e,gl,Il,!1)),Du(e))}function Yl(e,t,n){if(0!==(6&pl))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ae(e,t),o=r?function(e,t){var n=pl;pl|=2;var r=ou(),o=iu();fl!==e||gl!==t?(Dl=null,Nl=ce()+500,tu(e,t)):wl=Ae(e,t);e:for(;;)try{if(0!==yl&&null!==ml){t=ml;var i=vl;t:switch(yl){case 1:yl=0,vl=null,hu(e,t,i,1);break;case 2:case 9:if(ni(i)){yl=0,vl=null,du(t);break}t=function(){2!==yl&&9!==yl||fl!==e||(yl=7),Du(e)},i.then(t,t);break e;case 3:yl=7;break e;case 4:yl=5;break e;case 7:ni(i)?(yl=0,vl=null,du(t)):(yl=0,vl=null,hu(e,t,i,7));break;case 5:var s=null;switch(ml.tag){case 26:s=ml.memoizedState;case 5:case 27:var c=ml;if(s?oh(s):c.stateNode.complete){yl=0,vl=null;var l=c.sibling;if(null!==l)ml=l;else{var u=c.return;null!==u?(ml=u,pu(u)):ml=null}break t}}yl=0,vl=null,hu(e,t,i,5);break;case 6:yl=0,vl=null,hu(e,t,i,6);break;case 8:eu(),_l=6;break e;default:throw Error(a(462))}}lu();break}catch(d){nu(e,d)}return To=Co=null,N.H=r,N.A=o,pl=n,null!==ml?0:(fl=null,gl=0,Rr(),_l)}(e,t):su(e,t,!0),i=r;;){if(0===o){wl&&!r&&Xl(e,t,0,!1);break}if(n=e.current.alternate,!i||$l(n)){if(2===o){if(i=t,e.errorRecoveryDisabledLanes&i)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var c=e;o=xl;var l=c.current.memoizedState.isDehydrated;if(l&&(tu(c,s).flags|=256),2!==(s=su(c,s,!1))){if(kl&&!l){c.errorRecoveryDisabledLanes|=i,Tl|=i,o=4;break e}i=Rl,Rl=o,null!==i&&(null===Rl?Rl=i:Rl.push.apply(Rl,i))}o=s}if(i=!1,2!==o)continue}}if(1===o){tu(e,0),Xl(e,t,0,!0);break}e:{switch(r=e,i=o){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Xl(r,t,Il,!bl);break e;case 2:Rl=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(o=Ml+300-ce())){if(Xl(r,t,Il,!bl),0!==Ie(r,0,!0))break e;zl=t,r.timeoutHandle=kd(Jl.bind(null,r,n,Rl,Dl,Pl,t,Il,Tl,Al,bl,i,"Throttled",-0,0),o)}else Jl(r,n,Rl,Dl,Pl,t,Il,Tl,Al,bl,i,null,-0,0)}break}o=su(e,t,!1),i=!1}Du(e)}function Jl(e,t,n,r,o,i,a,s,c,l,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){il(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Mt});var f=(62914560&i)===i?Ml-ce():(4194048&i)===i?Ol-ce():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ih&&(ih=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],i=o.transferSize,a=o.initiatorType,s=o.duration;if(i&&s&&pd(a)){for(a=0,s=o.responseEnd,r+=1;r<n.length;r++){var c=n[r],l=c.startTime;if(l>s)break;var u=c.transferSize,d=c.initiatorType;u&&pd(d)&&(a+=u*((c=c.responseEnd)<s?1:(s-l)/(c-l)))}if(--r,t+=8*(i+a)/(o.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"===typeof(e=navigator.connection.downlink)?e:5}());var o=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ih?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}(d,f)))return zl=i,e.cancelPendingCommit=f(mu.bind(null,e,t,i,n,r,o,a,s,c,u,d,null,h,p)),void Xl(e,i,a,!l)}mu(e,t,i,n,r,o,a,s,c)}function $l(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var o=n[r],i=o.getSnapshot;o=o.value;try{if(!Xn(i(),o))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xl(e,t,n,r){t&=~El,t&=~Tl,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var o=t;0<o;){var i=31-we(o),a=1<<i;r[i]=-1,o&=~a}0!==n&&Oe(e,n,t)}function Zl(){return 0!==(6&pl)||(Lu(0,!1),!1)}function eu(){if(null!==ml){if(0===yl)var e=ml.return;else To=Co=null,sa(e=ml),ci=null,li=0,e=ml;for(;null!==e;)mc(e.alternate,e),e=e.return;ml=null}}function tu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),zl=0,eu(),fl=e,ml=n=zr(e.current,null),gl=t,yl=0,vl=null,bl=!1,wl=Ae(e,t),kl=!1,Al=Il=El=Tl=Cl=_l=0,Rl=xl=null,Pl=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var o=31-we(r),i=1<<o;t|=e[o],r&=~i}return Sl=t,Rr(),n}function nu(e,t){ji=null,N.H=ms,t===Xo||t===ei?(t=ai(),yl=3):t===Zo?(t=ai(),yl=4):yl=t===Ms?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,vl=t,null===ml&&(_l=1,Is(e,Qr(t,e.current)))}function ru(){var e=Oi.current;return null===e||((4194048&gl)===gl?null===Ni:((62914560&gl)===gl||0!==(536870912&gl))&&e===Ni)}function ou(){var e=N.H;return N.H=ms,null===e?ms:e}function iu(){var e=N.A;return N.A=dl,e}function au(){_l=4,bl||(4194048&gl)!==gl&&null!==Oi.current||(wl=!0),0===(134217727&Cl)&&0===(134217727&Tl)||null===fl||Xl(fl,gl,Il,!1)}function su(e,t,n){var r=pl;pl|=2;var o=ou(),i=iu();fl===e&&gl===t||(Dl=null,tu(e,t)),t=!1;var a=_l;e:for(;;)try{if(0!==yl&&null!==ml){var s=ml,c=vl;switch(yl){case 8:eu(),a=6;break e;case 3:case 2:case 9:case 6:null===Oi.current&&(t=!0);var l=yl;if(yl=0,vl=null,hu(e,s,c,l),n&&wl){a=0;break e}break;default:l=yl,yl=0,vl=null,hu(e,s,c,l)}}cu(),a=_l;break}catch(u){nu(e,u)}return t&&e.shellSuspendCounter++,To=Co=null,pl=r,N.H=o,N.A=i,null===ml&&(fl=null,gl=0,Rr()),a}function cu(){for(;null!==ml;)uu(ml)}function lu(){for(;null!==ml&&!ae();)uu(ml)}function uu(e){var t=ac(e.alternate,e,Sl);e.memoizedProps=e.pendingProps,null===t?pu(e):ml=t}function du(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ks(n,t,t.pendingProps,t.type,void 0,gl);break;case 11:t=Ks(n,t,t.pendingProps,t.type.render,t.ref,gl);break;case 5:sa(t);default:mc(n,t),t=ac(n,t=ml=Hr(t,Sl),Sl)}e.memoizedProps=e.pendingProps,null===t?pu(e):ml=t}function hu(e,t,n,r){To=Co=null,sa(t),ci=null,li=0;var o=t.return;try{if(function(e,t,n,r,o){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ro(t,n,o,!0),null!==(n=Oi.current)){switch(n.tag){case 31:case 13:return null===Ni?au():null===n.alternate&&0===_l&&(_l=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Cu(e,r,o)),!1;case 22:return n.flags|=65536,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Cu(e,r,o)),!1}throw Error(a(435,n.tag))}return Cu(e,r,o),au(),!1}if(ho)return null!==(t=Oi.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=o,r!==mo&&So(Qr(e=Error(a(422),{cause:r}),n))):(r!==mo&&So(Qr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,o&=-o,e.lanes|=o,r=Qr(r,n),Si(e,o=xs(e.stateNode,r,o)),4!==_l&&(_l=2)),!1;var i=Error(a(520),{cause:r});if(i=Qr(i,n),null===xl?xl=[i]:xl.push(i),4!==_l&&(_l=2),null===t)return!0;r=Qr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,Si(n,e=xs(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Ll||!Ll.has(i))))return n.flags|=65536,o&=-o,n.lanes|=o,Ps(o=Rs(o),e,n,r),Si(n,o),!1}n=n.return}while(null!==n);return!1}(e,o,t,n,gl))return _l=1,Is(e,Qr(n,e.current)),void(ml=null)}catch(i){if(null!==o)throw ml=o,i;return _l=1,Is(e,Qr(n,e.current)),void(ml=null)}32768&t.flags?(ho||1===r?e=!0:wl||0!==(536870912&gl)?e=!1:(bl=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Oi.current)&&13===r.tag&&(r.flags|=16384))),fu(t,e)):pu(t)}function pu(e){var t=e;do{if(0!==(32768&t.flags))return void fu(t,bl);e=t.return;var n=pc(t.alternate,t,Sl);if(null!==n)return void(ml=n);if(null!==(t=t.sibling))return void(ml=t);ml=t=e}while(null!==t);0===_l&&(_l=5)}function fu(e,t){do{var n=fc(e.alternate,e);if(null!==n)return n.flags&=32767,void(ml=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ml=e);ml=e=n}while(null!==e);_l=6,ml=null}function mu(e,t,n,r,o,i,s,c,l){e.cancelPendingCommit=null;do{wu()}while(0!==Fl);if(0!==(6&pl))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,o,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,c=e.expirationTimes,l=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-we(n),d=1<<u;s[u]=0,c[u]=-1;var h=l[u];if(null!==h)for(l[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}n&=~d}0!==r&&Oe(e,r,0),0!==i&&0===o&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=xr,s,c,l),e===fl&&(ml=fl=null,gl=0),Ul=t,ql=e,zl=n,Hl=i,Bl=o,jl=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,oe(he,function(){return ku(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=N.T,N.T=null,o=D.p,D.p=2,s=pl,pl|=4;try{!function(e,t){if(e=e.containerInfo,fd=bh,or(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var s=0,c=-1,l=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==o&&3!==h.nodeType||(c=s+o),h!==i||0!==r&&3!==h.nodeType||(l=s+r),3===h.nodeType&&(s+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===o&&(c=s),p===i&&++d===r&&(l=s),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(md={focusedElem:e,selectionRange:n},bh=!1,Oc=t;null!==Oc;)if(e=(t=Oc).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Oc=e;else for(;null!==Oc;){switch(i=(t=Oc).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(o=e[n]).ref.impl=o.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,o=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var m=_s(n.type,o);e=r.getSnapshotBeforeUpdate(m,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){_u(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))xd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":xd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Oc=e;break}Oc=t.return}}(e,t)}finally{pl=s,D.p=o,N.T=r}}Fl=1,gu(),yu(),vu()}}function gu(){if(1===Fl){Fl=0;var e=ql,t=Ul,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=N.T,N.T=null;var r=D.p;D.p=2;var o=pl;pl|=4;try{Kc(t,e);var i=md,a=rr(e.containerInfo),s=i.focusedElem,c=i.selectionRange;if(a!==s&&s&&s.ownerDocument&&nr(s.ownerDocument.documentElement,s)){if(null!==c&&or(s)){var l=c.start,u=c.end;if(void 0===u&&(u=l),"selectionStart"in s)s.selectionStart=l,s.selectionEnd=Math.min(u,s.value.length);else{var d=s.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=s.textContent.length,m=Math.min(c.start,f),g=void 0===c.end?m:Math.min(c.end,f);!p.extend&&m>g&&(a=g,g=m,m=a);var y=tr(s,m),v=tr(s,g);if(y&&v&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(b),p.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),p.addRange(b))}}}}for(d=[],p=s;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<d.length;s++){var w=d[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}bh=!!fd,md=fd=null}finally{pl=o,D.p=r,N.T=n}}e.current=t,Fl=2}}function yu(){if(2===Fl){Fl=0;var e=ql,t=Ul,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=N.T,N.T=null;var r=D.p;D.p=2;var o=pl;pl|=4;try{Nc(e,t.alternate,t)}finally{pl=o,D.p=r,N.T=n}}Fl=3}}function vu(){if(4===Fl||3===Fl){Fl=0,se();var e=ql,t=Ul,n=zl,r=jl;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fl=5:(Fl=0,Ul=ql=null,bu(e,e.pendingLanes));var o=e.pendingLanes;if(0===o&&(Ll=null),Fe(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(c){}if(null!==r){t=N.T,o=D.p,D.p=2,N.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];i(s.value,{componentStack:s.stack})}}finally{N.T=t,D.p=o}}0!==(3&zl)&&wu(),Du(e),o=e.pendingLanes,0!==(261930&n)&&0!==(42&o)?e===Kl?Wl++:(Wl=0,Kl=e):Wl=0,Lu(0,!1)}}function bu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ho(t)))}function wu(){return gu(),yu(),vu(),ku()}function ku(){if(5!==Fl)return!1;var e=ql,t=Hl;Hl=0;var n=Fe(zl),r=N.T,o=D.p;try{D.p=32>n?32:n,N.T=null,n=Bl,Bl=null;var i=ql,s=zl;if(Fl=0,Ul=ql=null,zl=0,0!==(6&pl))throw Error(a(331));var c=pl;if(pl|=4,cl(i.current),el(i,i.current,s,n),pl=c,Lu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,i)}catch(l){}return!0}finally{D.p=o,N.T=r,bu(e,t)}}function Su(e,t,n){t=Qr(n,t),null!==(e=wi(e,t=xs(e.stateNode,t,2),2))&&(Me(e,2),Du(e))}function _u(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ll||!Ll.has(r))){e=Qr(n,e),null!==(r=wi(t,n=Rs(2),2))&&(Ps(n,r,t,e),Me(r,2),Du(r));break}}t=t.return}}function Cu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new hl;var o=new Set;r.set(t,o)}else void 0===(o=r.get(t))&&(o=new Set,r.set(t,o));o.has(n)||(kl=!0,o.add(n),e=Tu.bind(null,e,t,n),t.then(e,e))}function Tu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,fl===e&&(gl&n)===n&&(4===_l||3===_l&&(62914560&gl)===gl&&300>ce()-Ml?0===(2&pl)&&tu(e,0):El|=n,Al===gl&&(Al=0)),Du(e)}function Eu(e,t){0===t&&(t=Re()),null!==(e=Or(e,t))&&(Me(e,t),Du(e))}function Iu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Eu(e,n)}function Au(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,o=e.memoizedState;null!==o&&(n=o.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Eu(e,n)}var xu=null,Ru=null,Pu=!1,Mu=!1,Ou=!1,Nu=0;function Du(e){e!==Ru&&null===e.next&&(null===Ru?xu=Ru=e:Ru=Ru.next=e),Mu=!0,Pu||(Pu=!0,Cd(function(){0!==(6&pl)?oe(ue,Fu):qu()}))}function Lu(e,t){if(!Ou&&Mu){Ou=!0;do{for(var n=!1,r=xu;null!==r;){if(!t)if(0!==e){var o=r.pendingLanes;if(0===o)var i=0;else{var a=r.suspendedLanes,s=r.pingedLanes;i=(1<<31-we(42|e)+1)-1,i=201326741&(i&=o&~(a&~s))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Hu(r,i))}else i=gl,0===(3&(i=Ie(r,r===fl?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ae(r,i)||(n=!0,Hu(r,i));r=r.next}}while(n);Ou=!1}}function Fu(){qu()}function qu(){Mu=Pu=!1;var e=0;0!==Nu&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Nu);for(var t=ce(),n=null,r=xu;null!==r;){var o=r.next,i=Uu(r,t);0===i?(r.next=null,null===n?xu=o:n.next=o,null===o&&(Ru=n)):(n=r,(0!==e||0!==(3&i))&&(Mu=!0)),r=o}0!==Fl&&5!==Fl||Lu(e,!1),0!==Nu&&(Nu=0)}function Uu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-we(i),s=1<<a,c=o[a];-1===c?0!==(s&n)&&0===(s&r)||(o[a]=xe(s,t)):c<=t&&(e.expiredLanes|=s),i&=~s}if(n=gl,n=Ie(e,e===(t=fl)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===yl||9===yl)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ae(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Fe(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=fe}return r=zu.bind(null,e),n=oe(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function zu(e,t){if(0!==Fl&&5!==Fl)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=gl;return 0===(r=Ie(e,e===fl?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yl(e,r,t),Uu(e,ce()),null!=e.callbackNode&&e.callbackNode===n?zu.bind(null,e):null)}function Hu(e,t){if(wu())return null;Yl(e,t,!0)}function Bu(){if(0===Nu){var e=Wo;0===e&&(e=_e,0===(261888&(_e<<=1))&&(_e=256)),Nu=e}return Nu}function ju(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:Pt(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<Cr.length;Ku++){var Gu=Cr[Ku];Tr(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Tr(gr,"onAnimationEnd"),Tr(yr,"onAnimationIteration"),Tr(vr,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(br,"onTransitionRun"),Tr(wr,"onTransitionStart"),Tr(kr,"onTransitionCancel"),Tr(Sr,"onTransitionEnd"),ot("onMouseEnter",["mouseout","mouseover"]),ot("onMouseLeave",["mouseout","mouseover"]),ot("onPointerEnter",["pointerout","pointerover"]),ot("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vu));function Yu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],c=s.instance,l=s.currentTarget;if(s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){Er(u)}o.currentTarget=null,i=c}else for(a=0;a<r.length;a++){if(c=(s=r[a]).instance,l=s.currentTarget,s=s.listener,c!==i&&o.isPropagationStopped())break e;i=s,o.currentTarget=l;try{i(o)}catch(u){Er(u)}o.currentTarget=null,i=c}}}}function Ju(e,t){var n=t[We];void 0===n&&(n=t[We]=new Set);var r=e+"__bubble";n.has(r)||(ed(t,e,2,!1),n.add(r))}function $u(e,t,n){var r=0;t&&(r|=4),ed(n,e,r,t)}var Xu="_reactListening"+Math.random().toString(36).slice(2);function Zu(e){if(!e[Xu]){e[Xu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Qu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Xu]||(t[Xu]=!0,$u("selectionchange",!1,t))}}function ed(e,t,n,r){switch(Eh(t)){case 2:var o=wh;break;case 8:o=kh;break;default:o=Sh}n=o.bind(null,t,n,e),o=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(o=!0),r?void 0!==o?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):void 0!==o?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function td(e,t,n,r,o){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===o)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&a.stateNode.containerInfo===o)return;a=a.return}for(;null!==s;){if(null===(a=Je(s)))return;if(5===(l=a.tag)||6===l||26===l||27===l){r=i=a;continue e}s=s.parentNode}}r=r.return}Ut(function(){var r=i,o=Nt(n),a=[];e:{var s=_r.get(e);if(void 0!==s){var l=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":l=vn;break;case"focusin":u="focus",l=ln;break;case"focusout":u="blur",l=ln;break;case"beforeblur":case"afterblur":l=ln;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=sn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=cn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=wn;break;case gr:case yr:case vr:l=un;break;case Sr:l=kn;break;case"scroll":case"scrollend":l=on;break;case"wheel":l=Sn;break;case"copy":case"cut":case"paste":l=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=bn;break;case"toggle":case"beforetoggle":l=_n}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==s?s+"Capture":null:s;d=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=zt(m,p))&&d.push(nd(m,g,f)),h)break;m=m.return}0<d.length&&(s=new l(s,u,null,n,o),a.push({event:s,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===Ot||!(u=n.relatedTarget||n.fromElement)||!Je(u)&&!u[je])&&(l||s)&&(s=o.window===o?o:(s=o.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?Je(u):null)&&(h=c(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(l=null,u=r),l!==u)){if(d=sn,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==l?s:Xe(l),f=null==u?s:Xe(u),(s=new d(g,m+"leave",l,n,o)).target=h,s.relatedTarget=f,g=null,Je(o)===r&&((d=new d(p,m+"enter",u,n,o)).target=f,d.relatedTarget=h,g=d),h=g,l&&u)e:{for(d=od,m=u,f=0,g=p=l;g;g=d(g))f++;g=0;for(var y=m;y;y=d(y))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==l&&id(a,s,l,d,!1),null!==u&&null!==h&&id(a,h,u,d,!0)}if("select"===(l=(s=r?Xe(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var v=Hn;else if(Dn(s))if(Bn)v=$n;else{v=Yn;var b=Qn}else!(l=s.nodeName)||"input"!==l.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&At(r.elementType)&&(v=Hn):v=Jn;switch(v&&(v=v(e,r))?Ln(a,v,n,o):(b&&b(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&wt(s,"number",s.value)),b=r?Xe(r):window,e){case"focusin":(Dn(b)||"true"===b.contentEditable)&&(ar=b,sr=r,cr=null);break;case"focusout":cr=sr=ar=null;break;case"mousedown":lr=!0;break;case"contextmenu":case"mouseup":case"dragend":lr=!1,ur(a,n,o);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(a,n,o)}var w;if(Tn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else On?Pn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(An&&"ko"!==n.locale&&(On||"onCompositionStart"!==k?"onCompositionEnd"===k&&On&&(w=Vt()):(Kt="value"in(Wt=o)?Wt.value:Wt.textContent,On=!0)),0<(b=rd(r,k)).length&&(k=new hn(k,e,null,n,o),a.push({event:k,listeners:b}),w?k.data=w:null!==(w=Mn(n))&&(k.data=w))),(w=In?function(e,t){switch(e){case"compositionend":return Mn(t);case"keypress":return 32!==t.which?null:(Rn=!0,xn);case"textInput":return(e=t.data)===xn&&Rn?null:e;default:return null}}(e,n):function(e,t){if(On)return"compositionend"===e||!Tn&&Pn(e,t)?(e=Vt(),Gt=Kt=Wt=null,On=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return An&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(k=rd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,o),a.push({event:b,listeners:k}),b.data=w)),function(e,t,n,r,o){if("submit"===t&&n&&n.stateNode===o){var i=ju((o[Be]||null).action),a=r.submitter;a&&null!==(t=(t=a[Be]||null)?ju(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var s=new nn("action","action",null,r,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Nu){var e=a?Wu(o,a):new FormData(o);ts(n,{pending:!0,data:e,method:o.method,action:i},null,e)}}else"function"===typeof i&&(s.preventDefault(),e=a?Wu(o,a):new FormData(o),ts(n,{pending:!0,data:e,method:o.method,action:i},i,e))},currentTarget:o}]})}}(a,e,r,n,o)}Yu(a,t)})}function nd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rd(e,t){for(var n=t+"Capture",r=[];null!==e;){var o=e,i=o.stateNode;if(5!==(o=o.tag)&&26!==o&&27!==o||null===i||(null!=(o=zt(e,n))&&r.unshift(nd(e,o,i)),null!=(o=zt(e,t))&&r.push(nd(e,o,i))),3===e.tag)return r;e=e.return}return[]}function od(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function id(e,t,n,r,o){for(var i=t._reactName,a=[];null!==n&&n!==r;){var s=n,c=s.alternate,l=s.stateNode;if(s=s.tag,null!==c&&c===r)break;5!==s&&26!==s&&27!==s||null===l||(c=l,o?null!=(l=zt(n,i))&&a.unshift(nd(n,l,c)):o||null!=(l=zt(n,i))&&a.push(nd(n,l,c))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var ad=/\r\n?/g,sd=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(ad,"\n").replace(sd,"")}function ld(e,t){return t=cd(t),cd(e)===t}function ud(e,t,n,r,o,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Ct(e,""+r);break;case"className":lt(e,"class",r);break;case"tabIndex":lt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":lt(e,n,r);break;case"style":It(e,r,i);break;case"data":if("object"!==t){lt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&ud(e,t,"name",o.name,o,null),ud(e,t,"formEncType",o.formEncType,o,null),ud(e,t,"formMethod",o.formMethod,o,null),ud(e,t,"formTarget",o.formTarget,o,null)):(ud(e,t,"encType",o.encType,o,null),ud(e,t,"method",o.method,o,null),ud(e,t,"target",o.target,o,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=Pt(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"onScroll":null!=r&&Ju("scroll",e);break;case"onScrollEnd":null!=r&&Ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=Pt(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ju("beforetoggle",e),Ju("toggle",e),ct(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":ct(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&ct(e,n=xt.get(n)||n,r)}}function dd(e,t,n,r,o,i){switch(n){case"style":It(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=o.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Ct(e,r):("number"===typeof r||"bigint"===typeof r)&&Ct(e,""+r);break;case"onScroll":null!=r&&Ju("scroll",e);break;case"onScrollEnd":null!=r&&Ju("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Mt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Be]||null)?i[n]:null)&&e.removeEventListener(t,i,o),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):ct(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,o)))}}function hd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ju("error",e),Ju("load",e);var r,o=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var s=n[r];if(null!=s)switch(r){case"src":o=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,r,s,n,null)}}return i&&ud(e,t,"srcSet",n.srcSet,n,null),void(o&&ud(e,t,"src",n.src,n,null));case"input":Ju("invalid",e);var c=r=s=i=null,l=null,u=null;for(o in n)if(n.hasOwnProperty(o)){var d=n[o];if(null!=d)switch(o){case"name":i=d;break;case"type":s=d;break;case"checked":l=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":c=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:ud(e,t,o,d,n,null)}}return void bt(e,r,c,l,u,s,i,!1);case"select":for(i in Ju("invalid",e),o=s=r=null,n)if(n.hasOwnProperty(i)&&null!=(c=n[i]))switch(i){case"value":r=c;break;case"defaultValue":s=c;break;case"multiple":o=c;default:ud(e,t,i,c,n,null)}return t=r,n=s,e.multiple=!!o,void(null!=t?kt(e,!!o,t,!1):null!=n&&kt(e,!!o,n,!0));case"textarea":for(s in Ju("invalid",e),r=i=o=null,n)if(n.hasOwnProperty(s)&&null!=(c=n[s]))switch(s){case"value":o=c;break;case"defaultValue":i=c;break;case"children":r=c;break;case"dangerouslySetInnerHTML":if(null!=c)throw Error(a(91));break;default:ud(e,t,s,c,n,null)}return void _t(e,o,i,r);case"option":for(l in n)if(n.hasOwnProperty(l)&&null!=(o=n[l]))if("selected"===l)e.selected=o&&"function"!==typeof o&&"symbol"!==typeof o;else ud(e,t,l,o,n,null);return;case"dialog":Ju("beforetoggle",e),Ju("toggle",e),Ju("cancel",e),Ju("close",e);break;case"iframe":case"object":Ju("load",e);break;case"video":case"audio":for(o=0;o<Vu.length;o++)Ju(Vu[o],e);break;case"image":Ju("error",e),Ju("load",e);break;case"details":Ju("toggle",e);break;case"embed":case"source":case"link":Ju("error",e),Ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(o=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:ud(e,t,u,o,n,null)}return;default:if(At(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(o=n[d])&&dd(e,t,d,o,n,void 0));return}}for(c in n)n.hasOwnProperty(c)&&(null!=(o=n[c])&&ud(e,t,c,o,n,null))}function pd(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var fd=null,md=null;function gd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function vd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function bd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var kd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,_d="function"===typeof Promise?Promise:void 0,Cd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof _d?function(e){return _d.resolve(null).then(e).catch(Td)}:kd;function Td(e){setTimeout(function(){throw e})}function Ed(e){return"head"===e}function Id(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&8===o.nodeType)if("/$"===(n=o.data)||"/&"===n){if(0===r)return e.removeChild(o),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)qd(e.ownerDocument.documentElement);else if("head"===n){qd(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,s=i.nodeName;i[Qe]||"SCRIPT"===s||"STYLE"===s||"LINK"===s&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&qd(e.ownerDocument.body);n=o}while(n);Wh(t)}function Ad(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function xd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":xd(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Rd(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Od(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Md(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Od(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Nd=null;function Dd(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Od(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Ld(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=gd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function qd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Ud=new Map,zd=new Set;function Hd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Bd=D.d;D.d={f:function(){var e=Bd.f(),t=Zl();return e||t},r:function(e){var t=$e(e);null!==t&&5===t.tag&&"form"===t.type?rs(t):Bd.r(e)},D:function(e){Bd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Bd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){Bd.L(e,t,n);var r=jd;if(r&&e&&t){var o='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(o+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(o+='[imagesizes="'+yt(n.imageSizes)+'"]')):o+='[href="'+yt(e)+'"]';var i=o;switch(t){case"style":i=Gd(e);break;case"script":i=Yd(e)}Ud.has(i)||(e=p({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Ud.set(i,e),null!==r.querySelector(o)||"style"===t&&r.querySelector(Vd(i))||"script"===t&&r.querySelector(Jd(i))||(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){Bd.m(e,t);var n=jd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",o='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Yd(e)}if(!Ud.has(i)&&(e=p({rel:"modulepreload",href:e},t),Ud.set(i,e),null===n.querySelector(o))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jd(i)))return}hd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){Bd.X(e,t);var n=jd;if(n&&e){var r=Ze(n).hoistableScripts,o=Yd(e),i=r.get(o);i||((i=n.querySelector(Jd(o)))||(e=p({src:e,async:!0},t),(t=Ud.get(o))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}},S:function(e,t,n){Bd.S(e,t,n);var r=jd;if(r&&e){var o=Ze(r).hoistableStyles,i=Gd(e);t=t||"default";var a=o.get(i);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Vd(i)))s.loading=5;else{e=p({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Ud.get(i))&&Zd(e,n);var c=a=r.createElement("link");et(c),hd(c,"link",e),c._p=new Promise(function(e,t){c.onload=e,c.onerror=t}),c.addEventListener("load",function(){s.loading|=1}),c.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Xd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},o.set(i,a)}}},M:function(e,t){Bd.M(e,t);var n=jd;if(n&&e){var r=Ze(n).hoistableScripts,o=Yd(e),i=r.get(o);i||((i=n.querySelector(Jd(o)))||(e=p({src:e,async:!0,type:"module"},t),(t=Ud.get(o))&&eh(e,t),et(i=n.createElement("script")),hd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(o,i))}}};var jd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=jd;if(r&&"string"===typeof t&&t){var o=yt(t);o='link[rel="'+e+'"][href="'+o+'"]',"string"===typeof n&&(o+='[crossorigin="'+n+'"]'),zd.has(o)||(zd.add(o),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(o)&&(hd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var o,i,s,c,l=(l=G.current)?Hd(l):null;if(!l)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=Ze(l).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=Ze(l).hoistableStyles,d=u.get(e);if(d||(l=l.ownerDocument||l,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=l.querySelector(Vd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Ud.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Ud.set(e,n),u||(o=l,i=e,s=n,c=d.state,o.querySelector('link[rel="preload"][as="style"]['+i+"]")?c.loading=1:(i=o.createElement("link"),c.preload=i,i.addEventListener("load",function(){return c.loading|=1}),i.addEventListener("error",function(){return c.loading|=2}),hd(i,"link",s),et(i),o.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Yd(n),(r=(n=Ze(l).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Gd(e){return'href="'+yt(e)+'"'}function Vd(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return p({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+yt(e)+'"]'}function Jd(e){return"script[async]"+e}function $d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var o=p({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),hd(r,"style",o),Xd(r,n.precedence,e),t.instance=r;case"stylesheet":o=Gd(n.href);var i=e.querySelector(Vd(o));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Qd(n),(o=Ud.get(o))&&Zd(r,o),et(i=(e.ownerDocument||e).createElement("link"));var s=i;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),hd(i,"link",r),t.state.loading|=4,Xd(i,n.precedence,e),t.instance=i;case"script":return i=Yd(n.src),(o=e.querySelector(Jd(i)))?(t.instance=o,et(o),o):(r=n,(o=Ud.get(i))&&eh(r=p({},n),o),et(o=(e=e.ownerDocument||e).createElement("script")),hd(o,"link",r),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Xd(r,n.precedence,e));return t.instance}function Xd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,i=o,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)i=s;else if(i!==o)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Zd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var th=null;function nh(e,t,n){if(null===th){var r=new Map,o=th=new Map;o.set(n,r)}else(r=(o=th).get(n))||(r=new Map,o.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var i=n[o];if(!(i[Qe]||i[He]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(i):r.set(a,[i])}}return r}function rh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function oh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ih=0;function ah(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var sh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,sh=new Map,t.forEach(lh,e),sh=null,ah.call(e))}function lh(e,t){if(!(4&t.state.loading)){var n=sh.get(e);if(n)var r=n.get(null);else{n=new Map,sh.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<o.length;i++){var a=o[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(o=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,o),n.set(a,o),this.count++,r=ah.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),i?i.parentNode.insertBefore(o,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(o,e.firstChild),t.state.loading|=4}}var uh={$$typeof:k,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function dh(e,t,n,r,o,i,a,s,c){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pe(0),this.hiddenUpdates=Pe(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function hh(e,t,n,r,o,i,a,s,c,l,u,d){return e=new dh(e,t,n,a,c,l,u,d,s),t=1,!0===i&&(t|=24),i=qr(3,null,null,t),e.current=i,i.stateNode=e,(t=zo()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},yi(i),e}function ph(e){return e?e=Lr:Lr}function fh(e,t,n,r,o,i){o=ph(o),null===r.context?r.context=o:r.pendingContext=o,(r=bi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=wi(e,r,t))&&(Ql(n,0,t),ki(n,e,t))}function mh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function gh(e,t){mh(e,t),(e=e.alternate)&&mh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=Or(e,67108864);null!==t&&Ql(t,0,67108864),gh(e,67108864)}}function vh(e){if(13===e.tag||31===e.tag){var t=Gl(),n=Or(e,t=Le(t));null!==n&&Ql(n,0,t),gh(e,t)}}var bh=!0;function wh(e,t,n,r){var o=N.T;N.T=null;var i=D.p;try{D.p=2,Sh(e,t,n,r)}finally{D.p=i,N.T=o}}function kh(e,t,n,r){var o=N.T;N.T=null;var i=D.p;try{D.p=8,Sh(e,t,n,r)}finally{D.p=i,N.T=o}}function Sh(e,t,n,r){if(bh){var o=_h(r);if(null===o)td(e,t,r,Ch,n),Dh(e,r);else if(function(e,t,n,r,o){switch(t){case"focusin":return Ah=Lh(Ah,e,t,n,r,o),!0;case"dragenter":return xh=Lh(xh,e,t,n,r,o),!0;case"mouseover":return Rh=Lh(Rh,e,t,n,r,o),!0;case"pointerover":var i=o.pointerId;return Ph.set(i,Lh(Ph.get(i)||null,e,t,n,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Mh.set(i,Lh(Mh.get(i)||null,e,t,n,r,o)),!0}return!1}(o,e,t,n,r))r.stopPropagation();else if(Dh(e,r),4&t&&-1<Nh.indexOf(e)){for(;null!==o;){var i=$e(o);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=Ee(i.pendingLanes);if(0!==a){var s=i;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var c=1<<31-we(a);s.entanglements[1]|=c,a&=~c}Du(i),0===(6&pl)&&(Nl=ce()+500,Lu(0,!1))}}break;case 31:case 13:null!==(s=Or(i,2))&&Ql(s,0,2),Zl(),gh(i,2)}if(null===(i=_h(r))&&td(e,t,r,Ch,n),i===o)break;o=i}null!==o&&r.stopPropagation()}else td(e,t,r,null,n)}}function _h(e){return Th(e=Nt(e))}var Ch=null;function Th(e){if(Ch=null,null!==(e=Je(e))){var t=c(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=l(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Ch=e,null}function Eh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(le()){case ue:return 2;case de:return 8;case he:case pe:return 32;case fe:return 268435456;default:return 32}default:return 32}}var Ih=!1,Ah=null,xh=null,Rh=null,Ph=new Map,Mh=new Map,Oh=[],Nh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dh(e,t){switch(e){case"focusin":case"focusout":Ah=null;break;case"dragenter":case"dragleave":xh=null;break;case"mouseover":case"mouseout":Rh=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mh.delete(t.pointerId)}}function Lh(e,t,n,r,o,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},null!==t&&(null!==(t=$e(t))&&yh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==o&&-1===t.indexOf(o)&&t.push(o),e)}function Fh(e){var t=Je(e.target);if(null!==t){var n=c(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=l(n)))return e.blockedOn=t,void Ue(e.priority,function(){vh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){vh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function qh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=_h(e.nativeEvent);if(null!==n)return null!==(t=$e(n))&&yh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Ot=r,n.target.dispatchEvent(r),Ot=null,t.shift()}return!0}function Uh(e,t,n){qh(e)&&n.delete(t)}function zh(){Ih=!1,null!==Ah&&qh(Ah)&&(Ah=null),null!==xh&&qh(xh)&&(xh=null),null!==Rh&&qh(Rh)&&(Rh=null),Ph.forEach(Uh),Mh.forEach(Uh)}function Hh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ih||(Ih=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,zh)))}var Bh=null;function jh(e){Bh!==e&&(Bh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Bh===e&&(Bh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],o=e[t+2];if("function"!==typeof r){if(null===Th(r||n))continue;break}var i=$e(n);null!==i&&(e.splice(t,3),t-=3,ts(i,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function Wh(e){function t(t){return Hh(t,e)}null!==Ah&&Hh(Ah,e),null!==xh&&Hh(xh,e),null!==Rh&&Hh(Rh,e),Ph.forEach(t),Mh.forEach(t);for(var n=0;n<Oh.length;n++){var r=Oh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Oh.length&&null===(n=Oh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Oh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var o=n[r],i=n[r+1],a=o[Be]||null;if("function"===typeof i)a||jh(n);else if(a){var s=null;if(i&&i.hasAttribute("formAction")){if(o=i,a=i[Be]||null)s=a.formAction;else if(null!==Th(o))continue}else s=a.action;"function"===typeof s?n[r+1]=s:(n.splice(r,3),r-=3),jh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return o=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==o&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==o&&(o(),o=null)}}}function Gh(e){this._internalRoot=e}function Vh(e){this._internalRoot=e}Vh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));fh(t.current,Gl(),e,t,null,null)},Vh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fh(e.current,2,null,e,null,null),Zl(),t[je]=null}},Vh.prototype.unstable_scheduleHydration=function(e){if(e){var t=qe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Oh.length&&0!==t&&t<Oh[n].priority;n++);Oh.splice(n,0,e),0===n&&Fh(e)}};var Qh=o.version;if("19.2.0"!==Qh)throw Error(a(527,Qh,"19.2.0"));D.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=c(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(null===o)break;var i=o.alternate;if(null===i){if(null!==(r=o.return)){n=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===n)return d(o),e;if(i===r)return d(o),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=o,r=i;else{for(var s=!1,l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s){for(l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{ye=Jh.inject(Yh),ve=Jh}catch(Xh){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var n=!1,r="",o=Cs,i=Ts,c=Es;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(o=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(c=t.onRecoverableError)),t=hh(e,1,!1,null,0,n,r,null,o,i,c,Kh),e[je]=t.current,Zu(e),new Gh(t)},t.hydrateRoot=function(e,t,n){if(!s(e))throw Error(a(299));var r=!1,o="",i=Cs,c=Ts,l=Es,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(c=n.onCaughtError),void 0!==n.onRecoverableError&&(l=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=hh(e,1,!0,t,0,r,o,u,i,c,l,Kh)).context=ph(null),n=t.current,(o=bi(r=Le(r=Gl()))).callback=null,wi(n,o,r),n=r,t.current.lanes=n,Me(t,n),Du(t),e[je]=t.current,Zu(e),new Vh(t)},t.version="19.2.0"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}function b(){}function w(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var k=w.prototype=new b;k.constructor=w,g(k,v.prototype),k.isPureReactComponent=!0;var S=Array.isArray;function _(){}var C={H:null,A:null,T:null,S:null},T=Object.prototype.hasOwnProperty;function E(e,t,r){var o=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==o?o:null,props:r}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var A=/\/+/g;function x(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function R(e,t,o,i,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var c,l,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return R((u=e._init)(e._payload),t,o,i,a)}}if(u)return a=a(e),u=""===i?"."+x(e,0):i,S(a)?(o="",null!=u&&(o=u.replace(A,"$&/")+"/"),R(a,t,o,"",function(e){return e})):null!=a&&(I(a)&&(c=a,l=o+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(A,"$&/")+"/")+u,a=E(c.type,l,c.props)),t.push(a)),1;u=0;var d,p=""===i?".":i+":";if(S(e))for(var m=0;m<e.length;m++)u+=R(i=e[m],t,o,s=p+x(i,m),a);else if("function"===typeof(m=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=m.call(e),m=0;!(i=e.next()).done;)u+=R(i=i.value,t,o,s=p+x(i,m++),a);else if("object"===s){if("function"===typeof e.then)return R(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(_,_):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,o,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function P(e,t,n){if(null==e)return e;var r=[],o=0;return R(e,r,"","",function(e){return t.call(n,e,o++)}),r}function M(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},N={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=p,t.Children=N,t.Component=v,t.Fragment=o,t.Profiler=a,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return C.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),o=e.key;if(null!=t)for(i in void 0!==t.key&&(o=""+t.key),t)!T.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),s=0;s<i;s++)a[s]=arguments[s+2];r.children=a}return E(e.type,o,r)},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,n){var r,o={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)T.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(o[r]=t[r]);var a=arguments.length-2;if(1===a)o.children=n;else if(1<a){for(var s=Array(a),c=0;c<a;c++)s[c]=arguments[c+2];o.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===o[r]&&(o[r]=a[r]);return E(e,i,o)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=C.T,n={};C.T=n;try{var r=e(),o=C.S;null!==o&&o(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(_,O)}catch(i){O(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),C.T=t}},t.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},t.use=function(e){return C.H.use(e)},t.useActionState=function(e,t,n){return C.H.useActionState(e,t,n)},t.useCallback=function(e,t){return C.H.useCallback(e,t)},t.useContext=function(e){return C.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return C.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return C.H.useEffect(e,t)},t.useEffectEvent=function(e){return C.H.useEffectEvent(e)},t.useId=function(){return C.H.useId()},t.useImperativeHandle=function(e,t,n){return C.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return C.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.H.useMemo(e,t)},t.useOptimistic=function(e,t){return C.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return C.H.useReducer(e,t,n)},t.useRef=function(e){return C.H.useRef(e)},t.useState=function(e){return C.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return C.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return C.H.useTransition()},t.version="19.2.0"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(o(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},s=Symbol.for("react.portal");var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(o(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=c.T,n=a.p;try{if(c.T=null,a.p=2,e)return e()}finally{c.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin),o="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:o,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=l(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=l(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=l(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return c.H.useFormState(e,t,n)},t.useFormStatus=function(){return c.H.useHostTransitionStatus()},t.version="19.2.0"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function o(e,t,r){var o=null;if(void 0!==r&&(o=""+r),void 0!==t.key&&(o=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:o,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=o,t.jsxs=o},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function r(e){return 0===e.length?null:e[0]}function o(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,c=e[s],l=s+1,u=e[l];if(0>i(c,n))l<o&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[s]=n,r=s);else{if(!(l<o&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,c=s.now();t.unstable_now=function(){return s.now()-c}}var l=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function k(e){for(var t=r(u);null!==t;){if(null===t.callback)o(u);else{if(!(t.startTime<=e))break;o(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function S(e){if(g=!1,k(e),!m)if(null!==r(l))m=!0,C||(C=!0,_());else{var t=r(u);null!==t&&M(S,t.startTime-e)}}var _,C=!1,T=-1,E=5,I=-1;function A(){return!!y||!(t.unstable_now()-I<E)}function x(){if(y=!1,C){var e=t.unstable_now();I=e;var n=!0;try{e:{m=!1,g&&(g=!1,b(T),T=-1),f=!0;var i=p;try{t:{for(k(e),h=r(l);null!==h&&!(h.expirationTime>e&&A());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var s=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){h.callback=s,k(e),n=!0;break t}h===r(l)&&o(l),k(e)}else o(l);h=r(l)}if(null!==h)n=!0;else{var c=r(u);null!==c&&M(S,c.startTime-e),n=!1}}break e}finally{h=null,p=i,f=!1}n=void 0}}finally{n?_():C=!1}}}if("function"===typeof w)_=function(){w(x)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=x,_=function(){P.postMessage(null)}}else _=function(){v(x,0)};function M(e,n){T=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,o,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:d++,callback:o,priorityLevel:e,startTime:i,expirationTime:s=i+s,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(g?(b(T),T=-1):g=!0,M(S,i-a))):(e.sortIndex=s,n(l,e),m||f||(m=!0,C||(C=!0,_()))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".b83b8a76.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="school-portal:";n.l=(r,o,i,a)=>{if(e[r])e[r].push(o);else{var s,c;if(void 0!==i)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+i),s.src=r),e[r]=[o];var h=(t,n)=>{s.onerror=s.onload=null,clearTimeout(p);var o=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach(e=>e(n)),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=h.bind(null,s.onerror),s.onload=h.bind(null,s.onload),c&&document.head.appendChild(s)}}})(),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)r.push(o[2]);else{var i=new Promise((n,r)=>o=e[t]=[n,r]);r.push(o[2]=i);var a=n.p+n.u(t),s=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,o[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var o,i,[a,s,c]=r,l=0;if(a.some(t=>0!==e[t])){for(o in s)n.o(s,o)&&(n.m[o]=s[o]);if(c)c(n)}for(t&&t(r);l<a.length;l++)i=a[l],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkschool_portal=self.webpackChunkschool_portal||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();const c="10.22.0",l=globalThis;function u(){return d(l),l}function d(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||c,t[c]=t[c]||{}}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l;const r=n.__SENTRY__=n.__SENTRY__||{},o=r[c]=r[c]||{};return o[e]||(o[e]=t())}const p="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,f=Object.prototype.toString;function m(e){switch(f.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return T(e,Error)}}function g(e,t){return f.call(e)==="[object ".concat(t,"]")}function y(e){return g(e,"ErrorEvent")}function v(e){return g(e,"DOMError")}function b(e){return g(e,"String")}function w(e){return"object"===typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function k(e){return null===e||w(e)||"object"!==typeof e&&"function"!==typeof e}function S(e){return g(e,"Object")}function _(e){return"undefined"!==typeof Event&&T(e,Event)}function C(e){return Boolean((null===e||void 0===e?void 0:e.then)&&"function"===typeof e.then)}function T(e,t){try{return e instanceof t}catch(n){return!1}}function E(e){return!("object"!==typeof e||null===e||!e.__isVue&&!e._isVue)}function I(e){return"undefined"!==typeof Request&&T(e,Request)}const A=l;function x(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"<unknown>";try{let n=e;const r=5,o=[];let i=0,a=0;const s=" > ",c=s.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<r&&(l=R(n,u),!("html"===l||i>1&&a+o.length*c+l.length>=d));)o.push(l),a+=l.length,n=n.parentNode;return o.reverse().join(s)}catch(n){return"<unknown>"}}function R(e,t){const n=e,r=[];if(null===n||void 0===n||!n.tagName)return"";if(A.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const o=null!==t&&void 0!==t&&t.length?t.filter(e=>n.getAttribute(e)).map(e=>[e,n.getAttribute(e)]):null;if(null!==o&&void 0!==o&&o.length)o.forEach(e=>{r.push("[".concat(e[0],'="').concat(e[1],'"]'))});else{n.id&&r.push("#".concat(n.id));const e=n.className;if(e&&b(e)){const t=e.split(/\s+/);for(const e of t)r.push(".".concat(e))}}const i=["aria-label","type","name","title","alt"];for(const a of i){const e=n.getAttribute(a);e&&r.push("[".concat(a,'="').concat(e,'"]'))}return r.join("")}function P(){try{return A.document.location.href}catch(e){return""}}function M(e){if(!A.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}const O=["debug","info","warn","error","log","assert","trace"],N={};function D(e){if(!("console"in l))return e();const t=l.console,n={},r=Object.keys(N);r.forEach(e=>{const r=N[e];n[e]=t[e],t[e]=r});try{return e()}finally{r.forEach(e=>{t[e]=n[e]})}}function L(){return q().enabled}function F(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];p&&L()&&D(()=>{l.console[e]("".concat("Sentry Logger ","[").concat(e,"]:"),...n)})}function q(){return p?h("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const U={enable:function(){q().enabled=!0},disable:function(){q().enabled=!1},isEnabled:L,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];F("log",...t)},warn:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];F("warn",...t)},error:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];F("error",...t)}};function z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!==typeof e||0===t||e.length<=t?e:"".concat(e.slice(0,t),"...")}function H(e,t){if(!Array.isArray(e))return"";const n=[];for(let o=0;o<e.length;o++){const t=e[o];try{E(t)?n.push("[VueViewModel]"):n.push(String(t))}catch(r){n.push("[value cannot be serialized]")}}return n.join(t)}function B(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!b(e)&&(g(t,"RegExp")?t.test(e):!!b(t)&&(n?e===t:e.includes(t)))}function j(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).some(n=>B(e,n,t))}function W(e,t,n){if(!(t in e))return;const r=e[t];if("function"!==typeof r)return;const o=n(r);"function"===typeof o&&G(o,r);try{e[t]=o}catch(i){p&&U.log('Failed to replace method "'.concat(t,'" in object'),e)}}function K(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(r){p&&U.log('Failed to add non-enumerable property "'.concat(t,'" to object'),e)}}function G(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,K(e,"__sentry_original__",t)}catch(n){}}function V(e){return e.__sentry_original__}function Q(e){if(m(e))return s({message:e.message,name:e.name,stack:e.stack},J(e));if(_(e)){const t=s({type:e.type,target:Y(e.target),currentTarget:Y(e.currentTarget)},J(e));return"undefined"!==typeof CustomEvent&&T(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Y(e){try{return t=e,"undefined"!==typeof Element&&T(t,Element)?x(e):Object.prototype.toString.call(e)}catch(n){return"<unknown>"}var t}function J(e){if("object"===typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}let $;function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){const e=l;return e.crypto||e.msCrypto}();try{if(null!==e&&void 0!==e&&e.randomUUID)return e.randomUUID().replace(/-/g,"")}catch(t){}return $||($=[1e7]+1e3+4e3+8e3+1e11),$.replace(/[018]/g,e=>(e^(16*Math.random()&15)>>e/4).toString(16))}function Z(e){var t;return null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t?void 0:t[0]}function ee(e){const{message:t,event_id:n}=e;if(t)return t;const r=Z(e);return r?r.type&&r.value?"".concat(r.type,": ").concat(r.value):r.type||r.value||n||"<unknown>":n||"<unknown>"}function te(e,t,n){const r=e.exception=e.exception||{},o=r.values=r.values||[],i=o[0]=o[0]||{};i.value||(i.value=t||""),i.type||(i.type=n||"Error")}function ne(e,t){const n=Z(e);if(!n)return;const r=n.mechanism;if(n.mechanism=s(s(s({},{type:"generic",handled:!0}),r),t),t&&"data"in t){const e=s(s({},null===r||void 0===r?void 0:r.data),t.data);n.mechanism.data=e}}function re(e){if(function(e){try{return e.__sentry_captured__}catch(t){}}(e))return!0;try{K(e,"__sentry_captured__",!0)}catch(t){}return!1}function oe(){return Date.now()/1e3}let ie,ae;function se(){return(null!==ie&&void 0!==ie?ie:ie=function(){const{performance:e}=l;if(null===e||void 0===e||!e.now||!e.timeOrigin)return oe;const t=e.timeOrigin;return()=>(t+e.now())/1e3}())()}function ce(){return ae||(ae=function(){var e;const{performance:t}=l;if(null===t||void 0===t||!t.now)return[void 0,"none"];const n=36e5,r=t.now(),o=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+r-o):n,a=i<n,s=null===(e=t.timing)||void 0===e?void 0:e.navigationStart,c="number"===typeof s?Math.abs(s+r-o):n;return a||c<n?i<=c?[t.timeOrigin,"timeOrigin"]:[s,"navigationStart"]:[o,"dateNow"]}()),ae[0]}function le(e){const t=se(),n={sid:X(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return{sid:"".concat(e.sid),init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"===typeof e.did||"string"===typeof e.did?"".concat(e.did):void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}(n)};return e&&ue(n,e),n}function ue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||se(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:X()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did="".concat(t.did)),"number"===typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"===typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"===typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function de(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(!t||"object"!==typeof t||n<=0)return t;if(e&&0===Object.keys(t).length)return e;const r=s({},e);for(const o in t)Object.prototype.hasOwnProperty.call(t,o)&&(r[o]=de(r[o],t[o],n-1));return r}function he(){return X()}function pe(){return X().substring(16)}const fe="_sentrySpan";function me(e,t){t?K(e,fe,t):delete e[fe]}function ge(e){return e[fe]}class ye{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:he(),sampleRand:Math.random()}}clone(){const e=new ye;return e._breadcrumbs=[...this._breadcrumbs],e._tags=s({},this._tags),e._extra=s({},this._extra),e._contexts=s({},this._contexts),this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata=s({},this._sdkProcessingMetadata),e._propagationContext=s({},this._propagationContext),e._client=this._client,e._lastEventId=this._lastEventId,me(e,ge(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ue(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags=s(s({},this._tags),e),this._notifyScopeListeners(),this}setTag(e,t){return this._tags=s(s({},this._tags),{},{[e]:t}),this._notifyScopeListeners(),this}setExtras(e){return this._extra=s(s({},this._extra),e),this._notifyScopeListeners(),this}setExtra(e,t){return this._extra=s(s({},this._extra),{},{[e]:t}),this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"===typeof e?e(this):e,n=t instanceof ye?t.getScopeData():S(t)?e:void 0,{tags:r,extra:o,user:i,contexts:a,level:c,fingerprint:l=[],propagationContext:u}=n||{};return this._tags=s(s({},this._tags),r),this._extra=s(s({},this._extra),o),this._contexts=s(s({},this._contexts),a),i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),l.length&&(this._fingerprint=l),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,me(this,void 0),this._attachments=[],this.setPropagationContext({traceId:he(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,t){const n="number"===typeof t?t:100;if(n<=0)return this;const r=s(s({timestamp:oe()},e),{},{message:e.message?z(e.message,2048):e.message});var o;(this._breadcrumbs.push(r),this._breadcrumbs.length>n)&&(this._breadcrumbs=this._breadcrumbs.slice(-n),null===(o=this._client)||void 0===o||o.recordDroppedEvent("buffer_overflow","log_item"));return this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ge(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=de(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=(null===t||void 0===t?void 0:t.event_id)||X();if(!this._client)return p&&U.warn("No client configured on scope - will not capture exception!"),n;const r=new Error("Sentry syntheticException");return this._client.captureException(e,s(s({originalException:e,syntheticException:r},t),{},{event_id:n}),this),n}captureMessage(e,t,n){const r=(null===n||void 0===n?void 0:n.event_id)||X();if(!this._client)return p&&U.warn("No client configured on scope - will not capture message!"),r;const o=new Error(e);return this._client.captureMessage(e,t,s(s({originalException:e,syntheticException:o},n),{},{event_id:r}),this),r}captureEvent(e,t){const n=(null===t||void 0===t?void 0:t.event_id)||X();return this._client?(this._client.captureEvent(e,s(s({},t),{},{event_id:n}),this),n):(p&&U.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}class ve{constructor(e,t){let n,r;n=e||new ye,r=t||new ye,this._stack=[{scope:n}],this._isolationScope=r}withScope(e){const t=this._pushScope();let n;try{n=e(t)}catch(r){throw this._popScope(),r}return C(n)?n.then(e=>(this._popScope(),e),e=>{throw this._popScope(),e}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return!(this._stack.length<=1)&&!!this._stack.pop()}}function be(){const e=d(u());return e.stack=e.stack||new ve(h("defaultCurrentScope",()=>new ye),h("defaultIsolationScope",()=>new ye))}function we(e){return be().withScope(e)}function ke(e,t){const n=be();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Se(e){return be().withScope(()=>e(be().getIsolationScope()))}function _e(e){const t=d(e);return t.acs?t.acs:{withIsolationScope:Se,withScope:we,withSetScope:ke,withSetIsolationScope:(e,t)=>Se(t),getCurrentScope:()=>be().getScope(),getIsolationScope:()=>be().getIsolationScope()}}function Ce(){return _e(u()).getCurrentScope()}function Te(){return _e(u()).getIsolationScope()}function Ee(){const e=_e(u());for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(2===n.length){const[t,r]=n;return t?e.withSetScope(t,r):e.withScope(r)}return e.withScope(n[0])}function Ie(){return Ce().getClient()}function Ae(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:o}=t,i={trace_id:n,span_id:o||pe()};return r&&(i.parent_span_id=r),i}const xe="production";function Re(e){return new Me(t=>{t(e)})}function Pe(e){return new Me((t,n)=>{n(e)})}class Me{constructor(e){this._state=0,this._handlers=[],this._runExecutor(e)}then(e,t){return new Me((n,r)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(o){r(o)}else n(t)},e=>{if(t)try{n(t(e))}catch(o){r(o)}else r(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new Me((t,n)=>{let r,o;return this.then(t=>{o=!1,r=t,e&&e()},t=>{o=!0,r=t,e&&e()}).then(()=>{o?n(r):t(r)})})}_executeHandlers(){if(0===this._state)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(1===this._state&&e[1](this._value),2===this._state&&e[2](this._value),e[0]=!0)})}_runExecutor(e){const t=(e,t)=>{0===this._state&&(C(t)?t.then(n,r):(this._state=e,this._value=t,this._executeHandlers()))},n=e=>{t(1,e)},r=e=>{t(2,e)};try{e(n,r)}catch(o){r(o)}}}function Oe(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;try{const o=Ne(t,n,e,r);return C(o)?o:Re(o)}catch(o){return Pe(o)}}function Ne(e,t,n,r){const o=n[r];if(!e||!o)return e;const i=o(s({},e),t);return p&&null===i&&U.log('Event processor "'.concat(o.id||"?",'" dropped event')),C(i)?i.then(e=>Ne(e,t,n,r+1)):Ne(i,t,n,r+1)}const De="sentry.source",Le="sentry.sample_rate",Fe="sentry.previous_trace_sample_rate",qe="sentry.op",Ue="sentry.origin",ze="sentry.idle_span_finish_reason",He="sentry.measurement_unit",Be="sentry.measurement_value",je="sentry.custom_span_name",We="sentry.profile_id",Ke="sentry.exclusive_time",Ge="sentry.link.type",Ve="sentry-",Qe=/^sentry-/;function Ye(e){const t=function(e){if(!e||!b(e)&&!Array.isArray(e))return;if(Array.isArray(e))return e.reduce((e,t)=>{const n=$e(t);return Object.entries(n).forEach(t=>{let[n,r]=t;e[n]=r}),e},{});return $e(e)}(e);if(!t)return;const n=Object.entries(t).reduce((e,t)=>{let[n,r]=t;if(n.match(Qe)){e[n.slice(7)]=r}return e},{});return Object.keys(n).length>0?n:void 0}function Je(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((e,t,n)=>{let[r,o]=t;const i="".concat(encodeURIComponent(r),"=").concat(encodeURIComponent(o)),a=0===n?i:"".concat(e,",").concat(i);return a.length>8192?(p&&U.warn("Not adding key: ".concat(r," with val: ").concat(o," to baggage header due to exceeding baggage size limits.")),e):a},"")}(Object.entries(e).reduce((e,t)=>{let[n,r]=t;return r&&(e["".concat(Ve).concat(n)]=r),e},{}))}function $e(e){return e.split(",").map(e=>{const t=e.indexOf("=");if(-1===t)return[];return[e.slice(0,t),e.slice(t+1)].map(e=>{try{return decodeURIComponent(e.trim())}catch(t){return}})}).reduce((e,t)=>{let[n,r]=t;return n&&r&&(e[n]=r),e},{})}const Xe=/^o(\d+)\./,Ze=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function et(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{host:n,path:r,pass:o,port:i,projectId:a,protocol:s,publicKey:c}=e;return"".concat(s,"://").concat(c).concat(t&&o?":".concat(o):"")+"@".concat(n).concat(i?":".concat(i):"","/").concat(r?"".concat(r,"/"):r).concat(a)}function tt(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function nt(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=function(e){const t=e.match(Xe);return null===t||void 0===t?void 0:t[1]}(n)),r}function rt(e){const t="string"===typeof e?function(e){const t=Ze.exec(e);if(!t)return void D(()=>{console.error("Invalid Sentry Dsn: ".concat(e))});const[n,r,o="",i="",a="",s=""]=t.slice(1);let c="",l=s;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return tt({host:i,pass:o,path:c,projectId:l,port:a,protocol:n,publicKey:r})}(e):tt(e);if(t&&function(e){if(!p)return!0;const{port:t,projectId:n,protocol:r}=e;return!["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(U.error("Invalid Sentry Dsn: ".concat(t," missing")),!0))&&(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(r)?!t||!isNaN(parseInt(t,10))||(U.error("Invalid Sentry Dsn: Invalid port ".concat(t)),!1):(U.error("Invalid Sentry Dsn: Invalid protocol ".concat(r)),!1):(U.error("Invalid Sentry Dsn: Invalid projectId ".concat(n)),!1))}(t))return t}function ot(e){var t;if("boolean"===typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const n=e||(null===(t=Ie())||void 0===t?void 0:t.getOptions());return!!n&&(null!=n.tracesSampleRate||!!n.tracesSampler)}function it(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function at(e,t){e.setAttribute("http.response.status_code",t);const n=function(e){if(e<400&&e>=100)return{code:1};if(e>=400&&e<500)switch(e){case 401:return{code:2,message:"unauthenticated"};case 403:return{code:2,message:"permission_denied"};case 404:return{code:2,message:"not_found"};case 409:return{code:2,message:"already_exists"};case 413:return{code:2,message:"failed_precondition"};case 429:return{code:2,message:"resource_exhausted"};case 499:return{code:2,message:"cancelled"};default:return{code:2,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:2,message:"unimplemented"};case 503:return{code:2,message:"unavailable"};case 504:return{code:2,message:"deadline_exceeded"};default:return{code:2,message:"internal_error"}}return{code:2,message:"unknown_error"}}(t);"unknown_error"!==n.message&&e.setStatus(n)}const st="_sentryScope",ct="_sentryIsolationScope";function lt(e){if(e){if("object"===typeof e&&"deref"in e&&"function"===typeof e.deref)try{return e.deref()}catch(t){return}return e}}function ut(e,t,n){e&&(K(e,ct,function(e){try{const t=l.WeakRef;if("function"===typeof t)return new t(e)}catch(t){}return e}(n)),K(e,st,t))}function dt(e){const t=e;return{scope:t[st],isolationScope:lt(t[ct])}}function ht(e){if("boolean"===typeof e)return Number(e);const t="string"===typeof e?parseFloat(e):e;return"number"!==typeof t||isNaN(t)||t<0||t>1?void 0:t}const pt=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function ft(e,t){const n=function(e){if(!e)return;const t=e.match(pt);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),r=Ye(t);if(null===n||void 0===n||!n.traceId)return{traceId:he(),sampleRand:Math.random()};const o=function(e,t){const n=ht(null===t||void 0===t?void 0:t.sample_rand);if(void 0!==n)return n;const r=ht(null===t||void 0===t?void 0:t.sample_rate);return r&&void 0!==(null===e||void 0===e?void 0:e.parentSampled)?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}(n,r);r&&(r.sample_rand=o.toString());const{traceId:i,parentSpanId:a,parentSampled:s}=n;return{traceId:i,parentSpanId:a,sampled:s,dsc:r||{},sampleRand:o}}function mt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe(),n=arguments.length>2?arguments[2]:void 0,r="";return void 0!==n&&(r=n?"-1":"-0"),"".concat(e,"-").concat(t).concat(r)}function gt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:he(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pe(),n=arguments.length>2?arguments[2]:void 0;return"00-".concat(e,"-").concat(t,"-").concat(n?"01":"00")}const yt=["spanId","traceId","traceFlags"];let vt=!1;function bt(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:o,parent_span_id:i,status:a,origin:s,links:c}=Ct(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:o,status:a,origin:s,links:c}}function wt(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),o=r?t:Ct(e).parent_span_id,i=dt(e).scope;return{parent_span_id:o,span_id:r?(null===i||void 0===i?void 0:i.getPropagationContext().propagationSpanId)||pe():t,trace_id:n}}function kt(e){return e&&e.length>0?e.map(e=>{let{context:{spanId:t,traceId:n,traceFlags:r},attributes:o}=e;return s({span_id:t,trace_id:n,sampled:1===r,attributes:o},it(e.context,yt))}):void 0}function St(e){return"number"===typeof e?_t(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?_t(e.getTime()):se()}function _t(e){return e>9999999999?e/1e3:e}function Ct(e){if(function(e){return"function"===typeof e.getSpanJSON}(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(function(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}(e)){var r;const{attributes:o,startTime:i,name:a,endTime:s,status:c,links:l}=e;return{span_id:t,trace_id:n,data:o,description:a,parent_span_id:"parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?null===(r=e.parentSpanContext)||void 0===r?void 0:r.spanId:void 0,start_timestamp:St(i),timestamp:St(s)||void 0,status:Et(c),op:o[qe],origin:o[Ue],links:kt(l)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function Tt(e){const{traceFlags:t}=e.spanContext();return 1===t}function Et(e){if(e&&0!==e.code)return 1===e.code?"ok":e.message||"unknown_error"}const It="_sentryChildSpans",At="_sentryRootSpan";function xt(e,t){const n=e[At]||e;K(t,At,n),e[It]?e[It].add(t):K(e,It,new Set([t]))}function Rt(e){const t=new Set;return function e(n){if(!t.has(n)&&Tt(n)){t.add(n);const r=n[It]?Array.from(n[It]):[];for(const t of r)e(t)}}(e),Array.from(t)}function Pt(e){return e[At]||e}function Mt(){const e=_e(u());return e.getActiveSpan?e.getActiveSpan():ge(Ce())}function Ot(){vt||(D(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),vt=!0)}const Nt="_frozenDsc";function Dt(e,t){K(e,Nt,t)}function Lt(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},o={environment:n.environment||xe,release:n.release,public_key:r,trace_id:e,org_id:nt(t)};return t.emit("createDsc",o),o}function Ft(e,t){const n=t.getPropagationContext();return n.dsc||Lt(n.traceId,e)}function qt(e){var t,n;const r=Ie();if(!r)return{};const o=Pt(e),i=Ct(o),a=i.data,s=o.spanContext().traceState,c=null!==(t=null!==(n=null===s||void 0===s?void 0:s.get("sentry.sample_rate"))&&void 0!==n?n:a[Le])&&void 0!==t?t:a[Fe];function l(e){return"number"!==typeof c&&"string"!==typeof c||(e.sample_rate="".concat(c)),e}const u=o[Nt];if(u)return l(u);const d=null===s||void 0===s?void 0:s.get("sentry.dsc"),h=d&&Ye(d);if(h)return l(h);const p=Lt(e.spanContext().traceId,r),f=a[De],m=i.description;var g,y;("url"!==f&&m&&(p.transaction=m),ot())&&(p.sampled=String(Tt(o)),p.sample_rand=null!==(g=null===s||void 0===s?void 0:s.get("sentry.sample_rand"))&&void 0!==g?g:null===(y=dt(o).scope)||void 0===y?void 0:y.getPropagationContext().sampleRand.toString());return l(p),r.emit("createDsc",p,o),p}function Ut(e,t){const{fingerprint:n,span:r,breadcrumbs:o,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,transactionName:c}=t;Object.keys(n).length&&(e.extra=s(s({},n),e.extra));Object.keys(r).length&&(e.tags=s(s({},r),e.tags));Object.keys(o).length&&(e.user=s(s({},o),e.user));Object.keys(i).length&&(e.contexts=s(s({},i),e.contexts));a&&(e.level=a);c&&"transaction"!==e.type&&(e.transaction=c)}(e,t),r&&function(e,t){e.contexts=s({trace:wt(t)},e.contexts),e.sdkProcessingMetadata=s({dynamicSamplingContext:qt(t)},e.sdkProcessingMetadata);const n=Pt(t),r=Ct(n).description;r&&!e.transaction&&"transaction"===e.type&&(e.transaction=r)}(e,r),function(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint.length||delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,o),function(e,t){e.sdkProcessingMetadata=s(s({},e.sdkProcessingMetadata),t)}(e,i)}function zt(e,t){const{extra:n,tags:r,user:o,contexts:i,level:a,sdkProcessingMetadata:c,breadcrumbs:l,fingerprint:u,eventProcessors:d,attachments:h,propagationContext:p,transactionName:f,span:m}=t;Ht(e,"extra",n),Ht(e,"tags",r),Ht(e,"user",o),Ht(e,"contexts",i),e.sdkProcessingMetadata=de(e.sdkProcessingMetadata,c,2),a&&(e.level=a),f&&(e.transactionName=f),m&&(e.span=m),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),u.length&&(e.fingerprint=[...e.fingerprint,...u]),d.length&&(e.eventProcessors=[...e.eventProcessors,...d]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext=s(s({},e.propagationContext),p)}function Ht(e,t,n){e[t]=de(e[t],n,1)}let Bt,jt,Wt,Kt;function Gt(e){const t=l._sentryDebugIds,n=l._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],o=n?Object.keys(n):[];if(Kt&&r.length===jt&&o.length===Wt)return Kt;jt=r.length,Wt=o.length,Kt={},Bt||(Bt={});const i=(t,n)=>{for(const o of t){var r;const t=n[o],i=null===(r=Bt)||void 0===r?void 0:r[o];if(i&&Kt&&t)Kt[i[0]]=t,Bt&&(Bt[o]=[i[0],t]);else if(t){const n=e(o);for(let e=n.length-1;e>=0;e--){const r=n[e],i=null===r||void 0===r?void 0:r.filename;if(i&&Kt&&Bt){Kt[i]=t,Bt[o]=[i,t];break}}}}};return t&&i(r,t),n&&i(o,n),Kt}const Vt="?",Qt=/\(error: (.*)\)/,Yt=/captureMessage|captureException/;function Jt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=[],i=e.split("\n");for(let a=t;a<i.length;a++){let e=i[a];e.length>1024&&(e=e.slice(0,1024));const t=Qt.test(e)?e.replace(Qt,"$1"):e;if(!t.match(/\S*Error: /)){for(const e of r){const n=e(t);if(n){o.push(n);break}}if(o.length>=50+n)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test($t(t).function||"")&&t.pop();t.reverse(),Yt.test($t(t).function||"")&&(t.pop(),Yt.test($t(t).function||"")&&t.pop());return t.slice(0,50).map(e=>s(s({},e),{},{filename:e.filename||$t(t).filename,function:e.function||Vt}))}(o.slice(n))}}function $t(e){return e[e.length-1]||{}}const Xt="<anonymous>";function Zt(e){try{return e&&"function"===typeof e&&e.name||Xt}catch(t){return Xt}}function en(e){const t=e.exception;if(t){const e=[];try{return t.values.forEach(t=>{t.stacktrace.frames&&e.push(...t.stacktrace.frames)}),e}catch(n){return}}}function tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0;try{return rn("",e,t,n)}catch(r){return{ERROR:"**non-serializable** (".concat(r,")")}}}function nn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400;const r=tn(e,t);return o=r,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(o))>n?nn(e,t-1,n):r;var o}function rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){const e=new WeakSet;function t(t){return!!e.has(t)||(e.add(t),!1)}function n(t){e.delete(t)}return[t,n]}();const[i,a]=o;if(null==t||["boolean","string"].includes(typeof t)||"number"===typeof t&&Number.isFinite(t))return t;const s=function(e,t){try{if("domain"===e&&t&&"object"===typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!==typeof global&&t===global)return"[Global]";if("undefined"!==typeof window&&t===window)return"[Window]";if("undefined"!==typeof document&&t===document)return"[Document]";if(E(t))return"[VueViewModel]";if(S(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"===typeof t&&!Number.isFinite(t))return"[".concat(t,"]");if("function"===typeof t)return"[Function: ".concat(Zt(t),"]");if("symbol"===typeof t)return"[".concat(String(t),"]");if("bigint"===typeof t)return"[BigInt: ".concat(String(t),"]");const r=function(e){const t=Object.getPrototypeOf(e);return null!==t&&void 0!==t&&t.constructor?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(r)?"[HTMLElement: ".concat(r,"]"):"[object ".concat(r,"]")}catch(r){return"**non-serializable** (".concat(r,")")}var n}(e,t);if(!s.startsWith("[object "))return s;if(t.__sentry_skip_normalization__)return t;const c="number"===typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return s.replace("object ","");if(i(t))return"[Circular ~]";const l=t;if(l&&"function"===typeof l.toJSON)try{return rn("",l.toJSON(),c-1,r,o)}catch(p){}const u=Array.isArray(t)?[]:{};let d=0;const h=Q(t);for(const f in h){if(!Object.prototype.hasOwnProperty.call(h,f))continue;if(d>=r){u[f]="[MaxProperties ~]";break}const e=h[f];u[f]=rn(f,e,c-1,r,o),d++}return a(t),u}function on(e,t,n,r,o,i){const{normalizeDepth:a=3,normalizeMaxBreadth:c=1e3}=e,l=s(s({},t),{},{event_id:t.event_id||n.event_id||X(),timestamp:t.timestamp||oe()}),u=n.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:n,release:r,dist:o,maxValueLength:i=250}=t;e.environment=e.environment||n||xe,!e.release&&r&&(e.release=r);!e.dist&&o&&(e.dist=o);const a=e.request;null!==a&&void 0!==a&&a.url&&(a.url=z(a.url,i))}(l,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(l,u),o&&o.emit("applyFrameMetadata",t),void 0===t.type&&function(e,t){var n;const r=Gt(t);null===(n=e.exception)||void 0===n||null===(n=n.values)||void 0===n||n.forEach(e=>{var t;null===(t=e.stacktrace)||void 0===t||null===(t=t.frames)||void 0===t||t.forEach(e=>{e.filename&&(e.debug_id=r[e.filename])})})}(l,e.stackParser);const d=function(e,t){if(!t)return e;const n=e?e.clone():new ye;return n.update(t),n}(r,n.captureContext);n.mechanism&&ne(l,n.mechanism);const p=o?o.getEventProcessors():[],f=h("globalScope",()=>new ye).getScopeData();if(i){zt(f,i.getScopeData())}if(d){zt(f,d.getScopeData())}const m=[...n.attachments||[],...f.attachments];m.length&&(n.attachments=m),Ut(l,f);return Oe([...p,...f.eventProcessors],l,n).then(e=>(e&&function(e){var t;const n={};if(null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t||t.forEach(e=>{var t;null===(t=e.stacktrace)||void 0===t||null===(t=t.frames)||void 0===t||t.forEach(e=>{e.debug_id&&(e.abs_path?n[e.abs_path]=e.debug_id:e.filename&&(n[e.filename]=e.debug_id),delete e.debug_id)})}),0===Object.keys(n).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const r=e.debug_meta.images;Object.entries(n).forEach(e=>{let[t,n]=e;r.push({type:"sourcemap",code_file:t,debug_id:n})})}(e),"number"===typeof a&&a>0?function(e,t,n){var r,o;if(!e)return null;const i=s(s(s(s(s({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>s(s({},e),e.data&&{data:tn(e.data,t,n)}))}),e.user&&{user:tn(e.user,t,n)}),e.contexts&&{contexts:tn(e.contexts,t,n)}),e.extra&&{extra:tn(e.extra,t,n)});null!==(r=e.contexts)&&void 0!==r&&r.trace&&i.contexts&&(i.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(i.contexts.trace.data=tn(e.contexts.trace.data,t,n)));e.spans&&(i.spans=e.spans.map(e=>s(s({},e),e.data&&{data:tn(e.data,t,n)})));null!==(o=e.contexts)&&void 0!==o&&o.flags&&i.contexts&&(i.contexts.flags=tn(e.contexts.flags,3,n));return i}(e,a,c):e))}function an(e){if(e)return function(e){return e instanceof ye||"function"===typeof e}(e)||function(e){return Object.keys(e).some(e=>sn.includes(e))}(e)?{captureContext:e}:e}const sn=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function cn(e,t){return Ce().captureException(e,an(t))}function ln(e,t){return Ce().captureEvent(e,t)}function un(e,t){Te().setContext(e,t)}function dn(e){const t=Te(),n=Ce(),{userAgent:r}=l.navigator||{},o=le(s(s({user:n.getUser()||t.getUser()},r&&{userAgent:r}),e)),i=t.getSession();return"ok"===(null===i||void 0===i?void 0:i.status)&&ue(i,{status:"exited"}),hn(),t.setSession(o),o}function hn(){const e=Te(),t=Ce().getSession()||e.getSession();t&&function(e,t){let n={};t?n={status:t}:"ok"===e.status&&(n={status:"exited"}),ue(e,n)}(t),pn(),e.setSession()}function pn(){const e=Te(),t=Ie(),n=e.getSession();n&&t&&t.captureSession(n)}function fn(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?hn():pn()}const mn=[];function gn(e){const t=e.defaultIntegrations||[],n=e.integrations;let r;if(t.forEach(e=>{e.isDefaultInstance=!0}),Array.isArray(n))r=[...t,...n];else if("function"===typeof n){const e=n(t);r=Array.isArray(e)?e:[e]}else r=t;return function(e){const t={};return e.forEach(e=>{const{name:n}=e,r=t[n];r&&!r.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.values(t)}(r)}function yn(e,t){for(const n of t)null!==n&&void 0!==n&&n.afterAllSetup&&n.afterAllSetup(e)}function vn(e,t,n){if(n[t.name])p&&U.log("Integration skipped because it was already installed: ".concat(t.name));else{if(n[t.name]=t,-1===mn.indexOf(t.name)&&"function"===typeof t.setupOnce&&(t.setupOnce(),mn.push(t.name)),t.setup&&"function"===typeof t.setup&&t.setup(e),"function"===typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,r)=>n(t,r,e))}if("function"===typeof t.processEvent){const n=t.processEvent.bind(t),r=Object.assign((t,r)=>n(t,r,e),{id:t.name});e.addEventProcessor(r)}p&&U.log("Integration installed: ".concat(t.name))}}function bn(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];null!==n&&void 0!==n&&n.value&&(t.push(n.value),n.type&&t.push("".concat(n.type,": ").concat(n.value)))}catch(n){}return t}const wn=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,'can\'t redefine non-configurable property "solana"',"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],kn=function(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:"EventFilters",setup(n){const r=n.getOptions();e=_n(t,r)},processEvent(n,r,o){if(!e){const n=o.getOptions();e=_n(t,n)}return function(e,t){if(e.type){if("transaction"===e.type&&function(e,t){if(null===t||void 0===t||!t.length)return!1;const n=e.transaction;return!!n&&j(n,t)}(e,t.ignoreTransactions))return p&&U.warn("Event dropped due to being matched by `ignoreTransactions` option.\nEvent: ".concat(ee(e))),!0}else{if(function(e,t){if(null===t||void 0===t||!t.length)return!1;return bn(e).some(e=>j(e,t))}(e,t.ignoreErrors))return p&&U.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: ".concat(ee(e))),!0;if(function(e){var t;if(null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t||!t.length)return!1;return!e.message&&!e.exception.values.some(e=>e.stacktrace||e.type&&"Error"!==e.type||e.value)}(e))return p&&U.warn("Event dropped due to not having an error message, error type or stacktrace.\nEvent: ".concat(ee(e))),!0;if(function(e,t){if(null===t||void 0===t||!t.length)return!1;const n=Cn(e);return!!n&&j(n,t)}(e,t.denyUrls))return p&&U.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: ".concat(ee(e),".\nUrl: ").concat(Cn(e))),!0;if(!function(e,t){if(null===t||void 0===t||!t.length)return!0;const n=Cn(e);return!n||j(n,t)}(e,t.allowUrls))return p&&U.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: ".concat(ee(e),".\nUrl: ").concat(Cn(e))),!0}return!1}(n,e)?null:n}}},Sn=function(){return s(s({},kn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})),{},{name:"InboundFilters"})};function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:wn],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function Cn(e){try{var t,n,r;const o=[...null!==(t=null===(n=e.exception)||void 0===n?void 0:n.values)&&void 0!==t?t:[]].reverse().find(e=>{var t,n;return void 0===(null===(t=e.mechanism)||void 0===t?void 0:t.parent_id)&&(null===(n=e.stacktrace)||void 0===n||null===(n=n.frames)||void 0===n?void 0:n.length)}),i=null===o||void 0===o||null===(r=o.stacktrace)||void 0===r?void 0:r.frames;return i?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(i):null}catch(o){return p&&U.error("Cannot extract url for event ".concat(ee(e))),null}}let Tn;const En=new WeakMap,In=()=>({name:"FunctionToString",setupOnce(){Tn=Function.prototype.toString;try{Function.prototype.toString=function(){const e=V(this),t=En.has(Ie())&&void 0!==e?e:this;for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return Tn.apply(t,r)}}catch(e){}},setup(e){En.set(e,!0)}}),An=()=>{let e;return{name:"Dedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,r=t.message;if(!n&&!r)return!1;if(n&&!r||!n&&r)return!1;if(n!==r)return!1;if(!Rn(e,t))return!1;if(!xn(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Pn(t),r=Pn(e);if(!n||!r)return!1;if(n.type!==r.type||n.value!==r.value)return!1;if(!Rn(e,t))return!1;if(!xn(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return p&&U.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}};function xn(e,t){let n=en(e),r=en(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(r.length!==n.length)return!1;for(let o=0;o<r.length;o++){const e=r[o],t=n[o];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function Rn(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;try{return!(n.join("")!==r.join(""))}catch(o){return!1}}function Pn(e){var t;return null===(t=e.exception)||void 0===t||null===(t=t.values)||void 0===t?void 0:t[0]}function Mn(e,t){!0===t.debug&&(p?U.enable():D(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}));Ce().update(t.initialScope);const n=new e(t);return function(e){Ce().setClient(e)}(n),n.init(),n}function On(e){const t=e.protocol?"".concat(e.protocol,":"):"",n=e.port?":".concat(e.port):"";return"".concat(t,"//").concat(e.host).concat(n).concat(e.path?"/".concat(e.path):"","/api/")}function Nn(e,t,n){return t||"".concat(function(e){return"".concat(On(e)).concat(e.projectId,"/envelope/")}(e),"?").concat(function(e,t){const n={sentry_version:"7"};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client="".concat(t.name,"/").concat(t.version)),new URLSearchParams(n).toString()}(e,n))}function Dn(e){return[e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]]}function Ln(e,t){const[n,r]=e;return[n,[...r,t]]}function Fn(e,t){const n=e[1];for(const r of n){if(t(r,r[0].type))return!0}return!1}function qn(e){const t=d(l);return t.encodePolyfill?t.encodePolyfill(e):(new TextEncoder).encode(e)}function Un(e){const[t,n]=e;let r=JSON.stringify(t);function o(e){"string"===typeof r?r="string"===typeof e?r+e:[qn(r),e]:r.push("string"===typeof e?qn(e):e)}for(const a of n){const[e,t]=a;if(o("\n".concat(JSON.stringify(e),"\n")),"string"===typeof t||t instanceof Uint8Array)o(t);else{let e;try{e=JSON.stringify(t)}catch(i){e=JSON.stringify(tn(t))}o(e)}}return"string"===typeof r?r:function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let r=0;for(const o of e)n.set(o,r),r+=o.length;return n}(r)}function zn(e){return[{type:"span"},e]}function Hn(e){const t="string"===typeof e.data?qn(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Bn={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function jn(e){return Bn[e]}function Wn(e){if(null===e||void 0===e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Kn(e,t,n,r){var o;const i=null===(o=e.sdkProcessingMetadata)||void 0===o?void 0:o.dynamicSamplingContext;return s(s(s({event_id:e.event_id,sent_at:(new Date).toISOString()},t&&{sdk:t}),!!n&&r&&{dsn:et(r)}),i&&{trace:i})}function Gn(e){U.log("Ignoring span ".concat(e.op," - ").concat(e.description," because it matches `ignoreSpans`."))}function Vn(e,t){if(null===t||void 0===t||!t.length||!e.description)return!1;for(const n of t){if(Yn(n)){if(B(e.description,n))return p&&Gn(e),!0;continue}if(!n.name&&!n.op)continue;const t=!n.name||B(e.description,n.name),r=!n.op||e.op&&B(e.op,n.op);if(t&&r)return p&&Gn(e),!0}return!1}function Qn(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const o of e)o.parent_span_id===r&&(o.parent_span_id=n)}function Yn(e){return"string"===typeof e||e instanceof RegExp}function Jn(e,t,n,r){const o=Wn(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){var n,r,o,i;if(!t)return e;const a=e.sdk||{};e.sdk=s(s({},a),{},{name:a.name||t.name,version:a.version||t.version,integrations:[...(null===(n=e.sdk)||void 0===n?void 0:n.integrations)||[],...t.integrations||[]],packages:[...(null===(r=e.sdk)||void 0===r?void 0:r.packages)||[],...t.packages||[]],settings:null!==(o=e.sdk)&&void 0!==o&&o.settings||t.settings?s(s({},null===(i=e.sdk)||void 0===i?void 0:i.settings),t.settings):void 0})}(e,null===n||void 0===n?void 0:n.sdk);const a=Kn(e,o,r,t);delete e.sdkProcessingMetadata;return Dn(a,[[{type:i},e]])}function $n(e,t){var n;const r=null!==(n=null!==t&&void 0!==t?t:Xn(e))&&void 0!==n?n:[];if(0===r.length)return;const o=e.getOptions(),i=function(e,t,n,r){const o={};return null!==t&&void 0!==t&&t.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=et(r)),Dn(o,[(i=e,[{type:"log",item_count:i.length,content_type:"application/vnd.sentry.items.log+json"},{items:i}])]);var i}(r,o._metadata,o.tunnel,e.getDsn());Zn().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(i)}function Xn(e){return Zn().get(e)}function Zn(){return h("clientToLogBufferMap",()=>new WeakMap)}function er(e,t){var n;const r=null!==(n=null!==t&&void 0!==t?t:tr(e))&&void 0!==n?n:[];if(0===r.length)return;const o=e.getOptions(),i=function(e,t,n,r){const o={};return null!==t&&void 0!==t&&t.sdk&&(o.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(o.dsn=et(r)),Dn(o,[(i=e,[{type:"trace_metric",item_count:i.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:i}])]);var i}(r,o._metadata,o.tunnel,e.getDsn());nr().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(i)}function tr(e){return nr().get(e)}function nr(){return h("clientToMetricBufferMap",()=>new WeakMap)}const rr="Not capturing exception because it's already been captured.",or="Discarded session because of missing or non-string release",ir=Symbol.for("SentryInternalError"),ar=Symbol.for("SentryDoNotSendEventError");function sr(e){return{message:e,[ir]:!0}}function cr(e){return{message:e,[ar]:!0}}function lr(e){return!!e&&"object"===typeof e&&ir in e}function ur(e){return!!e&&"object"===typeof e&&ar in e}function dr(e,t,n,r,o){let i,a=0;e.on(n,()=>{a=0,clearTimeout(i)}),e.on(t,t=>{a+=r(t),a>=8e5?o(e):(clearTimeout(i),i=setTimeout(()=>{o(e)},5e3))}),e.on("flush",()=>{o(e)})}class hr{constructor(e){var t;if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=rt(e.dsn):p&&U.warn("No DSN provided, client will not send events."),this._dsn){const t=Nn(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport(s(s({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this)},e.transportOptions),{},{url:t}))}this._options.enableLogs&&dr(this,"afterCaptureLog","flushLogs",gr,$n),null!==(t=this._options._experiments)&&void 0!==t&&t.enableMetrics&&dr(this,"afterCaptureMetric","flushMetrics",mr,er)}captureException(e,t,n){const r=X();if(re(e))return p&&U.log(rr),r;const o=s({event_id:r},t);return this._process(this.eventFromException(e,o).then(e=>this._captureEvent(e,o,n))),o.event_id}captureMessage(e,t,n,r){const o=s({event_id:X()},n),i=w(e)?e:String(e),a=k(e)?this.eventFromMessage(i,t,o):this.eventFromException(e,o);return this._process(a.then(e=>this._captureEvent(e,o,r))),o.event_id}captureEvent(e,t,n){const r=X();if(null!==t&&void 0!==t&&t.originalException&&re(t.originalException))return p&&U.log(rr),r;const o=s({event_id:r},t),i=e.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope;return this._process(this._captureEvent(e,o,a||n,c)),o.event_id}captureSession(e){this.sendSession(e),ue(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(e){const t=this._transport;if(!t)return!0;this.emit("flush");const n=await this._isClientDoneProcessing(e),r=await t.flush(e);return n&&r}async close(e){const t=await this.flush(e);return this.getOptions().enabled=!1,this.emit("close"),t}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(e=>{let{name:t}=e;return t.startsWith("Spotlight")}))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const t=this._integrations[e.name];vn(this,e,this._integrations),t||yn(this,[e])}sendEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",e,t);let n=Jn(e,this._dsn,this._options._metadata,this._options.tunnel);for(const r of t.attachments||[])n=Ln(n,Hn(r));this.sendEnvelope(n).then(t=>this.emit("afterSendEvent",e,t))}sendSession(e){const{release:t,environment:n=xe}=this._options;if("aggregates"in e){const r=e.attrs||{};if(!r.release&&!t)return void(p&&U.warn(or));r.release=r.release||t,r.environment=r.environment||n,e.attrs=r}else{if(!e.release&&!t)return void(p&&U.warn(or));e.release=e.release||t,e.environment=e.environment||n}this.emit("beforeSendSession",e);const r=function(e,t,n,r){const o=Wn(n);return Dn(s(s({sent_at:(new Date).toISOString()},o&&{sdk:o}),!!r&&t&&{dsn:et(t)}),["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this._options.sendClientReports){const r="".concat(e,":").concat(t);p&&U.log('Recording outcome: "'.concat(r,'"').concat(n>1?" (".concat(n," times)"):"")),this._outcomes[r]=(this._outcomes[r]||0)+n}}on(e,t){const n=this._hooks[e]=this._hooks[e]||new Set,r=function(){return t(...arguments)};return n.add(r),()=>{n.delete(r)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const o=this._hooks[e];o&&o.forEach(e=>e(...n))}async sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)try{return await this._transport.send(e)}catch(t){return p&&U.error("Error while sending envelope:",t),{}}return p&&U.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach(t=>{t&&vn(e,t,n)}),n}(this,e),yn(this,e)}_updateSessionFromEvent(e,t){var n;let r="fatal"===t.level,o=!1;const i=null===(n=t.exception)||void 0===n?void 0:n.values;if(i){o=!0;for(const e of i){const t=e.mechanism;if(!1===(null===t||void 0===t?void 0:t.handled)){r=!0;break}}}const a="ok"===e.status;(a&&0===e.errors||a&&r)&&(ue(e,s(s({},r&&{status:"crashed"}),{},{errors:e.errors||Number(o||r)})),this.captureSession(e))}async _isClientDoneProcessing(e){let t=0;for(;!e||t<e;){if(await new Promise(e=>setTimeout(e,1)),!this._numProcessing)return!0;t++}return!1}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,r){const o=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&null!==i&&void 0!==i&&i.length&&(t.integrations=i),this.emit("preprocessEvent",e,t),e.type||r.setLastEventId(e.event_id||t.event_id),on(o,e,t,n,this,r).then(e=>{if(null===e)return e;this.emit("postprocessEvent",e,t),e.contexts=s({trace:Ae(n)},e.contexts);const r=Ft(this,n);return e.sdkProcessingMetadata=s({dynamicSamplingContext:r},e.sdkProcessingMetadata),e})}_captureEvent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ce(),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Te();return p&&pr(e)&&U.log("Captured error event `".concat(bn(e)[0]||"<unknown>","`")),this._processEvent(e,t,n,r).then(e=>e.event_id,e=>{p&&(ur(e)?U.log(e.message):lr(e)?U.warn(e.message):U.warn(e))})}_processEvent(e,t,n,r){const o=this.getOptions(),{sampleRate:i}=o,a=fr(e),c=pr(e),l=e.type||"error",u="before send for type `".concat(l,"`"),d="undefined"===typeof i?void 0:ht(i);if(c&&"number"===typeof d&&Math.random()>d)return this.recordDroppedEvent("sample_rate","error"),Pe(cr("Discarding event because it's not included in the random sample (sampling rate = ".concat(i,")")));const h="replay_event"===l?"replay":l;return this._prepareEvent(e,t,n,r).then(e=>{if(null===e)throw this.recordDroppedEvent("event_processor",h),cr("An event processor returned `null`, will not send event.");if(t.data&&!0===t.data.__sentry__)return e;const n=function(e,t,n,r){const{beforeSend:o,beforeSendTransaction:i,beforeSendSpan:a,ignoreSpans:c}=t;let l=n;if(pr(l)&&o)return o(l,r);if(fr(l)){if(a||c){const t=function(e){var t,n,r;const{trace_id:o,parent_span_id:i,span_id:a,status:s,origin:c,data:l,op:u}=null!==(t=null===(n=e.contexts)||void 0===n?void 0:n.trace)&&void 0!==t?t:{};return{data:null!==l&&void 0!==l?l:{},description:e.transaction,op:u,parent_span_id:i,span_id:null!==a&&void 0!==a?a:"",start_timestamp:null!==(r=e.start_timestamp)&&void 0!==r?r:0,status:s,timestamp:e.timestamp,trace_id:null!==o&&void 0!==o?o:"",origin:c,profile_id:null===l||void 0===l?void 0:l[We],exclusive_time:null===l||void 0===l?void 0:l[Ke],measurements:e.measurements,is_segment:!0}}(l);if(null!==c&&void 0!==c&&c.length&&Vn(t,c))return null;if(a){const e=a(t);e?l=de(n,{type:"transaction",timestamp:(u=e).timestamp,start_timestamp:u.start_timestamp,transaction:u.description,contexts:{trace:{trace_id:u.trace_id,span_id:u.span_id,parent_span_id:u.parent_span_id,op:u.op,status:u.status,origin:u.origin,data:s(s(s({},u.data),u.profile_id&&{[We]:u.profile_id}),u.exclusive_time&&{[Ke]:u.exclusive_time})}},measurements:u.measurements}):Ot()}if(l.spans){const t=[],n=l.spans;for(const e of n)if(null!==c&&void 0!==c&&c.length&&Vn(e,c))Qn(n,e);else if(a){const n=a(e);n?t.push(n):(Ot(),t.push(e))}else t.push(e);const r=l.spans.length-t.length;r&&e.recordDroppedEvent("before_send","span",r),l.spans=t}}if(i){if(l.spans){const e=l.spans.length;l.sdkProcessingMetadata=s(s({},n.sdkProcessingMetadata),{},{spanCountBeforeProcessing:e})}return i(l,r)}}var u;return l}(this,o,e,t);return function(e,t){const n="".concat(t," must return `null` or a valid event.");if(C(e))return e.then(e=>{if(!S(e)&&null!==e)throw sr(n);return e},e=>{throw sr("".concat(t," rejected with ").concat(e))});if(!S(e)&&null!==e)throw sr(n);return e}(n,u)}).then(o=>{if(null===o){if(this.recordDroppedEvent("before_send",h),a){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw cr("".concat(u," returned `null`, will not send event."))}const i=n.getSession()||r.getSession();if(c&&i&&this._updateSessionFromEvent(i,o),a){var l;const e=((null===(l=o.sdkProcessingMetadata)||void 0===l?void 0:l.spanCountBeforeProcessing)||0)-(o.spans?o.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const d=o.transaction_info;if(a&&d&&o.transaction!==e.transaction){const e="custom";o.transaction_info=s(s({},d),{},{source:e})}return this.sendEvent(o,t),o}).then(null,e=>{if(ur(e)||lr(e))throw e;throw this.captureException(e,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:e}),sr("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(e))})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(e=>{let[t,n]=e;const[r,o]=t.split(":");return{reason:r,category:o,quantity:n}})}_flushOutcomes(){p&&U.log("Flushing outcomes...");const e=this._clearOutcomes();if(0===e.length)return void(p&&U.log("No outcomes to send"));if(!this._dsn)return void(p&&U.log("No dsn provided, will not send outcomes"));p&&U.log("Sending outcomes:",e);const t=(n=e,Dn((r=this._options.tunnel&&et(this._dsn))?{dsn:r}:{},[[{type:"client_report"},{timestamp:o||oe(),discarded_events:n}]]));var n,r,o;this.sendEnvelope(t)}}function pr(e){return void 0===e.type}function fr(e){return"transaction"===e.type}function mr(e){let t=0;return e.name&&(t+=2*e.name.length),"string"===typeof e.value?t+=2*e.value.length:t+=8,t+yr(e.attributes)}function gr(e){let t=0;return e.message&&(t+=2*e.message.length),t+yr(e.attributes)}function yr(e){if(!e)return 0;let t=0;return Object.values(e).forEach(e=>{Array.isArray(e)?t+=e.length*vr(e[0]):k(e)?t+=vr(e):t+=100}),t}function vr(e){return"string"===typeof e?2*e.length:"number"===typeof e?8:"boolean"===typeof e?4:0}function br(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[t],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"npm";const o=e._metadata||{};o.sdk||(o.sdk={name:"sentry.javascript.".concat(t),packages:n.map(e=>({name:"".concat(r,":@sentry/").concat(e),version:c})),version:c}),e._metadata=o}function wr(e){var t;"aggregates"in e?void 0===(null===(t=e.attrs)||void 0===t?void 0:t.ip_address)&&(e.attrs=s(s({},e.attrs),{},{ip_address:"{{auto}}"})):void 0===e.ipAddress&&(e.ipAddress="{{auto}}")}function kr(e,t){const n=Cr(e,t),r={type:Ir(t),value:Ar(t)};return n.length&&(r.stacktrace={frames:n}),void 0===r.type&&""===r.value&&(r.value="Unrecoverable error caught"),r}function Sr(e,t,n,r){const o=Ie(),i=null===o||void 0===o?void 0:o.getOptions().normalizeDepth,a=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}return}(t),s={__serialized__:nn(t,i)};if(a)return{exception:{values:[kr(e,a)]},extra:s};const c={exception:{values:[{type:_(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Pr(t,{isUnhandledRejection:r})}]},extra:s};if(n){const t=Cr(e,n);t.length&&(c.exception.values[0].stacktrace={frames:t})}return c}function _r(e,t){return{exception:{values:[kr(e,t)]}}}function Cr(e,t){const n=t.stacktrace||t.stack||"",r=function(e){if(e&&Tr.test(e.message))return 1;return 0}(t),o=function(e){if("number"===typeof e.framesToPop)return e.framesToPop;return 0}(t);try{return e(n,r,o)}catch(i){}return[]}const Tr=/Minified React error #\d+;/i;function Er(e){return"undefined"!==typeof WebAssembly&&"undefined"!==typeof WebAssembly.Exception&&e instanceof WebAssembly.Exception}function Ir(e){const t=null===e||void 0===e?void 0:e.name;if(!t&&Er(e)){return e.message&&Array.isArray(e.message)&&2==e.message.length?e.message[0]:"WebAssembly.Exception"}return t}function Ar(e){const t=null===e||void 0===e?void 0:e.message;return Er(e)?Array.isArray(e.message)&&2==e.message.length?e.message[1]:"wasm exception":t?t.error&&"string"===typeof t.error.message?t.error.message:t:"No error message"}function xr(e,t,n,r,o){let i;if(y(t)&&t.error){return _r(e,t.error)}if(v(t)||g(t,"DOMException")){const o=t;if("stack"in t)i=_r(e,t);else{const t=o.name||(v(o)?"DOMError":"DOMException"),a=o.message?"".concat(t,": ").concat(o.message):t;i=Rr(e,a,n,r),te(i,a)}return"code"in o&&(i.tags=s(s({},i.tags),{},{"DOMException.code":"".concat(o.code)})),i}if(m(t))return _r(e,t);if(S(t)||_(t)){return i=Sr(e,t,n,o),ne(i,{synthetic:!0}),i}return i=Rr(e,t,n,r),te(i,"".concat(t),void 0),ne(i,{synthetic:!0}),i}function Rr(e,t,n,r){const o={};if(r&&n){const r=Cr(e,n);r.length&&(o.exception={values:[{value:t,stacktrace:{frames:r}}]}),ne(o,{synthetic:!0})}if(w(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return o.logentry={message:e,params:n},o}return o.message=t,o}function Pr(e,t){let{isUnhandledRejection:n}=t;const r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;const n=Object.keys(Q(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return z(r,t);for(let o=n.length;o>0;o--){const e=n.slice(0,o).join(", ");if(!(e.length>t))return o===n.length?e:z(e,t)}return""}(e),o=n?"promise rejection":"exception";if(y(e))return"Event `ErrorEvent` captured as ".concat(o," with message `").concat(e.message,"`");if(_(e)){const t=function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}(e);return"Event `".concat(t,"` (type=").concat(e.type,") captured as ").concat(o)}return"Object captured as ".concat(o," with keys: ").concat(r)}const Mr=l;let Or=0;function Nr(){return Or>0}function Dr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!function(e){return"function"===typeof e}(e))return e;try{const t=e.__sentry_wrapped__;if(t)return"function"===typeof t?t:e;if(V(e))return e}catch(r){return e}const n=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];try{const n=r.map(e=>Dr(e,t));return e.apply(this,n)}catch(i){throw Or++,setTimeout(()=>{Or--}),Ee(e=>{e.addEventProcessor(e=>(t.mechanism&&(te(e,void 0,void 0),ne(e,t.mechanism)),e.extra=s(s({},e.extra),{},{arguments:r}),e)),cn(i)}),i}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}catch(o){}G(n,e),K(e,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get:()=>e.name})}catch(i){}return n}function Lr(){const e=P(),{referrer:t}=Mr.document||{},{userAgent:n}=Mr.navigator||{};return{url:e,headers:s(s({},t&&{Referer:t}),n&&{"User-Agent":n})}}class Fr extends hr{constructor(e){var t;const n=function(e){var t;return s({release:"string"===typeof __SENTRY_RELEASE__?__SENTRY_RELEASE__:null===(t=Mr.SENTRY_RELEASE)||void 0===t?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0},e)}(e);br(n,"browser",["browser"],Mr.SENTRY_SDK_SOURCE||"npm"),null!==(t=n._metadata)&&void 0!==t&&t.sdk&&(n._metadata.sdk.settings=s({infer_ip:n.sendDefaultPii?"auto":"never"},n._metadata.sdk.settings)),super(n);const{sendDefaultPii:r,sendClientReports:o,enableLogs:i,_experiments:a}=this._options;Mr.document&&(o||i||null!==a&&void 0!==a&&a.enableMetrics)&&Mr.document.addEventListener("visibilitychange",()=>{"hidden"===Mr.document.visibilityState&&(o&&this._flushOutcomes(),i&&$n(this),null!==a&&void 0!==a&&a.enableMetrics&&er(this))}),r&&this.on("beforeSendSession",wr)}eventFromException(e,t){return function(e,t,n,r){const o=xr(e,t,(null===n||void 0===n?void 0:n.syntheticException)||void 0,r);return ne(o),o.level="error",null!==n&&void 0!==n&&n.event_id&&(o.event_id=n.event_id),Re(o)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2?arguments[2]:void 0;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;const i=Rr(e,t,(null===r||void 0===r?void 0:r.syntheticException)||void 0,o);return i.level=n,null!==r&&void 0!==r&&r.event_id&&(i.event_id=r.event_id),Re(i)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}_prepareEvent(e,t,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n,r)}}const qr={},Ur={};function zr(e,t){qr[e]=qr[e]||[],qr[e].push(t)}function Hr(e,t){if(!Ur[e]){Ur[e]=!0;try{t()}catch(n){p&&U.error("Error while instrumenting ".concat(e),n)}}}function Br(e,t){const n=e&&qr[e];if(n)for(const o of n)try{o(t)}catch(r){p&&U.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Zt(o),"\nError:"),r)}}function jr(){"console"in l&&O.forEach(function(e){e in l.console&&W(l.console,e,function(t){return N[e]=t,function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Br("console",{args:n,level:e});const o=N[e];null===o||void 0===o||o.apply(l.console,n)}})})}const Wr=l;function Kr(){if(!("fetch"in Wr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function Gr(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Vr(e,t){const n="fetch";zr(n,e),Hr(n,()=>Qr(void 0,t))}function Qr(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&!function(){if("string"===typeof EdgeRuntime)return!0;if(!Kr())return!1;if(Gr(Wr.fetch))return!0;let e=!1;const t=Wr.document;if(t&&"function"===typeof t.createElement)try{var n;const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),null!==(n=r.contentWindow)&&void 0!==n&&n.fetch&&(e=Gr(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){p&&U.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}()||W(l,"fetch",function(t){return function(){const n=new Error;for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];const{method:a,url:c}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:$r(t),method:Jr(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:$r(t),method:Jr(t,"method")?String(t.method).toUpperCase():"GET"}}(o),u={args:o,fetchData:{method:a,url:c},startTimestamp:1e3*se(),virtualError:n,headers:Xr(o)};return e||Br("fetch",s({},u)),t.apply(l,o).then(async t=>(e?e(t):Br("fetch",s(s({},u),{},{endTimestamp:1e3*se(),response:t})),t),e=>{if(Br("fetch",s(s({},u),{},{endTimestamp:1e3*se(),error:e})),m(e)&&void 0===e.stack&&(e.stack=n.stack,K(e,"framesToPop",1)),e instanceof TypeError&&("Failed to fetch"===e.message||"Load failed"===e.message||"NetworkError when attempting to fetch resource."===e.message))try{const t=new URL(u.fetchData.url);e.message="".concat(e.message," (").concat(t.host,")")}catch(t){}throw e})}})}function Yr(e){let t;try{t=e.clone()}catch(n){return}!async function(e,t){if(null!==e&&void 0!==e&&e.body){const r=e.body,o=r.getReader(),i=setTimeout(()=>{r.cancel().then(null,()=>{})},9e4);let a=!0;for(;a;){let e;try{e=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:n}=await o.read();clearTimeout(e),n&&(t(),a=!1)}catch(n){a=!1}finally{clearTimeout(e)}}clearTimeout(i),o.releaseLock(),r.cancel().then(null,()=>{})}}(t,()=>{Br("fetch-body-resolved",{endTimestamp:1e3*se(),response:e})})}function Jr(e,t){return!!e&&"object"===typeof e&&!!e[t]}function $r(e){return"string"===typeof e?e:e?Jr(e,"url")?e.url:e.toString?e.toString():"":""}function Xr(e){const[t,n]=e;try{if("object"===typeof n&&null!==n&&"headers"in n&&n.headers)return new Headers(n.headers);if(I(t))return new Headers(t.headers)}catch(r){}}const Zr=100;function eo(e,t){const n=Ie(),r=Te();if(!n)return;const{beforeBreadcrumb:o=null,maxBreadcrumbs:i=Zr}=n.getOptions();if(i<=0)return;const a=s({timestamp:oe()},e),c=o?D(()=>o(a,t)):a;null!==c&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}function to(e){return"warn"===e?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}function no(e){return void 0===e?void 0:e>=400&&e<500?"warning":e>=500?"error":void 0}function ro(e){return"isRelative"in e}function oo(e,t){const n=e.indexOf("://")<=0&&0!==e.indexOf("//"),r=null!==t&&void 0!==t?t:n?"thismessage:/":void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const t=new URL(e,r);return n?{isRelative:n,pathname:t.pathname,search:t.search,hash:t.hash}:t}catch(o){}}function io(e){if(ro(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function ao(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const so=l;let co,lo,uo;function ho(e){zr("dom",e),Hr("dom",po)}function po(){if(!so.document)return;const e=Br.bind(null,"dom"),t=fo(e,!0);so.document.addEventListener("click",t,!1),so.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{var n,r;const o=null===(n=so[t])||void 0===n?void 0:n.prototype;null!==o&&void 0!==o&&null!==(r=o.hasOwnProperty)&&void 0!==r&&r.call(o,"addEventListener")&&(W(o,"addEventListener",function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{const r=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},i=r[n]=r[n]||{refCount:0};if(!i.handler){const r=fo(e);i.handler=r,t.call(this,n,r,o)}i.refCount++}catch(i){}return t.call(this,n,r,o)}}),W(o,"removeEventListener",function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this.__sentry_instrumentation_handlers__||{},o=n[t];o&&(o.refCount--,o.refCount<=0&&(e.call(this,t,o.handler,r),o.handler=void 0,delete n[t]),0===Object.keys(n).length&&delete this.__sentry_instrumentation_handlers__)}catch(o){}return e.call(this,t,n,r)}}))})}function fo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n=>{if(!n||n._sentryCaptured)return;const r=function(e){try{return e.target}catch(t){return null}}(n);if(function(e,t){return"keypress"===e&&(null===t||void 0===t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,r))return;K(n,"_sentryCaptured",!0),r&&!r._sentryId&&K(r,"_sentryId",X());const o="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==lo)return!1;try{if(!e.target||e.target._sentryId!==uo)return!1}catch(t){}return!0}(n)){e({event:n,name:o,global:t}),lo=n.type,uo=r?r._sentryId:void 0}clearTimeout(co),co=so.setTimeout(()=>{uo=void 0,lo=void 0},1e3)}}const mo="__sentry_xhr_v3__";function go(e){zr("xhr",e),Hr("xhr",yo)}function yo(){if(!so.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const r=new Error,o=1e3*se(),i=b(n[0])?n[0].toUpperCase():void 0,a=function(e){if(b(e))return e;try{return e.toString()}catch(t){}return}(n[1]);if(!i||!a)return e.apply(t,n);t[mo]={method:i,url:a,request_headers:{}},"POST"===i&&a.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const s=()=>{const e=t[mo];if(e&&4===t.readyState){try{e.status_code=t.status}catch(n){}Br("xhr",{endTimestamp:1e3*se(),startTimestamp:o,xhr:t,virtualError:r})}};return"onreadystatechange"in t&&"function"===typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(s(),e.apply(t,n))}):t.addEventListener("readystatechange",s),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[r,o]=n,i=t[mo];return i&&b(r)&&b(o)&&(i.request_headers[r.toLowerCase()]=o),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const r=t[mo];if(!r)return e.apply(t,n);void 0!==n[0]&&(r.body=n[0]);return Br("xhr",{startTimestamp:1e3*se(),xhr:t}),e.apply(t,n)}})}let vo;function bo(e){const t="history";zr(t,e),Hr(t,wo)}function wo(){function e(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n.length>2?n[2]:void 0;if(o){const t=vo,r=function(e){try{return new URL(e,so.location.origin).toString()}catch(t){return e}}(String(o));if(vo=r,t===r)return e.apply(this,n);Br("history",{from:t,to:r})}return e.apply(this,n)}}so.addEventListener("popstate",()=>{const e=so.location.href,t=vo;if(vo=e,t===e)return;Br("history",{from:t,to:e})}),"history"in Wr&&Wr.history&&(W(so.history,"pushState",e),W(so.history,"replaceState",e))}const ko="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,So=1024,_o=function(){const e=s({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"Breadcrumbs",setup(t){e.console&&function(e){const t="console";zr(t,e),Hr(t,jr)}(function(e){return function(t){if(Ie()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:to(t.level),message:H(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message="Assertion failed: ".concat(H(t.args.slice(1)," ")||"console.assert"),n.data.arguments=t.args.slice(1)}eo(n,{input:t.args,level:t.level})}}(t)),e.dom&&ho(function(e,t){return function(n){if(Ie()!==e)return;let r,o,i="object"===typeof t?t.serializeAttribute:void 0,a="object"===typeof t&&"number"===typeof t.maxStringLength?t.maxStringLength:void 0;a&&a>So&&(ko&&U.warn("`dom.maxStringLength` cannot exceed ".concat(So,", but a value of ").concat(a," was configured. Sentry will use ").concat(So," instead.")),a=So),"string"===typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;r=x(t,{keyAttrs:i,maxStringLength:a}),o=M(t)}catch(c){r="<unknown>"}if(0===r.length)return;const s={category:"ui.".concat(n.name),message:r};o&&(s.data={"ui.component_name":o}),eo(s,{event:n.event,name:n.name,global:n.global})}}(t,e.dom)),e.xhr&&go(function(e){return function(t){if(Ie()!==e)return;const{startTimestamp:n,endTimestamp:r}=t,o=t.xhr[mo];if(!n||!r||!o)return;const{method:i,url:a,status_code:s,body:c}=o,l={method:i,url:a,status_code:s},u={xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:r},d={category:"xhr",data:l,type:"http",level:no(s)};e.emit("beforeOutgoingRequestBreadcrumb",d,u),eo(d,u)}}(t)),e.fetch&&Vr(function(e){return function(t){if(Ie()!==e)return;const{startTimestamp:n,endTimestamp:r}=t;if(r&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.fetchData.method,t.fetchData.url,t.error){const o=t.fetchData,i={data:t.error,input:t.args,startTimestamp:n,endTimestamp:r},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),eo(a,i)}else{const o=t.response,i=s(s({},t.fetchData),{},{status_code:null===o||void 0===o?void 0:o.status});t.fetchData.request_body_size,t.fetchData.response_body_size,null===o||void 0===o||o.status;const a={input:t.args,response:o,startTimestamp:n,endTimestamp:r},c={category:"fetch",data:i,type:"http",level:no(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),eo(c,a)}}}(t)),e.history&&bo(function(e){return function(t){var n;if(Ie()!==e)return;let r=t.from,o=t.to;const i=ao(Mr.location.href);let a=r?ao(r):void 0;const s=ao(o);null!==(n=a)&&void 0!==n&&n.path||(a=i),i.protocol===s.protocol&&i.host===s.host&&(o=s.relative),i.protocol===a.protocol&&i.host===a.host&&(r=a.relative),eo({category:"navigation",data:{from:r,to:o}})}}(t)),e.sentry&&t.on("beforeSendEvent",function(e){return function(t){Ie()===e&&eo({category:"sentry.".concat("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:ee(t)},{event:t})}}(t))}}};const Co=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],To=function(){const e=s({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"BrowserApiErrors",setupOnce(){e.setTimeout&&W(Mr,"setTimeout",Eo),e.setInterval&&W(Mr,"setInterval",Eo),e.requestAnimationFrame&&W(Mr,"requestAnimationFrame",Io),e.XMLHttpRequest&&"XMLHttpRequest"in Mr&&W(XMLHttpRequest.prototype,"send",Ao);const t=e.eventTarget;if(t){(Array.isArray(t)?t:Co).forEach(t=>function(e,t){var n,r;const o=null===(n=Mr[e])||void 0===n?void 0:n.prototype;if(null===o||void 0===o||null===(r=o.hasOwnProperty)||void 0===r||!r.call(o,"addEventListener"))return;W(o,"addEventListener",function(n){return function(r,o,i){try{"function"===typeof o.handleEvent&&(o.handleEvent=Dr(o.handleEvent,{mechanism:{data:{handler:Zt(o),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch(a){}return t.unregisterOriginalCallbacks&&function(e,t,n){e&&"object"===typeof e&&"removeEventListener"in e&&"function"===typeof e.removeEventListener&&e.removeEventListener(t,n)}(this,r,o),n.apply(this,[r,Dr(o,{mechanism:{data:{handler:Zt(o),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),i])}}),W(o,"removeEventListener",function(e){return function(t,n,r){try{const o=n.__sentry_wrapped__;o&&e.call(this,t,o,r)}catch(o){}return e.call(this,t,n,r)}})}(t,e))}}}};function Eo(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];const o=n[0];return n[0]=Dr(o,{mechanism:{handled:!1,type:"auto.browser.browserapierrors.".concat(Zt(e))}}),e.apply(this,n)}}function Io(e){return function(t){return e.apply(this,[Dr(t,{mechanism:{data:{handler:Zt(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Ao(e){return function(){const t=this;["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in t&&"function"===typeof t[e]&&W(t,e,function(t){const n={mechanism:{data:{handler:Zt(t)},handled:!1,type:"auto.browser.browserapierrors.xhr.".concat(e)}},r=V(t);return r&&(n.mechanism.data.handler=Zt(r)),Dr(t,n)})});for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.apply(this,r)}}const xo=()=>({name:"BrowserSession",setupOnce(){"undefined"!==typeof Mr.document?(dn({ignoreDuration:!0}),fn(),bo(e=>{let{from:t,to:n}=e;void 0!==t&&t!==n&&(dn({ignoreDuration:!0}),fn())})):ko&&U.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.")}});let Ro=null;function Po(e){const t="error";zr(t,e),Hr(t,Mo)}function Mo(){Ro=l.onerror,l.onerror=function(e,t,n,r,o){return Br("error",{column:r,error:o,line:n,msg:e,url:t}),!!Ro&&Ro.apply(this,arguments)},l.onerror.__SENTRY_INSTRUMENTED__=!0}let Oo=null;function No(e){const t="unhandledrejection";zr(t,e),Hr(t,Do)}function Do(){Oo=l.onunhandledrejection,l.onunhandledrejection=function(e){return Br("unhandledrejection",e),!Oo||Oo.apply(this,arguments)},l.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Lo=function(){const e=s({onerror:!0,onunhandledrejection:!0},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{});return{name:"GlobalHandlers",setupOnce(){Error.stackTraceLimit=50},setup(t){e.onerror&&(!function(e){Po(t=>{const{stackParser:n,attachStacktrace:r}=qo();if(Ie()!==e||Nr())return;const{msg:o,url:i,line:a,column:s,error:c}=t,l=function(e,t,n,r){var o;const i=e.exception=e.exception||{},a=i.values=i.values||[],s=a[0]=a[0]||{},c=s.stacktrace=s.stacktrace||{},l=c.frames=c.frames||[],u=r,d=n,h=null!==(o=function(e){if(!b(e)||0===e.length)return;if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return"<data:".concat(n).concat(r?",base64":"",">")}return e.slice(0,1024)}(t))&&void 0!==o?o:P();0===l.length&&l.push({colno:u,filename:h,function:Vt,in_app:!0,lineno:d});return e}(xr(n,c||o,void 0,r,!1),i,a,s);l.level="error",ln(l,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}(t),Fo("onerror")),e.onunhandledrejection&&(!function(e){No(t=>{const{stackParser:n,attachStacktrace:r}=qo();if(Ie()!==e||Nr())return;const o=function(e){if(k(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch(t){}return e}(t),i=k(o)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(o))}]}}:xr(n,o,void 0,r,!0);i.level="error",ln(i,{originalException:o,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}(t),Fo("onunhandledrejection"))}}};function Fo(e){ko&&U.log("Global Handler attached: ".concat(e))}function qo(){const e=Ie();return(null===e||void 0===e?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}const Uo=()=>({name:"HttpContext",preprocessEvent(e){var t;if(!Mr.navigator&&!Mr.location&&!Mr.document)return;const n=Lr(),r=s(s({},n.headers),null===(t=e.request)||void 0===t?void 0:t.headers);e.request=s(s(s({},n),e.request),{},{headers:r})}});function zo(e,t,n,r,o,i){var a;if(null===(a=o.exception)||void 0===a||!a.values||!i||!T(i.originalException,Error))return;const s=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;s&&(o.exception.values=Ho(e,t,r,i.originalException,n,o.exception.values,s,0))}function Ho(e,t,n,r,o,i,a,s){if(i.length>=n+1)return i;let c=[...i];if(T(r[o],Error)){Bo(a,s);const i=e(t,r[o]),l=c.length;jo(i,o,l,s),c=Ho(e,t,n,r[o],o,[i,...c],i,l)}return Array.isArray(r.errors)&&r.errors.forEach((r,i)=>{if(T(r,Error)){Bo(a,s);const l=e(t,r),u=c.length;jo(l,"errors[".concat(i,"]"),u,s),c=Ho(e,t,n,r,o,[l,...c],l,u)}}),c}function Bo(e,t){e.mechanism=s(s(s({handled:!0,type:"auto.core.linked_errors"},e.mechanism),"AggregateError"===e.type&&{is_exception_group:!0}),{},{exception_id:t})}function jo(e,t,n,r){e.mechanism=s(s({handled:!0},e.mechanism),{},{type:"chained",source:t,exception_id:n,parent_id:r})}const Wo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.limit||5,n=e.key||"cause";return{name:"LinkedErrors",preprocessEvent(e,r,o){zo(kr,o.getOptions().stackParser,n,t,e,r)}}};function Ko(e,t,n,r){const o={filename:e,function:"<anonymous>"===t?Vt:t,in_app:!0};return void 0!==n&&(o.lineno=n),void 0!==r&&(o.colno=r),o}const Go=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Vo=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Qo=/\((\S*)(?::(\d+))(?::(\d+))\)/,Yo=/at (.+?) ?\(data:(.+?),/,Jo=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,$o=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Xo=Jt(...[[30,e=>{const t=e.match(Yo);if(t)return{filename:"<data:".concat(t[2],">"),function:t[1]};const n=Go.exec(e);if(n){const[,e,t,r]=n;return Ko(e,Vt,+t,+r)}const r=Vo.exec(e);if(r){if(r[2]&&0===r[2].indexOf("eval")){const e=Qo.exec(r[2]);e&&(r[2]=e[1],r[3]=e[2],r[4]=e[3])}const[e,t]=Zo(r[1]||Vt,r[2]);return Ko(t,e,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}}],[50,e=>{const t=Jo.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=$o.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Vt;return[n,e]=Zo(n,e),Ko(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}]]),Zo=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:Vt,n?"safari-extension:".concat(t):"safari-web-extension:".concat(t)]:[e,t]},ei=Symbol.for("SentryBufferFullError");function ti(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;const t=new Set;function n(e){t.delete(e)}return{get $(){return Array.from(t)},add:function(r){if(!(t.size<e))return Pe(ei);const o=r();return t.add(o),o.then(()=>n(o),()=>n(o)),o},drain:function(e){if(!t.size)return Re(!0);const n=Promise.allSettled(Array.from(t)).then(()=>!0);if(!e)return n;const r=[n,new Promise(t=>setTimeout(()=>t(!1),e))];return Promise.race(r)}}}function ni(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return function(e,t){return e[t]||e.all||0}(e,t)>n}function ri(e,t){let{statusCode:n,headers:r}=t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();const i=s({},e),a=null===r||void 0===r?void 0:r["x-sentry-rate-limits"],c=null===r||void 0===r?void 0:r["retry-after"];if(a)for(const s of a.trim().split(",")){const[e,t,,,n]=s.split(":",5),r=parseInt(e,10),a=1e3*(isNaN(r)?60:r);if(t)for(const s of t.split(";"))"metric_bucket"===s&&n&&!n.split(";").includes("custom")||(i[s]=o+a);else i.all=o+a}else c?i.all=o+function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();const n=parseInt("".concat(e),10);if(!isNaN(n))return 1e3*n;const r=Date.parse("".concat(e));return isNaN(r)?6e4:r-t}(c,o):429===n&&(i.all=o+6e4);return i}const oi="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,ii={};function ai(e){const t=ii[e];if(t)return t;let n=so[e];if(Gr(n))return ii[e]=n.bind(so);const r=so.document;if(r&&"function"===typeof r.createElement)try{const t=r.createElement("iframe");t.hidden=!0,r.head.appendChild(t);const o=t.contentWindow;null!==o&&void 0!==o&&o[e]&&(n=o[e]),r.head.removeChild(t)}catch(o){oi&&U.warn("Could not create sandbox iframe for ".concat(e," check, bailing to window.").concat(e,": "),o)}return n?ii[e]=n.bind(so):n}function si(){return ai("setTimeout")(...arguments)}function ci(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ai("fetch"),n=0,r=0;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ti(e.bufferSize||64),r={};return{send:function(o){const i=[];if(Fn(o,(t,n)=>{const o=jn(n);ni(r,o)?e.recordDroppedEvent("ratelimit_backoff",o):i.push(t)}),0===i.length)return Promise.resolve({});const a=Dn(o[0],i),s=t=>{Fn(a,(n,r)=>{e.recordDroppedEvent(t,jn(r))})};return n.add(()=>t({body:Un(a)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&p&&U.warn("Sentry responded with status code ".concat(e.statusCode," to sent event.")),r=ri(r,e),e),e=>{throw s("network_error"),p&&U.error("Encountered error running transport request:",e),e})).then(e=>e,e=>{if(e===ei)return p&&U.error("Skipped sending event because buffer is full."),s("queue_overflow"),Promise.resolve({});throw e})},flush:e=>n.drain(e)}}(e,async function(o){const i=o.body.length;n+=i,r++;const a=s({body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15},e.fetchOptions);try{const n=await t(e.url,a);return{statusCode:n.status,headers:{"x-sentry-rate-limits":n.headers.get("X-Sentry-Rate-Limits"),"retry-after":n.headers.get("Retry-After")}}}catch(c){throw function(e){ii[e]=void 0}("fetch"),c}finally{n-=i,r--}})}function li(){return!!function(){var e;if("undefined"===typeof Mr.window)return!1;const t=Mr;if(t.nw)return!1;const n=t.chrome||t.browser;if(null===n||void 0===n||null===(e=n.runtime)||void 0===e||!e.id)return!1;const r=P(),o=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Mr===Mr.top&&o.some(e=>r.startsWith("".concat(e,"://"))))}()&&(ko&&D(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0)}var ui=n(43);class di{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._traceId=e.traceId||he(),this._spanId=e.spanId||pe()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:0}}end(e){}setAttribute(e,t){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,t,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,t){}}function hi(e){if(!e||0===e.length)return;const t={};return e.forEach(e=>{const n=e.attributes||{},r=n[He],o=n[Be];"string"===typeof r&&"number"===typeof o&&(t[e.name]={value:o,unit:r})}),t}class pi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._traceId=e.traceId||he(),this._spanId=e.spanId||pe(),this._startTime=e.startTimestamp||se(),this._links=e.links,this._attributes={},this.setAttributes(s({[Ue]:"manual",[qe]:e.op},e.attributes)),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,t){}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}setAttribute(e,t){return void 0===t?delete this._attributes[e]:this._attributes[e]=t,this}setAttributes(e){return Object.keys(e).forEach(t=>this.setAttribute(t,e[t])),this}updateStartTime(e){this._startTime=St(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(De,"custom"),this}end(e){this._endTime||(this._endTime=St(e),function(e){if(!p)return;const{description:t="< unknown name >",op:n="< unknown op >"}=Ct(e),{spanId:r}=e.spanContext(),o=Pt(e)===e,i='[Tracing] Finishing "'.concat(n,'" ').concat(o?"root ":"",'span "').concat(t,'" with ID ').concat(r);U.log(i)}(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[qe],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Et(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ue],profile_id:this._attributes[We],exclusive_time:this._attributes[Ke],measurements:hi(this._events),is_segment:this._isStandaloneSpan&&Pt(this)===this||void 0,segment_id:this._isStandaloneSpan?Pt(this).spanContext().spanId:void 0,links:kt(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,t,n){p&&U.log("[Tracing] Adding an event to span:",e);const r=fi(t)?t:n||se(),o=fi(t)?{}:t||{},i={name:e,time:St(r),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=Ie();e&&e.emit("spanEnd",this);if(!(this._isStandaloneSpan||this===Pt(this)))return;if(this._isStandaloneSpan)return void(this._sampled?function(e){const t=Ie();if(!t)return;const n=e[1];if(!n||0===n.length)return void t.recordDroppedEvent("before_send","span");t.sendEnvelope(e)}(function(e,t){const n=qt(e[0]),r=null===t||void 0===t?void 0:t.getDsn(),o=null===t||void 0===t?void 0:t.getOptions().tunnel,i=s(s({sent_at:(new Date).toISOString()},function(e){return!!e.trace_id&&!!e.public_key}(n)&&{trace:n}),!!o&&r&&{dsn:et(r)}),{beforeSendSpan:a,ignoreSpans:c}=(null===t||void 0===t?void 0:t.getOptions())||{},l=null!==c&&void 0!==c&&c.length?e.filter(e=>!Vn(Ct(e),c)):e,u=e.length-l.length;u&&(null===t||void 0===t||t.recordDroppedEvent("before_send","span",u));const d=a?e=>{const t=Ct(e);return a(t)||(Ot(),t)}:Ct,h=[];for(const s of l){const e=d(s);e&&h.push(zn(e))}return Dn(i,h)}([this],e)):(p&&U.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span")));const t=this._convertSpanToTransaction();if(t){(dt(this).scope||Ce()).captureEvent(t)}}_convertSpanToTransaction(){var e;if(!mi(Ct(this)))return;this._name||(p&&U.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=dt(this),r=null===t||void 0===t||null===(e=t.getScopeData().sdkProcessingMetadata)||void 0===e?void 0:e.normalizedRequest;if(!0!==this._sampled)return;const o=Rt(this).filter(e=>e!==this&&!function(e){return e instanceof pi&&e.isStandaloneSpan()}(e)).map(e=>Ct(e)).filter(mi),i=this._attributes[De];delete this._attributes[je],o.forEach(e=>{delete e.data[je]});const a=s({contexts:{trace:bt(this)},spans:o.length>1e3?o.sort((e,t)=>e.start_timestamp-t.start_timestamp).slice(0,1e3):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:qt(this)},request:r},i&&{transaction_info:{source:i}}),c=hi(this._events);return c&&Object.keys(c).length&&(p&&U.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function fi(e){return e&&"number"===typeof e||e instanceof Date||Array.isArray(e)}function mi(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function gi(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:()=>{};try{n=e()}catch(i){throw t(i),r(),i}return function(e,t,n,r){if(C(e))return e.then(e=>(n(),r(e),e),e=>{throw t(e),n(),e});return n(),r(e),e}(n,t,r,o)}const yi="__SENTRY_SUPPRESS_TRACING__";function vi(e){const t=Si();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=ki(e),{forceTransaction:r,parentSpan:o}=e;return(e.scope?t=>Ee(e.scope,t):void 0!==o?e=>bi(o,e):e=>e())(()=>{const t=Ce(),i=Ci(t,o);return e.onlyIfParent&&!i?new di:wi({parentSpan:i,spanArguments:n,forceTransaction:r,scope:t})})}function bi(e,t){const n=Si();return n.withActiveSpan?n.withActiveSpan(e,t):Ee(n=>(me(n,e||void 0),t(n)))}function wi(e){let{parentSpan:t,spanArguments:n,forceTransaction:r,scope:o}=e;if(!ot()){const e=new di;if(r||!t){Dt(e,s({sampled:"false",sample_rate:"0",transaction:n.name},qt(e)))}return e}const i=Te();let a;if(t&&!r)a=function(e,t,n){const{spanId:r,traceId:o}=e.spanContext(),i=!t.getScopeData().sdkProcessingMetadata[yi]&&Tt(e),a=i?new pi(s(s({},n),{},{parentSpanId:r,traceId:o,sampled:i})):new di({traceId:o});xt(e,a);const c=Ie();c&&(c.emit("spanStart",a),n.endTimestamp&&c.emit("spanEnd",a));return a}(t,o,n),xt(t,a);else if(t){const e=qt(t),{traceId:r,spanId:i}=t.spanContext(),c=Tt(t);a=_i(s({traceId:r,parentSpanId:i},n),o,c),Dt(a,e)}else{const{traceId:e,dsc:t,parentSpanId:r,sampled:c}=s(s({},i.getPropagationContext()),o.getPropagationContext());a=_i(s({traceId:e,parentSpanId:r},n),o,c),t&&Dt(a,t)}return function(e){if(!p)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=Ct(e),{spanId:o}=e.spanContext(),i=Tt(e),a=Pt(e),s=a===e,c="[Tracing] Starting ".concat(i?"sampled":"unsampled"," ").concat(s?"root ":"","span"),l=["op: ".concat(n),"name: ".concat(t),"ID: ".concat(o)];if(r&&l.push("parent ID: ".concat(r)),!s){const{op:e,description:t}=Ct(a);l.push("root ID: ".concat(a.spanContext().spanId)),e&&l.push("root op: ".concat(e)),t&&l.push("root description: ".concat(t))}U.log("".concat(c,"\n  ").concat(l.join("\n  ")))}(a),ut(a,o,i),a}function ki(e){const t=s({isStandalone:(e.experimental||{}).standalone},e);if(e.startTime){const n=s({},t);return n.startTimestamp=St(e.startTime),delete n.startTime,n}return t}function Si(){return _e(u())}function _i(e,t,n){var r,o;const i=Ie(),a=(null===i||void 0===i?void 0:i.getOptions())||{},{name:c=""}=e,l={spanAttributes:s({},e.attributes),spanName:c,parentSampled:n};null===i||void 0===i||i.emit("beforeSampling",l,{decision:!1});const u=null!==(r=l.parentSampled)&&void 0!==r?r:n,d=l.spanAttributes,h=t.getPropagationContext(),[f,m,g]=t.getScopeData().sdkProcessingMetadata[yi]?[!1]:function(e,t,n){if(!ot(e))return[!1];let r,o;"function"===typeof e.tracesSampler?(o=e.tracesSampler(s(s({},t),{},{inheritOrSampleWith:e=>"number"===typeof t.parentSampleRate?t.parentSampleRate:"boolean"===typeof t.parentSampled?Number(t.parentSampled):e})),r=!0):void 0!==t.parentSampled?o=t.parentSampled:"undefined"!==typeof e.tracesSampleRate&&(o=e.tracesSampleRate,r=!0);const i=ht(o);if(void 0===i)return p&&U.warn("[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ".concat(JSON.stringify(o)," of type ").concat(JSON.stringify(typeof o),".")),[!1];if(!i)return p&&U.log("[Tracing] Discarding transaction because ".concat("function"===typeof e.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),[!1,i,r];const a=n<i;return a||p&&U.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ".concat(Number(o),")")),[a,i,r]}(a,{name:c,parentSampled:u,attributes:d,parentSampleRate:ht(null===(o=h.dsc)||void 0===o?void 0:o.sample_rate)},h.sampleRand),y=new pi(s(s({},e),{},{attributes:s({[De]:"custom",[Le]:void 0!==m&&g?m:void 0},d),sampled:f}));return!f&&i&&(p&&U.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),i.recordDroppedEvent("sample_rate","transaction")),i&&i.emit("spanStart",y),y}function Ci(e,t){if(t)return t;if(null===t)return;const n=ge(e);if(!n)return;const r=Ie();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Pt(n):n}function Ti(e){return void 0!==e?t=>bi(e,t):e=>e()}const Ei={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3};function Ii(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=new Map;let r,o=!1,i="externalFinish",a=!t.disableAutoFinish;const c=[],{idleTimeout:l=Ei.idleTimeout,finalTimeout:u=Ei.finalTimeout,childSpanTimeout:d=Ei.childSpanTimeout,beforeSpanEnd:h,trimIdleSpanEndTimestamp:f=!0}=t,m=Ie();if(!m||!ot()){const e=new di;return Dt(e,s({sample_rate:"0",sampled:"false"},qt(e))),e}const g=Ce(),y=Mt(),v=function(e){const t=vi(e);return me(Ce(),t),p&&U.log("[Tracing] Started span is an idle span"),t}(e);function b(){r&&(clearTimeout(r),r=void 0)}function w(e){b(),r=setTimeout(()=>{!o&&0===n.size&&a&&(i="idleTimeout",v.end(e))},l)}function k(e){r=setTimeout(()=>{!o&&a&&(i="heartbeatFailed",v.end(e))},d)}function S(e){o=!0,n.clear(),c.forEach(e=>e()),me(g,y);const t=Ct(v),{start_timestamp:r}=t;if(!r)return;t.data[ze]||v.setAttribute(ze,i),U.log('[Tracing] Idle span "'.concat(t.op,'" finished'));const a=Rt(v).filter(e=>e!==v);let s=0;a.forEach(t=>{t.isRecording()&&(t.setStatus({code:2,message:"cancelled"}),t.end(e),p&&U.log("[Tracing] Cancelling span since span ended early",JSON.stringify(t,void 0,2)));const n=Ct(t),{timestamp:r=0,start_timestamp:o=0}=n,i=o<=e,a=r-o<=(u+l)/1e3;if(p){const e=JSON.stringify(t,void 0,2);i?a||U.log("[Tracing] Discarding span since it finished after idle span final timeout",e):U.log("[Tracing] Discarding span since it happened after idle span was finished",e)}a&&i||(!function(e,t){e[It]&&e[It].delete(t)}(v,t),s++)}),s>0&&v.setAttribute("sentry.idle_span_discarded_spans",s)}return v.end=new Proxy(v.end,{apply(e,t,n){if(h&&h(v),t instanceof di)return;const[r,...o]=n,i=St(r||se()),a=Rt(v).filter(e=>e!==v),s=Ct(v);if(!a.length||!f)return S(i),Reflect.apply(e,t,[i,...o]);const c=m.getOptions().ignoreSpans,l=null===a||void 0===a?void 0:a.reduce((e,t)=>{const n=Ct(t);return n.timestamp?c&&Vn(n,c)?e:e?Math.max(e,n.timestamp):n.timestamp:e},void 0),d=s.start_timestamp,p=Math.min(d?d+u/1e3:1/0,Math.max(d||-1/0,Math.min(i,l||1/0)));return S(p),Reflect.apply(e,t,[p,...o])}}),c.push(m.on("spanStart",e=>{if(o||e===v||Ct(e).timestamp||e instanceof pi&&e.isStandaloneSpan())return;var t;Rt(v).includes(e)&&(t=e.spanContext().spanId,b(),n.set(t,!0),k(se()+d/1e3))})),c.push(m.on("spanEnd",e=>{var t;o||(t=e.spanContext().spanId,n.has(t)&&n.delete(t),0===n.size&&w(se()+l/1e3))})),c.push(m.on("idleSpanEnableAutoFinish",e=>{e===v&&(a=!0,w(),n.size&&k())})),t.disableAutoFinish||w(),setTimeout(()=>{o||(v.setStatus({code:2,message:"deadline_exceeded"}),i="finalTimeout",v.end())},u),v}let Ai=!1;const xi=(e,t,n,r)=>{let o,i;return a=>{t.value>=0&&(a||r)&&(i=t.value-(null!==o&&void 0!==o?o:0),(i||void 0===o)&&(o=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}},Ri=function(){var e,t;let n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const r=null===(e=so.performance)||void 0===e||null===(t=e.getEntriesByType)||void 0===t?void 0:t.call(e,"navigation")[0];if(!n||r&&r.responseStart>0&&r.responseStart<performance.now())return r},Pi=()=>{var e;const t=Ri();return null!==(e=null===t||void 0===t?void 0:t.activationStart)&&void 0!==e?e:0},Mi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;const n=Ri();let r="navigate";var o,i;n&&(null!==(o=so.document)&&void 0!==o&&o.prerendering||Pi()>0?r="prerender":null!==(i=so.document)&&void 0!==i&&i.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-")));return{name:e,value:t,rating:"good",delta:0,entries:[],id:"v5-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},Oi=new WeakMap;function Ni(e,t){return Oi.get(e)||Oi.set(e,new t),Oi.get(e)}class Di{constructor(){Di.prototype.__init.call(this),Di.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){var t;if(e.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),null===(t=this._onAfterProcessingUnexpectedShift)||void 0===t||t.call(this,e)}}const Li=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(e=>{Promise.resolve().then(()=>{t(e.getEntries())})});return r.observe(s({type:e,buffered:!0},n)),r}}catch(r){}},Fi=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let qi=-1;const Ui=e=>{"hidden"===so.document.visibilityState&&qi>-1&&(qi="visibilitychange"===e.type?e.timeStamp:0,zi())},zi=()=>{removeEventListener("visibilitychange",Ui,!0),removeEventListener("prerenderingchange",Ui,!0)},Hi=()=>{if(so.document&&qi<0){var e;const t=Pi(),n=so.document.prerendering||null===(e=globalThis.performance.getEntriesByType("visibility-state").filter(e=>"hidden"===e.name&&e.startTime>t)[0])||void 0===e?void 0:e.startTime;qi=null!==n&&void 0!==n?n:(()=>{var e,t;return"hidden"!==(null===(e=so.document)||void 0===e?void 0:e.visibilityState)||null!==(t=so.document)&&void 0!==t&&t.prerendering?1/0:0})(),addEventListener("visibilitychange",Ui,!0),addEventListener("prerenderingchange",Ui,!0)}return{get firstHiddenTime(){return qi}}},Bi=e=>{var t;null!==(t=so.document)&&void 0!==t&&t.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},ji=[1800,3e3],Wi=[.1,.25],Ki=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bi(()=>{const n=Hi(),r=Mi("FCP");let o;const i=Li("paint",e=>{for(const t of e)"first-contentful-paint"===t.name&&(i.disconnect(),t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-Pi(),0),r.entries.push(t),o(!0)))});i&&(o=xi(e,r,ji,t.reportAllChanges))})}(Fi(()=>{const n=Mi("CLS",0);let r;const o=Ni(t,Di),i=e=>{for(const t of e)o._processEntry(t);o._sessionValue>n.value&&(n.value=o._sessionValue,n.entries=o._sessionEntries,r())},a=Li("layout-shift",i);var s,c;a&&(r=xi(e,n,Wi,t.reportAllChanges),null===(s=so.document)||void 0===s||s.addEventListener("visibilitychange",()=>{var e;"hidden"===(null===(e=so.document)||void 0===e?void 0:e.visibilityState)&&(i(a.takeRecords()),r(!0))}),null===so||void 0===so||null===(c=so.setTimeout)||void 0===c||c.call(so,r))}))};let Gi=0,Vi=1/0,Qi=0;const Yi=e=>{e.forEach(e=>{e.interactionId&&(Vi=Math.min(Vi,e.interactionId),Qi=Math.max(Qi,e.interactionId),Gi=Qi?(Qi-Vi)/7+1:0)})};let Ji;const $i=()=>Ji?Gi:performance.interactionCount||0,Xi=()=>{"interactionCount"in performance||Ji||(Ji=Li("event",Yi,{type:"event",buffered:!0,durationThreshold:0}))};let Zi=0;class ea{constructor(){ea.prototype.__init.call(this),ea.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Zi=$i(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(($i()-Zi)/50));return this._longestInteractionList[e]}_processEntry(e){var t;if(null===(t=this._onBeforeProcessingEntry)||void 0===t||t.call(this,e),!e.interactionId&&"first-input"!==e.entryType)return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(e.interactionId);if(r||this._longestInteractionList.length<10||e.duration>n._latency){var o;if(r?e.duration>r._latency?(r.entries=[e],r._latency=e.duration):e.duration===r._latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((e,t)=>t._latency-e._latency),this._longestInteractionList.length>10){const e=this._longestInteractionList.splice(10);for(const t of e)this._longestInteractionMap.delete(t.id)}null===(o=this._onAfterProcessingINPCandidate)||void 0===o||o.call(this,r)}}}const ta=e=>{const t=t=>{var n;"pagehide"!==t.type&&"hidden"!==(null===(n=so.document)||void 0===n?void 0:n.visibilityState)||e(t)};so.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},na=e=>{var t;const n=so.requestIdleCallback||so.setTimeout;"hidden"===(null===(t=so.document)||void 0===t?void 0:t.visibilityState)?e():(n(e=Fi(e)),ta(e))},ra=[200,500];class oa{_processEntry(e){var t;null===(t=this._onBeforeProcessingEntry)||void 0===t||t.call(this,e)}}const ia=[2500,4e3],aa=[800,1800],sa=e=>{var t,n;null!==(t=so.document)&&void 0!==t&&t.prerendering?Bi(()=>sa(e)):"complete"!==(null===(n=so.document)||void 0===n?void 0:n.readyState)?addEventListener("load",()=>sa(e),!0):setTimeout(e)},ca={},la={};let ua,da,ha,pa;function fa(e){return _a("cls",e,ba,ua,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function ma(e){return _a("lcp",e,wa,da,arguments.length>1&&void 0!==arguments[1]&&arguments[1])}function ga(e){return _a("inp",e,Sa,pa)}function ya(e,t){return Ca(e,t),la[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);Li(e,t=>{va(e,{entries:t})},t)}(e),la[e]=!0),Ta(e,t)}function va(e,t){const n=ca[e];if(null!==n&&void 0!==n&&n.length)for(const o of n)try{o(t)}catch(r){oi&&U.error("Error while triggering instrumentation handler.\nType: ".concat(e,"\nName: ").concat(Zt(o),"\nError:"),r)}}function ba(){return Ki(e=>{va("cls",{metric:e}),ua=e},{reportAllChanges:!0})}function wa(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Bi(()=>{const n=Hi(),r=Mi("LCP");let o;const i=Ni(t,oa),a=e=>{t.reportAllChanges||(e=e.slice(-1));for(const t of e)i._processEntry(t),t.startTime<n.firstHiddenTime&&(r.value=Math.max(t.startTime-Pi(),0),r.entries=[t],o())},s=Li("largest-contentful-paint",a);if(s){o=xi(e,r,ia,t.reportAllChanges);const n=Fi(()=>{a(s.takeRecords()),s.disconnect(),o(!0)});for(const e of["keydown","click","visibilitychange"])so.document&&addEventListener(e,()=>na(n),{capture:!0,once:!0})}})}(e=>{va("lcp",{metric:e}),da=e},{reportAllChanges:!0})}function ka(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Mi("TTFB"),r=xi(e,n,aa,t.reportAllChanges);sa(()=>{const e=Ri();e&&(n.value=Math.max(e.responseStart-Pi(),0),n.entries=[e],r(!0))})}(e=>{va("ttfb",{metric:e}),ha=e})}function Sa(){return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Bi(()=>{var n;Xi();const r=Mi("INP");let o;const i=Ni(t,ea),a=e=>{na(()=>{for(const n of e)i._processEntry(n);const t=i._estimateP98LongestInteraction();t&&t._latency!==r.value&&(r.value=t._latency,r.entries=t.entries,o())})},s=Li("event",a,{durationThreshold:null!==(n=t.durationThreshold)&&void 0!==n?n:40});o=xi(e,r,ra,t.reportAllChanges),s&&(s.observe({type:"first-input",buffered:!0}),ta(()=>{a(s.takeRecords()),o(!0)}))})}(e=>{va("inp",{metric:e}),pa=e})}function _a(e,t,n,r){let o,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return Ca(e,t),la[e]||(o=n(),la[e]=!0),r&&t({metric:r}),Ta(e,t,i?o:void 0)}function Ca(e,t){ca[e]=ca[e]||[],ca[e].push(t)}function Ta(e,t,n){return()=>{n&&n();const r=ca[e];if(!r)return;const o=r.indexOf(t);-1!==o&&r.splice(o,1)}}function Ea(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function Ia(e){return"number"===typeof e&&isFinite(e)}function Aa(e,t,n,r){let o=Object.assign({},(Ea(r),r));const i=Ct(e).start_timestamp;return i&&i>t&&"function"===typeof e.updateStartTime&&e.updateStartTime(t),bi(e,()=>{const e=vi(s({startTime:t},o));return e&&e.end(n),e})}function xa(e){var t;const n=Ie();if(!n)return;const{name:r,transaction:o,attributes:i,startTime:a}=e,{release:c,environment:l,sendDefaultPii:u}=n.getOptions(),d=n.getIntegrationByName("Replay"),h=null===d||void 0===d?void 0:d.getReplayId(),p=Ce(),f=p.getUser(),m=void 0!==f?f.email||f.id||f.ip_address:void 0;let g;try{g=p.getScopeData().contexts.profile.profile_id}catch(y){}return vi({name:r,attributes:s({release:c,environment:l,user:m||void 0,profile_id:g||void 0,replay_id:h||void 0,transaction:o,"user_agent.original":null===(t=so.navigator)||void 0===t?void 0:t.userAgent,"client.address":u?"{{auto}}":void 0},i),startTime:a,experimental:{standalone:!0}})}function Ra(){return so.addEventListener&&so.performance}function Pa(e){return e/1e3}function Ma(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch(t){return!1}}function Oa(e,t){let n,r=!1;function o(e){!r&&n&&t(e,n),r=!0}ta(()=>{o("pagehide")});const i=e.on("beforeStartNavigationSpan",(e,t)=>{null!==t&&void 0!==t&&t.isRedirect||(o("navigation"),i(),a())}),a=e.on("afterStartPageLoadSpan",e=>{n=e.spanContext().spanId,a()})}function Na(e){let t,n=0;if(!Ma("layout-shift"))return;const r=fa(e=>{let{metric:r}=e;const o=r.entries[r.entries.length-1];o&&(n=r.value,t=o)},!0);Oa(e,(e,o)=>{!function(e,t,n,r){var o;oi&&U.log("Sending CLS span (".concat(e,")"));const i=t?Pa((ce()||0)+t.startTime):se(),a=Ce().getScopeData().transactionName,s=t?x(null===(o=t.sources[0])||void 0===o?void 0:o.node):"Layout shift",c={[Ue]:"auto.http.browser.cls",[qe]:"ui.webvital.cls",[Ke]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};null!==t&&void 0!==t&&t.sources&&t.sources.forEach((e,t)=>{c["cls.source.".concat(t+1)]=x(e.node)});const l=xa({name:s,transaction:a,attributes:c,startTime:i});l&&(l.addEvent("cls",{[He]:"",[Be]:e}),l.end(i))}(n,t,o,e),r()})}function Da(e){let t,n=0;if(!Ma("largest-contentful-paint"))return;const r=ma(e=>{let{metric:r}=e;const o=r.entries[r.entries.length-1];o&&(n=r.value,t=o)},!0);Oa(e,(e,o)=>{!function(e,t,n,r){oi&&U.log("Sending LCP span (".concat(e,")"));const o=Pa((ce()||0)+((null===t||void 0===t?void 0:t.startTime)||0)),i=Ce().getScopeData().transactionName,a=t?x(t.element):"Largest contentful paint",s={[Ue]:"auto.http.browser.lcp",[qe]:"ui.webvital.lcp",[Ke]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(s["lcp.element"]=x(t.element)),t.id&&(s["lcp.id"]=t.id),t.url&&(s["lcp.url"]=t.url.trim().slice(0,200)),null!=t.loadTime&&(s["lcp.loadTime"]=t.loadTime),null!=t.renderTime&&(s["lcp.renderTime"]=t.renderTime),null!=t.size&&(s["lcp.size"]=t.size));const c=xa({name:a,transaction:i,attributes:s,startTime:o});c&&(c.addEvent("lcp",{[He]:"millisecond",[Be]:e}),c.end(o))}(n,t,o,e),r()})}function La(e){return e?((ce()||performance.timeOrigin)+e)/1e3:e}function Fa(e){var t;const n={};if(void 0!=e.nextHopProtocol){const{name:t,version:r}=function(e){let t="unknown",n="unknown",r="";for(const o of e){if("/"===o){[t,n]=e.split("/");break}if(!isNaN(Number(o))){t="h"===r?"http":r,n=e.split(r)[1];break}r+=o}return r===e&&(t=r),{name:t,version:n}}(e.nextHopProtocol);n["network.protocol.version"]=r,n["network.protocol.name"]=t}return ce()||null!==(t=Ra())&&void 0!==t&&t.timeOrigin?(r=s(s({},n),{},{"http.request.redirect_start":La(e.redirectStart),"http.request.redirect_end":La(e.redirectEnd),"http.request.worker_start":La(e.workerStart),"http.request.fetch_start":La(e.fetchStart),"http.request.domain_lookup_start":La(e.domainLookupStart),"http.request.domain_lookup_end":La(e.domainLookupEnd),"http.request.connect_start":La(e.connectStart),"http.request.secure_connection_start":La(e.secureConnectionStart),"http.request.connection_end":La(e.connectEnd),"http.request.request_start":La(e.requestStart),"http.request.response_start":La(e.responseStart),"http.request.response_end":La(e.responseEnd),"http.request.time_to_first_byte":null!=e.responseStart?e.responseStart/1e3:void 0}),Object.fromEntries(Object.entries(r).filter(e=>{let[,t]=e;return null!=t}))):n;var r}const qa=2147483647;let Ua,za,Ha=0,Ba={};function ja(e){let{recordClsStandaloneSpans:t,recordLcpStandaloneSpans:n,client:r}=e;const o=Ra();if(o&&ce()){o.mark&&so.performance.mark("sentry-tracing-init");const e=n?Da(r):ma(e=>{let{metric:t}=e;const n=t.entries[t.entries.length-1];n&&(Ba.lcp={value:t.value,unit:"millisecond"},Ua=n)},!0),i=function(){return e=e=>{let{metric:t}=e;t.entries[t.entries.length-1]&&(Ba.ttfb={value:t.value,unit:"millisecond"})},_a("ttfb",e,ka,ha);var e}(),a=t?Na(r):fa(e=>{let{metric:t}=e;const n=t.entries[t.entries.length-1];n&&(Ba.cls={value:t.value,unit:""},za=n)},!0);return()=>{null===e||void 0===e||e(),i(),null===a||void 0===a||a()}}return()=>{}}function Wa(e,t){const n=Ra(),r=ce();if(null===n||void 0===n||!n.getEntries||!r)return;const o=Pa(r),i=n.getEntries(),{op:a,start_timestamp:c}=Ct(e);i.slice(Ha).forEach(n=>{const r=Pa(n.startTime),i=Pa(Math.max(0,n.duration));if(!("navigation"===a&&c&&o+r<c))switch(n.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Ka(e,t,r,n)}),Ka(e,t,"secureConnection",n,"TLS/SSL"),Ka(e,t,"fetch",n,"cache"),Ka(e,t,"domainLookup",n,"DNS"),function(e,t,n){const r=n+Pa(t.requestStart),o=n+Pa(t.responseEnd),i=n+Pa(t.responseStart);t.responseEnd&&(Aa(e,r,o,{op:"browser.request",name:t.name,attributes:{[Ue]:"auto.ui.browser.metrics"}}),Aa(e,i,o,{op:"browser.response",name:t.name,attributes:{[Ue]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,n,o);break;case"mark":case"paint":case"measure":{!function(e,t,n,r,o,i){if(function(e){if("measure"!==(null===e||void 0===e?void 0:e.entryType))return;try{return"Components \u269b"===e.detail.devtools.track}catch(t){return}}(t))return;if(["mark","measure"].includes(t.entryType)&&j(t.name,i))return;const a=Ri(!1),s=Pa(a?a.requestStart:0),c=o+Math.max(n,s),l=o+n,u=l+r,d={[Ue]:"auto.resource.browser.metrics"};c!==l&&(d["sentry.browser.measure_happened_before_request"]=!0,d["sentry.browser.measure_start_time"]=c);(function(e,t){try{const o=t.detail;if(!o)return;if("object"===typeof o){for(const[t,r]of Object.entries(o))if(r&&k(r))e["sentry.browser.measure.detail.".concat(t)]=r;else if(void 0!==r)try{e["sentry.browser.measure.detail.".concat(t)]=JSON.stringify(r)}catch(n){}return}if(k(o))return void(e["sentry.browser.measure.detail"]=o);try{e["sentry.browser.measure.detail"]=JSON.stringify(o)}catch(r){}}catch(o){}})(d,t),c<=u&&Aa(e,c,u,{name:t.name,op:t.entryType,attributes:d})}(e,n,r,i,o,t.ignorePerformanceApiSpans);const a=Hi(),s=n.startTime<a.firstHiddenTime;"first-paint"===n.name&&s&&(Ba.fp={value:n.startTime,unit:"millisecond"}),"first-contentful-paint"===n.name&&s&&(Ba.fcp={value:n.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,r,o,i,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const c=t.initiatorType?"resource.".concat(t.initiatorType):"resource.other";if(null!==a&&void 0!==a&&a.includes(c))return;const l={[Ue]:"auto.resource.browser.metrics"},u=ao(n);u.protocol&&(l["url.scheme"]=u.protocol.split(":").pop());u.host&&(l["server.address"]=u.host);l["url.same_origin"]=n.includes(so.location.origin),function(e,t,n){n.forEach(n=>{let[r,o]=n;const i=e[r];null!=i&&("number"===typeof i&&i<qa||"string"===typeof i)&&(t[o]=i)})}(t,l,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const d=s(s({},l),Fa(t)),h=i+r,p=h+o;Aa(e,h,p,{name:n.replace(so.location.origin,""),op:c,attributes:d})}(e,n,n.name,r,i,o,t.ignoreResourceSpans)}}),Ha=Math.max(i.length-1,0),function(e){const t=so.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),Ia(n.rtt)&&(Ba["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Ia(t.deviceMemory)&&e.setAttribute("deviceMemory","".concat(t.deviceMemory," GB"));Ia(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===a&&(function(e){const t=Ri(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(Ba),t.recordClsOnPageloadSpan||delete Ba.cls,t.recordLcpOnPageloadSpan||delete Ba.lcp,Object.entries(Ba).forEach(e=>{let[t,n]=e;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Mt();const o=r&&Pt(r);o&&(p&&U.log("[Measurement] Setting measurement on root span: ".concat(e," = ").concat(t," ").concat(n)),o.addEvent(e,{[Be]:t,[He]:n}))}(t,n.value,n.unit)}),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",Pi()),function(e,t){var n;Ua&&t.recordLcpOnPageloadSpan&&(Ua.element&&e.setAttribute("lcp.element",x(Ua.element)),Ua.id&&e.setAttribute("lcp.id",Ua.id),Ua.url&&e.setAttribute("lcp.url",Ua.url.trim().slice(0,200)),null!=Ua.loadTime&&e.setAttribute("lcp.loadTime",Ua.loadTime),null!=Ua.renderTime&&e.setAttribute("lcp.renderTime",Ua.renderTime),e.setAttribute("lcp.size",Ua.size));null!==(n=za)&&void 0!==n&&n.sources&&t.recordClsOnPageloadSpan&&za.sources.forEach((t,n)=>e.setAttribute("cls.source.".concat(n+1),x(t.node)))}(e,t)),Ua=void 0,za=void 0,Ba={}}function Ka(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n;const i=function(e){if("secureConnection"===e)return"connectEnd";if("fetch"===e)return"domainLookupStart";return"".concat(e,"End")}(n),a=t[i],c=t["".concat(n,"Start")];c&&a&&Aa(e,r+Pa(c),r+Pa(a),{op:"browser.".concat(o),name:t.name,attributes:s({[Ue]:"auto.ui.browser.metrics"},"redirect"===n&&null!=t.redirectCount?{"http.redirect_count":t.redirectCount}:{})})}const Ga=[],Va=new Map;function Qa(){if(Ra()&&ce()){const e=ga(Ja);return()=>{e()}}return()=>{}}const Ya={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};const Ja=e=>{let{metric:t}=e;if(void 0==t.value)return;const n=Pa(t.value);if(n>60)return;const r=t.entries.find(e=>e.duration===t.value&&Ya[e.name]);if(!r)return;const{interactionId:o}=r,i=Ya[r.name],a=Pa(ce()+r.startTime),s=Mt(),c=s?Pt(s):void 0,l=(null!=o?Va.get(o):void 0)||c,u=l?Ct(l).description:Ce().getScopeData().transactionName,d=xa({name:x(r.target),transaction:u,attributes:{[Ue]:"auto.http.browser.inp",[qe]:"ui.interaction.".concat(i),[Ke]:r.duration},startTime:a});d&&(d.addEvent("inp",{[He]:"millisecond",[Be]:t.value}),d.end(a+n))};const $a=e=>{let{entries:t}=e;const n=Mt(),r=n?Pt(n):void 0,o=r?Ct(r).description:Ce().getScopeData().transactionName;t.forEach(e=>{var t;const n=e;if(!n.identifier)return;const r=n.name,i=n.renderTime,a=n.loadTime,[s,c]=a?[Pa(a),"load-time"]:i?[Pa(i),"render-time"]:[se(),"entry-emission"],l="image-paint"===r?Pa(Math.max(0,(null!==i&&void 0!==i?i:0)-(null!==a&&void 0!==a?a:0))):0,u={[Ue]:"auto.ui.browser.elementtiming",[qe]:"ui.elementtiming",[De]:"component","sentry.span_start_time_source":c,"sentry.transaction_name":o,"element.id":n.id,"element.type":(null===(t=n.element)||void 0===t||null===(t=t.tagName)||void 0===t?void 0:t.toLowerCase())||"unknown","element.size":n.naturalWidth&&n.naturalHeight?"".concat(n.naturalWidth,"x").concat(n.naturalHeight):void 0,"element.render_time":i,"element.load_time":a,"element.url":n.url||void 0,"element.identifier":n.identifier,"element.paint_type":r};!function(e,t){const n=Si();if(n.startSpan)return n.startSpan(e,t);const r=ki(e),{forceTransaction:o,parentSpan:i,scope:a}=e;Ee(null===a||void 0===a?void 0:a.clone(),()=>Ti(i)(()=>{const n=Ce(),a=Ci(n,i),s=e.onlyIfParent&&!a?new di:wi({parentSpan:a,spanArguments:r,forceTransaction:o,scope:n});return me(n,s),gi(()=>t(s),()=>{const{status:e}=Ct(s);!s.isRecording()||e&&"ok"!==e||s.setStatus({code:2,message:"internal_error"})},()=>{s.end()})}))}({name:"element[".concat(n.identifier,"]"),attributes:u,startTime:s,onlyIfParent:!0},e=>{e.end(s+l)})})};const Xa="sentry_previous_trace",Za="sentry.previous_trace";function es(e,t){let{linkPreviousTrace:n,consistentTraceSampling:r}=t;const o="session-storage"===n;let i=o?function(){try{var e;const t=null===(e=Mr.sessionStorage)||void 0===e?void 0:e.getItem(Xa);return JSON.parse(t)}catch(t){return}}():void 0;e.on("spanStart",e=>{if(Pt(e)!==e)return;const t=Ce().getPropagationContext();i=function(e,t,n){const r=Ct(t);function o(){try{var e,t,o;return null!==(e=Number(null===(t=n.dsc)||void 0===t?void 0:t.sample_rate))&&void 0!==e?e:Number(null===(o=r.data)||void 0===o?void 0:o[Le])}catch(i){return 0}}const i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:o(),sampleRand:n.sampleRand};if(!e)return i;const a=e.spanContext;if(a.traceId===r.trace_id)return e;Date.now()/1e3-e.startTimestamp<=3600&&(ko&&U.log("Adding previous_trace ".concat(a," link to span ").concat(s({op:r.op},t.spanContext()))),t.addLink({context:a,attributes:{[Ge]:"previous_trace"}}),t.setAttribute(Za,"".concat(a.traceId,"-").concat(a.spanId,"-").concat(ts(a)?1:0)));return i}(i,e,t),o&&function(e){try{Mr.sessionStorage.setItem(Xa,JSON.stringify(e))}catch(t){ko&&U.warn("Could not store previous trace in sessionStorage",t)}}(i)});let a=!0;r&&e.on("beforeSampling",e=>{if(!i)return;const t=Ce(),n=t.getPropagationContext();a&&n.parentSpanId?a=!1:(t.setPropagationContext(s(s({},n),{},{dsc:s(s({},n.dsc),{},{sample_rate:String(i.sampleRate),sampled:String(ts(i.spanContext))}),sampleRand:i.sampleRand})),e.parentSampled=ts(i.spanContext),e.parentSampleRate=i.sampleRate,e.spanAttributes=s(s({},e.spanAttributes),{},{[Fe]:i.sampleRate}))})}function ts(e){return 1===e.traceFlags}function ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e.client||Ie();if(!function(){const e=Ie();return!1!==(null===e||void 0===e?void 0:e.getOptions().enabled)&&!(null===e||void 0===e||!e.getTransport())}()||!t)return{};const n=_e(u());if(n.getTraceData)return n.getTraceData(e);const r=e.scope||Ce(),o=e.span||Mt(),i=o?function(e){const{traceId:t,spanId:n}=e.spanContext();return mt(t,n,Tt(e))}(o):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return mt(t,r,n)}(r),a=Je(o?qt(o):Ft(t,r));if(!pt.test(i))return U.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const s={"sentry-trace":i,baggage:a};if(e.propagateTraceparent){const e=o?function(e){const{traceId:t,spanId:n}=e.spanContext();return gt(t,n,Tt(e))}(o):function(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return gt(t,r,n)}(r);e&&(s.traceparent=e)}return s}function rs(e,t,n,r,o){if(!e.fetchData)return;const{method:i,url:a}=e.fetchData,c=ot()&&t(a);if(e.endTimestamp&&c){const t=e.fetchData.__span;if(!t)return;const n=r[t];return void(n&&(!function(e,t){if(t.response){var n;at(e,t.response.status);const r=null===(n=t.response)||void 0===n||null===(n=n.headers)||void 0===n?void 0:n.get("content-length");if(r){const t=parseInt(r);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus({code:2,message:"internal_error"});e.end()}(n,e),function(e,t,n){var r;const o="object"===typeof n&&null!==n?n.onRequestSpanEnd:void 0;null===o||void 0===o||o(e,{headers:null===(r=t.response)||void 0===r?void 0:r.headers,error:t.error})}(n,e,o),delete r[t]))}const{spanOrigin:l="auto.http.browser",propagateTraceparent:u=!1}="object"===typeof o?o:{spanOrigin:o},d=!!Mt(),h=c&&d?vi(function(e,t,n){const r=oo(e);return{name:r?"".concat(t," ").concat(io(r)):t,attributes:is(e,r,t,n)}}(a,i,l)):new di;if(e.fetchData.__span=h.spanContext().spanId,r[h.spanContext().spanId]=h,n(e.fetchData.url)){const t=e.args[0],n=e.args[1]||{},r=function(e,t,n,r){const o=ns({span:n,propagateTraceparent:r}),i=o["sentry-trace"],a=o.baggage,c=o.traceparent;if(!i)return;const l=t.headers||(I(e)?e.headers:void 0);if(l){if(function(e){return"undefined"!==typeof Headers&&T(e,Headers)}(l)){const e=new Headers(l);if(e.get("sentry-trace")||e.set("sentry-trace",i),r&&c&&!e.get("traceparent")&&e.set("traceparent",c),a){const t=e.get("baggage");t?os(t)||e.set("baggage","".concat(t,",").concat(a)):e.set("baggage",a)}return e}if(Array.isArray(l)){const e=[...l];l.find(e=>"sentry-trace"===e[0])||e.push(["sentry-trace",i]),r&&c&&!l.find(e=>"traceparent"===e[0])&&e.push(["traceparent",c]);const t=l.find(e=>"baggage"===e[0]&&os(e[1]));return a&&!t&&e.push(["baggage",a]),e}{const e="sentry-trace"in l?l["sentry-trace"]:void 0,t="traceparent"in l?l.traceparent:void 0,n="baggage"in l?l.baggage:void 0,o=n?Array.isArray(n)?[...n]:[n]:[],u=n&&(Array.isArray(n)?n.find(e=>os(e)):os(n));a&&!u&&o.push(a);const d=s(s({},l),{},{"sentry-trace":null!==e&&void 0!==e?e:i,baggage:o.length>0?o.join(","):void 0});return r&&c&&!t&&(d.traceparent=c),d}}return s({},o)}(t,n,ot()&&d?h:void 0,u);r&&(e.args[1]=n,n.headers=r)}const p=Ie();if(p){const t={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};p.emit("beforeOutgoingRequestSpan",h,t)}return h}function os(e){return e.split(",").some(e=>e.trim().startsWith(Ve))}function is(e,t,n,r){const o={url:e,type:"fetch","http.method":n,[Ue]:r,[qe]:"http.client"};return t&&(ro(t)||(o["http.url"]=t.href,o["server.address"]=t.host),t.search&&(o["http.query"]=t.search),t.hash&&(o["http.fragment"]=t.hash)),o}function as(e){return new URLSearchParams(e).toString()}function ss(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U;try{if("string"===typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[as(e)];if(!e)return[void 0]}catch(n){return oi&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return oi&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function cs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(2===e.length&&"object"===typeof e[1])return e[1].body}function ls(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return oi&&U.error(n,"Failed to get xhr response headers",e),{}}return t?t.split("\r\n").reduce((e,t)=>{const[n,r]=t.split(": ");return r&&(e[n.toLowerCase()]=r),e},{}):{}}function us(e){try{return new URL(e,Mr.location.origin).href}catch(t){return}}function ds(e){try{return new Headers(e)}catch(t){return}}const hs=new WeakMap,ps=new Map,fs={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function ms(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:o,shouldCreateSpanForRequest:i,enableHTTPTimings:a,tracePropagationTargets:c,onRequestSpanStart:l,onRequestSpanEnd:u}=s(s({},fs),t),d="function"===typeof i?i:e=>!0,h=e=>function(e,t){const n=P();if(n){let o,i;try{o=new URL(e,n),i=new URL(n).origin}catch(r){return!1}const a=o.origin===i;return t?j(o.toString(),t)||a&&j(o.pathname,t):a}{const n=!!e.match(/^\/(?!\/)/);return t?j(e,t):n}}(e,c),p={},f=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(e=>("transaction"===e.type&&e.spans&&e.spans.forEach(e=>{if("http.client"===e.op){const t=ps.get(e.span_id);t&&(e.timestamp=t/1e3,ps.delete(e.span_id))}}),e)),o&&function(e){const t="fetch-body-resolved";zr(t,e),Hr(t,()=>Qr(Yr))}(e=>{if(e.response){const t=hs.get(e.response);t&&e.endTimestamp&&ps.set(t,e.endTimestamp)}}),Vr(e=>{const t=rs(e,d,h,p,{propagateTraceparent:f,onRequestSpanEnd:u});if(e.response&&e.fetchData.__span&&hs.set(e.response,e.fetchData.__span),t){const n=us(e.fetchData.url),r=n?ao(n).host:void 0;t.setAttributes({"http.url":n,"server.address":r}),a&&gs(t),null===l||void 0===l||l(t,{headers:e.headers})}})),r&&go(e=>{const t=function(e,t,n,r,o,i){const a=e.xhr,c=null===a||void 0===a?void 0:a[mo];if(!a||a.__sentry_own_request__||!c)return;const{url:l,method:u}=c,d=ot()&&t(l);if(e.endTimestamp&&d){const t=a.__sentry_xhr_span_id__;if(!t)return;const n=r[t];return void(n&&void 0!==c.status_code&&(at(n,c.status_code),n.end(),null===i||void 0===i||i(n,{headers:ds(ls(a)),error:e.error}),delete r[t]))}const h=us(l),p=ao(h||l),f=(y=l,y.split(/[?#]/,1)[0]),m=!!Mt(),g=d&&m?vi({name:"".concat(u," ").concat(f),attributes:s(s({url:l,type:"xhr","http.method":u,"http.url":h,"server.address":null===p||void 0===p?void 0:p.host,[Ue]:"auto.http.browser",[qe]:"http.client"},(null===p||void 0===p?void 0:p.search)&&{"http.query":null===p||void 0===p?void 0:p.search}),(null===p||void 0===p?void 0:p.hash)&&{"http.fragment":null===p||void 0===p?void 0:p.hash})}):new di;var y;a.__sentry_xhr_span_id__=g.spanContext().spanId,r[a.__sentry_xhr_span_id__]=g,n(l)&&function(e,t,n){const{"sentry-trace":r,baggage:o,traceparent:i}=ns({span:t,propagateTraceparent:n});r&&function(e,t,n,r){var o;const i=null===(o=e.__sentry_xhr_v3__)||void 0===o?void 0:o.request_headers;if(null!==i&&void 0!==i&&i["sentry-trace"]||!e.setRequestHeader)return;try{if(e.setRequestHeader("sentry-trace",t),!r||null!==i&&void 0!==i&&i.traceparent||e.setRequestHeader("traceparent",r),n){const t=null===i||void 0===i?void 0:i.baggage;t&&t.split(",").some(e=>e.trim().startsWith("sentry-"))||e.setRequestHeader("baggage",n)}}catch(a){}}(e,r,o,i)}(a,ot()&&m?g:void 0,o);const v=Ie();v&&v.emit("beforeOutgoingRequestSpan",g,e);return g}(e,d,h,p,f,u);var n;t&&(a&&gs(t),null===l||void 0===l||l(t,{headers:ds(null===(n=e.xhr.__sentry_xhr_v3__)||void 0===n?void 0:n.request_headers)}))})}function gs(e){const{url:t}=Ct(e).data;if(!t||"string"!==typeof t)return;const n=ya("resource",r=>{let{entries:o}=r;o.forEach(r=>{(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"===typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)})(r)&&r.name.endsWith(t)&&(e.setAttributes(Fa(r)),setTimeout(n))})})}const ys=s(s({},Ei),{},{instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{}},fs),vs=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={name:void 0,source:void 0},n=Mr.document,{enableInp:r,enableElementTiming:o,enableLongTask:i,enableLongAnimationFrame:a,_experiments:{enableInteractions:c,enableStandaloneClsSpans:u,enableStandaloneLcpSpans:d},beforeStartSpan:h,idleTimeout:f,finalTimeout:m,childSpanTimeout:g,markBackgroundSpan:y,traceFetch:v,traceXHR:b,trackFetchStreamPerformance:w,shouldCreateSpanForRequest:k,enableHTTPTimings:S,ignoreResourceSpans:_,ignorePerformanceApiSpans:C,instrumentPageLoad:T,instrumentNavigation:E,detectRedirects:I,linkPreviousTrace:A,consistentTraceSampling:R,enableReportPageLoaded:O,onRequestSpanStart:N,onRequestSpanEnd:D}=s(s({},ys),e);let L,F,q;function z(e,r){let o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i="pageload"===r.op,a=r.name,c=h?h(r):r,l=c.attributes||{};if(a!==c.name&&(l[De]="custom",c.attributes=l),!o){const e=oe();return void vi(s(s({},c),{},{startTime:e})).end(e)}t.name=c.name,t.source=l[De];const p=Ii(c,{idleTimeout:f,finalTimeout:m,childSpanTimeout:g,disableAutoFinish:i,beforeSpanEnd:t=>{var n;null===(n=L)||void 0===n||n(),Wa(t,{recordClsOnPageloadSpan:!u,recordLcpOnPageloadSpan:!d,ignoreResourceSpans:_,ignorePerformanceApiSpans:C}),Ss(e,void 0);const r=Ce(),o=r.getPropagationContext();r.setPropagationContext(s(s({},o),{},{traceId:p.spanContext().traceId,sampled:Tt(p),dsc:qt(t)})),i&&(q=void 0)},trimIdleSpanEndTimestamp:!O});function y(){n&&["interactive","complete"].includes(n.readyState)&&e.emit("idleSpanEnableAutoFinish",p)}i&&O&&(q=p),Ss(e,p),i&&!O&&n&&(n.addEventListener("readystatechange",()=>{y()}),y())}return{name:"BrowserTracing",setup(e){if(function(){function e(){const e=Mt(),t=e&&Pt(e);if(t){const e="internal_error";p&&U.log("[Tracing] Root span: ".concat(e," -> Global error occurred")),t.setStatus({code:2,message:e})}}Ai||(e.tag="sentry_tracingErrorCallback",Ai=!0,Po(e),No(e))}(),L=ja({recordClsStandaloneSpans:u||!1,recordLcpStandaloneSpans:d||!1,client:e}),r&&Qa(),o&&Ra()&&ce()&&ya("element",$a),a&&l.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?new PerformanceObserver(e=>{const t=Mt();if(t)for(const n of e.getEntries()){if(!n.scripts[0])continue;const e=Pa(ce()+n.startTime),{start_timestamp:r,op:o}=Ct(t);if("navigation"===o&&r&&e<r)continue;const i=Pa(n.duration),a={[Ue]:"auto.ui.browser.metrics"},s=n.scripts[0],{invoker:c,invokerType:l,sourceURL:u,sourceFunctionName:d,sourceCharPosition:h}=s;a["browser.script.invoker"]=c,a["browser.script.invoker_type"]=l,u&&(a["code.filepath"]=u),d&&(a["code.function"]=d),-1!==h&&(a["browser.script.source_char_position"]=h),Aa(t,e,e+i,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:a})}}).observe({type:"long-animation-frame",buffered:!0}):i&&ya("longtask",e=>{let{entries:t}=e;const n=Mt();if(!n)return;const{op:r,start_timestamp:o}=Ct(n);for(const i of t){const e=Pa(ce()+i.startTime),t=Pa(i.duration);"navigation"===r&&o&&e<o||Aa(n,e,e+t,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Ue]:"auto.ui.browser.metrics"}})}}),c&&ya("event",e=>{let{entries:t}=e;const n=Mt();if(n)for(const r of t)if("click"===r.name){const e=Pa(ce()+r.startTime),t=Pa(r.duration),o={name:x(r.target),op:"ui.interaction.".concat(r.name),startTime:e,attributes:{[Ue]:"auto.ui.browser.metrics"}},i=M(r.target);i&&(o.attributes["ui.component_name"]=i),Aa(n,e,e+t,o)}}),I&&n){const e=()=>{F=se()};addEventListener("click",e,{capture:!0}),addEventListener("keydown",e,{capture:!0,passive:!0})}function t(){const t=ks(e);t&&!Ct(t).timestamp&&(ko&&U.log("[Tracing] Finishing current active span with op: ".concat(Ct(t).op)),t.setAttribute(ze,"cancelled"),t.end())}e.on("startNavigationSpan",(n,r)=>{if(Ie()!==e)return;if(null!==r&&void 0!==r&&r.isRedirect)return ko&&U.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),void z(e,s({op:"navigation.redirect"},n),!1);F=void 0,t(),Te().setPropagationContext({traceId:he(),sampleRand:Math.random(),propagationSpanId:ot()?void 0:pe()});const o=Ce();o.setPropagationContext({traceId:he(),sampleRand:Math.random(),propagationSpanId:ot()?void 0:pe()}),o.setSDKProcessingMetadata({normalizedRequest:void 0}),z(e,s(s({op:"navigation"},n),{},{parentSpan:null,forceTransaction:!0}))}),e.on("startPageLoadSpan",function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ie()!==e)return;t();const o=ft(r.sentryTrace||bs("sentry-trace"),r.baggage||bs("baggage")),i=Ce();i.setPropagationContext(o),ot()||(i.getPropagationContext().propagationSpanId=pe()),i.setSDKProcessingMetadata({normalizedRequest:Lr()}),z(e,s({op:"pageload"},n))}),e.on("endPageloadSpan",()=>{O&&q&&(q.setAttribute(ze,"reportPageLoaded"),q.end())})},afterAllSetup(e){let n=P();if("off"!==A&&es(e,{linkPreviousTrace:A,consistentTraceSampling:R}),Mr.location){if(T){const t=ce();!function(e,t,n){e.emit("startPageLoadSpan",t,n),Ce().setTransactionName(t.name);const r=ks(e);r&&e.emit("afterStartPageLoadSpan",r)}(e,{name:Mr.location.pathname,startTime:t?t/1e3:void 0,attributes:{[De]:"url",[Ue]:"auto.pageload.browser"}})}E&&bo(t=>{var r;let{to:o,from:i}=t;if(void 0===i&&-1!==(null===(r=n)||void 0===r?void 0:r.indexOf(o)))return void(n=void 0);n=void 0;const a=oo(o),c=ks(e),l=c&&I&&function(e,t){const n=Ct(e),r=oe(),o=n.start_timestamp;if(r-o>_s)return!1;if(t&&r-t<=_s)return!1;return!0}(c,F);!function(e,t,n){const{url:r,isRedirect:o}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:o}),e.emit("startNavigationSpan",t,{isRedirect:o});const i=Ce();i.setTransactionName(t.name),r&&!o&&i.setSDKProcessingMetadata({normalizedRequest:s(s({},Lr()),{},{url:r})});ks(e)}(e,{name:(null===a||void 0===a?void 0:a.pathname)||Mr.location.pathname,attributes:{[De]:"url",[Ue]:"auto.navigation.browser"}},{url:o,isRedirect:l})})}y&&(Mr.document?Mr.document.addEventListener("visibilitychange",()=>{const e=Mt();if(!e)return;const t=Pt(e);if(Mr.document.hidden&&t){const e="cancelled",{op:n,status:r}=Ct(t);ko&&U.log("[Tracing] Transaction: ".concat(e," -> since tab moved to the background, op: ").concat(n)),r||t.setStatus({code:2,message:e}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):ko&&U.warn("[Tracing] Could not set up background tab detection due to lack of global document")),c&&function(e,t,n,r,o){const i=Mr.document;let a;const s=()=>{const i="ui.action.click",s=ks(e);if(s){const e=Ct(s).op;if(["navigation","pageload"].includes(e))return void(ko&&U.warn("[Tracing] Did not create ".concat(i," span because a pageload or navigation span is in progress.")))}a&&(a.setAttribute(ze,"interactionInterrupted"),a.end(),a=void 0),o.name?a=Ii({name:o.name,op:i,attributes:{[De]:o.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r}):ko&&U.warn("[Tracing] Did not create ".concat(i," transaction because _latestRouteName is missing."))};i&&addEventListener("click",s,{capture:!0})}(e,f,m,g,t),r&&function(){const e=e=>{let{entries:t}=e;const n=Mt(),r=n&&Pt(n);t.forEach(e=>{if(!function(e){return"duration"in e}(e)||!r)return;const t=e.interactionId;if(null!=t&&!Va.has(t)){if(Ga.length>10){const e=Ga.shift();Va.delete(e)}Ga.push(t),Va.set(t,r)}})};ya("event",e),ya("first-input",e)}(),ms(e,{traceFetch:v,traceXHR:b,trackFetchStreamPerformance:w,tracePropagationTargets:e.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:k,enableHTTPTimings:S,onRequestSpanStart:N,onRequestSpanEnd:D})}}};function bs(e){const t=Mr.document,n=null===t||void 0===t?void 0:t.querySelector("meta[name=".concat(e,"]"));return(null===n||void 0===n?void 0:n.getAttribute("content"))||void 0}const ws="_sentry_idleSpan";function ks(e){return e[ws]}function Ss(e,t){K(e,ws,t)}const _s=1.5;function Cs(e,t){const n=null===t||void 0===t?void 0:t.getDsn(),r=null===t||void 0===t?void 0:t.getOptions().tunnel;return function(e,t){const n=oo(e);if(!n||ro(n))return!1;return!!t&&(n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search))}(e,n)||function(e,t){if(!t)return!1;return Ts(e)===Ts(t)}(e,r)}function Ts(e){return"/"===e[e.length-1]?e.slice(0,-1):e}function Es(){return!("undefined"!==typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!==typeof process?process:0)}function Is(){return"undefined"!==typeof window&&(!Es()||function(){const e=l.process;return"renderer"===(null===e||void 0===e?void 0:e.type)}())}const As=l,xs="sentryReplaySession",Rs="Unable to send Replay",Ps=5e3,Ms=5500,Os=15e4,Ns=5e3,Ds=2e7,Ls=4999,Fs=36e5;var qs=Object.defineProperty,Us=(e,t,n)=>((e,t,n)=>t in e?qs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!==typeof t?t+"":t,n),zs=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(zs||{});function Hs(e){const t=null===e||void 0===e?void 0:e.host;return Boolean((null===t||void 0===t?void 0:t.shadowRoot)===e)}function Bs(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function js(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,Ws).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t):null}catch(n){return null}var t}function Ws(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=js(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import","url(".concat(JSON.stringify(e.href),")")];return""===e.layerName?n.push("layer"):e.layerName&&n.push("layer(".concat(e.layerName,")")),e.supportsText&&n.push("supports(".concat(e.supportsText,")")),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){}else if(function(e){return"selectorText"in e}(e)){let t=e.cssText;const n=e.selectorText.includes(":"),r="string"===typeof e.style.all&&e.style.all;if(r&&(t=function(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,o=r[n],i=r.getPropertyPriority(o);t+="".concat(o,":").concat(r.getPropertyValue(o)).concat(i?" !important":"",";")}return"".concat(e.selectorText," { ").concat(t," }")}(e)),n&&(t=function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(t)),n||r)return t}return t||e.cssText}class Ks{constructor(){Us(this,"idNodeMap",new Map),Us(this,"nodeMetaMap",new WeakMap)}getId(e){var t;if(!e)return-1;const n=null===(t=this.getMeta(e))||void 0===t?void 0:t.id;return null!==n&&void 0!==n?n:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Gs(e){let{maskInputOptions:t,tagName:n,type:r}=e;return"OPTION"===n&&(n="SELECT"),Boolean(t[n.toLowerCase()]||r&&t[r]||"password"===r||"INPUT"===n&&!r&&t.text)}function Vs(e){let{isMasked:t,element:n,value:r,maskInputFn:o}=e,i=r||"";return t?(o&&(i=o(i,n)),"*".repeat(i.length)):i}function Qs(e){return e.toLowerCase()}function Ys(e){return e.toUpperCase()}const Js="__rrweb_original__";function $s(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Qs(t):null}function Xs(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}function Zs(e,t){var n;let r;try{r=new URL(e,null!==t&&void 0!==t?t:window.location.href)}catch(i){return null}const o=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(n=null===o||void 0===o?void 0:o[1])&&void 0!==n?n:null}const ec={};function tc(e){const t=ec[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"===typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(o){}return ec[e]=r.bind(window)}function nc(){return tc("setTimeout")(...arguments)}function rc(){return tc("clearTimeout")(...arguments)}function oc(e){try{return e.contentDocument}catch(t){}}let ic=1;const ac=new RegExp("[^a-z0-9-_:]");function sc(){return ic++}let cc,lc;const uc=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,dc=/^(?:[a-z+]+:)?\/\//i,hc=/^www\..*/i,pc=/^(data:)([^,]*),(.*)/i;function fc(e,t){return(e||"").replace(uc,(e,n,r,o,i,a)=>{const s=r||i||a,c=n||o||"";if(!s)return e;if(dc.test(s)||hc.test(s))return"url(".concat(c).concat(s).concat(c,")");if(pc.test(s))return"url(".concat(c).concat(s).concat(c,")");if("/"===s[0])return"url(".concat(c).concat(function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+s).concat(c,")");const l=t.split("/"),u=s.split("/");l.pop();for(const t of u)"."!==t&&(".."===t?l.pop():l.push(t));return"url(".concat(c).concat(l.join("/")).concat(c,")")})}const mc=/^[^ \t\n\r\u000c]+/,gc=/^[, \t\n\r\u000c]+/;const yc=new WeakMap;function vc(e,t){return t&&""!==t.trim()?wc(e,t):t}function bc(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function wc(e,t){let n=yc.get(e);if(n||(n=e.createElement("a"),yc.set(e,n)),t){if(t.startsWith("blob:")||t.startsWith("data:"))return t}else t="";return n.setAttribute("href",t),n.href}function kc(e,t,n,r,o,i){return r?"src"===n||"href"===n&&("use"!==t||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?vc(e,r):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function r(e){let r;const o=e.exec(t.substring(n));return o?(r=o[0],n+=r.length,r):""}const o=[];for(;r(gc),!(n>=t.length);){let i=r(mc);if(","===i.slice(-1))i=vc(e,i.substring(0,i.length-1)),o.push(i);else{let r="";i=vc(e,i);let a=!1;for(;;){const e=t.charAt(n);if(""===e){o.push((i+r).trim());break}if(a)")"===e&&(a=!1);else{if(","===e){n+=1,o.push((i+r).trim());break}"("===e&&(a=!0)}r+=e,n+=1}}}return o.join(", ")}(e,r):"style"===n?fc(r,wc(e)):"object"===t&&"data"===n?vc(e,r):"function"===typeof i?i(n,r,o):r:vc(e,r):r}function Sc(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function _c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return e?e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:_c(e.parentNode,t,n,r+1):-1}function Cc(e,t){return n=>{const r=n;if(null===r)return!1;try{if(e)if("string"===typeof e){if(r.matches(".".concat(e)))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}(r,e))return!0;return!(!t||!r.matches(t))}catch(o){return!1}}}function Tc(e,t,n,r,o,i){try{const a=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===a)return!1;if("INPUT"===a.tagName){const e=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let s=-1,c=-1;if(i){if(c=_c(a,Cc(r,o)),c<0)return!0;s=_c(a,Cc(t,n),c>=0?c:1/0)}else{if(s=_c(a,Cc(t,n)),s<0)return!1;c=_c(a,Cc(r,o),s>=0?s:1/0)}return s>=0?!(c>=0)||s<=c:!(c>=0)&&!!i}catch(a){}return!!i}function Ec(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:v,recordCanvas:b,keepIframeSrcFn:w,newlyAddedElement:k=!1}=t,S=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:zs.Document,childNodes:[],compatMode:e.compatMode}:{type:zs.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:zs.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:S};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:r,blockSelector:o,unblockSelector:i,inlineStylesheet:a,maskInputOptions:s={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:v,unmaskTextSelector:b}=t,w=function(e,t,n,r){try{if(r&&e.matches(r))return!1;if("string"===typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}if(n)return e.matches(n)}catch(o){}return!1}(e,r,o,i),k=function(e){if(e instanceof HTMLFormElement)return"form";const t=Qs(e.tagName);return ac.test(t)?"div":t}(e);let S={};const _=e.attributes.length;for(let E=0;E<_;E++){const t=e.attributes[E];t.name&&!Sc(k,t.name,t.value)&&(S[t.name]=kc(n,k,Qs(t.name),t.value,e,c))}if("link"===k&&a){const t=Array.from(n.styleSheets).find(t=>t.href===e.href);let r=null;t&&(r=js(t)),r&&(S.rel=null,S.href=null,S.crossorigin=null,S._cssText=fc(r,t.href))}if("style"===k&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=js(e.sheet);t&&(S._cssText=fc(t,wc(n)))}if("input"===k||"textarea"===k||"select"===k||"option"===k){const t=e,n=$s(t),r=Xs(t,Ys(k),n),o=t.checked;if("submit"!==n&&"button"!==n&&r){const e=Tc(t,g,v,y,b,Gs({type:n,tagName:Ys(k),maskInputOptions:s}));S.value=Vs({isMasked:e,element:t,value:r,maskInputFn:l})}o&&(S.checked=o)}"option"===k&&(e.selected&&!s.select?S.selected=!0:delete S.selected);if("canvas"===k&&h)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let r=0;r<e.height;r+=50){const o=t.getImageData,i=Js in o?o[Js]:o;if(new Uint32Array(i.call(t,n,r,Math.min(50,e.width-n),Math.min(50,e.height-r)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(S.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),r=n.createElement("canvas");r.width=e.width,r.height=e.height;t!==r.toDataURL(u.type,u.quality)&&(S.rr_dataURL=t)}if("img"===k&&d){cc||(cc=n.createElement("canvas"),lc=cc.getContext("2d"));const t=e,r=t.currentSrc||t.getAttribute("src")||"<unknown-src>",o=t.crossOrigin,i=()=>{t.removeEventListener("load",i);try{cc.width=t.naturalWidth,cc.height=t.naturalHeight,lc.drawImage(t,0,0),S.rr_dataURL=cc.toDataURL(u.type,u.quality)}catch(e){if("anonymous"!==t.crossOrigin)return t.crossOrigin="anonymous",void(t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i));console.warn("Cannot inline img src=".concat(r,"! Error: ").concat(e))}"anonymous"===t.crossOrigin&&(o?S.crossOrigin=o:t.removeAttribute("crossorigin"))};t.complete&&0!==t.naturalWidth?i():t.addEventListener("load",i)}"audio"!==k&&"video"!==k||(S.rr_mediaState=e.paused?"paused":"played",S.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(S.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(S.rr_scrollTop=e.scrollTop));if(w){const{width:t,height:n}=e.getBoundingClientRect();S={class:S.class,rr_width:"".concat(t,"px"),rr_height:"".concat(n,"px")}}"iframe"!==k||p(S.src)||(w||oc(e)||(S.rr_src=S.src),delete S.src);let C;try{customElements.get(k)&&(C=!0)}catch(T){}return{type:zs.Element,tagName:k,attributes:S,childNodes:[],isSVG:bc(e)||void 0,needBlock:w,rootId:m,isCustom:C}}(e,{doc:n,blockClass:o,blockSelector:i,unblockSelector:a,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:v,recordCanvas:b,keepIframeSrcFn:w,newlyAddedElement:k,rootId:S,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:o,maskTextSelector:i,unmaskTextSelector:a,maskTextFn:s,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const p="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(p&&h){try{var g;e.nextSibling||e.previousSibling||null!==(g=e.parentNode.sheet)&&void 0!==g&&g.cssRules&&(h=js(e.parentNode.sheet))}catch(v){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(v),e)}h=fc(h,wc(t.doc))}f&&(h="SCRIPT_PLACEHOLDER");const y=Tc(e,r,i,o,a,n);p||f||m||!h||!y||(h=s?s(h,e.parentElement):h.replace(/[\S]/g,"*"));m&&h&&(c.textarea||y)&&(h=l?l(h,e.parentNode):h.replace(/[\S]/g,"*"));if("OPTION"===d&&h){h=Vs({isMasked:Tc(e,r,i,o,a,Gs({type:null,tagName:d,maskInputOptions:c})),element:e,value:h,maskInputFn:l})}return{type:zs.Text,textContent:h||"",isStyle:p,rootId:u}}(e,{doc:n,maskAllText:s,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:S});case e.CDATA_SECTION_NODE:return{type:zs.CDATA,textContent:"",rootId:S};case e.COMMENT_NODE:return{type:zs.Comment,textContent:e.textContent||"",rootId:S};default:return!1}}function Ic(e){return void 0===e||null===e?"":e.toLowerCase()}function Ac(e,t){const{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b={},inlineImages:w=!1,recordCanvas:k=!1,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:C=5e3,onBlockedImageLoad:T,onStylesheetLoad:E,stylesheetLoadTimeout:I=5e3,keepIframeSrcFn:A=()=>!1,newlyAddedElement:x=!1}=t;let{preserveWhiteSpace:R=!0}=t;const P=Ec(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:s,unblockSelector:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:b,inlineImages:w,recordCanvas:k,keepIframeSrcFn:A,newlyAddedElement:x});if(!P)return console.warn(e,"not serialized"),null;let M;M=r.hasNode(e)?r.getId(e):!function(e,t){if(t.comment&&e.type===zs.Comment)return!0;if(e.type===zs.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"===typeof e.attributes.href&&"js"===Zs(e.attributes.href)))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(Ic(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Ic(e.attributes.name)||"icon"===Ic(e.attributes.rel)||"apple-touch-icon"===Ic(e.attributes.rel)||"shortcut icon"===Ic(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&Ic(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Ic(e.attributes.property).match(/^(og|twitter|fb):/)||Ic(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===Ic(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===Ic(e.attributes.name)||"googlebot"===Ic(e.attributes.name)||"bingbot"===Ic(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===Ic(e.attributes.name)||"generator"===Ic(e.attributes.name)||"framework"===Ic(e.attributes.name)||"publisher"===Ic(e.attributes.name)||"progid"===Ic(e.attributes.name)||Ic(e.attributes.property).match(/^article:/)||Ic(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===Ic(e.attributes.name)||"yandex-verification"===Ic(e.attributes.name)||"csrf-token"===Ic(e.attributes.name)||"p:domain_verify"===Ic(e.attributes.name)||"verify-v1"===Ic(e.attributes.name)||"verification"===Ic(e.attributes.name)||"shopify-checkout-api-token"===Ic(e.attributes.name)))return!0}}return!1}(P,v)&&(R||P.type!==zs.Text||P.isStyle||P.textContent.replace(/^\s+|\s+$/gm,"").length)?sc():-2;const O=Object.assign(P,{id:M});if(r.add(e,O),-2===M)return null;S&&S(e);let N=!h;if(O.type===zs.Element){N=N&&!O.needBlock;const t=e.shadowRoot;t&&Bs(t)&&(O.isShadowHost=!0)}if((O.type===zs.Document||O.type===zs.Element)&&N){v.headWhitespace&&O.type===zs.Element&&"head"===O.tagName&&(R=!1);const t={doc:n,mirror:r,blockClass:o,blockSelector:i,maskAllText:s,unblockSelector:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b,inlineImages:w,recordCanvas:k,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:C,onBlockedImageLoad:T,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:A},x=e.childNodes?Array.from(e.childNodes):[];for(const e of x){const n=Ac(e,t);n&&O.childNodes.push(n)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const r=Ac(n,t);r&&(Bs(e.shadowRoot)&&(r.isShadow=!0),O.childNodes.push(r))}}if(e.parentNode&&Hs(e.parentNode)&&Bs(e.parentNode)&&(O.isShadow=!0),O.type!==zs.Element||"iframe"!==O.tagName||O.needBlock||function(e,t,n){const r=e.contentWindow;if(!r)return;let o,i=!1;try{o=r.document.readyState}catch(s){return}if("complete"!==o){const r=nc(()=>{i||(t(),i=!0)},n);return void e.addEventListener("load",()=>{rc(r),i=!0,t()})}const a="about:blank";if(r.location.href!==a||e.src===a||""===e.src)return nc(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{const t=oc(e);if(t&&_){const n=Ac(t,{doc:t,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b,inlineImages:w,recordCanvas:k,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:C,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:A});n&&_(e,n)}},C),O.type===zs.Element&&"img"===O.tagName&&!e.complete&&O.needBlock){const t=e,n=()=>{if(t.isConnected&&!t.complete&&T)try{const e=t.getBoundingClientRect();e.width>0&&e.height>0&&T(t,O,e)}catch(e){}t.removeEventListener("load",n)};t.isConnected&&t.addEventListener("load",n)}return O.type===zs.Element&&"link"===O.tagName&&"string"===typeof O.attributes.rel&&("stylesheet"===O.attributes.rel||"preload"===O.attributes.rel&&"string"===typeof O.attributes.href&&"css"===Zs(O.attributes.href))&&function(e,t,n){let r,o=!1;try{r=e.sheet}catch(a){return}if(r)return;const i=nc(()=>{o||(t(),o=!0)},n);e.addEventListener("load",()=>{rc(i),o=!0,t()})}(e,()=>{if(E){const t=Ac(e,{doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:s,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:v,dataURLOptions:b,inlineImages:w,recordCanvas:k,preserveWhiteSpace:R,onSerialize:S,onIframeLoad:_,iframeLoadTimeout:C,onStylesheetLoad:E,stylesheetLoadTimeout:I,keepIframeSrcFn:A});t&&E(e,t)}},I),O.type===zs.Element&&delete O.needBlock,O}function xc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const Rc="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let Pc={map:{},getId:()=>(console.error(Rc),-1),getNode:()=>(console.error(Rc),null),removeNodeFromMap(){console.error(Rc)},has:()=>(console.error(Rc),!1),reset(){console.error(Rc)}};function Mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,o=0;return function(){for(var i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];const c=Date.now();o||!1!==n.leading||(o=c);const l=t-(c-o),u=this;l<=0||l>t?(r&&(!function(){Xc("clearTimeout")(...arguments)}(r),r=null),o=c,e.apply(u,a)):r||!1===n.trailing||(r=Zc(()=>{o=!1===n.leading?0:Date.now(),r=null,e.apply(u,a)},l))}}function Oc(e,t,n,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;const i=o.Object.getOwnPropertyDescriptor(e,t);return o.Object.defineProperty(e,t,r?n:{set(e){Zc(()=>{n.set.call(this,e)},0),i&&i.set&&i.set.call(this,e)}}),()=>Oc(e,t,i||{},!0)}function Nc(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],o=n(r);return"function"===typeof o&&(o.prototype=o.prototype||{},Object.defineProperties(o,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=o,()=>{e[t]=r}}catch(r){return()=>{}}}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(Pc=new Proxy(Pc,{get:(e,t,n)=>("map"===t&&console.error(Rc),Reflect.get(e,t,n))}));let Dc=Date.now;function Lc(e){var t,n,r,o;const i=e.document;return{left:i.scrollingElement?i.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:(null===i||void 0===i?void 0:i.documentElement.scrollLeft)||(null===i||void 0===i||null===(t=i.body)||void 0===t||null===(t=t.parentElement)||void 0===t?void 0:t.scrollLeft)||(null===i||void 0===i||null===(n=i.body)||void 0===n?void 0:n.scrollLeft)||0,top:i.scrollingElement?i.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:(null===i||void 0===i?void 0:i.documentElement.scrollTop)||(null===i||void 0===i||null===(r=i.body)||void 0===r||null===(r=r.parentElement)||void 0===r?void 0:r.scrollTop)||(null===i||void 0===i||null===(o=i.body)||void 0===o?void 0:o.scrollTop)||0}}function Fc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function qc(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Uc(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}function zc(e,t,n,r,o){if(!e)return!1;const i=Uc(e);if(!i)return!1;const a=Cc(t,n);if(!o){const e=r&&i.matches(r);return a(i)&&!e}const s=_c(i,a);let c=-1;return!(s<0)&&(r&&(c=_c(i,Cc(null,r))),s>-1&&c<0||s<c)}function Hc(e,t){return-2===t.getId(e)}function Bc(e,t){if(Hs(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||Bc(e.parentNode,t))}function jc(e){return Boolean(e.changedTouches)}function Wc(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function Kc(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function Gc(e){return Boolean(null===e||void 0===e?void 0:e.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(Dc=()=>(new Date).getTime());class Vc{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return null!==(t=this.styleIDMap.get(e))&&void 0!==t?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Qc(e){var t;let n=null;return(null===(t=e.getRootNode)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(n=e.getRootNode().host),n}function Yc(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Qc(n);)n=t;return n}(e);return t.contains(n)}function Jc(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||Yc(e))}const $c={};function Xc(e){const t=$c[e];if(t)return t;const n=window.document;let r=window[e];if(n&&"function"===typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const o=t.contentWindow;o&&o[e]&&(r=o[e]),n.head.removeChild(t)}catch(o){}return $c[e]=r.bind(window)}function Zc(){return Xc("setTimeout")(...arguments)}var el=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(el||{}),tl=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(tl||{}),nl=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(nl||{}),rl=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(rl||{}),ol=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(ol||{});function il(e){try{return e.contentDocument}catch(t){}}function al(e){return"__ln"in e}class sl{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++){var n;t=(null===(n=t)||void 0===n?void 0:n.next)||null}return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&al(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&al(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const cl=(e,t)=>"".concat(e,"@").concat(t);class ll{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new sl,r=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},o=o=>{if(!o.parentNode||!Jc(o))return;const i=Hs(o.parentNode)?this.mirror.getId(Qc(o)):this.mirror.getId(o.parentNode),a=r(o);if(-1===i||-1===a)return n.addNode(o);const s=Ac(o,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{Wc(e,this.mirror)&&!zc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(e),Kc(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),Gc(o)&&this.shadowDomManager.addShadowRoot(o.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{zc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(e,t),e.contentWindow&&this.canvasManager.addWindow(e.contentWindow),this.shadowDomManager.observeAttachShadow(e))},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,n)=>{let{width:r,height:o}=n;this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:"".concat(r,"px"),height:"".concat(o,"px")}}}]})}});s&&(e.push({parentId:i,nextId:a,node:s}),t.add(s.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const s of this.movedSet)dl(this.removes,s,this.mirror)&&!this.movedSet.has(s.parentNode)||o(s);for(const s of this.addedSet)hl(this.droppedSet,s)||dl(this.removes,s,this.mirror)?hl(this.movedSet,s)?o(s):this.droppedSet.add(s):o(s);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=r(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=t.parentNode.host;if(-1!==this.mirror.getId(r)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),o(e.value)}const a={texts:this.texts.map(e=>({id:this.mirror.getId(e.node),value:e.value})).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{const{attributes:t}=e;if("string"===typeof t.style){const n=JSON.stringify(e.styleDiff),r=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+r).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(a.texts.length||a.attributes.length||a.removes.length||a.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(!Hc(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;zc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:Tc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,Uc(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let r=e.attributeName,o=e.target.getAttribute(r);if("value"===r){const t=$s(n),r=n.tagName;o=Xs(n,r,t);const i=Gs({maskInputOptions:this.maskInputOptions,tagName:r,type:t});o=Vs({isMasked:Tc(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:n,value:o,maskInputFn:this.maskInputFn})}if(zc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||o===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(o)){if(il(n))return;r="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===r&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!Sc(n.tagName,r)&&(i.attributes[r]=kc(this.doc,Qs(n.tagName),Qs(r),o,n,this.maskAttributeFn),"style"===r)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");e.oldValue&&r.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),o=n.style.getPropertyPriority(e);t!==r.style.getPropertyValue(e)||o!==r.style.getPropertyPriority(e)?i.styleDiff[e]=""===o?t:[t,o]:i._unchangedStyles[e]=[t,o]}for(const e of Array.from(r.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(zc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),r=Hs(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);zc(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||Hc(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(ul(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||Bc(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[cl(n,r)]?ul(this.movedSet,t):this.removes.push({parentId:r,id:n,isShadow:!(!Hs(e.target)||!Bs(e.target))||void 0})),this.mapRemoves.push(t))})}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(Hc(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[cl(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);zc(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes&&e.childNodes.forEach(e=>this.genAdds(e)),Gc(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function ul(e,t){var n;e.delete(t),null===(n=t.childNodes)||void 0===n||n.forEach(t=>ul(e,t))}function dl(e,t,n){return 0!==e.length&&function(e,t,n){let r=t.parentNode;for(;r;){const t=n.getId(r);if(e.some(e=>e.id===t))return!0;r=r.parentNode}return!1}(e,t,n)}function hl(e,t){return 0!==e.size&&pl(e,t)}function pl(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||pl(e,n))}let fl;const ml=e=>{if(!fl)return e;return function(){try{return e(...arguments)}catch(t){if(fl&&!0===fl(t))return()=>{};throw t}}},gl=[];function yl(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(t){}return e&&e.target}function vl(e,t){var n,r;const o=new ll;gl.push(o),o.init(e);let i=window.MutationObserver||window.__rrMutationObserver;const a=null===(n=window)||void 0===n||null===(n=n.Zone)||void 0===n||null===(r=n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");a&&window[a]&&(i=window[a]);const s=new i(ml(t=>{e.onMutation&&!1===e.onMutation(t)||o.processMutations.bind(o)(t)}));return s.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function bl(e){let{mouseInteractionCb:t,doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,sampling:c}=e;if(!1===c.mouseInteraction)return()=>{};const l=!0===c.mouseInteraction||void 0===c.mouseInteraction?{}:c.mouseInteraction,u=[];let d=null;return Object.keys(nl).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==l[e]).forEach(e=>{let c=Qs(e);const l=(e=>n=>{const c=yl(n);if(zc(c,o,i,a,!0))return;let l=null,u=e;if("pointerType"in n){switch(n.pointerType){case"mouse":l=rl.Mouse;break;case"touch":l=rl.Touch;break;case"pen":l=rl.Pen}l===rl.Touch?nl[e]===nl.MouseDown?u="TouchStart":nl[e]===nl.MouseUp&&(u="TouchEnd"):rl.Pen}else jc(n)&&(l=rl.Touch);null!==l?(d=l,(u.startsWith("Touch")&&l===rl.Touch||u.startsWith("Mouse")&&l===rl.Mouse)&&(l=null)):nl[e]===nl.Click&&(l=d,d=null);const h=jc(n)?n.changedTouches[0]:n;if(!h)return;const p=r.getId(c),{clientX:f,clientY:m}=h;ml(t)(s({type:nl[u],id:p,x:f,y:m},null!==l&&{pointerType:l}))})(e);if(window.PointerEvent)switch(nl[e]){case nl.MouseDown:case nl.MouseUp:c=c.replace("mouse","pointer");break;case nl.TouchStart:case nl.TouchEnd:return}u.push(xc(c,l,n))}),ml(()=>{u.forEach(e=>e())})}function wl(e){let{scrollCb:t,doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,sampling:s}=e;return xc("scroll",ml(Mc(ml(e=>{const s=yl(e);if(!s||zc(s,o,i,a,!0))return;const c=r.getId(s);if(s===n&&n.defaultView){const e=Lc(n.defaultView);t({id:c,x:e.left,y:e.top})}else t({id:c,x:s.scrollLeft,y:s.scrollTop})}),s.scroll||100)),n)}const kl=["INPUT","TEXTAREA","SELECT"],Sl=new WeakMap;function _l(e){let{inputCb:t,doc:n,mirror:r,blockClass:o,blockSelector:i,unblockSelector:a,ignoreClass:c,ignoreSelector:l,maskInputOptions:u,maskInputFn:d,sampling:h,userTriggeredOnInput:p,maskTextClass:f,unmaskTextClass:m,maskTextSelector:g,unmaskTextSelector:y}=e;function v(e){let t=yl(e);const r=e.isTrusted,s=t&&Ys(t.tagName);if("OPTION"===s&&(t=t.parentElement),!t||!s||kl.indexOf(s)<0||zc(t,o,i,a,!0))return;const h=t;if(h.classList.contains(c)||l&&h.matches(l))return;const v=$s(t);let w=Xs(h,s,v),k=!1;const S=Gs({maskInputOptions:u,tagName:s,type:v}),_=Tc(t,f,g,m,y,S);"radio"!==v&&"checkbox"!==v||(k=t.checked),w=Vs({isMasked:_,element:t,value:w,maskInputFn:d}),b(t,p?{text:w,isChecked:k,userTriggered:r}:{text:w,isChecked:k});const C=t.name;"radio"===v&&C&&k&&n.querySelectorAll('input[type="radio"][name="'.concat(C,'"]')).forEach(e=>{if(e!==t){const t=Vs({isMasked:_,element:e,value:Xs(e,s,v),maskInputFn:d});b(e,p?{text:t,isChecked:!k,userTriggered:!1}:{text:t,isChecked:!k})}})}function b(e,n){const o=Sl.get(e);if(!o||o.text!==n.text||o.isChecked!==n.isChecked){Sl.set(e,n);const o=r.getId(e);ml(t)(s(s({},n),{},{id:o}))}}const w=("last"===h.input?["change"]:["input","change"]).map(e=>xc(e,ml(v),n)),k=n.defaultView;if(!k)return()=>{w.forEach(e=>e())};const S=k.Object.getOwnPropertyDescriptor(k.HTMLInputElement.prototype,"value"),_=[[k.HTMLInputElement.prototype,"value"],[k.HTMLInputElement.prototype,"checked"],[k.HTMLSelectElement.prototype,"value"],[k.HTMLTextAreaElement.prototype,"value"],[k.HTMLSelectElement.prototype,"selectedIndex"],[k.HTMLOptionElement.prototype,"selected"]];return S&&S.set&&w.push(..._.map(e=>Oc(e[0],e[1],{set(){ml(v)({target:this,isTrusted:!1})}},!1,k))),ml(()=>{w.forEach(e=>e())})}function Cl(e){return function(e,t){if(Al("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||Al("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||Al("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||Al("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function Tl(e,t,n){let r,o;return e?(e.ownerNode?r=t.getId(e.ownerNode):o=n.getId(e),{styleId:o,id:r}):{}}function El(e,t){var n,r;let{mirror:o,stylesheetManager:i}=e,a=null;a="#document"===t.nodeName?o.getId(t):o.getId(t.host);const s="#document"===t.nodeName?null===(n=t.defaultView)||void 0===n?void 0:n.Document:null===(r=t.ownerDocument)||void 0===r||null===(r=r.defaultView)||void 0===r?void 0:r.ShadowRoot,c=null!==s&&void 0!==s&&s.prototype?Object.getOwnPropertyDescriptor(null===s||void 0===s?void 0:s.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&s&&c?(Object.defineProperty(t,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var e;return null===(e=c.get)||void 0===e?void 0:e.call(this)},set(e){var t;const n=null===(t=c.set)||void 0===t?void 0:t.call(this,e);if(null!==a&&-1!==a)try{i.adoptStyleSheets(e,a)}catch(r){}return n}}),ml(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})})):()=>{}}function Il(e){const t=e.doc.defaultView;if(!t)return()=>{};let n;e.recordDOM&&(n=vl(e,e.doc));const r=function(e){let{mousemoveCb:t,sampling:n,doc:r,mirror:o}=e;if(!1===n.mousemove)return()=>{};const i="number"===typeof n.mousemove?n.mousemove:50,a="number"===typeof n.mousemoveCallback?n.mousemoveCallback:500;let s,c=[];const l=Mc(ml(e=>{const n=Date.now()-s;t(c.map(e=>(e.timeOffset-=n,e)),e),c=[],s=null}),a),u=ml(Mc(ml(e=>{const t=yl(e),{clientX:n,clientY:r}=jc(e)?e.changedTouches[0]:e;s||(s=Dc()),c.push({x:n,y:r,id:o.getId(t),timeOffset:Dc()-s}),l("undefined"!==typeof DragEvent&&e instanceof DragEvent?tl.Drag:e instanceof MouseEvent?tl.MouseMove:tl.TouchMove)}),i,{trailing:!1})),d=[xc("mousemove",u,r),xc("touchmove",u,r),xc("drag",u,r)];return ml(()=>{d.forEach(e=>e())})}(e),o=bl(e),i=wl(e),a=function(e,t){let{viewportResizeCb:n}=e,{win:r}=t,o=-1,i=-1;return xc("resize",ml(Mc(ml(()=>{const e=Fc(),t=qc();o===e&&i===t||(n({width:Number(t),height:Number(e)}),o=e,i=t)}),200)),r)}(e,{win:t}),s=_l(e),c=function(e){let{mediaInteractionCb:t,blockClass:n,blockSelector:r,unblockSelector:o,mirror:i,sampling:a,doc:s}=e;const c=ml(e=>Mc(ml(a=>{const s=yl(a);if(!s||zc(s,n,r,o,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=s;t({type:e,id:i.getId(s),currentTime:c,volume:l,muted:u,playbackRate:d})}),a.media||500)),l=[xc("play",c(ol.Play),s),xc("pause",c(ol.Pause),s),xc("seeked",c(ol.Seeked),s),xc("volumechange",c(ol.VolumeChange),s),xc("ratechange",c(ol.RateChange),s)];return ml(()=>{l.forEach(e=>e())})}(e);let l=()=>{},u=()=>{},d=()=>{},h=()=>{};e.recordDOM&&(l=function(e,t){let{styleSheetRuleCb:n,mirror:r,stylesheetManager:o}=e,{win:i}=t;if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};const a=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:ml((e,t,i)=>{const[a,s]=i,{id:c,styleId:l}=Tl(t,r,o.styleMirror);return(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,adds:[{rule:a,index:s}]}),e.apply(t,i)})});const s=i.CSSStyleSheet.prototype.deleteRule;let c,l;i.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:ml((e,t,i)=>{const[a]=i,{id:s,styleId:c}=Tl(t,r,o.styleMirror);return(s&&-1!==s||c&&-1!==c)&&n({id:s,styleId:c,removes:[{index:a}]}),e.apply(t,i)})}),i.CSSStyleSheet.prototype.replace&&(c=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(c,{apply:ml((e,t,i)=>{const[a]=i,{id:s,styleId:c}=Tl(t,r,o.styleMirror);return(s&&-1!==s||c&&-1!==c)&&n({id:s,styleId:c,replace:a}),e.apply(t,i)})})),i.CSSStyleSheet.prototype.replaceSync&&(l=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:ml((e,t,i)=>{const[a]=i,{id:s,styleId:c}=Tl(t,r,o.styleMirror);return(s&&-1!==s||c&&-1!==c)&&n({id:s,styleId:c,replaceSync:a}),e.apply(t,i)})}));const u={};xl("CSSGroupingRule")?u.CSSGroupingRule=i.CSSGroupingRule:(xl("CSSMediaRule")&&(u.CSSMediaRule=i.CSSMediaRule),xl("CSSConditionRule")&&(u.CSSConditionRule=i.CSSConditionRule),xl("CSSSupportsRule")&&(u.CSSSupportsRule=i.CSSSupportsRule));const d={};return Object.entries(u).forEach(e=>{let[t,i]=e;d[t]={insertRule:i.prototype.insertRule,deleteRule:i.prototype.deleteRule},i.prototype.insertRule=new Proxy(d[t].insertRule,{apply:ml((e,t,i)=>{const[a,s]=i,{id:c,styleId:l}=Tl(t.parentStyleSheet,r,o.styleMirror);return(c&&-1!==c||l&&-1!==l)&&n({id:c,styleId:l,adds:[{rule:a,index:[...Cl(t),s||0]}]}),e.apply(t,i)})}),i.prototype.deleteRule=new Proxy(d[t].deleteRule,{apply:ml((e,t,i)=>{const[a]=i,{id:s,styleId:c}=Tl(t.parentStyleSheet,r,o.styleMirror);return(s&&-1!==s||c&&-1!==c)&&n({id:s,styleId:c,removes:[{index:[...Cl(t),a]}]}),e.apply(t,i)})})}),ml(()=>{i.CSSStyleSheet.prototype.insertRule=a,i.CSSStyleSheet.prototype.deleteRule=s,c&&(i.CSSStyleSheet.prototype.replace=c),l&&(i.CSSStyleSheet.prototype.replaceSync=l),Object.entries(u).forEach(e=>{let[t,n]=e;n.prototype.insertRule=d[t].insertRule,n.prototype.deleteRule=d[t].deleteRule})})}(e,{win:t}),u=El(e,e.doc),d=function(e,t){let{styleDeclarationCb:n,mirror:r,ignoreCSSAttributes:o,stylesheetManager:i}=e,{win:a}=t;const s=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:ml((e,t,a)=>{var c;const[l,u,d]=a;if(o.has(l))return s.apply(t,[l,u,d]);const{id:h,styleId:p}=Tl(null===(c=t.parentRule)||void 0===c?void 0:c.parentStyleSheet,r,i.styleMirror);return(h&&-1!==h||p&&-1!==p)&&n({id:h,styleId:p,set:{property:l,value:u,priority:d},index:Cl(t.parentRule)}),e.apply(t,a)})});const c=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:ml((e,t,a)=>{var s;const[l]=a;if(o.has(l))return c.apply(t,[l]);const{id:u,styleId:d}=Tl(null===(s=t.parentRule)||void 0===s?void 0:s.parentStyleSheet,r,i.styleMirror);return(u&&-1!==u||d&&-1!==d)&&n({id:u,styleId:d,remove:{property:l},index:Cl(t.parentRule)}),e.apply(t,a)})}),ml(()=>{a.CSSStyleDeclaration.prototype.setProperty=s,a.CSSStyleDeclaration.prototype.removeProperty=c})}(e,{win:t}),e.collectFonts&&(h=function(e){let{fontCb:t,doc:n}=e;const r=n.defaultView;if(!r)return()=>{};const o=[],i=new WeakMap,a=r.FontFace;r.FontFace=function(e,t,n){const r=new a(e,t,n);return i.set(r,{family:e,buffer:"string"!==typeof t,descriptors:n,fontSource:"string"===typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),r};const s=Nc(n.fonts,"add",function(e){return function(n){return Zc(ml(()=>{const e=i.get(n);e&&(t(e),i.delete(n))}),0),e.apply(this,[n])}});return o.push(()=>{r.FontFace=a}),o.push(s),ml(()=>{o.forEach(e=>e())})}(e)));const p=function(e){const{doc:t,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,selectionCb:a}=e;let s=!0;const c=ml(()=>{const e=t.getSelection();if(!e||s&&null!==e&&void 0!==e&&e.isCollapsed)return;s=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const a=e.getRangeAt(t),{startContainer:s,startOffset:l,endContainer:u,endOffset:d}=a;zc(s,r,o,i,!0)||zc(u,r,o,i,!0)||c.push({start:n.getId(s),startOffset:l,end:n.getId(u),endOffset:d})}a({ranges:c})});return c(),xc("selectionchange",c)}(e),f=function(e){let{doc:t,customElementCb:n}=e;const r=t.defaultView;return r&&r.customElements?Nc(r.customElements,"define",function(e){return function(t,r,o){try{n({define:{name:t}})}catch(i){}return e.apply(this,[t,r,o])}}):()=>{}}(e),m=[];for(const g of e.plugins)m.push(g.observer(g.callback,t,g.options));return ml(()=>{var e;gl.forEach(e=>e.reset()),null===(e=n)||void 0===e||e.disconnect(),r(),o(),i(),a(),s(),c(),l(),u(),d(),h(),p(),f(),m.forEach(e=>e())})}function Al(e){return"undefined"!==typeof window[e]}function xl(e){return Boolean("undefined"!==typeof window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class Rl{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,r){const o=n||this.getIdToRemoteIdMap(e),i=r||this.getRemoteIdToIdMap(e);let a=o.get(t);return a||(a=this.generateIdFn(),o.set(t,a),i.set(a,t)),a}getIds(e,t){const n=this.getIdToRemoteIdMap(e),r=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,n,r))}getRemoteId(e,t,n){const r=n||this.getRemoteIdToIdMap(e);if("number"!==typeof t)return t;const o=r.get(t);return o||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,n))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}class Pl{constructor(){this.crossOriginIframeMirror=new Rl(sc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Ml{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Rl(sc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Rl(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var n,r;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&(null===(n=e.contentWindow)||void 0===n||n.addEventListener("message",this.handleMessage.bind(this))),null===(r=this.loadListener)||void 0===r||r.call(this,e);const o=il(e);o&&o.adoptedStyleSheets&&o.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(o.adoptedStyleSheets,this.mirror.getId(o))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const r=this.transformCrossOriginEvent(n,t.data.event);r&&this.wrappedEmit(r,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case el.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:el.IncrementalSnapshot,data:{source:tl.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case el.Meta:case el.Load:case el.DomContentLoaded:return!1;case el.Plugin:return t;case el.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case el.IncrementalSnapshot:switch(t.data.source){case tl.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case tl.Drag:case tl.TouchMove:case tl.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case tl.ViewportResize:return!1;case tl.MediaInteraction:case tl.MouseInteraction:case tl.Scroll:case tl.CanvasMutation:case tl.Input:return this.replaceIds(t.data,e,["id"]),t;case tl.StyleSheetRule:case tl.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case tl.Font:return t;case tl.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case tl.AdoptedStyleSheet:var n;return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),null===(n=t.data.styles)||void 0===n||n.forEach(t=>{this.replaceStyleIds(t,e,["styleId"])}),t}}return!1}replace(e,t,n,r){for(const o of r)(Array.isArray(t[o])||"number"===typeof t[o])&&(Array.isArray(t[o])?t[o]=e.getIds(n,t[o]):t[o]=e.getId(n,t[o]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===zs.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class Ol{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Nl{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Bs(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=vl(s(s({},this.bypassOptions),{},{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(wl(s(s({},this.bypassOptions),{},{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),Zc(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(El({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){const t=il(e),n=function(e){try{return e.contentWindow}catch(t){}}(e);t&&n&&this.patchAttachShadow(n.Element,t)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(Nc(e.prototype,"attachShadow",function(e){return function(r){const o=e.call(this,r);return this.shadowRoot&&Jc(this)&&n.addShadowRoot(this.shadowRoot,t),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}for(var Dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ll="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Fl=0;Fl<64;Fl++)Ll[Dl.charCodeAt(Fl)]=Fl;class ql{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class Ul{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Vc,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},r=[];for(const o of e){let e;this.styleMirror.has(o)?e=this.styleMirror.getId(o):(e=this.styleMirror.add(o),r.push({styleId:e,rules:Array.from(o.rules||CSSRule,(e,t)=>({rule:Ws(e),index:t}))})),n.styleIds.push(e)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class zl{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(e=>e!==t)}add(e,t){this.active||(this.active=!0,function(){Xc("requestAnimationFrame")(...arguments)}(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}}let Hl,Bl;try{if(2!==Array.from([1],e=>2*e)[0]){var jl;const e=document.createElement("iframe");document.body.appendChild(e),Array.from=(null===(jl=e.contentWindow)||void 0===jl?void 0:jl.Array.from)||Array.from,document.body.removeChild(e)}}catch(cE){console.debug("Unable to override Array.from",cE)}const Wl=new Ks;function Kl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:o="rr-block",blockSelector:i=null,unblockSelector:a=null,ignoreClass:c="rr-ignore",ignoreSelector:l=null,maskAllText:u=!1,maskTextClass:d="rr-mask",unmaskTextClass:h=null,maskTextSelector:p=null,unmaskTextSelector:f=null,inlineStylesheet:m=!0,maskAllInputs:g,maskInputOptions:y,slimDOMOptions:v,maskAttributeFn:b,maskInputFn:w,maskTextFn:k,maxCanvasSize:S=null,packFn:_,sampling:C={},dataURLOptions:T={},mousemoveWait:E,recordDOM:I=!0,recordCanvas:A=!1,recordCrossOriginIframes:x=!1,recordAfter:R=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:P=!1,collectFonts:M=!1,inlineImages:O=!1,plugins:N,keepIframeSrcFn:D=()=>!1,ignoreCSSAttributes:L=new Set([]),errorHandler:F,onMutation:q,getCanvasManager:U}=e;fl=F;const z=!x||window.parent===window;let H=!1;if(!z)try{window.parent.document&&(H=!1)}catch(ne){H=!0}if(z&&!t)throw new Error("emit function is required");if(!z&&!H)return()=>{};void 0!==E&&void 0===C.mousemove&&(C.mousemove=E),Wl.reset();const B=!0===g?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==y?y:{},j=!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===v,headMetaDescKeywords:"all"===v}:v||{};let W;!function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];let o=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(e===o)return!0}while(o=o&&o.parentNode);return!1})}();let K=0;const G=e=>{for(const t of N||[])t.eventProcessor&&(e=t.eventProcessor(e));return _&&!H&&(e=_(e)),e};Hl=(e,o)=>{var i;const a=e;if(a.timestamp=Dc(),null===(i=gl[0])||void 0===i||!i.isFrozen()||a.type===el.FullSnapshot||a.type===el.IncrementalSnapshot&&a.data.source===tl.Mutation||gl.forEach(e=>e.unfreeze()),z)null===t||void 0===t||t(G(a),o);else if(H){const e={type:"rrweb",event:G(a),origin:window.location.origin,isCheckout:o};window.parent.postMessage(e,"*")}if(a.type===el.FullSnapshot)W=a,K=0;else if(a.type===el.IncrementalSnapshot){if(a.data.source===tl.Mutation&&a.data.isAttachIframe)return;K++;const e=r&&K>=r,t=n&&W&&a.timestamp-W.timestamp>n;(e||t)&&te(!0)}};const V=e=>{Hl({type:el.IncrementalSnapshot,data:s({source:tl.Mutation},e)})},Q=e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.Scroll},e)}),Y=e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.CanvasMutation},e)}),J=new Ul({mutationCb:V,adoptedStyleSheetCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.AdoptedStyleSheet},e)})}),$="boolean"===typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new Pl:new Ml({mirror:Wl,mutationCb:V,stylesheetManager:J,recordCrossOriginIframes:x,wrappedEmit:Hl});for(const s of N||[])s.getMirror&&s.getMirror({nodeMirror:Wl,crossOriginIframeMirror:$.crossOriginIframeMirror,crossOriginIframeStyleMirror:$.crossOriginIframeStyleMirror});const X=new zl,Z=function(e,t){try{return e?e(t):new ql}catch(n){return console.warn("Unable to initialize CanvasManager"),new ql}}(U,{mirror:Wl,win:window,mutationCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.CanvasMutation},e)}),recordCanvas:A,blockClass:o,blockSelector:i,unblockSelector:a,maxCanvasSize:S,sampling:C.canvas,dataURLOptions:T,errorHandler:F}),ee="boolean"===typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ol:new Nl({mutationCb:V,scrollCb:Q,bypassOptions:{onMutation:q,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:u,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskInputOptions:B,dataURLOptions:T,maskAttributeFn:b,maskTextFn:k,maskInputFn:w,recordCanvas:A,inlineImages:O,sampling:C,slimDOMOptions:j,iframeManager:$,stylesheetManager:J,canvasManager:Z,keepIframeSrcFn:D,processedNodeManager:X},mirror:Wl}),te=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!I)return;Hl({type:el.Meta,data:{href:window.location.href,width:qc(),height:Fc()}},e),J.reset(),ee.init(),gl.forEach(e=>e.lock());const t=function(e,t){const{mirror:n=new Ks,blockClass:r="rr-block",blockSelector:o=null,unblockSelector:i=null,maskAllText:a=!1,maskTextClass:s="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:v=!1,dataURLOptions:b,preserveWhiteSpace:w,onSerialize:k,onIframeLoad:S,iframeLoadTimeout:_,onBlockedImageLoad:C,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:I=()=>!1}=t||{};return Ac(e,{doc:e,mirror:n,blockClass:r,blockSelector:o,unblockSelector:i,maskAllText:a,maskTextClass:s,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===v||"all"===v?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===v,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===v?{}:v,dataURLOptions:b,inlineImages:h,recordCanvas:p,preserveWhiteSpace:w,onSerialize:k,onIframeLoad:S,iframeLoadTimeout:_,onBlockedImageLoad:C,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:I,newlyAddedElement:!1})}(document,{mirror:Wl,blockClass:o,blockSelector:i,unblockSelector:a,maskAllText:u,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,inlineStylesheet:m,maskAllInputs:B,maskAttributeFn:b,maskInputFn:w,maskTextFn:k,slimDOM:j,dataURLOptions:T,recordCanvas:A,inlineImages:O,onSerialize:e=>{Wc(e,Wl)&&$.addIframe(e),Kc(e,Wl)&&J.trackLinkElement(e),Gc(e)&&ee.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{$.attachIframe(e,t),e.contentWindow&&Z.addWindow(e.contentWindow),ee.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{J.attachLinkElement(e,t)},onBlockedImageLoad:(e,t,n)=>{let{width:r,height:o}=n;V({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:{style:{width:"".concat(r,"px"),height:"".concat(o,"px")}}}]})},keepIframeSrcFn:D});if(!t)return console.warn("Failed to snapshot the document");Hl({type:el.FullSnapshot,data:{node:t,initialOffset:Lc(window)}}),gl.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&J.adoptStyleSheets(document.adoptedStyleSheets,Wl.getId(document))};Bl=te;try{const e=[],t=e=>{var t;return ml(Il)({onMutation:q,mutationCb:V,mousemoveCb:(e,t)=>Hl({type:el.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.MouseInteraction},e)}),scrollCb:Q,viewportResizeCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.ViewportResize},e)}),inputCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.Input},e)}),mediaInteractionCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.MediaInteraction},e)}),styleSheetRuleCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.StyleSheetRule},e)}),styleDeclarationCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.StyleDeclaration},e)}),canvasMutationCb:Y,fontCb:e=>Hl({type:el.IncrementalSnapshot,data:s({source:tl.Font},e)}),selectionCb:e=>{Hl({type:el.IncrementalSnapshot,data:s({source:tl.Selection},e)})},customElementCb:e=>{Hl({type:el.IncrementalSnapshot,data:s({source:tl.CustomElement},e)})},blockClass:o,ignoreClass:c,ignoreSelector:l,maskAllText:u,maskTextClass:d,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:f,maskInputOptions:B,inlineStylesheet:m,sampling:C,recordDOM:I,recordCanvas:A,inlineImages:O,userTriggeredOnInput:P,collectFonts:M,doc:e,maskAttributeFn:b,maskInputFn:w,maskTextFn:k,keepIframeSrcFn:D,blockSelector:i,unblockSelector:a,slimDOMOptions:j,dataURLOptions:T,mirror:Wl,iframeManager:$,stylesheetManager:J,shadowDomManager:ee,processedNodeManager:X,canvasManager:Z,ignoreCSSAttributes:L,plugins:(null===N||void 0===N||null===(t=N.filter(e=>e.observer))||void 0===t?void 0:t.map(e=>({observer:e.observer,options:e.options,callback:t=>Hl({type:el.Plugin,data:{plugin:e.name,payload:t}})})))||[]},{})};$.addLoadListener(n=>{try{e.push(t(n.contentDocument))}catch(r){console.warn(r)}});const n=()=>{te(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(xc("DOMContentLoaded",()=>{Hl({type:el.DomContentLoaded,data:{}}),"DOMContentLoaded"===R&&n()})),e.push(xc("load",()=>{Hl({type:el.Load,data:{}}),"load"===R&&n()},window))),()=>{e.forEach(e=>e()),X.destroy(),Bl=void 0,fl=void 0}}catch(re){console.warn(re)}}var Gl,Vl;Kl.mirror=Wl,Kl.takeFullSnapshot=function(e){if(!Bl)throw new Error("please take full snapshot after start recording");Bl(e)},(Vl=Gl||(Gl={}))[Vl.NotStarted=0]="NotStarted",Vl[Vl.Running=1]="Running",Vl[Vl.Stopped=2]="Stopped";function Ql(e){return e>9999999999?e:1e3*e}function Yl(e){return e>9999999999?e/1e3:e}function Jl(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:el.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:tn(t,10,1e3)}}),"console"===t.category)))}function $l(e){return e.closest("button,a")||e}function Xl(e){const t=Zl(e);return t&&t instanceof Element?$l(t):t}function Zl(e){return function(e){return"object"===typeof e&&!!e&&"target"in e}(e)?e.target:e}let eu;function tu(e){return eu||(eu=[],W(As,"open",function(e){return function(){if(eu)try{eu.forEach(e=>e())}catch(o){}for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(As,n)}})),eu.push(e),()=>{const t=eu?eu.indexOf(e):-1;t>-1&&eu.splice(t,1)}}const nu=new Set([tl.Mutation,tl.StyleSheetRule,tl.StyleDeclaration,tl.AdoptedStyleSheet,tl.CanvasMutation,tl.Selection,tl.MediaInteraction]);class ru{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Jl;this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scrollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=tu(()=>{this._lastMutation=iu()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!ou.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!==typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:Yl(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1)||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastMutation=Yl(e)}registerScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastScroll=Yl(e)}registerClick(e){const t=$l(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(e=>{e.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=iu();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)});for(const n of e){const e=this._clicks.indexOf(n);e>-1&&(this._generateBreadcrumbs(n),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,r=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!r,{clickCount:i,clickBreadcrumb:a}=e;if(o){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),r=n<1e3*this._timeout?"mutation":"timeout",o={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:s(s({},a.data),{},{url:As.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:r,clickCount:i||1})};return void this._addBreadcrumbEvent(t,o)}if(i>1){const e={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:s(s({},a.data),{},{url:As.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0})};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=si(()=>this._checkClicks(),1e3)}}const ou=["A","BUTTON","INPUT"];function iu(){return Date.now()/1e3}function au(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(nu.has(n)&&e.registerMutation(t.timestamp),n===tl.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===tl.MouseInteraction}(t)){const{type:n,id:r}=t.data,o=Kl.mirror.getNode(r);o instanceof HTMLElement&&n===nl.Click&&e.registerClick(o)}}catch(n){}}function su(e){return s({timestamp:Date.now()/1e3,type:"default"},e)}var cu=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(cu||{});const lu=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function uu(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(lu.has(n)){let r=n;"data-testid"!==n&&"data-test-id"!==n||(r="testId"),t[r]=e[n]}return t}const du=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,r=null;try{r=t?Xl(e.event):Zl(e.event),n=x(r,{maxStringLength:200})||"<unknown>"}catch(o){n="<unknown>"}return{target:r,message:n}}(e);return su(s({category:"ui.".concat(e.name)},hu(t,n)))}(t);if(!n)return;const r="click"===t.name,o=r?t.event:void 0;var i,a,c;!(r&&e.clickDetector&&null!==o&&void 0!==o&&o.target)||o.altKey||o.metaKey||o.ctrlKey||o.shiftKey||(i=e.clickDetector,a=n,c=Xl(t.event),i.handleClick(a,c)),Jl(e,n)};function hu(e,t){const n=Kl.mirror.getId(e),r=n&&Kl.mirror.getNode(n),o=r&&Kl.mirror.getMeta(r),i=o&&function(e){return e.type===cu.Element}(o)?o:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(e=>e.type===cu.Text&&e.textContent).filter(Boolean).map(e=>e.trim()).join(""),attributes:uu(i.attributes)}}:{}}}function pu(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i,target:a}=e;if(!a||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(a)||!i)return null;const c=t||r||o,l=1===i.length;if(!c&&l)return null;const u=x(a,{maxStringLength:200})||"<unknown>",d=hu(a,u);return su({category:"ui.keyDown",message:u,data:s(s({},d.data),{},{metaKey:t,shiftKey:n,ctrlKey:r,altKey:o,key:i})})}(t);n&&Jl(e,n)}const fu={resource:function(e){const{entryType:t,initiatorType:n,name:r,responseEnd:o,startTime:i,decodedBodySize:a,encodedBodySize:s,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:"".concat(t,".").concat(n),start:yu(i),end:yu(o),name:r,data:{size:l,statusCode:c,decodedBodySize:a,encodedBodySize:s}}},paint:function(e){const{duration:t,entryType:n,name:r,startTime:o}=e,i=yu(o);return{type:n,name:r,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:r,duration:o,domComplete:i,encodedBodySize:a,domContentLoadedEventStart:s,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:h,startTime:p,transferSize:f,type:m}=e;if(0===o)return null;return{type:"".concat(t,".").concat(m),start:yu(p),end:yu(i),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:a,duration:o,domInteractive:l,domContentLoadedEventStart:s,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:h}}}};function mu(e,t){return n=>{let{metric:r}=n;t.replayPerformanceEntries.push(e(r))}}function gu(e){const t=fu[e.entryType];return t?t(e):null}function yu(e){return((ce()||As.performance.timeOrigin)+e)/1e3}function vu(e){const t=e.entries[e.entries.length-1];return Su(e,"largest-contentful-paint",null!==t&&void 0!==t&&t.element?[t.element]:void 0)}function bu(e){return void 0!==e.sources}function wu(e){const t=[],n=[];for(const r of e.entries)if(bu(r)){const e=[];for(const t of r.sources)if(t.node){n.push(t.node);const r=Kl.mirror.getId(t.node);r&&e.push(r)}t.push({value:r.value,nodeIds:e.length?e:void 0})}return Su(e,"cumulative-layout-shift",n,t)}function ku(e){const t=e.entries[e.entries.length-1];return Su(e,"interaction-to-next-paint",null!==t&&void 0!==t&&t.target?[t.target]:void 0)}function Su(e,t,n,r){const o=e.value,i=e.rating,a=yu(o);return{type:"web-vital",name:t,start:a,end:a,data:{value:o,size:o,rating:i,nodeIds:n?n.map(e=>Kl.mirror.getId(e)):void 0,attributions:r}}}const _u="undefined"===typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;const Cu=["log","warn","error"],Tu="[Replay] ";function Eu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";eo({category:"console",data:{logger:"replay"},level:t,message:"".concat(Tu).concat(e)},{level:t})}const Iu=function(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:n=>{e=!!n.captureExceptions,t=!!n.traceInternals}};return _u?(Cu.forEach(e=>{n[e]=function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];U[e](Tu,...r),t&&Eu(r.join(""),to(e))}}),n.exception=function(r){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];i.length&&n.error&&n.error(...i),U.error(Tu,r),e?cn(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&Eu(r,"error")},n.infoTick=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];U.log(Tu,...n),t&&setTimeout(()=>Eu(n[0]),0)}):Cu.forEach(e=>{n[e]=()=>{}}),n}();class Au extends Error{constructor(){super("Event buffer exceeded maximum size of ".concat(Ds,"."))}}class xu{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>Ds)throw new Au;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(e=>e.timestamp).sort()[0];return e?Ql(e):null}}class Ru{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",n=>{let{data:r}=n;r.success?e():t()},{once:!0}),this._worker.addEventListener("error",e=>{t(e)},{once:!0})})),this._ensureReadyPromise}destroy(){_u&&Iu.log("Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise((r,o)=>{const i=t=>{let{data:a}=t;const s=a;if(s.method===e&&s.id===n){if(this._worker.removeEventListener("message",i),!s.success)return _u&&Iu.error("Error in compression worker: ",s.response),void o(new Error("Error in compression worker"));r(s.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class Pu{constructor(e){this._worker=new Ru(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=Ql(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>Ds?Promise.reject(new Au):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{_u&&Iu.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Mu{constructor(e){this._fallback=new xu,this._compression=new Pu(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}set waitForCheckout(e){this._used.waitForCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void(_u&&Iu.exception(e,"Failed to load the compression worker, falling back to simple buffer"))}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t,waitForCheckout:n}=this._fallback,r=[];for(const i of e)r.push(this._compression.addEvent(i));this._compression.hasCheckout=t,this._compression.waitForCheckout=n,this._used=this._compression;try{await Promise.all(r),this._fallback.clear()}catch(o){_u&&Iu.exception(o,"Failed to add events when switching buffers.")}}}function Ou(e){let{useCompression:t,workerUrl:n}=e;if(t&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"===typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;_u&&Iu.log("Using compression worker".concat(e?" from ".concat(e):""));const n=new Worker(t);return new Mu(n)}catch(t){_u&&Iu.exception(t,"Failed to create compression worker")}}(n);if(e)return e}return _u&&Iu.log("Using simple buffer"),new xu}function Nu(){try{return"sessionStorage"in As&&!!As.sessionStorage}catch(e){return!1}}function Du(e){!function(){if(!Nu())return;try{As.sessionStorage.removeItem(xs)}catch(e){}}(),e.session=void 0}function Lu(e){return void 0!==e&&Math.random()<e}function Fu(e){if(Nu())try{As.sessionStorage.setItem(xs,JSON.stringify(e))}catch(t){}}function qu(e){const t=Date.now();return{id:e.id||X(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function Uu(e){let{sessionSampleRate:t,allowBuffering:n,stickySession:r=!1}=e,{previousSessionId:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=function(e,t){return Lu(e)?"session":!!t&&"buffer"}(t,n),a=qu({sampled:i,previousSessionId:o});return r&&Fu(a),a}function zu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:+new Date;return null===e||void 0===t||t<0||0!==t&&e+t<=n}function Hu(e,t){let{maxReplayDuration:n,sessionIdleExpire:r,targetTime:o=Date.now()}=t;return zu(e.started,n,o)||zu(e.lastActivity,r,o)}function Bu(e,t){let{sessionIdleExpire:n,maxReplayDuration:r}=t;return!!Hu(e,{sessionIdleExpire:n,maxReplayDuration:r})&&("buffer"!==e.sampled||0!==e.segmentId)}function ju(e,t){let{sessionIdleExpire:n,maxReplayDuration:r,previousSessionId:o}=e;const i=t.stickySession&&function(){if(!Nu())return null;try{const e=As.sessionStorage.getItem(xs);if(!e)return null;const t=JSON.parse(e);return _u&&Iu.infoTick("Loading existing session"),qu(t)}catch(e){return null}}();return i?Bu(i,{sessionIdleExpire:n,maxReplayDuration:r})?(_u&&Iu.infoTick("Session in sessionStorage is expired, creating new one..."),Uu(t,{previousSessionId:i.id})):i:(_u&&Iu.infoTick("Creating new session"),Uu(t,{previousSessionId:o}))}function Wu(e,t,n){return!!Gu(e,t)&&(Ku(e,t,n),!0)}async function Ku(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const o="buffer"===e.recordingMode;try{n&&o&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=function(e,t){try{if("function"===typeof t&&function(e){return e.type===el.Custom}(e))return t(e)}catch(n){return _u&&Iu.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!i)return;return await r.addEvent(i)}catch(i){const t=i&&i instanceof Au,n=t?"addEventSizeExceeded":"addEvent",a=Ie();if(a){const e=t?"buffer_overflow":"internal_sdk_error";a.recordDroppedEvent(e,"replay")}if(t&&o)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:n})}}function Gu(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Ql(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(_u&&Iu.infoTick("Skipping event with timestamp ".concat(n," because it is after maxReplayDuration")),!1))}function Vu(e){return!e.type}function Qu(e){return"transaction"===e.type}function Yu(e){return"feedback"===e.type}function Ju(e){return(t,n)=>{if(!e.isEnabled()||!Vu(t)&&!Qu(t))return;const r=n.statusCode;!r||r<200||r>=300||(Qu(t)?function(e,t){var n;const r=e.getContext();null!==(n=t.contexts)&&void 0!==n&&null!==(n=n.trace)&&void 0!==n&&n.trace_id&&r.traceIds.size<100&&r.traceIds.add(t.contexts.trace.trace_id)}(e,t):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();if("function"===typeof r&&!r(t))return;si(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(cE){e.handleException(cE)}})}(e,t))}}function $u(e){return t=>{e.isEnabled()&&Vu(t)&&function(e,t){var n;const r=null===(n=t.exception)||void 0===n||null===(n=n.values)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.value;if("string"!==typeof r)return;if(r.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||r.match(/(does not match server-rendered HTML|Hydration failed because)/i)){Jl(e,su({category:"replay.hydrate-error",data:{url:P()}}))}}(e,t)}}function Xu(e){const t=Ie();t&&t.on("beforeAddBreadcrumb",t=>function(e,t){if(!e.isEnabled()||!Zu(t))return;const n=function(e){if(!Zu(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))return null;if("console"===e.category)return function(e){var t;const n=null===(t=e.data)||void 0===t?void 0:t.arguments;if(!Array.isArray(n)||0===n.length)return su(e);let r=!1;const o=n.map(e=>{if(!e)return e;if("string"===typeof e)return e.length>Ns?(r=!0,"".concat(e.slice(0,Ns),"\u2026")):e;if("object"===typeof e)try{const t=tn(e,7);return JSON.stringify(t).length>Ns?(r=!0,"".concat(JSON.stringify(t,null,2).slice(0,Ns),"\u2026")):t}catch(t){}return e});return su(s(s({},e),{},{data:s(s({},e.data),{},{arguments:o},r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{})}))}(e);return su(e)}(t);n&&Jl(e,n)}(e,t))}function Zu(e){return!!e.category}function ed(){const e=Ce().getPropagationContext().dsc;e&&delete e.replay_id;const t=Mt();if(t){delete qt(t).replay_id}}function td(e){return Object.assign((t,n)=>{if(!e.isEnabled()||e.isPaused())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!Vu(t)&&!Qu(t)&&!Yu(t))return t;if(!e.checkAndHandleExpiredSession())return ed(),t;if(Yu(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate(()=>!t.timestamp||(e.throttledAddEvent({type:el.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1))}(e,t),t;if(function(e,t){var n,r;return!(e.type||null===(n=e.exception)||void 0===n||null===(n=n.values)||void 0===n||!n.length)&&!(null===(r=t.originalException)||void 0===r||!r.__rrweb__)}(t,n)&&!e.getOptions()._experiments.captureExceptions)return _u&&Iu.log("Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==Rs&&!(!t.exception||t.type)&&Lu(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags=s(s({},t.tags),{},{replayId:e.getSessionId()})),t},{id:"Replay"})}function nd(e,t){return t.map(t=>{let{type:n,start:r,end:o,name:i,data:a}=t;const s=e.throttledAddEvent({type:el.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:o,data:a}}});return"string"===typeof s?Promise.resolve(null):s})}function rd(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(nd(e,[n]),!1)))}}function od(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!_u||!e.getOptions()._experiments.traceInternals)&&Cs(t,Ie())}(e,t.name)||e.addUpdate(()=>(nd(e,[t]),!0)))}function id(e){if(!e)return;const t=new TextEncoder;try{if("string"===typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=as(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(n){}}function ad(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function sd(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n=s({},e._meta),r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function cd(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:o,method:i,statusCode:a,request:s,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:o,data:{method:i,statusCode:a,request:s,response:c}}}function ld(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function ud(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:o,warnings:i}=function(e){if(!e||"string"!==typeof e)return{body:e};const t=e.length>Os,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,Os);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:"".concat(t,"\u2026"),warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(r){}return{body:e}}(n);return r.body=o,null!==i&&void 0!==i&&i.length&&(r._meta={warnings:i}),r}function dd(e,t){return Object.entries(e).reduce((n,r)=>{let[o,i]=r;const a=o.toLowerCase();return t.includes(a)&&e[o]&&(n[a]=i),n},{})}function hd(e,t){const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:As.document.baseURI;if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(As.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;if(!e.endsWith("/")&&r.endsWith("/"))return r.slice(0,-1);return r}(e);return j(n,t)}async function pd(e,t,n){try{const r=await async function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r}=t,{url:a,method:s,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=hd(a,n.networkDetailAllowUrls)&&!hd(a,n.networkDetailDenyUrls),h=d?function(e,t,n){let{networkCaptureBodies:r,networkRequestHeaders:o}=e;const i=t?function(e,t){if(1===e.length&&"string"!==typeof e[0])return md(e[0],t);if(2===e.length)return md(e[1],t);return{}}(t,o):{};if(!r)return ud(i,n,void 0);const a=cs(t),[s,c]=ss(a,Iu),l=ud(i,n,s);if(c)return sd(l,c);return l}(n,t.input,l):ld(l),p=await async function(e,t,n,r){let{networkCaptureBodies:o,networkResponseHeaders:i}=t;if(!e&&void 0!==r)return ld(r);const a=n?fd(n.headers,i):{};if(!n||!o&&void 0!==r)return ud(a,r,void 0);const[s,c]=await async function(e){const t=function(e){try{return e.clone()}catch(t){_u&&Iu.exception(t,"Failed to clone response body")}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise((t,n)=>{const r=si(()=>n(new Error("Timeout while trying to read response body")),500);(async function(e){return await e.text()})(e).then(e=>t(e),e=>n(e)).finally(()=>clearTimeout(r))})}(t);return[e]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(_u&&Iu.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(_u&&Iu.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}(n),l=function(e,t){let{networkCaptureBodies:n,responseBodySize:r,captureDetails:o,headers:i}=t;try{const t=null!==e&&void 0!==e&&e.length&&void 0===r?id(e):r;return o?ud(i,t,n?e:void 0):ld(t)}catch(a){return _u&&Iu.exception(a,"Failed to serialize response body"),ud(i,r,void 0)}}(s,{networkCaptureBodies:o,responseBodySize:r,captureDetails:e,headers:a});if(c)return sd(l,c);return l}(d,n,t.response,u);return{startTimestamp:o,endTimestamp:i,url:a,method:s,statusCode:c,request:h,response:p}}(e,t,n),o=cd("resource.fetch",r);od(n.replay,o)}catch(r){_u&&Iu.exception(r,"Failed to capture fetch breadcrumb")}}function fd(e,t){const n={};return t.forEach(t=>{e.get(t)&&(n[t]=e.get(t))}),n}function md(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?fd(n,t):Array.isArray(n)?{}:dd(n,t):{}}async function gd(e,t,n){try{const r=function(e,t,n){const r=Date.now(),{startTimestamp:o=r,endTimestamp:i=r,input:a,xhr:s}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:h}=e.data;if(!c)return null;if(!s||!hd(c,n.networkDetailAllowUrls)||hd(c,n.networkDetailDenyUrls)){return{startTimestamp:o,endTimestamp:i,url:c,method:l,statusCode:u,request:ld(d),response:ld(h)}}const p=s[mo],f=p?dd(p.request_headers,n.networkRequestHeaders):{},m=dd(ls(s),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?ss(a,Iu):[void 0],[v,b]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return function(e,t){try{if("string"===typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"===typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return _u&&Iu.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return _u&&Iu.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(n){t.push(n)}return _u&&Iu.warn("Failed to get xhr response body",...t),[void 0]}(s):[void 0],w=ud(f,d,g),k=ud(m,h,v);return{startTimestamp:o,endTimestamp:i,url:c,method:l,statusCode:u,request:y?sd(w,y):w,response:b?sd(k,b):k}}(e,t,n),o=cd("resource.xhr",r);od(n.replay,o)}catch(r){_u&&Iu.exception(r,"Failed to capture xhr breadcrumb")}}function yd(e,t){const{xhr:n,input:r}=t;if(!n)return;const o=id(r),i=n.getResponseHeader("content-length")?ad(n.getResponseHeader("content-length")):function(e,t){try{return id("json"===t&&e&&"object"===typeof e?JSON.stringify(e):e)}catch(n){return}}(n.response,n.responseType);void 0!==o&&(e.data.request_body_size=o),void 0!==i&&(e.data.response_body_size=i)}function vd(e){const t=Ie();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a}=e.getOptions(),s={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:o,networkRequestHeaders:i,networkResponseHeaders:a};t&&t.on("beforeAddBreadcrumb",(e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return null===e||void 0===e?void 0:e.xhr}(n)&&(yd(t,n),gd(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return null===e||void 0===e?void 0:e.response}(n)&&(!function(e,t){const{input:n,response:r}=t,o=id(n?cs(n):void 0),i=r?ad(r.headers.get("content-length")):void 0;void 0!==o&&(e.data.request_body_size=o),void 0!==i&&(e.data.response_body_size=i)}(t,n),pd(t,n,e))}catch(r){_u&&Iu.exception(r,"Error when enriching network breadcrumb")}}(s,e,t))}catch(n){}}function bd(e){const t=Ie();ho(du(e)),bo(rd(e)),Xu(e),vd(e);const n=td(e);var r;r=n,Te().addEventProcessor(r),t&&(t.on("beforeSendEvent",$u(e)),t.on("afterSendEvent",Ju(e)),t.on("createDsc",t=>{const n=e.getSessionId();if(n&&e.isEnabled()&&"session"===e.recordingMode){e.checkAndHandleExpiredSession()&&(t.replay_id=n)}}),t.on("spanStart",t=>{e.lastActiveSpan=t}),t.on("spanEnd",t=>{e.lastActiveSpan=t}),t.on("beforeSendFeedback",async(t,n)=>{var r;const o=e.getSessionId();null!==n&&void 0!==n&&n.includeReplay&&e.isEnabled()&&o&&null!==(r=t.contexts)&&void 0!==r&&r.feedback&&("api"===t.contexts.feedback.source&&await e.sendBufferedReplayOrFlush(),t.contexts.feedback.replay_id=o)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}function wd(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,o=Date.now()/1e3;return{type:"memory",name:"memory",start:o,end:o,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function kd(e,t,n){return function(e,t,n){let r,o,i;const a=null!==n&&void 0!==n&&n.maxWait?Math.max(n.maxWait,t):0,s=(null===n||void 0===n?void 0:n.setTimeoutImpl)||setTimeout;function c(){return l(),r=e(),r}function l(){void 0!==o&&clearTimeout(o),void 0!==i&&clearTimeout(i),o=i=void 0}function u(){return o&&clearTimeout(o),o=s(c,t),a&&void 0===i&&(i=s(c,a)),r}return u.cancel=l,u.flush=function(){return void 0!==o||void 0!==i?c():r},u}(e,t,s(s({},n),{},{setTimeoutImpl:si}))}const Sd=l.navigator;function _d(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession())return void(_u&&Iu.warn("Received replay event after session expired."));const o=r||!t;t=!0,e.clickDetector&&au(e.clickDetector,n),e.addUpdate(()=>{if("buffer"===e.recordingMode&&o&&e.setInitialState(),!Wu(e,n,o))return!0;if(!o)return!1;const t=e.session;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;Wu(e,function(e){const t=e.getOptions();return{type:el.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,o),"buffer"===e.recordingMode&&t&&e.eventBuffer){const n=e.eventBuffer.getEarliestTimestamp();n&&(_u&&Iu.log("Updating session start time to earliest event in buffer to ".concat(new Date(n))),t.started=n,e.getOptions().stickySession&&Fu(t))}return null!==t&&void 0!==t&&t.previousSessionId||"session"===e.recordingMode&&e.flush(),!0})}}async function Cd(e){let{recordingData:t,replayId:n,segmentId:r,eventContext:o,timestamp:i,session:a}=e;const c=function(e){let t,{recordingData:n,headers:r}=e;const o="".concat(JSON.stringify(r),"\n");if("string"===typeof n)t="".concat(o).concat(n);else{const e=(new TextEncoder).encode(o);t=new Uint8Array(e.length+n.length),t.set(e),t.set(n,e.length)}return t}({recordingData:t,headers:{segment_id:r}}),{urls:l,errorIds:u,traceIds:d,initialTimestamp:h}=o,p=Ie(),f=Ce(),m=null===p||void 0===p?void 0:p.getTransport(),g=null===p||void 0===p?void 0:p.getDsn();if(!p||!m||!g||!a.sampled)return Promise.resolve({});const y={type:"replay_event",replay_start_timestamp:h/1e3,timestamp:i/1e3,error_ids:u,trace_ids:d,urls:l,replay_id:n,segment_id:r,replay_type:a.sampled},v=await async function(e){let{client:t,scope:n,replayId:r,event:o}=e;const i={event_id:r,integrations:"object"!==typeof t._integrations||null===t._integrations||Array.isArray(t._integrations)?void 0:Object.keys(t._integrations)};t.emit("preprocessEvent",o,i);const a=await on(t.getOptions(),o,i,n,t,Te());if(!a)return null;t.emit("postprocessEvent",a,i),a.platform=a.platform||"javascript";const c=t.getSdkMetadata(),{name:l,version:u,settings:d}=(null===c||void 0===c?void 0:c.sdk)||{};return a.sdk=s(s({},a.sdk),{},{name:l||"sentry.javascript.unknown",version:u||"0.0.0",settings:d}),a}({scope:f,client:p,replayId:n,event:y});if(!v)return p.recordDroppedEvent("event_processor","replay"),_u&&Iu.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete v.sdkProcessingMetadata;const b=function(e,t,n,r){return Dn(Kn(e,Wn(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"===typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(v,c,g,p.getOptions().tunnel);let w;try{w=await m.send(b)}catch(cE){const t=new Error(Rs);try{t.cause=cE}catch(S){}throw t}if("number"===typeof w.statusCode&&(w.statusCode<200||w.statusCode>=300))throw new Td(w.statusCode);const k=ri({},w);if(ni(k,"replay"))throw new Ed(k);return w}class Td extends Error{constructor(e){super("Transport returned status code ".concat(e))}}class Ed extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Id(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{count:0,interval:5e3};const{recordingData:n,onError:r}=e;if(n.length)try{return await Cd(e),!0}catch(cE){if(cE instanceof Td||cE instanceof Ed)throw cE;if(un("Replays",{_retryCount:t.count}),r&&r(cE),t.count>=3){const e=new Error("".concat(Rs," - max retries exceeded"));try{e.cause=cE}catch(o){}throw e}return t.interval*=++t.count,new Promise((r,o)=>{si(async()=>{try{await Id(e,t),r(!0)}catch(n){o(n)}},t.interval)})}}const Ad="__THROTTLED";function xd(e,t,n){const r=new Map;let o=!1;return function(){const i=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;r.forEach((e,n)=>{n<t&&r.delete(n)})})(i),[...r.values()].reduce((e,t)=>e+t,0)>=t){const e=o;return o=!0,e?"__SKIPPED":Ad}o=!1;const a=r.get(i)||0;return r.set(i,a+1),e(...arguments)}}class Rd{constructor(e){let{options:t,recordingOptions:n}=e;this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=kd(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=xd((e,t)=>function(e,t,n){return Gu(e,t)?Ku(e,t,n):Promise.resolve(null)}(this,e,t),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:o}=this.getOptions(),i=r?{threshold:Math.min(3e3,r),timeout:r,scrollTimeout:300,ignoreSelector:o?o.join(","):""}:void 0;if(i&&(this.clickDetector=new ru(this,i)),_u){const e=t._experiments;Iu.setConfig({captureExceptions:!!e.captureExceptions,traceInternals:!!e.traceInternals})}this._handleVisibilityChange=()=>{"visible"===As.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const e=su({category:"ui.blur"});this._doChangeToBackgroundTasks(e)},this._handleWindowFocus=()=>{const e=su({category:"ui.focus"});this._doChangeToForegroundTasks(e)},this._handleKeyboardEvent=e=>{pu(this,e)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}handleException(e){_u&&Iu.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options,r=t<=0&&n<=0;this._requiresManualStart=r,r||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",_u&&Iu.infoTick("Starting replay in ".concat(this.recordingMode," mode")),this._initializeRecording()):_u&&Iu.exception(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)return void(_u&&Iu.log("Recording is already in progress"));if(this._isEnabled&&"buffer"===this.recordingMode)return void(_u&&Iu.log("Buffering is in progress, call `flush()` to save the replay"));_u&&Iu.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=ju({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled)return void(_u&&Iu.log("Buffering is in progress, call `flush()` to save the replay"));_u&&Iu.infoTick("Starting replay in buffer mode");const e=ju({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=Kl(s(s(s(s({},this._recordingOptions),"buffer"===this.recordingMode?{checkoutEveryNms:6e4}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)}),{},{emit:_d(this)},function(){var e,t;return/iPhone|iPad|iPod/i.test(null!==(e=null===Sd||void 0===Sd?void 0:Sd.userAgent)&&void 0!==e?e:"")||/Macintosh/i.test(null!==(t=null===Sd||void 0===Sd?void 0:Sd.userAgent)&&void 0!==t?t:"")&&null!==Sd&&void 0!==Sd&&Sd.maxTouchPoints&&(null===Sd||void 0===Sd?void 0:Sd.maxTouchPoints)>1?{sampling:{mousemove:!1}}:{}}()),{},{onMutation:this._onMutationHandler.bind(this)},e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}))}catch(cE){this.handleException(cE)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(cE){return this.handleException(cE),!1}}async stop(){let{forceFlush:e=!1,reason:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{var n;_u&&Iu.log("Stopping Replay".concat(t?" triggered by ".concat(t):"")),ed(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),null===(n=this.eventBuffer)||void 0===n||n.destroy(),this.eventBuffer=null,Du(this)}catch(cE){this.handleException(cE)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),_u&&Iu.log("Pausing replay"))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),_u&&Iu.log("Resuming replay"))}async sendBufferedReplayOrFlush(){let{continueRecording:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();_u&&Iu.log("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&this._isEnabled&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(e){var t,n;if(!e||!1!==(null===(t=this.session)||void 0===t?void 0:t.sampled))return null===(n=this.session)||void 0===n?void 0:n.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&zu(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e="".concat(As.location.pathname).concat(As.location.hash).concat(As.location.search),t="".concat(As.location.origin).concat(e);this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Ad){const e=su({category:"replay.throttled"});this.addUpdate(()=>!Wu(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastActiveSpan||Mt(),t=e&&Pt(e),n=(t&&Ct(t).data||{})[De];if(t&&n&&["route","custom"].includes(n))return Ct(t).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Ou({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=ju({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!Bu(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{As.document.addEventListener("visibilitychange",this._handleVisibilityChange),As.addEventListener("blur",this._handleWindowBlur),As.addEventListener("focus",this._handleWindowFocus),As.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(bd(this),this._hasInitializedCoreListeners=!0)}catch(cE){this.handleException(cE)}this._performanceCleanupCallback=function(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n(e){let{entries:n}=e;n.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(e=>{r.push(ya(e,n))}),r.push(ma(mu(vu,e)),fa(mu(wu,e)),ga(mu(ku,e))),()=>{r.forEach(e=>e())}}(this)}_removeListeners(){try{As.document.removeEventListener("visibilitychange",this._handleVisibilityChange),As.removeEventListener("blur",this._handleWindowBlur),As.removeEventListener("focus",this._handleWindowFocus),As.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(cE){this.handleException(cE)}}_doChangeToBackgroundTasks(e){if(!this.session)return;Hu(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):_u&&Iu.log("Document has become active, but session has expired")}_updateUserActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastActivity=e}_updateSessionActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:el.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=(t=this.performanceEntries,t.map(gu).filter(Boolean)).concat(this.replayPerformanceEntries);var t;if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const t=this._context.initialTimestamp/1e3;e=e.filter(e=>e.start>=t)}return Promise.all(nd(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t||this._requiresManualStart)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){var e;const t=this.getSessionId();if(this.session&&this.eventBuffer&&t){if(await this._addPerformanceEntries(),null!==(e=this.eventBuffer)&&void 0!==e&&e.hasEvents&&(await async function(e){try{return Promise.all(nd(e,[wd(As.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const e=Date.now();if(e-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),r=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Id({replayId:t,recordingData:o,segmentId:r,eventContext:n,session:this.session,timestamp:e,onError:e=>this.handleException(e)})}catch(cE){this.handleException(cE),this.stop({reason:"sendReplay"});const t=Ie();if(t){const n=cE instanceof Ed?"ratelimit_backoff":"send_error";t.recordDroppedEvent(n,"replay")}}}else _u&&Iu.error("No session or eventBuffer found to flush.")}async _flush(){let{force:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(_u&&Iu.error("Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const r=n<this._options.minReplayDuration,o=n>this._options.maxReplayDuration+5e3;if(r||o)return _u&&Iu.log("Session duration (".concat(Math.floor(n/1e3),"s) is too ").concat(r?"short":"long",", not sending replay.")),void(r&&this._debouncedFlush());const i=this.eventBuffer;i&&0===this.session.segmentId&&!i.hasCheckout&&_u&&Iu.log("Flushing initial segment without checkout.");const a=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(cE){this.handleException(cE)}finally{this._flushLock=void 0,a&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&Fu(this.session)}_onMutationHandler(e){const{ignoreMutations:t}=this._options._experiments;if(null!==t&&void 0!==t&&t.length&&e.some(e=>{const n=function(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch(t){return null}}(e.target),r=t.join(",");return null===n||void 0===n?void 0:n.matches(r)}))return!1;const n=e.length,r=this._options.mutationLimit,o=r&&n>r;if(n>this._options.mutationBreadcrumbLimit||o){const e=su({category:"replay.mutations",data:{count:n,limit:o}});this._createCustomBreadcrumb(e)}return!o||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}function Pd(e,t){return[...e,...t].join(",")}const Md='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Od=["content-length","content-type","accept"];let Nd=!1;class Dd{constructor(){let{flushMinDelay:e=Ps,flushMaxDelay:t=Ms,minReplayDuration:n=Ls,maxReplayDuration:r=Fs,stickySession:o=!0,useCompression:i=!0,workerUrl:a,_experiments:c={},maskAllText:l=!0,maskAllInputs:u=!0,blockAllMedia:d=!0,mutationBreadcrumbLimit:h=750,mutationLimit:p=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:m=[],networkDetailAllowUrls:g=[],networkDetailDenyUrls:y=[],networkCaptureBodies:v=!0,networkRequestHeaders:b=[],networkResponseHeaders:w=[],mask:k=[],maskAttributes:S=["title","placeholder","aria-label"],unmask:_=[],block:C=[],unblock:T=[],ignore:E=[],maskFn:I,beforeAddRecordingEvent:A,beforeErrorSampling:x,onError:R}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name="Replay";const P=function(e){let{mask:t,unmask:n,block:r,unblock:o,ignore:i}=e;return{maskTextSelector:Pd(t,[".sentry-mask","[data-sentry-mask]"]),unmaskTextSelector:Pd(n,[]),blockSelector:Pd(r,[".sentry-block","[data-sentry-block]","base","iframe[srcdoc]:not([src])"]),unblockSelector:Pd(o,[]),ignoreSelector:Pd(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}({mask:k,unmask:_,block:C,unblock:T,ignore:E});if(this._recordingOptions=s(s({maskAllInputs:u,maskAllText:l,maskInputOptions:{password:!0},maskTextFn:I,maskInputFn:I,maskAttributeFn:(e,t,n)=>function(e){let{el:t,key:n,maskAttributes:r,maskAllText:o,privacyOptions:i,value:a}=e;return o?i.unmaskTextSelector&&t.matches(i.unmaskTextSelector)?a:r.includes(n)||"value"===n&&"INPUT"===t.tagName&&["submit","button"].includes(t.getAttribute("type")||"")?a.replace(/[\S]/g,"*"):a:a}({maskAttributes:S,maskAllText:l,privacyOptions:P,key:e,value:t,el:n})},P),{},{slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(t){}},recordCrossOriginIframes:Boolean(c.recordCrossOriginIframes)}),this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(r,Fs),stickySession:o,useCompression:i,workerUrl:a,blockAllMedia:d,maskAllInputs:u,maskAllText:l,mutationBreadcrumbLimit:h,mutationLimit:p,slowClickTimeout:f,slowClickIgnoreSelectors:m,networkDetailAllowUrls:g,networkDetailDenyUrls:y,networkCaptureBodies:v,networkRequestHeaders:Ld(b),networkResponseHeaders:Ld(w),beforeAddRecordingEvent:A,beforeErrorSampling:x,onError:R,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?"".concat(this._recordingOptions.blockSelector,",").concat(Md):Md),this._isInitialized&&Is())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Nd}set _isInitialized(e){Nd=e}afterAllSetup(e){Is()&&!this._replay&&(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(e){var t;if(null!==(t=this._replay)&&void 0!==t&&t.isEnabled())return this._replay.getSessionId(e)}getRecordingMode(){var e;if(null!==(e=this._replay)&&void 0!==e&&e.isEnabled())return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const t=function(e,t){const n=t.getOptions(),r=s({sessionSampleRate:0,errorSampleRate:0},e),o=ht(n.replaysSessionSampleRate),i=ht(n.replaysOnErrorSampleRate);null==o&&null==i&&D(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")});null!=o&&(r.sessionSampleRate=o);null!=i&&(r.errorSampleRate=i);return r}(this._initialOptions,e);this._replay=new Rd({options:t,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const t=e.getIntegrationByName("ReplayCanvas");if(!t)return;this._replay._canvas=t.getOptions()}catch(t){}}}function Ld(e){return[...Od,...e.map(e=>e.toLowerCase())]}const Fd="https://ac5a8c3d0354c64242373560e6f1c1d0@o4510251906695168.ingest.us.sentry.io/4510251914166272",qd="development";var Ud;Fd?(console.log("\ud83d\udd0d Initializing Sentry for environment:",qd),function(e){const t=s({},e);br(t,"react"),un("react",{version:ui.version}),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=!e.skipBrowserExtensionCheck&&li(),n=s(s({},e),{},{enabled:!t&&e.enabled,stackParser:(r=e.stackParser||Xo,Array.isArray(r)?Jt(...r):r),integrations:gn({integrations:e.integrations,defaultIntegrations:null==e.defaultIntegrations?[Sn(),In(),To(),_o(),Lo(),Wo(),An(),Uo(),xo()]:e.defaultIntegrations}),transport:e.transport||ci});var r;Mn(Fr,n)}(t)}({dsn:Fd,environment:qd,integrations:[vs(),new Dd(Ud)],tracesSampleRate:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1})):console.log("\u2139\ufe0f Sentry is disabled. Set REACT_APP_SENTRY_DSN and REACT_APP_ENABLE_SENTRY=true to enable.");var zd=n(391);const Hd={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Bd=200,jd=400,Wd=400,Kd=499,Gd=500,Vd=599,Qd="GET",Yd="POST",Jd=[Hd.OPENID_SCOPE,Hd.PROFILE_SCOPE,Hd.OFFLINE_ACCESS_SCOPE],$d=[...Jd,Hd.EMAIL_SCOPE],Xd="Content-Type",Zd="Content-Length",eh="Retry-After",th="X-AnchorMailbox",nh="x-ms-request-id",rh="x-ms-httpver",oh="active-account-filters",ih="common",ah="organizations",sh="consumers",ch="access_token",lh="xms_cc",uh="login",dh="select_account",hh="consent",ph="none",fh="no_session",mh="code",gh="id_token token refresh_token",yh="query",vh="fragment",bh="query",wh="authorization_code",kh="refresh_token",Sh="MSSTS",_h="ADFS",Ch="Generic",Th="-",Eh=".",Ih={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},Ah="appmetadata",xh="1",Rh="authority-metadata",Ph=86400,Mh="config",Oh="cache",Nh="network",Dh="hardcoded_values",Lh={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Fh={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},qh=60,Uh=3600,zh="throttling",Hh="retry-after, h429",Bh="invalid_grant",jh="client_mismatch",Wh="1",Kh="3",Gh="4",Vh="2",Qh="4",Yh="5",Jh="0",$h="1",Xh="2",Zh="3",ep="4",tp="pop",np="unexpected_error",rp="post_request_failed",op={[np]:"Unexpected error in authentication.",[rp]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class ip extends Error{constructor(e,t,n){super(t?"".concat(e,": ").concat(t):e),Object.setPrototypeOf(this,ip.prototype),this.errorCode=e||Hd.EMPTY_STRING,this.errorMessage=t||Hd.EMPTY_STRING,this.subError=n||Hd.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function ap(e,t){return new ip(e,t?"".concat(op[e]," ").concat(t):op[e])}const sp="storage_not_supported",cp="stubbed_public_client_application_called",lp="in_mem_redirect_unavailable",up={[sp]:"Given storage configuration option was not supported.",[cp]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[lp]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class dp extends ip{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,dp.prototype)}}function hp(e){return new dp(e,up[e])}const pp={initialize:()=>Promise.reject(hp(cp)),acquireTokenPopup:()=>Promise.reject(hp(cp)),acquireTokenRedirect:()=>Promise.reject(hp(cp)),acquireTokenSilent:()=>Promise.reject(hp(cp)),acquireTokenByCode:()=>Promise.reject(hp(cp)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(hp(cp)),loginPopup:()=>Promise.reject(hp(cp)),loginRedirect:()=>Promise.reject(hp(cp)),logout:()=>Promise.reject(hp(cp)),logoutRedirect:()=>Promise.reject(hp(cp)),logoutPopup:()=>Promise.reject(hp(cp)),ssoSilent:()=>Promise.reject(hp(cp)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw hp(cp)},getLogger:()=>{throw hp(cp)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw hp(cp)},hydrateCache:()=>Promise.reject(hp(cp)),clearCache:()=>Promise.reject(hp(cp))},fp="invalid_grant",mp=483,gp=600,yp="msal",vp=30,bp="msal.js.browser",wp="53ee284d-920a-4b59-9d30-a60315b26836",kp="ppnbnpeolgkicgegkbkbjmhlideopiji",Sp="MATS",_p="MicrosoftEntra",Cp="DOM API",Tp="get-token-and-sign-out",Ep="PlatformAuthDOMHandler",Ip="PlatformAuthExtensionHandler",Ap="Handshake",xp="HandshakeResponse",Rp="GetToken",Pp="Response",Mp="localStorage",Op="sessionStorage",Np="memoryStorage",Dp="GET",Lp="POST",Fp="signin",qp="signout",Up="request.origin",zp="urlHash",Hp="request.params",Bp="code.verifier",jp="interaction.status",Wp="request.native",Kp="wrapper.sku",Gp="wrapper.version",Vp=861,Qp=862,Yp=863,Jp=865,$p=866,Xp=61,Zp=961,ef=962;var tf;!function(e){e.Redirect="redirect",e.Popup="popup",e.Silent="silent",e.None="none"}(tf||(tf={}));const nf="startup",rf="login",of="logout",af="acquireToken",sf="ssoSilent",cf="handleRedirect",lf="none",uf={scopes:Jd},df="@azure/msal-react",hf="msal.db",pf="".concat(hf,".keys"),ff=0,mf=1,gf=2,yf=3,vf=4,bf=5,wf=[ff,bf,vf];var kf;!function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Info=2]="Info",e[e.Verbose=3]="Verbose",e[e.Trace=4]="Trace"}(kf||(kf={}));class Sf{constructor(e,t,n){this.level=kf.Info;const r=e||Sf.createDefaultLoggerOptions();this.localCallback=r.loggerCallback||(()=>{}),this.piiLoggingEnabled=r.piiLoggingEnabled||!1,this.level="number"===typeof r.logLevel?r.logLevel:kf.Info,this.correlationId=r.correlationId||Hd.EMPTY_STRING,this.packageName=t||Hd.EMPTY_STRING,this.packageVersion=n||Hd.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:kf.Info}}clone(e,t,n){return new Sf({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:n||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const n=(new Date).toUTCString(),r="[".concat(n,"] : [").concat(t.correlationId||this.correlationId||"","]"),o="".concat(r," : ").concat(this.packageName,"@").concat(this.packageVersion," : ").concat(kf[t.logLevel]," - ").concat(e);this.executeCallback(t.logLevel,o,t.containsPii||!1)}executeCallback(e,t,n){this.localCallback&&this.localCallback(e,t,n)}error(e,t){this.logMessage(e,{logLevel:kf.Error,containsPii:!1,correlationId:t||Hd.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:kf.Error,containsPii:!0,correlationId:t||Hd.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:kf.Warning,containsPii:!1,correlationId:t||Hd.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:kf.Warning,containsPii:!0,correlationId:t||Hd.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:kf.Info,containsPii:!1,correlationId:t||Hd.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:kf.Info,containsPii:!0,correlationId:t||Hd.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:kf.Verbose,containsPii:!1,correlationId:t||Hd.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:kf.Verbose,containsPii:!0,correlationId:t||Hd.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:kf.Trace,containsPii:!1,correlationId:t||Hd.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:kf.Trace,containsPii:!0,correlationId:t||Hd.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const _f={instance:pp,inProgress:lf,accounts:[],logger:new Sf({})},Cf=ui.createContext(_f),Tf=(Cf.Consumer,"msal:initializeStart"),Ef="msal:initializeEnd",If="msal:accountAdded",Af="msal:accountRemoved",xf="msal:activeAccountChanged",Rf="msal:loginStart",Pf="msal:loginSuccess",Mf="msal:loginFailure",Of="msal:acquireTokenStart",Nf="msal:acquireTokenSuccess",Df="msal:acquireTokenFailure",Lf="msal:acquireTokenFromNetworkStart",Ff="msal:ssoSilentStart",qf="msal:ssoSilentSuccess",Uf="msal:ssoSilentFailure",zf="msal:acquireTokenByCodeStart",Hf="msal:acquireTokenByCodeSuccess",Bf="msal:acquireTokenByCodeFailure",jf="msal:handleRedirectStart",Wf="msal:handleRedirectEnd",Kf="msal:popupOpened",Gf="msal:logoutStart",Vf="msal:logoutSuccess",Qf="msal:logoutFailure",Yf="msal:logoutEnd",Jf="msal:restoreFromBFCache";class $f{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case Rf:return rf;case Ff:return sf;case Of:if(e.interactionType===tf.Redirect||e.interactionType===tf.Popup)return af;break;case jf:return cf;case Gf:return of;case qf:case Uf:if(t&&t!==sf)break;return lf;case Yf:if(t&&t!==of)break;return lf;case Wf:if(t&&t!==cf)break;return lf;case Pf:case Mf:case Nf:case Df:case Jf:if(e.interactionType===tf.Redirect||e.interactionType===tf.Popup){if(t&&t!==rf&&t!==af)break;return lf}}return null}}function Xf(e,t){if(e.length!==t.length)return!1;const n=[...t];return e.every(e=>{const t=n.shift();return!(!e||!t)&&(e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username)})}const Zf="3.0.20",em="UNBLOCK_INPROGRESS",tm="EVENT",nm=(e,t)=>{const{type:n,payload:r}=t;let o=e.inProgress;switch(n){case em:e.inProgress===nf&&(o=lf,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case tm:const t=r.message,i=$f.getInteractionStatusFromEvent(t,e.inProgress);i&&(r.logger.info("MsalProvider - ".concat(t.eventType," results in setting inProgress from ").concat(e.inProgress," to ").concat(i)),o=i);break;default:throw new Error("Unknown action type: ".concat(n))}if(o===nf)return e;const i=r.instance.getAllAccounts();return o===e.inProgress||Xf(i,e.accounts)?o!==e.inProgress?s(s({},e),{},{inProgress:o}):Xf(i,e.accounts)?e:s(s({},e),{},{accounts:i}):s(s({},e),{},{inProgress:o,accounts:i})};function rm(e){let{instance:t,children:n}=e;(0,ui.useEffect)(()=>{t.initializeWrapperLibrary(df,Zf)},[t]);const r=(0,ui.useMemo)(()=>t.getLogger().clone("@azure/msal-react",Zf),[t]),[o,i]=(0,ui.useReducer)(nm,void 0,()=>({inProgress:nf,accounts:[]}));(0,ui.useEffect)(()=>{const e=t.addEventCallback(e=>{i({payload:{instance:t,logger:r,message:e},type:tm})});return r.verbose("MsalProvider - Registered event callback with id: ".concat(e)),t.initialize().then(()=>{t.handleRedirectPromise().catch(()=>{}).finally(()=>{i({payload:{instance:t,logger:r},type:em})})}).catch(()=>{}),()=>{e&&(r.verbose("MsalProvider - Removing event callback ".concat(e)),t.removeEventCallback(e))}},[t,r]);const a={instance:t,inProgress:o.inProgress,accounts:o.accounts,logger:r};return ui.createElement(Cf.Provider,{value:a},n)}const om=()=>(0,ui.useContext)(Cf);function im(e){const{accounts:t,inProgress:n}=om(),r=(0,ui.useMemo)(()=>n!==nf&&function(e,t){return t&&(t.username||t.homeAccountId||t.localAccountId)?!!function(e,t){return e.length>0&&(t.homeAccountId||t.localAccountId||t.username)&&e.filter(e=>(!t.username||t.username.toLowerCase()===e.username.toLowerCase())&&(!t.homeAccountId||t.homeAccountId.toLowerCase()===e.homeAccountId.toLowerCase())&&(!t.localAccountId||t.localAccountId.toLowerCase()===e.localAccountId.toLowerCase()))[0]||null}(e,t):e.length>0}(t,e),[t,n,e]);return r}const am="AAD",sm="OIDC",cm="EAR",lm="none",um="client_info_decoding_error",dm="client_info_empty_error",hm="token_parsing_error",pm="null_or_empty_token",fm="endpoints_resolution_error",mm="network_error",gm="openid_config_error",ym="hash_not_deserialized",vm="invalid_state",bm="state_mismatch",wm="state_not_found",km="nonce_mismatch",Sm="auth_time_not_found",_m="max_age_transpired",Cm="multiple_matching_tokens",Tm="multiple_matching_accounts",Em="multiple_matching_appMetadata",Im="request_cannot_be_made",Am="cannot_remove_empty_scope",xm="cannot_append_scopeset",Rm="empty_input_scopeset",Pm="device_code_polling_cancelled",Mm="device_code_expired",Om="device_code_unknown_error",Nm="no_account_in_silent_request",Dm="invalid_cache_record",Lm="invalid_cache_environment",Fm="no_account_found",qm="no_crypto_object",Um="unexpected_credential_type",zm="invalid_assertion",Hm="invalid_client_credential",Bm="token_refresh_required",jm="user_timeout_reached",Wm="token_claims_cnf_required_for_signedjwt",Km="authorization_code_missing_from_server_response",Gm="binding_key_not_removed",Vm="end_session_endpoint_not_supported",Qm="key_id_missing",Ym="no_network_connectivity",Jm="user_canceled",$m="missing_tenant_id_error",Xm="method_not_implemented",Zm="nested_app_auth_bridge_disabled",eg={[um]:"The client info could not be parsed/decoded correctly",[dm]:"The client info was empty",[hm]:"Token cannot be parsed",[pm]:"The token is null or empty",[fm]:"Endpoints cannot be resolved",[mm]:"Network request failed",[gm]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[ym]:"The hash parameters could not be deserialized",[vm]:"State was not the expected format",[bm]:"State mismatch error",[wm]:"State not found",[km]:"Nonce mismatch error",[Sm]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[_m]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[Cm]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[Tm]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[Em]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Im]:"Token request cannot be made without authorization code or refresh token.",[Am]:"Cannot remove null or empty scope from ScopeSet",[xm]:"Cannot append ScopeSet",[Rm]:"Empty input ScopeSet cannot be processed",[Pm]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[Mm]:"Device code is expired.",[Om]:"Device code stopped polling for unknown reasons.",[Nm]:"Please pass an account object, silent flow is not supported without account information",[Dm]:"Cache record object was null or undefined.",[Lm]:"Invalid environment when attempting to create cache entry",[Fm]:"No account found in cache for given key.",[qm]:"No crypto object detected.",[Um]:"Unexpected credential type.",[zm]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[Hm]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Bm]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[jm]:"User defined timeout for device code polling reached",[Wm]:"Cannot generate a POP jwt if the token_claims are not populated",[Km]:"Server response does not contain an authorization code to proceed",[Gm]:"Could not remove the credential's binding key from storage.",[Vm]:"The provided authority does not support logout",[Qm]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[Ym]:"No network connectivity. Check your internet connection.",[Jm]:"User cancelled the flow.",[$m]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[Xm]:"This method has not been implemented",[Zm]:"The nested app auth bridge is disabled"};class tg extends ip{constructor(e,t){super(e,t?"".concat(eg[e],": ").concat(t):eg[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,tg.prototype)}}function ng(e,t){return new tg(e,t)}const rg={createNewGuid:()=>{throw ng(Xm)},base64Decode:()=>{throw ng(Xm)},base64Encode:()=>{throw ng(Xm)},base64UrlEncode:()=>{throw ng(Xm)},encodeKid:()=>{throw ng(Xm)},async getPublicKeyThumbprint(){throw ng(Xm)},async removeTokenBindingKey(){throw ng(Xm)},async clearKeystore(){throw ng(Xm)},async signJwt(){throw ng(Xm)},async hashString(){throw ng(Xm)}},og="@azure/msal-common",ig="15.13.0",ag="redirect_uri_empty",sg="claims_request_parsing_error",cg="authority_uri_insecure",lg="url_parse_error",ug="empty_url_error",dg="empty_input_scopes_error",hg="invalid_claims",pg="token_request_empty",fg="logout_request_empty",mg="invalid_code_challenge_method",gg="pkce_params_missing",yg="invalid_cloud_discovery_metadata",vg="invalid_authority_metadata",bg="untrusted_authority",wg="missing_ssh_jwk",kg="missing_ssh_kid",Sg="missing_nonce_authentication_header",_g="invalid_authentication_header",Cg="cannot_set_OIDCOptions",Tg="cannot_allow_platform_broker",Eg="authority_mismatch",Ig="invalid_request_method_for_EAR",Ag="invalid_authorize_post_body_parameters",xg={[ag]:"A redirect URI is required for all calls, and none has been set.",[sg]:"Could not parse the given claims request object.",[cg]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[lg]:"URL could not be parsed into appropriate segments.",[ug]:"URL was empty or null.",[dg]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[hg]:"Given claims parameter must be a stringified JSON object.",[pg]:"Token request was empty and not found in cache.",[fg]:"The logout request was null or undefined.",[mg]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[gg]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[yg]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[vg]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[bg]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[wg]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[kg]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[Sg]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[_g]:"Invalid authentication header provided",[Cg]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Tg]:"Cannot set allowPlatformBroker parameter to true when not in AAD protocol mode.",[Eg]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority.",[Ag]:"Invalid authorize post body parameters provided. If you are using authorizePostBodyParameters, the request method must be POST. Please check the request method and parameters.",[Ig]:"Invalid request method for EAR protocol mode. The request method cannot be GET when using EAR protocol mode. Please change the request method to POST."};class Rg extends ip{constructor(e){super(e,xg[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Rg.prototype)}}function Pg(e){return new Rg(e)}class Mg{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return 0===Object.keys(t).length}catch(t){}return!0}static startsWith(e,t){return 0===e.indexOf(t)}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},n=e.split("&"),r=e=>decodeURIComponent(e.replace(/\+/g," "));return n.forEach(e=>{if(e.trim()){const[n,o]=e.split(/=(.+)/g,2);n&&o&&(t[r(n)]=r(o))}}),t}static trimArrayEntries(e){return e.map(e=>e.trim())}static removeEmptyStringsFromArray(e){return e.filter(e=>!!e)}static jsonParseHelper(e){try{return JSON.parse(e)}catch(t){return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}class Og{constructor(e){const t=e?Mg.trimArrayEntries([...e]):[],n=t?Mg.removeEmptyStringsFromArray(t):[];if(!n||!n.length)throw Pg(dg);this.scopes=new Set,n.forEach(e=>this.scopes.add(e))}static fromString(e){const t=(e||Hd.EMPTY_STRING).split(" ");return new Og(t)}static createSearchScopes(e){const t=e&&e.length>0?e:[...Jd],n=new Og(t);return n.containsOnlyOIDCScopes()?n.removeScope(Hd.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}containsScope(e){const t=this.printScopesLowerCase().split(" "),n=new Og(t);return!!e&&n.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&(this.scopes.size>=e.scopes.size&&e.asArray().every(e=>this.containsScope(e)))}containsOnlyOIDCScopes(){let e=0;return $d.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(e=>this.appendScope(e))}catch(t){throw ng(xm)}}removeScope(e){if(!e)throw ng(Am);this.scopes.delete(e.trim())}removeOIDCScopes(){$d.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw ng(Rm);const t=new Set;return e.scopes.forEach(e=>t.add(e.toLowerCase())),this.scopes.forEach(e=>t.add(e.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw ng(Rm);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),n=e.getScopeCount(),r=this.getScopeCount();return t.size<r+n}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){if(this.scopes){return this.asArray().join(" ")}return Hd.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}const Ng=["isHomeTenant"],Dg=["isHomeTenant"];function Lg(e,t){return!!e&&!!t&&e===t.split(".")[1]}function Fg(e,t,n,r){if(r){const{oid:t,sub:n,tid:o,name:i,tfp:a,acr:s,preferred_username:c,upn:l,login_hint:u}=r,d=o||a||s||"";return{tenantId:d,localAccountId:t||n||"",name:i,username:c||l||"",loginHint:u,isHomeTenant:Lg(d,e)}}return{tenantId:n,localAccountId:t,username:"",isHomeTenant:Lg(n,e)}}function qg(e,t,n,r){let o=e;if(t){const{isHomeTenant:n}=t,r=it(t,Ng);o=s(s({},e),r)}if(n){const t=Fg(e.homeAccountId,e.localAccountId,e.tenantId,n),{isHomeTenant:i}=t,a=it(t,Dg);return o=s(s(s({},o),a),{},{idTokenClaims:n,idToken:r}),o}return o}function Ug(e,t){const n=function(e){if(!e)throw ng(pm);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(e);if(!t||t.length<4)throw ng(hm);return t[2]}(e);try{const e=t(n);return JSON.parse(e)}catch(cE){throw ng(hm)}}function zg(e,t){if(0===t||Date.now()-3e5>e+t)throw ng(_m)}function Hg(e){if(!e)return e;let t=e.toLowerCase();return Mg.endsWith(t,"?")?t=t.slice(0,-1):Mg.endsWith(t,"?/")&&(t=t.slice(0,-2)),Mg.endsWith(t,"/")||(t+="/"),t}function Bg(e){return e.startsWith("#/")?e.substring(2):e.startsWith("#")||e.startsWith("?")?e.substring(1):e}function jg(e){if(!e||e.indexOf("=")<0)return null;try{const t=Bg(e),n=Object.fromEntries(new URLSearchParams(t));if(n.code||n.ear_jwe||n.error||n.error_description||n.state)return n}catch(t){throw ng(ym)}return null}function Wg(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;const r=new Array;return e.forEach((e,o)=>{!t&&n&&o in n?r.push("".concat(o,"=").concat(e)):r.push("".concat(o,"=").concat(encodeURIComponent(e)))}),r.join("&")}function Kg(e){if(!e)return e;const t=e.split("#")[0];try{const e=new URL(t);return Hg(e.origin+e.pathname+e.search)}catch(n){return Hg(t)}}class Gg{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Pg(ug);e.includes("#")||(this._urlString=Gg.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return Mg.endsWith(t,"?")?t=t.slice(0,-1):Mg.endsWith(t,"?/")&&(t=t.slice(0,-2)),Mg.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch(t){throw Pg(lg)}if(!e.HostNameAndPort||!e.PathSegments)throw Pg(lg);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw Pg(cg)}static appendQueryString(e,t){return t?e.indexOf("?")<0?"".concat(e,"?").concat(t):"".concat(e,"&").concat(t):e}static removeHashFromUrl(e){return Gg.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),n=t.PathSegments;return!e||0===n.length||n[0]!==ih&&n[0]!==ah||(n[0]=e),Gg.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Pg(lg);const n={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let r=n.AbsolutePath.split("/");return r=r.filter(e=>e&&e.length>0),n.PathSegments=r,n.QueryString&&n.QueryString.endsWith("/")&&(n.QueryString=n.QueryString.substring(0,n.QueryString.length-1)),n}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),n=e.match(t);if(!n)throw Pg(lg);return n[2]}static getAbsoluteUrl(e,t){if(e[0]===Hd.FORWARD_SLASH){const n=new Gg(t).getUrlComponents();return n.Protocol+"//"+n.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new Gg(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!jg(e)}}const Vg={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},Qg={metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},Yg=new Set;function Jg(e,t,n,r){if(null===r||void 0===r||r.trace("getAliasesFromMetadata called with source: ".concat(n)),e&&t){const o=$g(t,e);if(o)return null===r||void 0===r||r.trace("getAliasesFromMetadata: found cloud discovery metadata in ".concat(n,", returning aliases")),o.aliases;null===r||void 0===r||r.trace("getAliasesFromMetadata: did not find cloud discovery metadata in ".concat(n))}return null}function $g(e,t){for(let n=0;n<e.length;n++){const r=e[n];if(r.aliases.includes(t))return r}return null}Qg.metadata.forEach(e=>{e.aliases.forEach(e=>{Yg.add(e)})});const Xg="cache_quota_exceeded",Zg="cache_error_unknown",ey={[Xg]:"Exceeded cache storage capacity.",[Zg]:"Unexpected error occurred when using cache storage."};class ty extends ip{constructor(e,t){const n=t||(ey[e]?ey[e]:ey[Zg]);super("".concat(e,": ").concat(n)),Object.setPrototypeOf(this,ty.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=n}}function ny(e){return e instanceof Error?"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name||e.message.includes("exceeded the quota")?new ty(Xg):new ty(e.name,e.message):new ty(Zg)}class ry{constructor(e,t,n,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=n.clone(og,ig),this.staticAuthorityOptions=o,this.performanceClient=r}getAllAccounts(e,t){return this.buildTenantProfiles(this.getAccountsFilteredBy(e,t),t,e)}getAccountInfoFilteredBy(e,t){if(0===Object.keys(e).length||Object.values(e).every(e=>!e))return this.commonLogger.warning("getAccountInfoFilteredBy: Account filter is empty or invalid, returning null"),null;const n=this.getAllAccounts(e,t);if(n.length>1){return n.sort(e=>e.idTokenClaims?-1:1)[0]}return 1===n.length?n[0]:null}getBaseAccountInfo(e,t){const n=this.getAccountsFilteredBy(e,t);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,t,n){return e.flatMap(e=>this.getTenantProfilesFromAccountEntity(e,t,null===n||void 0===n?void 0:n.tenantId,n))}getTenantedAccountInfoByFilter(e,t,n,r,o){let i,a=null;if(o&&!this.tenantProfileMatchesFilter(n,o))return null;const s=this.getIdToken(e,r,t,n.tenantId);return s&&(i=Ug(s.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(i,o))?null:(a=qg(e,n,i,null===s||void 0===s?void 0:s.secret),a)}getTenantProfilesFromAccountEntity(e,t,n,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const a=this.getTokenKeys();if(n){const e=i.get(n);if(!e)return[];i=new Map([[n,e]])}const s=[];return i.forEach(e=>{const n=this.getTenantedAccountInfoByFilter(o,a,e,t,r);n&&s.push(n)}),s}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId))&&((!t.name||e.name===t.name)&&(void 0===t.isHomeTenant||e.isHomeTenant===t.isHomeTenant))}idTokenClaimsMatchTenantProfileFilter(e,t){if(t){if(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId))return!1;if(t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint))return!1;if(t.username&&!this.matchUsername(e.preferred_username,t.username))return!1;if(t.name&&!this.matchName(e,t.name))return!1;if(t.sid&&!this.matchSid(e,t.sid))return!1}return!0}async saveCacheRecord(e,t,n){if(!e)throw ng(Dm);try{e.account&&await this.setAccount(e.account,t),e.idToken&&!1!==(null===n||void 0===n?void 0:n.idToken)&&await this.setIdTokenCredential(e.idToken,t),e.accessToken&&!1!==(null===n||void 0===n?void 0:n.accessToken)&&await this.saveAccessToken(e.accessToken,t),e.refreshToken&&!1!==(null===n||void 0===n?void 0:n.refreshToken)&&await this.setRefreshTokenCredential(e.refreshToken,t),e.appMetadata&&this.setAppMetadata(e.appMetadata,t)}catch(o){var r;throw null===(r=this.commonLogger)||void 0===r||r.error("CacheManager.saveCacheRecord: failed"),o instanceof ip?o:ny(o)}}async saveAccessToken(e,t){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=Og.fromString(e.target);r.accessToken.forEach(e=>{if(!this.accessTokenKeyMatchesFilter(e,n,!1))return;const r=this.getAccessTokenCredential(e,t);if(r&&this.credentialMatchesFilter(r,n)){Og.fromString(r.target).intersectingScopeSets(o)&&this.removeAccessToken(e,t)}}),await this.setAccessTokenCredential(e,t)}getAccountsFilteredBy(e,t){const n=this.getAccountKeys(),r=[];return n.forEach(n=>{var o;const i=this.getAccount(n,t);if(!i)return;if(e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId))return;if(e.username&&!this.matchUsername(i.username,e.username))return;if(e.environment&&!this.matchEnvironment(i,e.environment))return;if(e.realm&&!this.matchRealm(i,e.realm))return;if(e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId))return;if(e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const a={localAccountId:null===e||void 0===e?void 0:e.localAccountId,name:null===e||void 0===e?void 0:e.name},s=null===(o=i.tenantProfiles)||void 0===o?void 0:o.filter(e=>this.tenantProfileMatchesFilter(e,a));s&&0===s.length||r.push(i)}),r}credentialMatchesFilter(e,t){if(t.clientId&&!this.matchClientId(e,t.clientId))return!1;if(t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash))return!1;if("string"===typeof t.homeAccountId&&!this.matchHomeAccountId(e,t.homeAccountId))return!1;if(t.environment&&!this.matchEnvironment(e,t.environment))return!1;if(t.realm&&!this.matchRealm(e,t.realm))return!1;if(t.credentialType&&!this.matchCredentialType(e,t.credentialType))return!1;if(t.familyId&&!this.matchFamilyId(e,t.familyId))return!1;if(t.target&&!this.matchTarget(e,t.target))return!1;if((t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash)return!1;if(e.credentialType===Ih.ACCESS_TOKEN_WITH_AUTH_SCHEME){if(t.tokenType&&!this.matchTokenType(e,t.tokenType))return!1;if(t.tokenType===Fh.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId))return!1}return!0}getAppMetadataFilteredBy(e){const t=this.getKeys(),n={};return t.forEach(t=>{if(!this.isAppMetadata(t))return;const r=this.getAppMetadata(t);r&&(e.environment&&!this.matchEnvironment(r,e.environment)||e.clientId&&!this.matchClientId(r,e.clientId)||(n[t]=r))}),n}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let n=null;return t.forEach(t=>{if(!this.isAuthorityMetadata(t)||-1===t.indexOf(this.clientId))return;const r=this.getAuthorityMetadata(t);r&&-1!==r.aliases.indexOf(e)&&(n=r)}),n}removeAllAccounts(e){this.getAllAccounts({},e).forEach(t=>{this.removeAccount(t,e)})}removeAccount(e,t){this.removeAccountContext(e,t);this.getAccountKeys().filter(t=>t.includes(e.homeAccountId)&&t.includes(e.environment)).forEach(e=>{this.removeItem(e,t),this.performanceClient.incrementFields({accountsRemoved:1},t)})}removeAccountContext(e,t){const n=this.getTokenKeys(),r=t=>t.includes(e.homeAccountId)&&t.includes(e.environment);n.idToken.filter(r).forEach(e=>{this.removeIdToken(e,t)}),n.accessToken.filter(r).forEach(e=>{this.removeAccessToken(e,t)}),n.refreshToken.filter(r).forEach(e=>{this.removeRefreshToken(e,t)})}removeAccessToken(e,t){const n=this.getAccessTokenCredential(e,t);if(this.removeItem(e,t),this.performanceClient.incrementFields({accessTokensRemoved:1},t),!n||n.credentialType.toLowerCase()!==Ih.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||n.tokenType!==Fh.POP)return;const r=n.keyId;r&&this.cryptoImpl.removeTokenBindingKey(r).catch(()=>{var e;this.commonLogger.error("Failed to remove token binding key ".concat(r),t),null===(e=this.performanceClient)||void 0===e||e.incrementFields({removeTokenBindingKeyFailure:1},t)})}removeAppMetadata(e){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t,e)}),!0}getIdToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getIdToken called");const i={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ih.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(i,t,n),s=a.size;if(s<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(s>1){let n=a;if(!r){const t=new Map;a.forEach((n,r)=>{n.realm===e.tenantId&&t.set(r,n)});const r=t.size;if(r<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===r)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),t.values().next().value;n=t}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),n.forEach((e,n)=>{this.removeIdToken(n,t)}),o&&t&&o.addFields({multiMatchedID:a.size},t),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t,n){const r=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(n=>{if(!this.idTokenKeyMatchesFilter(n,s({clientId:this.clientId},e)))return;const r=this.getIdTokenCredential(n,t);r&&this.credentialMatchesFilter(r,e)&&o.set(n,r)}),o}idTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.clientId||-1!==n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase()))}removeIdToken(e,t){this.removeItem(e,t)}removeRefreshToken(e,t){this.removeItem(e,t)}getAccessToken(e,t,n,r){const o=t.correlationId;this.commonLogger.trace("CacheManager - getAccessToken called",o);const i=Og.createSearchScopes(t.scopes),a=t.authenticationScheme||Fh.BEARER,s=a&&a.toLowerCase()!==Fh.BEARER.toLowerCase()?Ih.ACCESS_TOKEN_WITH_AUTH_SCHEME:Ih.ACCESS_TOKEN,c={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:s,clientId:this.clientId,realm:r||e.tenantId,target:i,tokenType:a,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},l=n&&n.accessToken||this.getTokenKeys().accessToken,u=[];l.forEach(e=>{if(this.accessTokenKeyMatchesFilter(e,c,!0)){const t=this.getAccessTokenCredential(e,o);t&&this.credentialMatchesFilter(t,c)&&u.push(t)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found",o),null):d>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them",o),u.forEach(e=>{this.removeAccessToken(this.generateCredentialKey(e),o)}),this.performanceClient.addFields({multiMatchedAT:u.length},o),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token",o),u[0])}accessTokenKeyMatchesFilter(e,t,n){const r=e.toLowerCase();if(t.clientId&&-1===r.indexOf(t.clientId.toLowerCase()))return!1;if(t.homeAccountId&&-1===r.indexOf(t.homeAccountId.toLowerCase()))return!1;if(t.realm&&-1===r.indexOf(t.realm.toLowerCase()))return!1;if(t.requestedClaimsHash&&-1===r.indexOf(t.requestedClaimsHash.toLowerCase()))return!1;if(t.target){const e=t.target.asArray();for(let t=0;t<e.length;t++){if(n&&!r.includes(e[t].toLowerCase()))return!1;if(!n&&r.includes(e[t].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,t){const n=this.getTokenKeys(),r=[];return n.accessToken.forEach(n=>{if(!this.accessTokenKeyMatchesFilter(n,e,!0))return;const o=this.getAccessTokenCredential(n,t);o&&this.credentialMatchesFilter(o,e)&&r.push(o)}),r}getRefreshToken(e,t,n,r,o){this.commonLogger.trace("CacheManager - getRefreshToken called");const i=t?xh:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Ih.REFRESH_TOKEN,clientId:this.clientId,familyId:i},s=r&&r.refreshToken||this.getTokenKeys().refreshToken,c=[];s.forEach(e=>{if(this.refreshTokenKeyMatchesFilter(e,a)){const t=this.getRefreshTokenCredential(e,n);t&&this.credentialMatchesFilter(t,a)&&c.push(t)}});const l=c.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&o&&n&&o.addFields({multiMatchedRT:l},n),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const n=e.toLowerCase();return(!t.familyId||-1!==n.indexOf(t.familyId.toLowerCase()))&&(!(!t.familyId&&t.clientId&&-1===n.indexOf(t.clientId.toLowerCase()))&&(!t.homeAccountId||-1!==n.indexOf(t.homeAccountId.toLowerCase())))}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},n=this.getAppMetadataFilteredBy(t),r=Object.keys(n).map(e=>n[e]),o=r.length;if(o<1)return null;if(o>1)throw ng(Em);return r[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!(!t||t.familyId!==xh)}matchHomeAccountId(e,t){return!("string"!==typeof e.homeAccountId||t!==e.homeAccountId)}matchLocalAccountIdFromTokenClaims(e,t){return t===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var n;return!(t.toLowerCase()!==(null===(n=e.name)||void 0===n?void 0:n.toLowerCase()))}matchUsername(e,t){return!(!e||"string"!==typeof e||(null===t||void 0===t?void 0:t.toLowerCase())!==e.toLowerCase())}matchUserAssertionHash(e,t){return!(!e.userAssertionHash||t!==e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const n=function(e,t){let n;const r=e.canonicalAuthority;if(r){var o;const i=new Gg(r).getUrlComponents().HostNameAndPort;n=Jg(i,null===(o=e.cloudDiscoveryMetadata)||void 0===o?void 0:o.metadata,Mh,t)||Jg(i,Qg.metadata,Dh,t)||e.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(n.includes(t)&&n.includes(e.environment))return!0}const n=this.getAuthorityMetadataByAlias(t);return!!(n&&n.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!(!e.clientId||t!==e.clientId)}matchFamilyId(e,t){return!(!e.familyId||t!==e.familyId)}matchRealm(e,t){var n;return!((null===(n=e.realm)||void 0===n?void 0:n.toLowerCase())!==t.toLowerCase())}matchNativeAccountId(e,t){return!(!e.nativeAccountId||t!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||(e.preferred_username===t||e.upn===t)}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!(!e.authorityType||t.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,t){if(e.credentialType!==Ih.ACCESS_TOKEN&&e.credentialType!==Ih.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)return!1;return Og.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!(!e.tokenType||e.tokenType!==t)}matchKeyId(e,t){return!(!e.keyId||e.keyId!==t)}isAppMetadata(e){return-1!==e.indexOf(Ah)}isAuthorityMetadata(e){return-1!==e.indexOf(Rh)}generateAuthorityMetadataCacheKey(e){return"".concat(Rh,"-").concat(this.clientId,"-").concat(e)}static toObject(e,t){for(const n in t)e[n]=t[n];return e}}class oy extends ry{async setAccount(){throw ng(Xm)}getAccount(){throw ng(Xm)}async setIdTokenCredential(){throw ng(Xm)}getIdTokenCredential(){throw ng(Xm)}async setAccessTokenCredential(){throw ng(Xm)}getAccessTokenCredential(){throw ng(Xm)}async setRefreshTokenCredential(){throw ng(Xm)}getRefreshTokenCredential(){throw ng(Xm)}setAppMetadata(){throw ng(Xm)}getAppMetadata(){throw ng(Xm)}setServerTelemetry(){throw ng(Xm)}getServerTelemetry(){throw ng(Xm)}setAuthorityMetadata(){throw ng(Xm)}getAuthorityMetadata(){throw ng(Xm)}getAuthorityMetadataKeys(){throw ng(Xm)}setThrottlingCache(){throw ng(Xm)}getThrottlingCache(){throw ng(Xm)}removeItem(){throw ng(Xm)}getKeys(){throw ng(Xm)}getAccountKeys(){throw ng(Xm)}getTokenKeys(){throw ng(Xm)}generateCredentialKey(){throw ng(Xm)}generateAccountKey(){throw ng(Xm)}}const iy="acquireTokenByCode",ay="acquireTokenByRefreshToken",sy="acquireTokenSilent",cy="acquireTokenSilentAsync",ly="acquireTokenPopup",uy="acquireTokenPreRedirect",dy="acquireTokenRedirect",hy="cryptoOptsGetPublicKeyThumbprint",py="cryptoOptsSignJwt",fy="silentCacheClientAcquireToken",my="silentIframeClientAcquireToken",gy="awaitConcurrentIframe",yy="silentRefreshClientAcquireToken",vy="ssoSilent",by="standardInteractionClientGetDiscoveredAuthority",wy="nativeInteractionClientAcquireToken",ky="networkClientSendPostRequestAsync",Sy="refreshTokenClientExecutePostToTokenEndpoint",_y="authorizationCodeClientExecutePostToTokenEndpoint",Cy="refreshTokenClientExecuteTokenRequest",Ty="refreshTokenClientAcquireToken",Ey="refreshTokenClientAcquireTokenWithCachedRefreshToken",Iy="refreshTokenClientAcquireTokenByRefreshToken",Ay="refreshTokenClientCreateTokenRequestBody",xy="acquireTokenFromCache",Ry="silentFlowClientAcquireCachedToken",Py="silentFlowClientGenerateResultFromCacheRecord",My="acquireTokenBySilentIframe",Oy="initializeBaseRequest",Ny="initializeSilentRequest",Dy="initializeClientApplication",Ly="initializeCache",Fy="silentIframeClientTokenHelper",qy="silentHandlerInitiateAuthRequest",Uy="silentHandlerMonitorIframeForHash",zy="silentHandlerLoadFrame",Hy="silentHandlerLoadFrameSync",By="standardInteractionClientCreateAuthCodeClient",jy="standardInteractionClientGetClientConfiguration",Wy="standardInteractionClientInitializeAuthorizationRequest",Ky="getAuthCodeUrl",Gy="getStandardParams",Vy="handleCodeResponseFromServer",Qy="handleCodeResponse",Yy="handleResponseEar",Jy="handleResponsePlatformBroker",$y="handleResponseCode",Xy="updateTokenEndpointAuthority",Zy="authClientAcquireToken",ev="authClientExecuteTokenRequest",tv="authClientCreateTokenRequestBody",nv="popTokenGenerateCnf",rv="popTokenGenerateKid",ov="handleServerTokenResponse",iv="deserializeResponse",av="authorityFactoryCreateDiscoveredInstance",sv="authorityResolveEndpointsAsync",cv="authorityGetCloudDiscoveryMetadataFromNetwork",lv="authorityUpdateCloudDiscoveryMetadata",uv="authorityGetEndpointMetadataFromNetwork",dv="authorityUpdateEndpointMetadata",hv="authorityUpdateMetadataWithRegionalInformation",pv="regionDiscoveryDetectRegion",fv="regionDiscoveryGetRegionFromIMDS",mv="regionDiscoveryGetCurrentVersion",gv="acquireTokenByCodeAsync",yv="handleRedirectPromise",vv="handleNativeRedirectPromise",bv="nativeMessageHandlerHandshake",wv="removeHiddenIframe",kv="clearTokensAndKeysWithClaims",Sv="cacheManagerGetRefreshToken",_v="importExistingCache",Cv="setUserData",Tv="localStorageUpdated",Ev="generatePkceCodes",Iv="generateCodeVerifier",Av="generateCodeChallengeFromVerifier",xv="sha256Digest",Rv="getRandomValues",Pv="generateHKDF",Mv="generateBaseKey",Ov="base64Decode",Nv="urlEncodeArr",Dv="encrypt",Lv="decrypt",Fv="generateEarKey",qv="decryptEarResponse",Uv=(new Map([[iy,"ATByCode"],[ay,"ATByRT"],[sy,"ATS"],[cy,"ATSAsync"],[ly,"ATPopup"],[dy,"ATRedirect"],[hy,"CryptoGetPKThumb"],[py,"CryptoSignJwt"],[fy,"SltCacheClientAT"],[my,"SltIframeClientAT"],[yy,"SltRClientAT"],[vy,"SsoSlt"],[by,"StdIntClientGetDiscAuth"],["fetchAccountIdWithNativeBroker","FetchAccIdWithNtvBroker"],[wy,"NtvIntClientAT"],["baseClientCreateTokenRequestHeaders","BaseClientCreateTReqHead"],[ky,"NetClientSendPost"],[Sy,"RTClientExecPost"],[_y,"AuthCodeClientExecPost"],["brokerHandshake","BrokerHandshake"],["acquireTokenByRefreshTokenInBroker","ATByRTInBroker"],["acquireTokenByBroker","ATByBroker"],[Cy,"RTClientExecTReq"],[Ty,"RTClientAT"],[Ey,"RTClientATWithCachedRT"],[Iy,"RTClientATByRT"],[Ay,"RTClientCreateTReqBody"],[xy,"ATFromCache"],[Ry,"SltFlowClientATCached"],[Py,"SltFlowClientGenResFromCache"],[My,"ATBySltIframe"],[Oy,"InitBaseReq"],[Ny,"InitSltReq"],[Dy,"InitClientApplication"],[Ly,"InitCache"],[_v,"importCache"],[Cv,"setUserData"],[Tv,"localStorageUpdated"],[Fy,"SIClientTHelper"],[qy,"SHandlerInitAuthReq"],[Uy,"SltHandlerMonitorIframeForHash"],[zy,"SHandlerLoadFrame"],[Hy,"SHandlerLoadFrameSync"],[By,"StdIntClientCreateAuthCodeClient"],[jy,"StdIntClientGetClientConf"],[Wy,"StdIntClientInitAuthReq"],[Ky,"GetAuthCodeUrl"],[Vy,"HandleCodeResFromServer"],[Qy,"HandleCodeResp"],[Yy,"HandleRespEar"],[$y,"HandleRespCode"],[Jy,"HandleRespPlatBroker"],[Xy,"UpdTEndpointAuth"],[Zy,"AuthClientAT"],[ev,"AuthClientExecTReq"],[tv,"AuthClientCreateTReqBody"],[nv,"PopTGenCnf"],[rv,"PopTGenKid"],[ov,"HandleServerTRes"],[iv,"DeserializeRes"],[av,"AuthFactCreateDiscInst"],[sv,"AuthResolveEndpointsAsync"],["authorityResolveEndpointsFromLocalSources","AuthResolveEndpointsFromLocal"],[cv,"AuthGetCDMetaFromNet"],[lv,"AuthUpdCDMeta"],[uv,"AuthUpdCDMetaFromNet"],[dv,"AuthUpdEndpointMeta"],[hv,"AuthUpdMetaWithRegInfo"],[pv,"RegDiscDetectReg"],[fv,"RegDiscGetRegFromIMDS"],[mv,"RegDiscGetCurrentVer"],[gv,"ATByCodeAsync"],["getEndpointMetadataFromNetwork","GetEndpointMetaFromNet"],["getCloudDiscoveryMetadataFromNetworkMeasurement","GetCDMetaFromNet"],[yv,"HandleRedirectPromise"],[vv,"HandleNtvRedirectPromise"],["updateCloudDiscoveryMetadataMeasurement","UpdateCDMeta"],["usernamePasswordClientAcquireToken","UserPassClientAT"],[bv,"NtvMsgHandlerHandshake"],["nativeGenerateAuthResult","NtvGenAuthRes"],[wv,"RemoveHiddenIframe"],[kv,"ClearTAndKeysWithClaims"],[Sv,"CacheManagerGetRT"],[Ev,"GenPkceCodes"],[Iv,"GenCodeVerifier"],[Av,"GenCodeChallengeFromVerifier"],[xv,"Sha256Digest"],[Rv,"GetRandomValues"],[Pv,"genHKDF"],[Mv,"genBaseKey"],[Ov,"b64Decode"],[Nv,"urlEncArr"],[Dv,"encrypt"],[Lv,"decrypt"],[Fv,"genEarKey"],[qv,"decryptEarResp"]]),1);new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT","unencryptedCacheCount","encryptedCacheExpiredCount","oldAccountCount","oldAccessCount","oldIdCount","oldRefreshCount","currAccountCount","currAccessCount","currIdCount","currRefreshCount","expiredCacheRemovedCount","upgradedCacheCount"]);class zv{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class Hv{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:Uv,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new zv}}startPerformanceMeasurement(){return new zv}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const Bv={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},jv={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:kf.Info,correlationId:Hd.EMPTY_STRING},Wv={claimsBasedCachingEnabled:!1},Kv={async sendGetRequestAsync(){throw ng(Xm)},async sendPostRequestAsync(){throw ng(Xm)}},Gv={sku:Hd.SKU,version:ig,cpu:Hd.EMPTY_STRING,os:Hd.EMPTY_STRING},Vv={clientSecret:Hd.EMPTY_STRING,clientAssertion:void 0},Qv={azureCloudInstance:lm,tenant:"".concat(Hd.DEFAULT_COMMON_TENANT)},Yv={application:{appName:"",appVersion:""}};function Jv(e){return e.authOptions.authority.options.protocolMode===sm}const $v={sendGetRequestAsync:()=>Promise.reject(ng(Xm)),sendPostRequestAsync:()=>Promise.reject(ng(Xm))},Xv="pkce_not_created",Zv="ear_jwk_empty",eb="ear_jwe_empty",tb="crypto_nonexistent",nb="empty_navigate_uri",rb="hash_empty_error",ob="no_state_in_hash",ib="hash_does_not_contain_known_properties",ab="unable_to_parse_state",sb="state_interaction_type_mismatch",cb="interaction_in_progress",lb="popup_window_error",ub="empty_window_error",db="user_cancelled",hb="monitor_popup_timeout",pb="monitor_window_timeout",fb="redirect_in_iframe",mb="block_iframe_reload",gb="block_nested_popups",yb="iframe_closed_prematurely",vb="silent_logout_unsupported",bb="no_account_error",wb="silent_prompt_value_error",kb="no_token_request_cache_error",Sb="unable_to_parse_token_request_cache_error",_b="auth_request_not_set_error",Cb="invalid_cache_type",Tb="non_browser_environment",Eb="database_not_open",Ib="no_network_connectivity",Ab="post_request_failed",xb="get_request_failed",Rb="failed_to_parse_response",Pb="unable_to_load_token",Mb="crypto_key_not_found",Ob="auth_code_required",Nb="auth_code_or_nativeAccountId_required",Db="spa_code_and_nativeAccountId_present",Lb="database_unavailable",Fb="unable_to_acquire_token_from_native_platform",qb="native_handshake_timeout",Ub="native_extension_not_installed",zb="native_connection_not_established",Hb="uninitialized_public_client_application",Bb="native_prompt_not_supported",jb="invalid_base64_string",Wb="invalid_pop_token_request",Kb="failed_to_build_headers",Gb="failed_to_parse_headers",Vb="failed_to_decrypt_ear_response",Qb="timed_out",Yb="For more visit: aka.ms/msaljs/browser-errors",Jb={[Xv]:"The PKCE code challenge and verifier could not be generated.",[Zv]:"No EAR encryption key provided. This is unexpected.",[eb]:"Server response does not contain ear_jwe property. This is unexpected.",[tb]:"The crypto object or function is not available.",[nb]:"Navigation URI is empty. Please check stack trace for more info.",[rb]:"Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ".concat(Yb),[ob]:"Hash does not contain state. Please verify that the request originated from msal.",[ib]:"Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ".concat(Yb),[ab]:"Unable to parse state. Please verify that the request originated from msal.",[sb]:"Hash contains state but the interaction type does not match the caller.",[cb]:"Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ".concat(Yb),[lb]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[ub]:"window.open returned null or undefined window object.",[db]:"User cancelled the flow.",[hb]:"Token acquisition in popup failed due to timeout.  ".concat(Yb),[pb]:"Token acquisition in iframe failed due to timeout.  ".concat(Yb),[fb]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[mb]:"Request was blocked inside an iframe because MSAL detected an authentication response.  ".concat(Yb),[gb]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[yb]:"The iframe being monitored was closed prematurely.",[vb]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[bb]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[wb]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[kb]:"No token request found in cache.",[Sb]:"The cached token request could not be parsed.",[_b]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[Cb]:"Invalid cache type",[Tb]:"Login and token requests are not supported in non-browser environments.",[Eb]:"Database is not open!",[Ib]:"No network connectivity. Check your internet connection.",[Ab]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[xb]:"Network request failed. Please check the network trace to determine root cause.",[Rb]:"Failed to parse network response. Check network trace.",[Pb]:"Error loading token to cache.",[Mb]:"Cryptographic Key or Keypair not found in browser storage.",[Ob]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Nb]:"An authorization code or nativeAccountId must be provided to this flow.",[Db]:"Request cannot contain both spa code and native account id.",[Lb]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[Fb]:"Unable to acquire token from native platform.  ".concat(Yb),[qb]:"Timed out while attempting to establish connection to browser extension",[Ub]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[zb]:"Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ".concat(Yb),[Hb]:"You must call and await the initialize function before attempting to call any other MSAL API.  ".concat(Yb),[Bb]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[jb]:"Invalid base64 encoded string.",[Wb]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[Kb]:"Failed to build request headers object.",[Gb]:"Failed to parse response headers",[Vb]:"Failed to decrypt ear response",[Qb]:"The request timed out."};class $b extends ip{constructor(e,t){super(e,Jb[e],t),Object.setPrototypeOf(this,$b.prototype),this.name="BrowserAuthError"}}function Xb(e,t){return new $b(e,t)}class Zb{navigateInternal(e,t){return Zb.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Zb.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise((e,n)=>{setTimeout(()=>{n(Xb(Qb,"failed_to_redirect"))},t.timeout)})}}class ew extends ip{constructor(e,t,n){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,ew.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=n}}function tw(e,t,n,r){return e.errorMessage="".concat(e.errorMessage,", additionalErrorInfo: error.name:").concat(null===r||void 0===r?void 0:r.name,", error.message:").concat(null===r||void 0===r?void 0:r.message),new ew(e,t,n)}class nw{async sendGetRequestAsync(e,t){let n,r={},o=0;const i=rw(t);try{n=await fetch(e,{method:Dp,headers:i})}catch(a){throw tw(Xb(window.navigator.onLine?xb:Ib),void 0,void 0,a)}r=ow(n.headers);try{return o=n.status,{headers:r,body:await n.json(),status:o}}catch(a){throw tw(Xb(Rb),o,r,a)}}async sendPostRequestAsync(e,t){const n=t&&t.body||"",r=rw(t);let o,i=0,a={};try{o=await fetch(e,{method:Lp,headers:r,body:n})}catch(s){throw tw(Xb(window.navigator.onLine?Ab:Ib),void 0,void 0,s)}a=ow(o.headers);try{return i=o.status,{headers:a,body:await o.json(),status:i}}catch(s){throw tw(Xb(Rb),i,a,s)}}}function rw(e){try{const t=new Headers;if(!e||!e.headers)return t;const n=e.headers;return Object.entries(n).forEach(e=>{let[n,r]=e;t.append(n,r)}),t}catch(t){throw tw(Xb(Kb),void 0,void 0,t)}}function ow(e){try{const t={};return e.forEach((e,n)=>{t[n]=e}),t}catch(t){throw Xb(Gb)}}const iw="client_id",aw="redirect_uri",sw="token_type",cw="req_cnf",lw="return_spa_code",uw="x-client-xtra-sku",dw="brk_client_id",hw="brk_redirect_uri",pw="instance_aware";function fw(e,t,n){if(!t)return;const r=e.get(iw);r&&e.has(dw)&&(null===n||void 0===n||n.addFields({embeddedClientId:r,embeddedRedirectUri:e.get(aw)},t))}function mw(e,t){e.set("response_type",t)}function gw(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Jd;!n||r.includes("openid")||t.includes("openid")||r.push("openid");const o=n?[...t||[],...r]:t||[],i=new Og(o);e.set("scope",i.printScopes())}function yw(e,t){e.set(iw,t)}function vw(e,t){e.set(aw,t)}function bw(e,t){e.set("login_hint",t)}function ww(e,t){e.set(th,"UPN:".concat(t))}function kw(e,t){e.set(th,"Oid:".concat(t.uid,"@").concat(t.utid))}function Sw(e,t){e.set("sid",t)}function _w(e,t,n){const r=Lw(t,n);try{JSON.parse(r)}catch(o){throw Pg(hg)}e.set("claims",r)}function Cw(e,t){e.set("client-request-id",t)}function Tw(e,t){e.set("x-client-SKU",t.sku),e.set("x-client-VER",t.version),t.os&&e.set("x-client-OS",t.os),t.cpu&&e.set("x-client-CPU",t.cpu)}function Ew(e,t){null!==t&&void 0!==t&&t.appName&&e.set("x-app-name",t.appName),null!==t&&void 0!==t&&t.appVersion&&e.set("x-app-ver",t.appVersion)}function Iw(e,t){t&&e.set("state",t)}function Aw(e,t,n){if(!t||!n)throw Pg(gg);e.set("code_challenge",t),e.set("code_challenge_method",n)}function xw(e,t){e.set("client_secret",t)}function Rw(e,t){t&&e.set("client_assertion",t)}function Pw(e,t){t&&e.set("client_assertion_type",t)}function Mw(e,t){e.set("grant_type",t)}function Ow(e){e.set("client_info","1")}function Nw(e){e.has(pw)||e.set(pw,"true")}function Dw(e,t){Object.entries(t).forEach(t=>{let[n,r]=t;!e.has(n)&&r&&e.set(n,r)})}function Lw(e,t){let n;if(e)try{n=JSON.parse(e)}catch(r){throw Pg(hg)}else n={};return t&&t.length>0&&(n.hasOwnProperty(ch)||(n[ch]={}),n[ch][lh]={values:t}),JSON.stringify(n)}function Fw(e,t){t&&(e.set(sw,Fh.POP),e.set(cw,t))}function qw(e,t){t&&(e.set(sw,Fh.SSH),e.set(cw,t))}function Uw(e,t){e.set("x-client-current-telemetry",t.generateCurrentRequestHeaderValue()),e.set("x-client-last-telemetry",t.generateLastRequestHeaderValue())}function zw(e){e.set("x-ms-lib-capability",Hh)}function Hw(e,t,n){e.has(dw)||e.set(dw,t),e.has(hw)||e.set(hw,n)}function Bw(e){return encodeURIComponent(Ww(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function jw(e){return Kw(e).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ww(e){return Kw((new TextEncoder).encode(e))}function Kw(e){const t=Array.from(e,e=>String.fromCodePoint(e)).join("");return btoa(t)}function Gw(e){return(new TextDecoder).decode(Vw(e))}function Vw(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw Xb(jb)}const n=atob(t);return Uint8Array.from(n,e=>e.codePointAt(0)||0)}const Qw="AES-GCM",Yw="HKDF",Jw="SHA-256",$w=new Uint8Array([1,0,1]),Xw="0123456789abcdef",Zw=new Uint32Array(1),ek="raw",tk="encrypt",nk="decrypt",rk={name:"RSASSA-PKCS1-v1_5",hash:Jw,modulusLength:2048,publicExponent:$w};async function ok(e,t,n){null===t||void 0===t||t.addQueueMeasurement(xv,n);const r=(new TextEncoder).encode(e);return window.crypto.subtle.digest(Jw,r)}function ik(e){return window.crypto.getRandomValues(e)}function ak(){return window.crypto.getRandomValues(Zw),Zw[0]}function sk(){const e=Date.now(),t=1024*ak()+(1023&ak()),n=new Uint8Array(16),r=Math.trunc(t/2**30),o=t&2**30-1,i=ak();n[0]=e/2**40,n[1]=e/2**32,n[2]=e/2**24,n[3]=e/65536,n[4]=e/256,n[5]=e,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let a="";for(let s=0;s<n.length;s++)a+=Xw.charAt(n[s]>>>4),a+=Xw.charAt(15&n[s]),3!==s&&5!==s&&7!==s&&9!==s||(a+="-");return a}async function ck(e){return window.crypto.subtle.exportKey("jwk",e)}async function lk(){const e=await dk(),t={alg:"dir",kty:"oct",k:jw(new Uint8Array(e))};return Ww(JSON.stringify(t))}async function uk(e,t){const n=t.split(".");if(5!==n.length)throw Xb(Vb,"jwe_length");const r=await async function(e){const t=Gw(e),n=Vw(JSON.parse(t).k);return window.crypto.subtle.importKey(ek,n,Qw,!1,[nk])}(e).catch(()=>{throw Xb(Vb,"import_key")});try{const e=(new TextEncoder).encode(n[0]),t=Vw(n[2]),o=Vw(n[3]),i=Vw(n[4]),a=8*i.byteLength,s=new Uint8Array(o.length+i.length);s.set(o),s.set(i,o.length);const c=await window.crypto.subtle.decrypt({name:Qw,iv:t,tagLength:a,additionalData:e},r,s);return(new TextDecoder).decode(c)}catch(o){throw Xb(Vb,"decrypt")}}async function dk(){const e=await window.crypto.subtle.generateKey({name:Qw,length:256},!0,[tk,nk]);return window.crypto.subtle.exportKey(ek,e)}async function hk(e){return window.crypto.subtle.importKey(ek,e,Yw,!1,["deriveKey"])}async function pk(e,t,n){return window.crypto.subtle.deriveKey({name:Yw,salt:t,hash:Jw,info:(new TextEncoder).encode(n)},e,{name:Qw,length:256},!1,[tk,nk])}async function fk(e,t,n){const r=(new TextEncoder).encode(t),o=window.crypto.getRandomValues(new Uint8Array(16)),i=await pk(e,o,n),a=await window.crypto.subtle.encrypt({name:Qw,iv:new Uint8Array(12)},i,r);return{data:jw(new Uint8Array(a)),nonce:jw(o)}}async function mk(e,t,n,r){const o=Vw(r),i=await pk(e,Vw(t),n),a=await window.crypto.subtle.decrypt({name:Qw,iv:new Uint8Array(12)},i,o);return(new TextDecoder).decode(a)}async function gk(e){const t=await ok(e);return jw(new Uint8Array(t))}function yk(e){e.location.hash="","function"===typeof e.history.replaceState&&e.history.replaceState(null,"","".concat(e.location.origin).concat(e.location.pathname).concat(e.location.search))}function vk(){return window.parent!==window}function bk(){return"undefined"!==typeof window&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function wk(){if("undefined"!==typeof window&&window.opener&&window.opener!==window&&"string"===typeof window.name&&0===window.name.indexOf("".concat(yp,".")))throw Xb(gb)}function kk(){if("undefined"===typeof window)throw Xb(Tb)}function Sk(e){if(!e)throw Xb(Hb)}function _k(e){kk(),function(){if(Gg.hashContainsKnownProperties(window.location.hash)&&vk())throw Xb(mb)}(),wk(),Sk(e)}function Ck(e,t){if(_k(e),function(e){if(vk()&&!e)throw Xb(fb)}(t.system.allowRedirectInIframe),t.cache.cacheLocation===Np&&!t.cache.storeAuthStateInCookie)throw hp(lp)}function Tk(e){const t=document.createElement("link");t.rel="preconnect",t.href=new URL(e).origin,t.crossOrigin="anonymous",document.head.appendChild(t),window.setTimeout(()=>{try{document.head.removeChild(t)}catch(e){}},1e4)}const Ek=1e4;const Ik="4.25.1",Ak="msal",xk="browser",Rk="".concat(Ak,".").concat(xk,".log.level"),Pk="".concat(Ak,".").concat(xk,".log.pii"),Mk=("".concat(Ak,".").concat(xk,".performance.enabled"),"".concat(Ak,".").concat(xk,".platform.auth.dom")),Ok="".concat(Ak,".version"),Nk="account.keys",Dk="token.keys";function Lk(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e<1?"".concat(Ak,".").concat(Nk):"".concat(Ak,".").concat(e,".").concat(Nk)}function Fk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t<1?"".concat(Ak,".").concat(Dk,".").concat(e):"".concat(Ak,".").concat(t,".").concat(Dk,".").concat(e)}class qk{static loggerCallback(e,t){switch(e){case kf.Error:return void console.error(t);case kf.Info:return void console.info(t);case kf.Verbose:return void console.debug(t);case kf.Warning:return void console.warn(t);default:return void console.log(t)}}constructor(e){var t,n;let r;this.browserEnvironment="undefined"!==typeof window,this.config=function(e,t){let{auth:n,cache:r,system:o,telemetry:i}=e;const a={clientId:Hd.EMPTY_STRING,authority:"".concat(Hd.DEFAULT_AUTHORITY),knownAuthorities:[],cloudDiscoveryMetadata:Hd.EMPTY_STRING,authorityMetadata:Hd.EMPTY_STRING,redirectUri:"undefined"!==typeof window?bk():"",postLogoutRedirectUri:Hd.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:am,OIDCOptions:{serverResponseType:vh,defaultScopes:[Hd.OPENID_SCOPE,Hd.PROFILE_SCOPE,Hd.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:lm,tenant:Hd.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1,encodeExtraQueryParams:!1},c={cacheLocation:Op,cacheRetentionDays:5,temporaryCacheLocation:Op,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!r||r.cacheLocation!==Mp),claimsBasedCachingEnabled:!1},l={loggerCallback:()=>{},logLevel:kf.Info,piiLoggingEnabled:!1},u=s(s({},Bv),{},{loggerOptions:l,networkClient:t?new nw:$v,navigationClient:new Zb,loadFrameTimeout:0,windowHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||6e4,iframeHashTimeout:(null===o||void 0===o?void 0:o.loadFrameTimeout)||Ek,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowPlatformBroker:!1,nativeBrokerHandshakeTimeout:(null===o||void 0===o?void 0:o.nativeBrokerHandshakeTimeout)||2e3,pollIntervalMilliseconds:vp}),d=s(s(s({},u),o),{},{loggerOptions:(null===o||void 0===o?void 0:o.loggerOptions)||l}),h={application:{appName:Hd.EMPTY_STRING,appVersion:Hd.EMPTY_STRING},client:new Hv};(null===n||void 0===n?void 0:n.protocolMode)!==sm&&null!==n&&void 0!==n&&n.OIDCOptions&&new Sf(d.loggerOptions).warning(JSON.stringify(Pg(Cg)));if(null!==n&&void 0!==n&&n.protocolMode&&n.protocolMode===sm&&null!==d&&void 0!==d&&d.allowPlatformBroker)throw Pg(Tg);return{auth:s(s(s({},a),n),{},{OIDCOptions:s(s({},a.OIDCOptions),null===n||void 0===n?void 0:n.OIDCOptions)}),cache:s(s({},c),r),system:d,telemetry:s(s({},h),i)}}(e,this.browserEnvironment);try{r=window[Op]}catch(u){}const o=null===(t=r)||void 0===t?void 0:t.getItem(Rk),i=null===(n=r)||void 0===n||null===(n=n.getItem(Pk))||void 0===n?void 0:n.toLowerCase(),a="true"===i||"false"!==i&&void 0,c=s({},this.config.system.loggerOptions),l=o&&Object.keys(kf).includes(o)?kf[o]:void 0;l&&(c.loggerCallback=qk.loggerCallback,c.logLevel=l),void 0!==a&&(c.piiLoggingEnabled=a),this.logger=new Sf(c,"@azure/msal-browser",Ik),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}class Uk extends qk{getModuleName(){return Uk.MODULE_NAME}getId(){return Uk.ID}async initialize(){return this.available="undefined"!==typeof window,this.available}}Uk.MODULE_NAME="",Uk.ID="StandardOperatingContext";const zk="missing_kid_error",Hk="missing_alg_error",Bk={[zk]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[Hk]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class jk extends ip{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,jk.prototype)}}function Wk(e){return new jk(e,Bk[e])}class Kk{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Wk(zk);if(!e.alg)throw Wk(Hk);const t=new Kk({typ:e.typ||tp,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}class Gk{constructor(){this.dbName=hf,this.version=1,this.tableName=pf,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const n=window.indexedDB.open(this.dbName,this.version);n.addEventListener("upgradeneeded",e=>{e.target.result.createObjectStore(this.tableName)}),n.addEventListener("success",t=>{const n=t;this.db=n.target.result,this.dbOpen=!0,e()}),n.addEventListener("error",()=>t(Xb(Lb)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Xb(Eb));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);r.addEventListener("success",e=>{const n=e;this.closeConnection(),t(n.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Xb(Eb));const o=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);o.addEventListener("success",()=>{this.closeConnection(),n()}),o.addEventListener("error",e=>{this.closeConnection(),r(e)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Xb(Eb));const r=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);r.addEventListener("success",()=>{this.closeConnection(),t()}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(Xb(Eb));const n=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();n.addEventListener("success",t=>{const n=t;this.closeConnection(),e(n.target.result)}),n.addEventListener("error",e=>{this.closeConnection(),t(e)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,n)=>{if(!this.db)return n(Xb(Eb));const r=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);r.addEventListener("success",e=>{const n=e;this.closeConnection(),t(1===n.target.result)}),r.addEventListener("error",e=>{this.closeConnection(),n(e)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const n=window.indexedDB.deleteDatabase(hf),r=setTimeout(()=>t(!1),200);n.addEventListener("success",()=>(clearTimeout(r),e(!0))),n.addEventListener("blocked",()=>(clearTimeout(r),e(!0))),n.addEventListener("error",()=>(clearTimeout(r),t(!1)))})}}class Vk{constructor(){this.cache=new Map}async initialize(){}getItem(e){return this.cache.get(e)||null}getUserData(e){return this.getItem(e)}setItem(e,t){this.cache.set(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,n)=>{e.push(n)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}decryptData(){return Promise.resolve(null)}}class Qk{constructor(e){this.inMemoryCache=new Vk,this.indexedDBCache=new Gk,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof $b&&e.errorCode===Lb))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(n){this.handleDatabaseAccessError(n)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(n){this.handleDatabaseAccessError(n)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(0===e.length)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(n){this.handleDatabaseAccessError(n)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}class Yk{constructor(e,t,n){this.logger=e,function(e){if(!window)throw Xb(Tb);if(!window.crypto)throw Xb(tb);if(!e&&!window.crypto.subtle)throw Xb(tb,"crypto_subtle_undefined")}(null!==n&&void 0!==n&&n),this.cache=new Qk(this.logger),this.performanceClient=t}createNewGuid(){return sk()}base64Encode(e){return Ww(e)}base64Decode(e){return Gw(e)}base64UrlEncode(e){return Bw(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var t;const n=null===(t=this.performanceClient)||void 0===t?void 0:t.startMeasurement(hy,e.correlationId),r=await async function(e,t){return window.crypto.subtle.generateKey(rk,e,t)}(Yk.EXTRACTABLE,Yk.POP_KEY_USAGES),o=await ck(r.publicKey),i=Jk({e:o.e,kty:o.kty,n:o.n}),a=await this.hashString(i),s=await ck(r.privateKey),c=await async function(e,t,n){return window.crypto.subtle.importKey("jwk",e,rk,t,n)}(s,!1,["sign"]);return await this.cache.setItem(a,{privateKey:c,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){await this.cache.removeItem(e);if(await this.cache.containsKey(e))throw ng(Gm)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error("Clearing keystore failed with error: ".concat(e.message)):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,n,r){var o;const i=null===(o=this.performanceClient)||void 0===o?void 0:o.startMeasurement(py,r),a=await this.cache.getItem(t);if(!a)throw Xb(Mb);const c=await ck(a.publicKey),l=Jk(c),u=Bw(JSON.stringify({kid:t})),d=Bw(Kk.getShrHeaderString(s(s({},null===n||void 0===n?void 0:n.header),{},{alg:c.alg,kid:u})));e.cnf={jwk:JSON.parse(l)};const h=Bw(JSON.stringify(e)),p="".concat(d,".").concat(h),f=(new TextEncoder).encode(p),m=await async function(e,t){return window.crypto.subtle.sign(rk,e,t)}(a.privateKey,f),g=jw(new Uint8Array(m)),y="".concat(p,".").concat(g);return i&&i.end({success:!0}),y}async hashString(e){return gk(e)}}function Jk(e){return JSON.stringify(e,Object.keys(e).sort())}Yk.POP_KEY_USAGES=["sign","verify"],Yk.EXTRACTABLE=!0;const $k=0,Xk=1,Zk=2,eS=3;const tS=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}try{const r=e(...arguments);return null===i||void 0===i||i.end({success:!0}),n.trace("Returning result from ".concat(t)),r}catch(a){n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(a))}catch(a){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},a),a}},nS=(e,t,n,r,o)=>function(){n.trace("Executing function ".concat(t));const i=null===r||void 0===r?void 0:r.startMeasurement(t,o);if(o){const e=t+"CallCount";null===r||void 0===r||r.incrementFields({[e]:1},o)}return null===r||void 0===r||r.setPreQueueTime(t,o),e(...arguments).then(e=>(n.trace("Returning result from ".concat(t)),null===i||void 0===i||i.end({success:!0}),e)).catch(e=>{n.trace("Error occurred in ".concat(t));try{n.trace(JSON.stringify(e))}catch(e){n.trace("Unable to print error message.")}throw null===i||void 0===i||i.end({success:!1},e),e})};class rS{constructor(e,t,n,r){this.networkInterface=e,this.logger=t,this.performanceClient=n,this.correlationId=r}async detectRegion(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(pv,this.correlationId);let r=e;if(r)t.region_source=Kh;else{const e=rS.IMDS_OPTIONS;try{const n=await nS(this.getRegionFromIMDS.bind(this),fv,this.logger,this.performanceClient,this.correlationId)(Hd.IMDS_VERSION,e);if(n.status===Bd&&(r=n.body,t.region_source=Gh),n.status===Wd){const n=await nS(this.getCurrentVersion.bind(this),mv,this.logger,this.performanceClient,this.correlationId)(e);if(!n)return t.region_source=Wh,null;const o=await nS(this.getRegionFromIMDS.bind(this),fv,this.logger,this.performanceClient,this.correlationId)(n,e);o.status===Bd&&(r=o.body,t.region_source=Gh)}}catch(o){return t.region_source=Wh,null}}return r||(t.region_source=Wh),r||null}async getRegionFromIMDS(e,t){var n;return null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(fv,this.correlationId),this.networkInterface.sendGetRequestAsync("".concat(Hd.IMDS_ENDPOINT,"?api-version=").concat(e,"&format=text"),t,Hd.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(mv,this.correlationId);try{const t=await this.networkInterface.sendGetRequestAsync("".concat(Hd.IMDS_ENDPOINT,"?format=json"),e);return t.status===Wd&&t.body&&t.body["newest-versions"]&&t.body["newest-versions"].length>0?t.body["newest-versions"][0]:null}catch(n){return null}}}function oS(){return Math.round((new Date).getTime()/1e3)}function iS(e){return e.getTime()/1e3}function aS(e){return e?new Date(1e3*Number(e)):new Date}function sS(e,t){const n=Number(e)||0;return oS()+t>n}function cS(e,t){const n=Number(e)+24*t*60*60*1e3;return Date.now()>n}function lS(e,t,n,r,o){return{credentialType:Ih.ID_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,realm:o,lastUpdatedAt:Date.now().toString()}}function uS(e,t,n,r,o,i,a,s,c,l,u,d,h,p,f){var m,g;const y={homeAccountId:e,credentialType:Ih.ACCESS_TOKEN,secret:n,cachedAt:oS().toString(),expiresOn:a.toString(),extendedExpiresOn:s.toString(),environment:t,clientId:r,realm:o,target:i,tokenType:u||Fh.BEARER,lastUpdatedAt:Date.now().toString()};if(d&&(y.userAssertionHash=d),l&&(y.refreshOn=l.toString()),p&&(y.requestedClaims=p,y.requestedClaimsHash=f),(null===(m=y.tokenType)||void 0===m?void 0:m.toLowerCase())!==Fh.BEARER.toLowerCase())switch(y.credentialType=Ih.ACCESS_TOKEN_WITH_AUTH_SCHEME,y.tokenType){case Fh.POP:const e=Ug(n,c);if(null===e||void 0===e||null===(g=e.cnf)||void 0===g||!g.kid)throw ng(Wm);y.keyId=e.cnf.kid;break;case Fh.SSH:y.keyId=h}return y}function dS(e,t,n,r,o,i,a){const s={credentialType:Ih.REFRESH_TOKEN,homeAccountId:e,environment:t,clientId:r,secret:n,lastUpdatedAt:Date.now().toString()};return i&&(s.userAssertionHash=i),o&&(s.familyId=o),a&&(s.expiresOn=a.toString()),s}function hS(e){return e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("credentialType")&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("secret")}function pS(e){return!!e&&(hS(e)&&e.hasOwnProperty("realm")&&e.hasOwnProperty("target")&&(e.credentialType===Ih.ACCESS_TOKEN||e.credentialType===Ih.ACCESS_TOKEN_WITH_AUTH_SCHEME))}function fS(e){return!!e&&(hS(e)&&e.credentialType===Ih.REFRESH_TOKEN)}function mS(){return oS()+Ph}function gS(e,t,n){e.authorization_endpoint=t.authorization_endpoint,e.token_endpoint=t.token_endpoint,e.end_session_endpoint=t.end_session_endpoint,e.issuer=t.issuer,e.endpointsFromNetwork=n,e.jwks_uri=t.jwks_uri}function yS(e,t,n){e.aliases=t.aliases,e.preferred_cache=t.preferred_cache,e.preferred_network=t.preferred_network,e.aliasesFromNetwork=n}function vS(e){return e.expiresAt<=oS()}rS.IMDS_OPTIONS={headers:{Metadata:"true"}};class bS{constructor(e,t,n,r,o,i,a,s){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=n,this.authorityOptions=r,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=o,this.performanceClient=a,this.correlationId=i,this.managedIdentity=s||!1,this.regionDiscovery=new rS(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(Hd.CIAM_AUTH_URL))return eS;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case Hd.ADFS:return Xk;case Hd.DSTS:return Zk}return $k}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new Gg(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw ng(fm)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw ng(fm)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw ng(fm)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw ng(Vm);return this.replacePath(this.metadata.end_session_endpoint)}throw ng(fm)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw ng(fm)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw ng(fm)}canReplaceTenant(e){return 1===e.PathSegments.length&&!bS.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===$k&&this.protocolMode!==sm}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const n=new Gg(this.metadata.canonical_authority).getUrlComponents(),r=n.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((e,o)=>{let i=r[o];if(0===o&&this.canReplaceTenant(n)){const e=new Gg(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];i!==e&&(this.logger.verbose("Replacing tenant domain name ".concat(i," with id ").concat(e)),i=e)}e!==i&&(t=t.replace("/".concat(i,"/"),"/".concat(e,"/")))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Xk||this.protocolMode===sm&&!this.isAliasOfKnownMicrosoftAuthority(e)?"".concat(this.canonicalAuthority,".well-known/openid-configuration"):"".concat(this.canonicalAuthority,"v2.0/.well-known/openid-configuration")}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var e,t;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(sv,this.correlationId);const n=this.getCurrentMetadataEntity(),r=await nS(this.updateCloudDiscoveryMetadata.bind(this),lv,this.logger,this.performanceClient,this.correlationId)(n);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,n.preferred_network);const o=await nS(this.updateEndpointMetadata.bind(this),dv,this.logger,this.performanceClient,this.correlationId)(n);this.updateCachedMetadata(n,r,{source:o}),null===(t=this.performanceClient)||void 0===t||t.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:mS(),jwks_uri:""}),e}updateCachedMetadata(e,t,n){t!==Oh&&(null===n||void 0===n?void 0:n.source)!==Oh&&(e.expiresAt=mS(),e.canonical_authority=this.canonicalAuthority);const r=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(r,e),this.metadata=e}async updateEndpointMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(dv,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){var r;if(n.source===Dh)if(null!==(r=this.authorityOptions.azureRegionConfiguration)&&void 0!==r&&r.azureRegion&&n.metadata){gS(e,await nS(this.updateMetadataWithRegionalInformation.bind(this),hv,this.logger,this.performanceClient,this.correlationId)(n.metadata),!1),e.canonical_authority=this.canonicalAuthority}return n.source}let o=await nS(this.getEndpointMetadataFromNetwork.bind(this),uv,this.logger,this.performanceClient,this.correlationId)();var i;if(o)return null!==(i=this.authorityOptions.azureRegionConfiguration)&&void 0!==i&&i.azureRegion&&(o=await nS(this.updateMetadataWithRegionalInformation.bind(this),hv,this.logger,this.performanceClient,this.correlationId)(o)),gS(e,o,!0),Nh;throw ng(gm,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),gS(e,t,!1),{source:Mh};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const t=this.getEndpointMetadataFromHardcodedValues();if(t)return gS(e,t,!1),{source:Dh,metadata:t};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const n=vS(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!n?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Oh}):(n&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new Gg(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch(e){throw Pg(vg)}return null}async getEndpointMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(uv,this.correlationId);const t={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose("Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ".concat(n));try{const e=await this.networkInterface.sendGetRequestAsync(n,t),r=function(e){return e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("jwks_uri")}(e.body);return r?e.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(r){return this.logger.verbose("Authority.getEndpointMetadataFromNetwork: ".concat(r)),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Vg?Vg[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(hv,this.correlationId);const r=null===(n=this.authorityOptions.azureRegionConfiguration)||void 0===n?void 0:n.azureRegion;if(r){var o;if(r!==Hd.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Vh,this.regionDiscoveryMetadata.region_used=r,bS.replaceWithRegionalInformation(e,r);const t=await nS(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),pv,this.logger,this.performanceClient,this.correlationId)(null===(o=this.authorityOptions.azureRegionConfiguration)||void 0===o?void 0:o.environmentRegion,this.regionDiscoveryMetadata);if(t)return this.regionDiscoveryMetadata.region_outcome=Qh,this.regionDiscoveryMetadata.region_used=t,bS.replaceWithRegionalInformation(e,t);this.regionDiscoveryMetadata.region_outcome=Yh}return e}async updateCloudDiscoveryMetadata(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(lv,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await nS(this.getCloudDiscoveryMetadataFromNetwork.bind(this),cv,this.logger,this.performanceClient,this.correlationId)();if(r)return yS(e,r,!0),Nh;throw Pg(bg)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii("Known Authorities: ".concat(this.authorityOptions.knownAuthorities||Hd.NOT_APPLICABLE)),this.logger.verbosePii("Authority Metadata: ".concat(this.authorityOptions.authorityMetadata||Hd.NOT_APPLICABLE)),this.logger.verbosePii("Canonical Authority: ".concat(e.canonical_authority||Hd.NOT_APPLICABLE));const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),yS(e,t,!1),Mh;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const t=(n=this.hostnameAndPort,$g(Qg.metadata,n));if(t)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),yS(e,t,!1),Dh;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}var n;const r=vS(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Oh):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===eS)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),bS.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=$g(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),e)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),e;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch(e){throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Pg(yg)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),bS.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var e;null===(e=this.performanceClient)||void 0===e||e.addQueueMeasurement(cv,this.correlationId);const t="".concat(Hd.AAD_INSTANCE_DISCOVERY_ENDPT).concat(this.canonicalAuthority,"oauth2/v2.0/authorize"),n={};let r=null;try{const e=await this.networkInterface.sendGetRequestAsync(t,n);let o,i;if(function(e){return e.hasOwnProperty("tenant_discovery_endpoint")&&e.hasOwnProperty("metadata")}(e.body))o=e.body,i=o.metadata,this.logger.verbosePii("tenant_discovery_endpoint is: ".concat(o.tenant_discovery_endpoint));else{if(!function(e){return e.hasOwnProperty("error")&&e.hasOwnProperty("error_description")}(e.body))return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(this.logger.warning("A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ".concat(e.status)),o=e.body,o.error===Hd.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning("The CloudInstanceDiscoveryErrorResponse error is ".concat(o.error)),this.logger.warning("The CloudInstanceDiscoveryErrorResponse error description is ".concat(o.error_description)),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),i=[]}this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=$g(i,this.hostnameAndPort)}catch(o){if(o instanceof ip)this.logger.error("There was a network error while attempting to get the cloud discovery instance metadata.\nError: ".concat(o.errorCode,"\nError Description: ").concat(o.errorMessage));else{const e=o;this.logger.error("A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ".concat(e.name,"\nError Description: ").concat(e.message))}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=bS.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(e=>e&&Gg.getDomainFromUrl(e).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let n;if(t&&t.azureCloudInstance!==lm){const e=t.tenant?t.tenant:Hd.DEFAULT_COMMON_TENANT;n="".concat(t.azureCloudInstance,"/").concat(e,"/")}return n||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return Hd.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw ng(fm)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return Yg.has(e)}static isPublicCloudAuthority(e){return Hd.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,n){const r=new Gg(e);r.validateAsUri();const o=r.getUrlComponents();let i="".concat(t,".").concat(o.HostNameAndPort);this.isPublicCloudAuthority(o.HostNameAndPort)&&(i="".concat(t,".").concat(Hd.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX));const a=Gg.constructAuthorityUriFromObject(s(s({},r.getUrlComponents()),{},{HostNameAndPort:i})).urlString;return n?"".concat(a,"?").concat(n):a}static replaceWithRegionalInformation(e,t){const n=s({},e);return n.authorization_endpoint=bS.buildRegionalAuthorityString(n.authorization_endpoint,t),n.token_endpoint=bS.buildRegionalAuthorityString(n.token_endpoint,t),n.end_session_endpoint&&(n.end_session_endpoint=bS.buildRegionalAuthorityString(n.end_session_endpoint,t)),n}static transformCIAMAuthority(e){let t=e;const n=new Gg(e).getUrlComponents();if(0===n.PathSegments.length&&n.HostNameAndPort.endsWith(Hd.CIAM_AUTH_URL)){const e=n.HostNameAndPort.split(".")[0];t="".concat(t).concat(e).concat(Hd.AAD_TENANT_DOMAIN_SUFFIX)}return t}}function wS(e){return e.endsWith(Hd.FORWARD_SLASH)?e:"".concat(e).concat(Hd.FORWARD_SLASH)}bS.reservedTenantDomains=new Set(["{tenant}","{tenantid}",ih,sh,ah]);const kS="no_tokens_found",SS="native_account_unavailable",_S="refresh_token_expired",CS="ux_not_allowed",TS="bad_token",ES=["interaction_required","consent_required","login_required",TS,CS],IS=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],AS={[kS]:"No refresh token found in the cache. Please sign-in.",[SS]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[_S]:"Refresh token has expired.",[TS]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve.",[CS]:"`canShowUI` flag in Edge was set to false. User interaction required on web page. Please invoke an interactive API to resolve."};class xS extends ip{constructor(e,t,n,r,o,i,a,s){super(e,t,n),Object.setPrototypeOf(this,xS.prototype),this.timestamp=r||Hd.EMPTY_STRING,this.traceId=o||Hd.EMPTY_STRING,this.correlationId=i||Hd.EMPTY_STRING,this.claims=a||Hd.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=s}}function RS(e,t,n){const r=!!e&&ES.indexOf(e)>-1,o=!!n&&IS.indexOf(n)>-1,i=!!t&&ES.some(e=>t.indexOf(e)>-1);return r||i||o}function PS(e){return new xS(e,AS[e])}function MS(e,t){if(!e)throw ng(dm);try{const n=t(e);return JSON.parse(n)}catch(n){throw ng(um)}}function OS(e){if(!e)throw ng(um);const t=e.split(Eh,2);return{uid:t[0],utid:t.length<2?Hd.EMPTY_STRING:t[1]}}function NS(e){if(e){return e.tid||e.tfp||e.acr||null}return null}class DS{getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,loginHint:this.loginHint,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e])),dataBoundary:this.dataBoundary}}isSingleTenant(){return!this.tenantProfiles}static createAccount(e,t,n){var r,o,i,a,s,c,l,u,d;const h=new DS;let p;t.authorityType===Xk?h.authorityType=_h:t.protocolMode===sm?h.authorityType=Ch:h.authorityType=Sh,e.clientInfo&&n&&(p=MS(e.clientInfo,n),p.xms_tdbr&&(h.dataBoundary="EU"===p.xms_tdbr?"EU":"None")),h.clientInfo=e.clientInfo,h.homeAccountId=e.homeAccountId,h.nativeAccountId=e.nativeAccountId;const f=e.environment||t&&t.getPreferredCache();if(!f)throw ng(Lm);h.environment=f,h.realm=(null===(r=p)||void 0===r?void 0:r.utid)||NS(e.idTokenClaims)||"",h.localAccountId=(null===(o=p)||void 0===o?void 0:o.uid)||(null===(i=e.idTokenClaims)||void 0===i?void 0:i.oid)||(null===(a=e.idTokenClaims)||void 0===a?void 0:a.sub)||"";const m=(null===(s=e.idTokenClaims)||void 0===s?void 0:s.preferred_username)||(null===(c=e.idTokenClaims)||void 0===c?void 0:c.upn),g=null!==(l=e.idTokenClaims)&&void 0!==l&&l.emails?e.idTokenClaims.emails[0]:null;if(h.username=m||g||"",h.loginHint=null===(u=e.idTokenClaims)||void 0===u?void 0:u.login_hint,h.name=(null===(d=e.idTokenClaims)||void 0===d?void 0:d.name)||"",h.cloudGraphHostName=e.cloudGraphHostName,h.msGraphHost=e.msGraphHost,e.tenantProfiles)h.tenantProfiles=e.tenantProfiles;else{const t=Fg(e.homeAccountId,h.localAccountId,h.realm,e.idTokenClaims);h.tenantProfiles=[t]}return h}static createFromAccountInfo(e,t,n){var r;const o=new DS;return o.authorityType=e.authorityType||Ch,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.loginHint=e.loginHint,o.cloudGraphHostName=t,o.msGraphHost=n,o.tenantProfiles=Array.from((null===(r=e.tenantProfiles)||void 0===r?void 0:r.values())||[]),o.dataBoundary=e.dataBoundary,o}static generateHomeAccountId(e,t,n,r,o){if(t!==Xk&&t!==Zk){if(e)try{const t=MS(e,r.base64Decode);if(t.uid&&t.utid)return"".concat(t.uid,".").concat(t.utid)}catch(i){}n.warning("No client info in response")}return(null===o||void 0===o?void 0:o.sub)||""}static isAccountEntity(e){return!!e&&(e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"))}static accountInfoIsEqual(e,t,n){if(!e||!t)return!1;let r=!0;if(n){const n=e.idTokenClaims||{},o=t.idTokenClaims||{};r=n.iat===o.iat&&n.nonce===o.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.loginHint===t.loginHint&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&r}}function LS(e,t,n){var r;return{clientId:e,authority:t.authority,scopes:t.scopes,homeAccountIdentifier:n,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid,embeddedClientId:t.embeddedClientId||(null===(r=t.tokenBodyParameters)||void 0===r?void 0:r.clientId)}}const FS=864e5,qS="Lax",US="None";class zS{initialize(){return Promise.resolve()}getItem(e){const t="".concat(encodeURIComponent(e)),n=document.cookie.split(";");for(let r=0;r<n.length;r++){const e=n[r],[o,...i]=decodeURIComponent(e).trim().split("="),a=i.join("=");if(o===t)return a}return""}getUserData(){throw ng(Xm)}setItem(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:qS,i="".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t),";path=/;SameSite=").concat(o,";");if(n){const e=function(e){const t=new Date,n=new Date(t.getTime()+e*FS);return n.toUTCString()}(n);i+="expires=".concat(e,";")}(r||o===US)&&(i+="Secure;"),document.cookie=i}async setUserData(){return Promise.reject(ng(Xm))}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(e=>{const n=decodeURIComponent(e).trim().split("=");t.push(n[0])}),t}containsKey(e){return this.getKeys().includes(e)}decryptData(){return Promise.resolve(null)}}function HS(e,t){const n=e.getItem(Lk(t));return n?JSON.parse(n):[]}function BS(e,t,n){const r=t.getItem(Fk(e,n));if(r){const e=JSON.parse(r);if(e&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("accessToken")&&e.hasOwnProperty("refreshToken"))return e}return{idToken:[],accessToken:[],refreshToken:[]}}function jS(e){return e.hasOwnProperty("id")&&e.hasOwnProperty("nonce")&&e.hasOwnProperty("data")}const WS="msal.cache.encryption";class KS{constructor(e,t,n){if(!window.localStorage)throw hp(sp);this.memoryStorage=new Vk,this.initialized=!1,this.clientId=e,this.logger=t,this.performanceClient=n,this.broadcast=new BroadcastChannel("msal.broadcast.cache")}async initialize(e){const t=new zS,n=t.getItem(WS);let r={key:"",id:""};if(n)try{r=JSON.parse(n)}catch(o){}if(r.key&&r.id){const t=tS(Vw,Ov,this.logger,this.performanceClient,e)(r.key);this.encryptionCookie={id:r.id,key:await nS(hk,Pv,this.logger,this.performanceClient,e)(t)}}else{const n=sk(),r=await nS(dk,Mv,this.logger,this.performanceClient,e)(),o=tS(jw,Nv,this.logger,this.performanceClient,e)(new Uint8Array(r));this.encryptionCookie={id:n,key:await nS(hk,Pv,this.logger,this.performanceClient,e)(r)};const i={id:n,key:o};t.setItem(WS,JSON.stringify(i),0,!0,US)}await nS(this.importExistingCache.bind(this),_v,this.logger,this.performanceClient,e)(e),this.broadcast.addEventListener("message",this.updateCache.bind(this)),this.initialized=!0}getItem(e){return window.localStorage.getItem(e)}getUserData(e){if(!this.initialized)throw Xb(Hb);return this.memoryStorage.getItem(e)}async decryptData(e,t,n){if(!this.initialized||!this.encryptionCookie)throw Xb(Hb);if(t.id!==this.encryptionCookie.id)return this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},n),null;const r=await nS(mk,Lv,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t.nonce,this.getContext(e),t.data);if(!r)return null;try{return JSON.parse(r)}catch(o){return this.performanceClient.incrementFields({encryptedCacheCorruptionCount:1},n),null}}setItem(e,t){window.localStorage.setItem(e,t)}async setUserData(e,t,n,r){if(!this.initialized||!this.encryptionCookie)throw Xb(Hb);const{data:o,nonce:i}=await nS(fk,Dv,this.logger,this.performanceClient,n)(this.encryptionCookie.key,t,this.getContext(e)),a={id:this.encryptionCookie.id,nonce:i,data:o,lastUpdatedAt:r};this.memoryStorage.setItem(e,t),this.setItem(e,JSON.stringify(a)),this.broadcast.postMessage({key:e,value:t,context:this.getContext(e)})}removeItem(e){this.memoryStorage.containsKey(e)&&(this.memoryStorage.removeItem(e),this.broadcast.postMessage({key:e,value:null,context:this.getContext(e)})),window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}clear(){this.memoryStorage.clear();HS(this).forEach(e=>this.removeItem(e));const e=BS(this.clientId,this);e.idToken.forEach(e=>this.removeItem(e)),e.accessToken.forEach(e=>this.removeItem(e)),e.refreshToken.forEach(e=>this.removeItem(e)),this.getKeys().forEach(e=>{(e.startsWith(Ak)||-1!==e.indexOf(this.clientId))&&this.removeItem(e)})}async importExistingCache(e){if(!this.encryptionCookie)return;let t=HS(this);t=await this.importArray(t,e),t.length?this.setItem(Lk(),JSON.stringify(t)):this.removeItem(Lk());const n=BS(this.clientId,this);n.idToken=await this.importArray(n.idToken,e),n.accessToken=await this.importArray(n.accessToken,e),n.refreshToken=await this.importArray(n.refreshToken,e),n.idToken.length||n.accessToken.length||n.refreshToken.length?this.setItem(Fk(this.clientId),JSON.stringify(n)):this.removeItem(Fk(this.clientId))}async getItemFromEncryptedCache(e,t){if(!this.encryptionCookie)return null;const n=this.getItem(e);if(!n)return null;let r;try{r=JSON.parse(n)}catch(o){return null}return jS(r)?r.id!==this.encryptionCookie.id?(this.performanceClient.incrementFields({encryptedCacheExpiredCount:1},t),null):nS(mk,Lv,this.logger,this.performanceClient,t)(this.encryptionCookie.key,r.nonce,this.getContext(e),r.data):(this.performanceClient.incrementFields({unencryptedCacheCount:1},t),r)}async importArray(e,t){const n=[],r=[];return e.forEach(e=>{const o=this.getItemFromEncryptedCache(e,t).then(t=>{t?(this.memoryStorage.setItem(e,t),n.push(e)):this.removeItem(e)});r.push(o)}),await Promise.all(r),n}getContext(e){let t="";return e.includes(this.clientId)&&(t=this.clientId),t}updateCache(e){this.logger.trace("Updating internal cache from broadcast event");const t=this.performanceClient.startMeasurement(Tv);t.add({isBackground:!0});const{key:n,value:r,context:o}=e.data;return n?o&&o!==this.clientId?(this.logger.trace("Ignoring broadcast event from clientId: ".concat(o)),void t.end({success:!1,errorCode:"contextMismatch"})):(r?(this.memoryStorage.setItem(n,r),this.logger.verbose("Updated item in internal cache")):(this.memoryStorage.removeItem(n),this.logger.verbose("Removed item from internal cache")),void t.end({success:!0})):(this.logger.error("Broadcast event missing key"),void t.end({success:!1,errorCode:"noKey"}))}}class GS{constructor(){if(!window.sessionStorage)throw hp(sp)}async initialize(){}getItem(e){return window.sessionStorage.getItem(e)}getUserData(e){return this.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}async setUserData(e,t){this.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}decryptData(){return Promise.resolve(null)}}function VS(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class QS extends ry{constructor(e,t,n,r,o,i,a){super(e,n,r,o,a),this.cacheConfig=t,this.logger=r,this.internalStorage=new Vk,this.browserStorage=YS(e,t.cacheLocation,r,o),this.temporaryCacheStorage=YS(e,t.temporaryCacheLocation,r,o),this.cookieStorage=new zS,this.eventHandler=i}async initialize(e){this.performanceClient.addFields({cacheLocation:this.cacheConfig.cacheLocation,cacheRetentionDays:this.cacheConfig.cacheRetentionDays},e),await this.browserStorage.initialize(e),await this.migrateExistingCache(e),this.trackVersionChanges(e)}async migrateExistingCache(e){const t=HS(this.browserStorage,0),n=BS(this.clientId,this.browserStorage,0);this.performanceClient.addFields({oldAccountCount:t.length,oldAccessCount:n.accessToken.length,oldIdCount:n.idToken.length,oldRefreshCount:n.refreshToken.length},e);const r=HS(this.browserStorage,1),o=BS(this.clientId,this.browserStorage,1);this.performanceClient.addFields({currAccountCount:r.length,currAccessCount:o.accessToken.length,currIdCount:o.idToken.length,currRefreshCount:o.refreshToken.length},e),await Promise.all([this.updateV0ToCurrent(1,t,r,e),this.updateV0ToCurrent(1,n.idToken,o.idToken,e),this.updateV0ToCurrent(1,n.accessToken,o.accessToken,e),this.updateV0ToCurrent(1,n.refreshToken,o.refreshToken,e)]),t.length>0?this.browserStorage.setItem(Lk(0),JSON.stringify(t)):this.browserStorage.removeItem(Lk(0)),r.length>0?this.browserStorage.setItem(Lk(1),JSON.stringify(r)):this.browserStorage.removeItem(Lk(1)),this.setTokenKeys(n,e,0),this.setTokenKeys(o,e,1)}async updateV0ToCurrent(e,t,n,r){const o=[];for(const i of[...t]){const a=this.browserStorage.getItem(i),s=this.validateAndParseJson(a||"");if(!s){VS(t,i);continue}s.lastUpdatedAt||(s.lastUpdatedAt=Date.now().toString(),this.setItem(i,JSON.stringify(s),r));const c=jS(s)?await this.browserStorage.decryptData(i,s,r):s;let l;if(c&&(pS(c)||fS(c))&&(l=c.expiresOn),!c||cS(s.lastUpdatedAt,this.cacheConfig.cacheRetentionDays)||l&&sS(l,300))this.browserStorage.removeItem(i),VS(t,i),this.performanceClient.incrementFields({expiredCacheRemovedCount:1},r);else if(this.cacheConfig.cacheLocation!==Mp||jS(s)){const t="".concat(Ak,".").concat(e).concat("-").concat(i),a=this.browserStorage.getItem(t);if(!a){o.push(this.setUserData(t,JSON.stringify(c),r,s.lastUpdatedAt).then(()=>{n.push(t),this.performanceClient.incrementFields({upgradedCacheCount:1},r)}));continue}{const e=this.validateAndParseJson(a);if(Number(s.lastUpdatedAt)>Number(e.lastUpdatedAt)){o.push(this.setUserData(t,JSON.stringify(c),r,s.lastUpdatedAt).then(()=>{this.performanceClient.incrementFields({updatedCacheFromV0Count:1},r)}));continue}}}}return Promise.all(o)}trackVersionChanges(e){const t=this.browserStorage.getItem(Ok);t&&(this.logger.info("MSAL.js was last initialized by version: ".concat(t)),this.performanceClient.addFields({previousLibraryVersion:t},e)),t!==Ik&&this.setItem(Ok,Ik,e)}validateAndParseJson(e){if(!e)return null;try{const t=JSON.parse(e);return t&&"object"===typeof t?t:null}catch(t){return null}}setItem(e,t,n){let r=0,o=[];for(let a=0;a<=20;a++)try{this.browserStorage.setItem(e,t),a>0&&(a<=r?this.removeAccessTokenKeys(o.slice(0,a),n,0):(this.removeAccessTokenKeys(o.slice(0,r),n,0),this.removeAccessTokenKeys(o.slice(r,a),n)));break}catch(i){const s=ny(i);if(!(s.errorCode===Xg&&a<20))throw s;if(!o.length){const n=e===Fk(this.clientId,0)?JSON.parse(t).accessToken:this.getTokenKeys(0).accessToken,i=e===Fk(this.clientId)?JSON.parse(t).accessToken:this.getTokenKeys().accessToken;o=[...n,...i],r=n.length}if(o.length<=a)throw s;this.removeAccessToken(o[a],n,!1)}}async setUserData(e,t,n,r){let o=0,i=[];for(let s=0;s<=20;s++)try{await nS(this.browserStorage.setUserData.bind(this.browserStorage),Cv,this.logger,this.performanceClient)(e,t,n,r),s>0&&(s<=o?this.removeAccessTokenKeys(i.slice(0,s),n,0):(this.removeAccessTokenKeys(i.slice(0,o),n,0),this.removeAccessTokenKeys(i.slice(o,s),n)));break}catch(a){const e=ny(a);if(!(e.errorCode===Xg&&s<20))throw e;if(!i.length){const e=this.getTokenKeys(0).accessToken,t=this.getTokenKeys().accessToken;i=[...e,...t],o=e.length}if(i.length<=s)throw e;this.removeAccessToken(i[s],n,!1)}}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const n=this.browserStorage.getUserData(e);if(!n)return this.removeAccountKeyFromMap(e,t),null;const r=this.validateAndParseJson(n);return r&&DS.isAccountEntity(r)?ry.toObject(new DS,r):null}async setAccount(e,t){this.logger.trace("BrowserCacheManager.setAccount called");const n=this.generateAccountKey(e.getAccountInfo()),r=Date.now().toString();e.lastUpdatedAt=r,await this.setUserData(n,JSON.stringify(e),t,r);const o=this.addAccountKeyToMap(n,t);this.cacheConfig.cacheLocation===Mp&&o&&this.eventHandler.emitEvent(If,void 0,e.getAccountInfo())}getAccountKeys(){return HS(this.browserStorage)}addAccountKeyToMap(e,t){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii("BrowserCacheManager.addAccountKeyToMap called with key: ".concat(e));const n=this.getAccountKeys();return-1===n.indexOf(e)?(n.push(e),this.setItem(Lk(),JSON.stringify(n),t),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added"),!0):(this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map"),!1)}removeAccountKeyFromMap(e,t){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii("BrowserCacheManager.removeAccountKeyFromMap called with key: ".concat(e));const n=this.getAccountKeys(),r=n.indexOf(e);if(r>-1){if(n.splice(r,1),0===n.length)return void this.removeItem(Lk());this.setItem(Lk(),JSON.stringify(n),t),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,t){const n=this.getActiveAccount(t);(null===n||void 0===n?void 0:n.homeAccountId)===e.homeAccountId&&(null===n||void 0===n?void 0:n.environment)===e.environment&&this.setActiveAccount(null,t),super.removeAccount(e,t),this.removeAccountKeyFromMap(this.generateAccountKey(e),t),this.browserStorage.getKeys().forEach(t=>{t.includes(e.homeAccountId)&&t.includes(e.environment)&&this.browserStorage.removeItem(t)}),this.cacheConfig.cacheLocation===Mp&&this.eventHandler.emitEvent(Af,void 0,e)}removeIdToken(e,t){super.removeIdToken(e,t);const n=this.getTokenKeys(),r=n.idToken.indexOf(e);r>-1&&(this.logger.info("idToken removed from tokenKeys map"),n.idToken.splice(r,1),this.setTokenKeys(n,t))}removeAccessToken(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];super.removeAccessToken(e,t),n&&this.removeAccessTokenKeys([e],t)}removeAccessTokenKeys(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys(n);let o=0;if(e.forEach(e=>{const t=r.accessToken.indexOf(e);t>-1&&(r.accessToken.splice(t,1),o++)}),o>0)return this.logger.info("removed ".concat(o," accessToken keys from tokenKeys map")),void this.setTokenKeys(r,t,n)}removeRefreshToken(e,t){super.removeRefreshToken(e,t);const n=this.getTokenKeys(),r=n.refreshToken.indexOf(e);r>-1&&(this.logger.info("refreshToken removed from tokenKeys map"),n.refreshToken.splice(r,1),this.setTokenKeys(n,t))}getTokenKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return BS(this.clientId,this.browserStorage,e)}setTokenKeys(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(Fk(this.clientId,n),JSON.stringify(e),t):this.removeItem(Fk(this.clientId,n))}getIdTokenCredential(e,t){const n=this.browserStorage.getUserData(e);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,t),null;const r=this.validateAndParseJson(n);return r&&(o=r)&&hS(o)&&o.hasOwnProperty("realm")&&o.credentialType===Ih.ID_TOKEN?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null);var o}async setIdTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=this.generateCredentialKey(e),r=Date.now().toString();e.lastUpdatedAt=r,await this.setUserData(n,JSON.stringify(e),t,r);const o=this.getTokenKeys();-1===o.idToken.indexOf(n)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(n),this.setTokenKeys(o,t))}getAccessTokenCredential(e,t){const n=this.browserStorage.getUserData(e);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeAccessTokenKeys([e],t),null;const r=this.validateAndParseJson(n);return r&&pS(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}async setAccessTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=this.generateCredentialKey(e),r=Date.now().toString();e.lastUpdatedAt=r,await this.setUserData(n,JSON.stringify(e),t,r);const o=this.getTokenKeys(),i=o.accessToken.indexOf(n);-1!==i&&o.accessToken.splice(i,1),this.logger.trace("access token ".concat(-1===i?"added to":"updated in"," map")),o.accessToken.push(n),this.setTokenKeys(o,t)}getRefreshTokenCredential(e,t){const n=this.browserStorage.getUserData(e);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeRefreshToken(e,t),null;const r=this.validateAndParseJson(n);return r&&fS(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}async setRefreshTokenCredential(e,t){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=this.generateCredentialKey(e),r=Date.now().toString();e.lastUpdatedAt=r,await this.setUserData(n,JSON.stringify(e),t,r);const o=this.getTokenKeys();-1===o.refreshToken.indexOf(n)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(n),this.setTokenKeys(o,t))}getAppMetadata(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&(r=e,(o=n)&&0===r.indexOf(Ah)&&o.hasOwnProperty("clientId")&&o.hasOwnProperty("environment"))?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),n):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null);var r,o}setAppMetadata(e,t){this.logger.trace("BrowserCacheManager.setAppMetadata called");const n=function(e){let{environment:t,clientId:n}=e;return[Ah,t,n].join(Th).toLowerCase()}(e);this.setItem(n,JSON.stringify(e),t)}getServerTelemetry(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){const n=0===e.indexOf(Lh.CACHE_KEY);let r=!0;return t&&(r=t.hasOwnProperty("failedRequests")&&t.hasOwnProperty("errors")&&t.hasOwnProperty("cacheHits")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),n):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,t,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t),n)}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){return!!t&&0===e.indexOf(Rh)&&t.hasOwnProperty("aliases")&&t.hasOwnProperty("preferred_cache")&&t.hasOwnProperty("preferred_network")&&t.hasOwnProperty("canonical_authority")&&t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("aliasesFromNetwork")&&t.hasOwnProperty("endpointsFromNetwork")&&t.hasOwnProperty("expiresAt")&&t.hasOwnProperty("jwks_uri")}(e,n)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),n):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(e=>this.isAuthorityMetadata(e))}setWrapperMetadata(e,t){this.internalStorage.setItem(Kp,e),this.internalStorage.setItem(Gp,t)}getWrapperMetadata(){return[this.internalStorage.getItem(Kp)||Hd.EMPTY_STRING,this.internalStorage.getItem(Gp)||Hd.EMPTY_STRING]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(e){const t=this.generateCacheKey(oh),n=this.browserStorage.getItem(t);if(!n)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters found"),null;const r=this.validateAndParseJson(n);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,t){const n=this.generateCacheKey(oh);if(e){this.logger.verbose("setActiveAccount: Active account set");const r={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:oS().toString()};this.setItem(n,JSON.stringify(r),t)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n);this.eventHandler.emitEvent(xf)}getThrottlingCache(e){const t=this.browserStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const n=this.validateAndParseJson(t);return n&&function(e,t){let n=!1;e&&(n=0===e.indexOf(zh));let r=!0;return t&&(r=t.hasOwnProperty("throttleTime")),n&&r}(e,n)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),n):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,t,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t),n)}getTemporaryCache(e,t){const n=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const e=this.cookieStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),e}const r=this.temporaryCacheStorage.getItem(n);if(!r){if(this.cacheConfig.cacheLocation===Mp){const e=this.browserStorage.getItem(n);if(e)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),e}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),r}setTemporaryCache(e,t,n){const r=n?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(r,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(r,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){this.removeAllAccounts(e),this.removeAppMetadata(e),this.temporaryCacheStorage.getKeys().forEach(e=>{-1===e.indexOf(Ak)&&-1===e.indexOf(this.clientId)||this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{-1===e.indexOf(Ak)&&-1===e.indexOf(this.clientId)||this.browserStorage.removeItem(e)}),this.internalStorage.clear()}clearTokensAndKeysWithClaims(e){this.performanceClient.addQueueMeasurement(kv,e);const t=this.getTokenKeys();let n=0;t.accessToken.forEach(t=>{const r=this.getAccessTokenCredential(t,e);null!==r&&void 0!==r&&r.requestedClaimsHash&&t.includes(r.requestedClaimsHash.toLowerCase())&&(this.removeAccessToken(t,e),n++)}),n>0&&this.logger.warning("".concat(n," access tokens with claims in the cache keys have been removed from the cache."))}generateCacheKey(e){return Mg.startsWith(e,Ak)?e:"".concat(Ak,".").concat(this.clientId,".").concat(e)}generateCredentialKey(e){const t=e.credentialType===Ih.REFRESH_TOKEN&&e.familyId||e.clientId,n=e.tokenType&&e.tokenType.toLowerCase()!==Fh.BEARER.toLowerCase()?e.tokenType.toLowerCase():"";return["".concat(Ak,".").concat(1),e.homeAccountId,e.environment,e.credentialType,t,e.realm||"",e.target||"",e.requestedClaimsHash||"",n].join("-").toLowerCase()}generateAccountKey(e){const t=e.homeAccountId.split(".")[1];return["".concat(Ak,".").concat(1),e.homeAccountId,e.environment,t||e.tenantId||""].join("-").toLowerCase()}resetRequestCache(){this.logger.trace("BrowserCacheManager.resetRequestCache called"),this.removeTemporaryItem(this.generateCacheKey(Hp)),this.removeTemporaryItem(this.generateCacheKey(Bp)),this.removeTemporaryItem(this.generateCacheKey(Up)),this.removeTemporaryItem(this.generateCacheKey(zp)),this.removeTemporaryItem(this.generateCacheKey(Wp)),this.setInteractionInProgress(!1)}cacheAuthorizeRequest(e,t){this.logger.trace("BrowserCacheManager.cacheAuthorizeRequest called");const n=Ww(JSON.stringify(e));if(this.setTemporaryCache(Hp,n,!0),t){const e=Ww(t);this.setTemporaryCache(Bp,e,!0)}}getCachedRequest(){this.logger.trace("BrowserCacheManager.getCachedRequest called");const e=this.getTemporaryCache(Hp,!0);if(!e)throw Xb(kb);const t=this.getTemporaryCache(Bp,!0);let n,r="";try{n=JSON.parse(Gw(e)),t&&(r=Gw(t))}catch(o){throw this.logger.errorPii("Attempted to parse: ".concat(e)),this.logger.error("Parsing cached token request threw with error: ".concat(o)),Xb(Sb)}return[n,r]}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(Wp,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){var t;const n=null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId;return e?n===this.clientId:!!n}getInteractionInProgress(){const e="".concat(Ak,".").concat(jp),t=this.getTemporaryCache(e,!1);try{return t?JSON.parse(t):null}catch(n){return this.logger.error("Cannot parse interaction status. Removing temporary cache items and clearing url hash. Retrying interaction should fix the error"),this.removeTemporaryItem(e),this.resetRequestCache(),yk(window),null}}setInteractionInProgress(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fp;const r="".concat(Ak,".").concat(jp);if(e){if(this.getInteractionInProgress())throw Xb(cb);this.setTemporaryCache(r,JSON.stringify({clientId:this.clientId,type:n}),!1)}else e||(null===(t=this.getInteractionInProgress())||void 0===t?void 0:t.clientId)!==this.clientId||this.removeTemporaryItem(r)}async hydrateCache(e,t){var n,r,o;const i=lS(null===(n=e.account)||void 0===n?void 0:n.homeAccountId,null===(r=e.account)||void 0===r?void 0:r.environment,e.idToken,this.clientId,e.tenantId);let a;t.claims&&(a=await this.cryptoImpl.hashString(t.claims));const s={idToken:i,accessToken:uS(null===(o=e.account)||void 0===o?void 0:o.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?iS(e.expiresOn):0,e.extExpiresOn?iS(e.extExpiresOn):0,Gw,void 0,e.tokenType,void 0,t.sshKid,t.claims,a)};return this.saveCacheRecord(s,e.correlationId)}async saveCacheRecord(e,t,n){try{await super.saveCacheRecord(e,t,n)}catch(r){if(r instanceof ty&&this.performanceClient&&t)try{const e=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:e.refreshToken.length,cacheIdCount:e.idToken.length,cacheAtCount:e.accessToken.length},t)}catch(r){}throw r}}}function YS(e,t,n,r){try{switch(t){case Mp:return new KS(e,n,r);case Op:return new GS}}catch(o){n.error(o)}return new Vk}class JS{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Sf({}),"undefined"!==typeof BroadcastChannel&&(this.broadcastChannel=new BroadcastChannel("msal.broadcast.event")),this.invokeCrossTabCallbacks=this.invokeCrossTabCallbacks.bind(this)}addEventCallback(e,t,n){if("undefined"!==typeof window){const r=n||sk();return this.eventCallbacks.has(r)?(this.logger.error("Event callback with id: ".concat(r," is already registered. Please provide a unique id or remove the existing callback and try again.")),null):(this.eventCallbacks.set(r,[e,t||[]]),this.logger.verbose("Event callback registered with id: ".concat(r)),r)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose("Event callback ".concat(e," removed."))}emitEvent(e,t,n,r){var o;const i={eventType:e,interactionType:t||null,payload:n||null,error:r||null,timestamp:Date.now()};switch(e){case If:case Af:case xf:null===(o=this.broadcastChannel)||void 0===o||o.postMessage(i);break;default:this.invokeCallbacks(i)}}invokeCallbacks(e){this.eventCallbacks.forEach((t,n)=>{let[r,o]=t;(0===o.length||o.includes(e.eventType))&&(this.logger.verbose("Emitting event to callback ".concat(n,": ").concat(e.eventType)),r.apply(null,[e]))})}invokeCrossTabCallbacks(e){const t=e.data;this.invokeCallbacks(t)}subscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.addEventListener("message",this.invokeCrossTabCallbacks)}unsubscribeCrossTab(){var e;null===(e=this.broadcastChannel)||void 0===e||e.removeEventListener("message",this.invokeCrossTabCallbacks)}}const $S="home_account_id",XS="UPN";async function ZS(e,t,n,r,o,i,a){null===a||void 0===a||a.addQueueMeasurement(av,i);const s=bS.transformCIAMAuthority(wS(e)),c=new bS(s,t,n,r,o,i,a);try{return await nS(c.resolveEndpointsAsync.bind(c),sv,o,a,i)(),c}catch(l){throw ng(fm)}}class e_ extends ip{constructor(e,t,n,r,o){super(e,t,n),this.name="ServerError",this.errorNo=r,this.status=o,Object.setPrototypeOf(this,e_.prototype)}}class t_{static generateThrottlingStorageKey(e){return"".concat(zh,".").concat(JSON.stringify(e))}static preProcess(e,t,n){const r=t_.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){var i;if(o.throttleTime<Date.now())return void e.removeItem(r,n);throw new e_((null===(i=o.errorCodes)||void 0===i?void 0:i.join(" "))||Hd.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,n,r){if(t_.checkResponseStatus(n)||t_.checkResponseForRetryAfter(n)){const o={throttleTime:t_.calculateThrottleTime(parseInt(n.headers[eh])),error:n.body.error,errorCodes:n.body.error_codes,errorMessage:n.body.error_description,subError:n.body.suberror};e.setThrottlingCache(t_.generateThrottlingStorageKey(t),o,r)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&(e.headers.hasOwnProperty(eh)&&(e.status<200||e.status>=300))}static calculateThrottleTime(e){const t=e<=0?0:e,n=Date.now()/1e3;return Math.floor(1e3*Math.min(n+(t||qh),n+Uh))}static removeThrottle(e,t,n,r){const o=LS(t,n,r),i=this.generateThrottlingStorageKey(o);e.removeItem(i,n.correlationId)}}class n_{constructor(e,t){this.config=function(e){let{authOptions:t,systemOptions:n,loggerOptions:r,cacheOptions:o,storageInterface:i,networkInterface:a,cryptoInterface:c,clientCredentials:l,libraryInfo:u,telemetry:d,serverTelemetryManager:h,persistencePlugin:p,serializableCache:f}=e;const m=s(s({},jv),r);return{authOptions:(g=t,s({clientCapabilities:[],azureCloudOptions:Qv,skipAuthorityMetadataCache:!1,instanceAware:!1,encodeExtraQueryParams:!1},g)),systemOptions:s(s({},Bv),n),loggerOptions:m,cacheOptions:s(s({},Wv),o),storageInterface:i||new oy(t.clientId,rg,new Sf(m),new Hv),networkInterface:a||Kv,cryptoInterface:c||rg,clientCredentials:l||Vv,libraryInfo:s(s({},Gv),u),telemetry:s(s({},Yv),d),serverTelemetryManager:h||null,persistencePlugin:p||null,serializableCache:f||null};var g}(e),this.logger=new Sf(this.config.loggerOptions,og,ig),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Xd]=Hd.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case $S:try{const n=OS(e.credential);t[th]="Oid:".concat(n.uid,"@").concat(n.utid)}catch(n){this.logger.verbose("Could not parse home account ID for CCS Header: "+n)}break;case XS:t[th]="UPN: ".concat(e.credential)}return t}async executePostToTokenEndpoint(e,t,n,r,o,i){var a;i&&(null===(a=this.performanceClient)||void 0===a||a.addQueueMeasurement(i,o));const s=await this.sendPostRequest(r,e,{body:t,headers:n},o);return this.config.serverTelemetryManager&&s.status<500&&429!==s.status&&this.config.serverTelemetryManager.clearTelemetryCache(),s}async sendPostRequest(e,t,n,r){let o;t_.preProcess(this.cacheManager,e,r);try{var i,a;o=await nS(this.networkClient.sendPostRequestAsync.bind(this.networkClient),ky,this.logger,this.performanceClient,r)(t,n);const e=o.headers||{};null===(i=this.performanceClient)||void 0===i||i.addFields({refreshTokenSize:(null===(a=o.body.refresh_token)||void 0===a?void 0:a.length)||0,httpVerToken:e[rh]||"",requestId:e[nh]||""},r)}catch(c){if(c instanceof ew){const e=c.responseHeaders;var s;if(e)null===(s=this.performanceClient)||void 0===s||s.addFields({httpVerToken:e[rh]||"",requestId:e[nh]||"",contentTypeHeader:e[Xd]||void 0,contentLengthHeader:e[Zd]||void 0,httpStatus:c.httpStatus},r);throw c.error}throw c instanceof ip?c:ng(mm)}return t_.postProcess(this.cacheManager,e,o,r),o}async updateAuthority(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Xy,t);const r="https://".concat(e,"/").concat(this.authority.tenant,"/"),o=await ZS(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new Map;return e.embeddedClientId&&Hw(t,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenQueryParameters&&Dw(t,e.tokenQueryParameters),Cw(t,e.correlationId),fw(t,e.correlationId,this.performanceClient),Wg(t)}}class r_{static setRequestState(e,t,n){const r=r_.generateLibraryState(e,n);return t?"".concat(r).concat(Hd.RESOURCE_DELIM).concat(t):r}static generateLibraryState(e,t){if(!e)throw ng(qm);const n={id:e.createNewGuid()};t&&(n.meta=t);const r=JSON.stringify(n);return e.base64Encode(r)}static parseRequestState(e,t){if(!e)throw ng(qm);if(!t)throw ng(vm);try{const n=t.split(Hd.RESOURCE_DELIM),r=n[0],o=n.length>1?n.slice(1).join(Hd.RESOURCE_DELIM):Hd.EMPTY_STRING,i=e.base64Decode(r),a=JSON.parse(i);return{userRequestState:o||Hd.EMPTY_STRING,libraryState:a}}catch(n){throw ng(vm)}}}const o_="sw";class i_{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(nv,e.correlationId);const r=await nS(this.generateKid.bind(this),nv,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(rv,e.correlationId);return{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:o_}}async signPopToken(e,t,n){return this.signPayload(e,t,n)}async signPayload(e,t,n,r){const{resourceRequestMethod:o,resourceRequestUri:i,shrClaims:a,shrNonce:c,shrOptions:l}=n,u=i?new Gg(i):void 0,d=null===u||void 0===u?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt(s({at:e,ts:oS(),m:null===o||void 0===o?void 0:o.toUpperCase(),u:null===d||void 0===d?void 0:d.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:null===d||void 0===d?void 0:d.AbsolutePath,q:null!==d&&void 0!==d&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0},r),t,l,n.correlationId)}}class a_{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class s_{constructor(e,t,n,r,o,i,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=n,this.logger=r,this.serializableCache=o,this.persistencePlugin=i,this.performanceClient=a}validateTokenResponse(e,t){if(e.error||e.error_description||e.suberror){var n;const r="Error(s): ".concat(e.error_codes||Hd.NOT_AVAILABLE," - Timestamp: ").concat(e.timestamp||Hd.NOT_AVAILABLE," - Description: ").concat(e.error_description||Hd.NOT_AVAILABLE," - Correlation ID: ").concat(e.correlation_id||Hd.NOT_AVAILABLE," - Trace ID: ").concat(e.trace_id||Hd.NOT_AVAILABLE),o=null!==(n=e.error_codes)&&void 0!==n&&n.length?e.error_codes[0]:void 0,i=new e_(e.error,r,e.suberror,o,e.status);if(t&&e.status&&e.status>=Gd&&e.status<=Vd)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n".concat(i));if(t&&e.status&&e.status>=jd&&e.status<=Kd)return void this.logger.warning("executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n".concat(i));if(RS(e.error,e.error_description,e.suberror))throw new xS(e.error,e.error_description,e.suberror,e.timestamp||Hd.EMPTY_STRING,e.trace_id||Hd.EMPTY_STRING,e.correlation_id||Hd.EMPTY_STRING,e.claims||Hd.EMPTY_STRING,o);throw i}}async handleServerTokenResponse(e,t,n,r,o,i,a,s,c){var l;let u,d;if(null===(l=this.performanceClient)||void 0===l||l.addQueueMeasurement(ov,e.correlation_id),e.id_token){if(u=Ug(e.id_token||Hd.EMPTY_STRING,this.cryptoObj.base64Decode),o&&o.nonce&&u.nonce!==o.nonce)throw ng(km);if(r.maxAge||0===r.maxAge){const e=u.auth_time;if(!e)throw ng(Sm);zg(e,r.maxAge)}}this.homeAccountIdentifier=DS.generateHomeAccountId(e.client_info||Hd.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u),o&&o.state&&(d=r_.parseRequestState(this.cryptoObj,o.state)),e.key_id=e.key_id||r.sshKid||void 0;const h=this.generateCacheRecord(e,t,n,r,u,i,o);let p;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new a_(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(p)),a&&!s&&h.account){const e=this.cacheStorage.generateAccountKey(h.account.getAccountInfo());if(!this.cacheStorage.getAccount(e,r.correlationId))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await s_.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,r.correlationId,r.storeInCache)}finally{this.persistencePlugin&&this.serializableCache&&p&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(p))}return s_.generateAuthenticationResult(this.cryptoObj,t,h,!1,r,u,d,e,c)}generateCacheRecord(e,t,n,r,o,i,a){const s=t.getPreferredCache();if(!s)throw ng(Lm);const c=NS(o);let l,u;e.id_token&&o&&(l=lS(this.homeAccountIdentifier,s,e.id_token,this.clientId,c||""),u=c_(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,r.correlationId,o,e.client_info,s,c,a,void 0,this.logger));let d=null;if(e.access_token){const o=e.scope?Og.fromString(e.scope):new Og(r.scopes||[]),a=("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,l=("string"===typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,u=("string"===typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,h=n+a,p=h+l,f=u&&u>0?n+u:void 0;d=uS(this.homeAccountIdentifier,s,e.access_token,this.clientId,c||t.tenant||"",o.printScopes(),h,p,this.cryptoObj.base64Decode,f,e.token_type,i,e.key_id,r.claims,r.requestedClaimsHash)}let h=null;if(e.refresh_token){let t;if(e.refresh_token_expires_in){t=n+("string"===typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)}h=dS(this.homeAccountIdentifier,s,e.refresh_token,this.clientId,e.foci,i,t)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:s,familyId:e.foci}),{account:u,idToken:l,accessToken:d,refreshToken:h,appMetadata:p}}static async generateAuthenticationResult(e,t,n,r,o,i,a,s,c){var l,u,d,h,p;let f,m,g=Hd.EMPTY_STRING,y=[],v=null,b=Hd.EMPTY_STRING;if(n.accessToken){if(n.accessToken.tokenType!==Fh.POP||o.popKid)g=n.accessToken.secret;else{const t=new i_(e),{secret:r,keyId:i}=n.accessToken;if(!i)throw ng(Qm);g=await t.signPopToken(r,i,o)}y=Og.fromString(n.accessToken.target).asArray(),v=aS(n.accessToken.expiresOn),f=aS(n.accessToken.extendedExpiresOn),n.accessToken.refreshOn&&(m=aS(n.accessToken.refreshOn))}n.appMetadata&&(b=n.appMetadata.familyId===xh?xh:"");const w=(null===i||void 0===i?void 0:i.oid)||(null===i||void 0===i?void 0:i.sub)||"",k=(null===i||void 0===i?void 0:i.tid)||"";null!==s&&void 0!==s&&s.spa_accountid&&n.account&&(n.account.nativeAccountId=null===s||void 0===s?void 0:s.spa_accountid);const S=n.account?qg(n.account.getAccountInfo(),void 0,i,null===(l=n.idToken)||void 0===l?void 0:l.secret):null;return{authority:t.canonicalAuthority,uniqueId:w,tenantId:k,scopes:y,account:S,idToken:(null===n||void 0===n||null===(u=n.idToken)||void 0===u?void 0:u.secret)||"",idTokenClaims:i||{},accessToken:g,fromCache:r,expiresOn:v,extExpiresOn:f,refreshOn:m,correlationId:o.correlationId,requestId:c||Hd.EMPTY_STRING,familyId:b,tokenType:(null===(d=n.accessToken)||void 0===d?void 0:d.tokenType)||Hd.EMPTY_STRING,state:a?a.userRequestState:Hd.EMPTY_STRING,cloudGraphHostName:(null===(h=n.account)||void 0===h?void 0:h.cloudGraphHostName)||Hd.EMPTY_STRING,msGraphHost:(null===(p=n.account)||void 0===p?void 0:p.msGraphHost)||Hd.EMPTY_STRING,code:null===s||void 0===s?void 0:s.spa_code,fromNativeBroker:!1}}}function c_(e,t,n,r,o,i,a,s,c,l,u,d){null===d||void 0===d||d.verbose("setCachedAccount called");const h=e.getAccountKeys().find(e=>e.startsWith(n));let p=null;h&&(p=e.getAccount(h,o));const f=p||DS.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:a,environment:s,cloudGraphHostName:null===l||void 0===l?void 0:l.cloud_graph_host_name,msGraphHost:null===l||void 0===l?void 0:l.msgraph_host,nativeAccountId:u},t,r),m=f.tenantProfiles||[],g=c||f.realm;if(g&&!m.find(e=>e.tenantId===g)){const e=Fg(n,f.localAccountId,g,i);m.push(e)}return f.tenantProfiles=m,f}async function l_(e,t,n){if("string"===typeof e)return e;return e({clientId:t,tokenEndpoint:n})}class u_ extends n_{constructor(e,t){var n;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=null===(n=this.config.authOptions.authority.options.OIDCOptions)||void 0===n?void 0:n.defaultScopes}async acquireToken(e,t){var n,r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Zy,e.correlationId),!e.code)throw ng(Im);const o=oS(),i=await nS(this.executeTokenRequest.bind(this),ev,this.logger,this.performanceClient,e.correlationId)(this.authority,e),a=null===(r=i.headers)||void 0===r?void 0:r[nh],s=new s_(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(i.body),nS(s.handleServerTokenResponse.bind(s),ov,this.logger,this.performanceClient,e.correlationId)(i.body,this.authority,o,e,t,void 0,void 0,void 0,a)}getLogoutUri(e){if(!e)throw Pg(fg);const t=this.createLogoutUrlQueryString(e);return Gg.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(ev,t.correlationId);const r=this.createTokenQueryParameters(t),o=Gg.appendQueryString(e.tokenEndpoint,r),i=await nS(this.createTokenRequestBody.bind(this),tv,this.logger,this.performanceClient,t.correlationId)(t);let a;if(t.clientInfo)try{const e=MS(t.clientInfo,this.cryptoUtils.base64Decode);a={credential:"".concat(e.uid).concat(Eh).concat(e.utid),type:$S}}catch(l){this.logger.verbose("Could not parse client info for CCS Header: "+l)}const s=this.createTokenRequestHeaders(a||t.ccsCredential),c=LS(this.config.authOptions.clientId,t);return nS(this.executePostToTokenEndpoint.bind(this),_y,this.logger,this.performanceClient,t.correlationId)(o,i,s,c,t.correlationId,_y)}async createTokenRequestBody(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(tv,e.correlationId);const r=new Map;if(yw(r,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[iw])||this.config.authOptions.clientId),this.includeRedirectUri)vw(r,e.redirectUri);else if(!e.redirectUri)throw Pg(ag);if(gw(r,e.scopes,!0,this.oidcDefaultScopes),function(e,t){e.set("code",t)}(r,e.code),Tw(r,this.config.libraryInfo),Ew(r,this.config.telemetry.application),zw(r),this.serverTelemetryManager&&!Jv(this.config)&&Uw(r,this.serverTelemetryManager),e.codeVerifier&&function(e,t){e.set("code_verifier",t)}(r,e.codeVerifier),this.config.clientCredentials.clientSecret&&xw(r,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;Rw(r,await l_(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Pw(r,t.assertionType)}if(Mw(r,wh),Ow(r),e.authenticationScheme===Fh.POP){const t=new i_(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await nS(t.generateCnf.bind(t),nv,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}Fw(r,n)}else if(e.authenticationScheme===Fh.SSH){if(!e.sshJwk)throw Pg(wg);qw(r,e.sshJwk)}let o;if((!Mg.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&_w(r,e.claims,this.config.authOptions.clientCapabilities),e.clientInfo)try{const t=MS(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:"".concat(t.uid).concat(Eh).concat(t.utid),type:$S}}catch(i){this.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case $S:try{kw(r,OS(o.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case XS:ww(r,o.credential)}return e.embeddedClientId&&Hw(r,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Dw(r,e.tokenBodyParameters),!e.enableSpaAuthorizationCode||e.tokenBodyParameters&&e.tokenBodyParameters[lw]||Dw(r,{[lw]:"1"}),fw(r,e.correlationId,this.performanceClient),Wg(r)}createLogoutUrlQueryString(e){const t=new Map;return e.postLogoutRedirectUri&&function(e,t){e.set("post_logout_redirect_uri",t)}(t,e.postLogoutRedirectUri),e.correlationId&&Cw(t,e.correlationId),e.idTokenHint&&function(e,t){e.set("id_token_hint",t)}(t,e.idTokenHint),e.state&&Iw(t,e.state),e.logoutHint&&function(e,t){e.set("logout_hint",t)}(t,e.logoutHint),e.extraQueryParameters&&Dw(t,e.extraQueryParameters),this.config.authOptions.instanceAware&&Nw(t),Wg(t,this.config.authOptions.encodeExtraQueryParams,e.extraQueryParameters)}}function d_(e){const{skus:t,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=e,a=new Map([[0,[n,r]],[2,[o,i]]]);let s=[];if(null!==t&&void 0!==t&&t.length){if(s=t.split(","),s.length<4)return t}else s=Array.from({length:4},()=>"|");return a.forEach((e,t)=>{var n,r;2===e.length&&null!==(n=e[0])&&void 0!==n&&n.length&&null!==(r=e[1])&&void 0!==r&&r.length&&function(e){const{skuArr:t,index:n,skuName:r,skuVersion:o}=e;if(n>=t.length)return;t[n]=[r,o].join("|")}({skuArr:s,index:t,skuName:e[0],skuVersion:e[1]})}),s.join(",")}class h_{constructor(e,t){this.cacheOutcome=Jh,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||Hd.EMPTY_STRING,this.wrapperVer=e.wrapperVer||Hd.EMPTY_STRING,this.telemetryCacheKey=Lh.CACHE_KEY+Th+e.clientId}generateCurrentRequestHeaderValue(){const e="".concat(this.apiId).concat(Lh.VALUE_SEPARATOR).concat(this.cacheOutcome),t=[this.wrapperSKU,this.wrapperVer],n=this.getNativeBrokerErrorCode();null!==n&&void 0!==n&&n.length&&t.push("broker_error=".concat(n));const r=t.join(Lh.VALUE_SEPARATOR),o=[e,this.getRegionDiscoveryFields()].join(Lh.VALUE_SEPARATOR);return[Lh.SCHEMA_VERSION,o,r].join(Lh.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=h_.maxErrorsToSend(e),n=e.failedRequests.slice(0,2*t).join(Lh.VALUE_SEPARATOR),r=e.errors.slice(0,t).join(Lh.VALUE_SEPARATOR),o=e.errors.length,i=[o,t<o?Lh.OVERFLOW_TRUE:Lh.OVERFLOW_FALSE].join(Lh.VALUE_SEPARATOR);return[Lh.SCHEMA_VERSION,e.cacheHits,n,r,i].join(Lh.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=Lh.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof ip?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(Lh.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),t=h_.maxErrorsToSend(e);if(t===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const n={failedRequests:e.failedRequests.slice(2*t),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}}static maxErrorsToSend(e){let t,n=0,r=0;const o=e.errors.length;for(t=0;t<o;t++){const o=e.failedRequests[2*t]||Hd.EMPTY_STRING,i=e.failedRequests[2*t+1]||Hd.EMPTY_STRING,a=e.errors[t]||Hd.EMPTY_STRING;if(r+=o.toString().length+i.toString().length+a.length+3,!(r<Lh.MAX_LAST_HEADER_BYTES))break;n+=1}return n}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||Hd.EMPTY_STRING),e.push(this.regionSource||Hd.EMPTY_STRING),e.push(this.regionOutcome||Hd.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return d_(e)}}class p_{constructor(e,t,n,r,o,i,a,s,c){this.config=e,this.browserStorage=t,this.browserCrypto=n,this.networkClient=this.config.system.networkClient,this.eventHandler=o,this.navigationClient=i,this.platformAuthProvider=s,this.correlationId=c||sk(),this.logger=r.clone(bp,Ik,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e,t){if(t)try{this.browserStorage.removeAccount(t,e),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch(n){this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),this.browserStorage.clear(e),await this.browserCrypto.clearKeystore()}catch(r){this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return Gg.getAbsoluteUrl(t,bk())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const n={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new h_(n,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,n=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(by,this.correlationId);const r={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},o=e.requestAuthority||this.config.auth.authority,i=null!==n&&void 0!==n&&n.length?"true"===n:this.config.auth.instanceAware,a=t&&i?this.config.auth.authority.replace(Gg.getDomainFromUrl(o),t.environment):o,s=bS.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await nS(ZS,av,this.logger,this.performanceClient,this.correlationId)(s,this.config.system.networkClient,this.browserStorage,r,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw Pg(Eg);return c}}async function f_(e,t,n,r){n.addQueueMeasurement(Oy,e.correlationId);const o=e.authority||t.auth.authority,i=[...e&&e.scopes||[]],a=s(s({},e),{},{correlationId:e.correlationId,authority:o,scopes:i});if(a.authenticationScheme){if(a.authenticationScheme===Fh.SSH){if(!e.sshJwk)throw Pg(wg);if(!e.sshKid)throw Pg(kg)}r.verbose('Authentication Scheme set to "'.concat(a.authenticationScheme,'" as configured in Auth request'))}else a.authenticationScheme=Fh.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return t.cache.claimsBasedCachingEnabled&&e.claims&&!Mg.isEmptyObj(e.claims)&&(a.requestedClaimsHash=await gk(e.claims)),a}async function m_(e,t,n,r,o){r.addQueueMeasurement(Ny,e.correlationId);const i=await nS(f_,Oy,o,r,e.correlationId)(e,n,r,o);return s(s(s({},e),i),{},{account:t,forceRefresh:e.forceRefresh||!1})}function g_(e,t){let n;const r=e.httpMethod;if(t===cm){if(n=r||Yd,n!==Yd)throw Pg(Ig)}else n=r||Qd;if(e.authorizePostBodyParameters&&n!==Yd)throw Pg(Ag);return n}class y_ extends p_{initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",null===e||void 0===e?void 0:e.correlationId);const t=s({correlationId:this.correlationId||sk()},e);if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const n=this.getLogoutHintFromIdTokenClaims(e.account);n&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=n)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=Gg.getAbsoluteUrl(e.postLogoutRedirectUri,bk())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=Gg.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,bk())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=Gg.getAbsoluteUrl(bk(),bk())),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(By,this.correlationId);const t=await nS(this.getClientConfiguration.bind(this),jy,this.logger,this.performanceClient,this.correlationId)(e);return new u_(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}=e;this.performanceClient.addQueueMeasurement(jy,this.correlationId);const a=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,this.correlationId)({requestAuthority:n,requestAzureCloudOptions:r,requestExtraQueryParameters:o,account:i}),s=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:s.loggerCallback,piiLoggingEnabled:s.piiLoggingEnabled,logLevel:s.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:bp,version:Ik,cpu:Hd.EMPTY_STRING,os:Hd.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(Wy,this.correlationId);const n=this.getRedirectUri(e.redirectUri),r={interactionType:t},o=r_.setRequestState(this.browserCrypto,e&&e.state||Hd.EMPTY_STRING,r),i=await nS(f_,Oy,this.logger,this.performanceClient,this.correlationId)(s(s({},e),{},{correlationId:this.correlationId}),this.config,this.performanceClient,this.logger),a=s(s({},i),{},{redirectUri:n,state:o,nonce:e.nonce||sk(),responseMode:this.config.auth.OIDCOptions.serverResponseType}),c=s(s({},a),{},{httpMethod:g_(a,this.config.auth.protocolMode)});if(e.loginHint||e.sid)return c;const l=e.account||this.browserStorage.getActiveAccount(this.correlationId);return l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii("Setting validated request account: ".concat(l.homeAccountId),this.correlationId),c.account=l),c}}function v_(e,t,n){const r=jg(e);if(!r)throw Bg(e)?(n.error("A ".concat(t," is present in the iframe but it does not contain known properties. It's likely that the ").concat(t," has been replaced by code running on the redirectUri page.")),n.errorPii("The ".concat(t," detected is: ").concat(e)),Xb(ib)):(n.error("The request has returned to the redirectUri but a ".concat(t," is not present. It's likely that the ").concat(t," has been removed or the page has been redirected by code running on the redirectUri page.")),Xb(rb));return r}function b_(e,t,n){if(!e.state)throw Xb(ob);const r=function(e,t){if(!t)return null;try{return r_.parseRequestState(e,t).libraryState.meta}catch(n){throw ng(vm)}}(t,e.state);if(!r)throw Xb(ab);if(r.interactionType!==n)throw Xb(sb)}function w_(e,t,n,r){var o,i;const a=t.correlationId,s=new Map;yw(s,t.embeddedClientId||(null===(o=t.extraQueryParameters)||void 0===o?void 0:o[iw])||e.clientId);if(gw(s,[...t.scopes||[],...t.extraScopesToConsent||[]],!0,null===(i=e.authority.options.OIDCOptions)||void 0===i?void 0:i.defaultScopes),vw(s,t.redirectUri),Cw(s,a),function(e,t){e.set("response_mode",t||bh)}(s,t.responseMode),Ow(s),t.prompt&&(!function(e,t){e.set("prompt",t)}(s,t.prompt),null===r||void 0===r||r.addFields({prompt:t.prompt},a)),t.domainHint&&(!function(e,t){e.set("domain_hint",t)}(s,t.domainHint),null===r||void 0===r||r.addFields({domainHintFromRequest:!0},a)),t.prompt!==dh)if(t.sid&&t.prompt===ph)n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),Sw(s,t.sid),null===r||void 0===r||r.addFields({sidFromRequest:!0},a);else if(t.account){const e=function(e){var t;return(null===(t=e.idTokenClaims)||void 0===t?void 0:t.sid)||null}(t.account);let o=function(e){var t;return e.loginHint||(null===(t=e.idTokenClaims)||void 0===t?void 0:t.login_hint)||null}(t.account);if(o&&t.domainHint&&(n.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),o=null),o){n.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),bw(s,o),null===r||void 0===r||r.addFields({loginHintFromClaim:!0},a);try{kw(s,OS(t.account.homeAccountId))}catch(c){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e&&t.prompt===ph){n.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),Sw(s,e),null===r||void 0===r||r.addFields({sidFromClaim:!0},a);try{kw(s,OS(t.account.homeAccountId))}catch(c){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(t.loginHint)n.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),bw(s,t.loginHint),ww(s,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},a);else if(t.account.username){n.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),bw(s,t.account.username),null===r||void 0===r||r.addFields({loginHintFromUpn:!0},a);try{kw(s,OS(t.account.homeAccountId))}catch(c){n.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else t.loginHint&&(n.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),bw(s,t.loginHint),ww(s,t.loginHint),null===r||void 0===r||r.addFields({loginHintFromRequest:!0},a));else n.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");return t.nonce&&function(e,t){e.set("nonce",t)}(s,t.nonce),t.state&&Iw(s,t.state),(t.claims||e.clientCapabilities&&e.clientCapabilities.length>0)&&_w(s,t.claims,e.clientCapabilities),t.embeddedClientId&&Hw(s,e.clientId,e.redirectUri),!e.instanceAware||t.extraQueryParameters&&Object.keys(t.extraQueryParameters).includes(pw)||Nw(s),s}function k_(e,t,n,r){const o=Wg(t,n,r);return Gg.appendQueryString(e.authorizationEndpoint,o)}function S_(e,t){if(!e.state||!t)throw e.state?ng(wm,"Cached State"):ng(wm,"Server State");let n,r;try{n=decodeURIComponent(e.state)}catch(o){throw ng(vm,e.state)}try{r=decodeURIComponent(t)}catch(o){throw ng(vm,e.state)}if(n!==r)throw ng(bm);if(e.error||e.error_description||e.suberror){const t=function(e){var t,n;const r="code=",o=null===(t=e.error_uri)||void 0===t?void 0:t.lastIndexOf(r);return o&&o>=0?null===(n=e.error_uri)||void 0===n?void 0:n.substring(o+r.length):void 0}(e);if(RS(e.error,e.error_description,e.suberror))throw new xS(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",t);throw new e_(e.error||"",e.error_description,e.suberror,t)}}class __{constructor(e,t,n,r,o){this.authModule=e,this.browserStorage=t,this.authCodeRequest=n,this.logger=r,this.performanceClient=o}async handleCodeResponse(e,t){let n;this.performanceClient.addQueueMeasurement(Qy,t.correlationId);try{n=function(e,t){if(S_(e,t),!e.code)throw ng(Km);return e}(e,t.state)}catch(r){throw r instanceof e_&&r.subError===db?Xb(db):r}return nS(this.handleCodeResponseFromServer.bind(this),Vy,this.logger,this.performanceClient,t.correlationId)(n,t)}async handleCodeResponseFromServer(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.performanceClient.addQueueMeasurement(Vy,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await nS(this.authModule.updateAuthority.bind(this.authModule),Xy,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),n&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const e=this.createCcsCredentials(t);e&&(this.authCodeRequest.ccsCredential=e)}return await nS(this.authModule.acquireToken.bind(this.authModule),Zy,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:$S}:e.loginHint?{credential:e.loginHint,type:XS}:null}}const C_="user_switch",T_={[C_]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class E_ extends ip{constructor(e,t,n){super(e,t),Object.setPrototypeOf(this,E_.prototype),this.name="NativeAuthError",this.ext=n}}function I_(e){if(e.ext&&e.ext.status&&"DISABLED"===e.ext.status)return!0;if(e.ext&&e.ext.error&&-2147186943===e.ext.error)return!0;switch(e.errorCode){case"ContentError":case"PageException":return!0;default:return!1}}function A_(e,t,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return PS(SS);case"USER_INTERACTION_REQUIRED":return new xS(e,t);case"USER_CANCEL":return Xb(db);case"NO_NETWORK":return Xb(Ib);case"UX_NOT_ALLOWED":return PS(CS)}return new E_(e,T_[e]||t,n)}class x_ extends n_{constructor(e,t){super(e,t)}async acquireCachedToken(e){var t;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ry,e.correlationId);let n=Jh;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!Mg.isEmptyObj(e.claims))throw this.setCacheOutcome($h,e.correlationId),ng(Bm);if(!e.account)throw ng(Nm);const r=e.account.tenantId||function(e){var t;const n=null===(t=new Gg(e).getUrlComponents().PathSegments.slice(-1)[0])||void 0===t?void 0:t.toLowerCase();switch(n){case ih:case ah:case sh:return;default:return n}}(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r);if(!i)throw this.setCacheOutcome(Xh,e.correlationId),ng(Bm);if(a=i.cachedAt,Number(a)>oS()||sS(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Zh,e.correlationId),ng(Bm);var a;i.refreshOn&&sS(i.refreshOn,0)&&(n=ep);const s=e.authority||this.authority.getPreferredCache(),c={account:this.cacheManager.getAccount(this.cacheManager.generateAccountKey(e.account),e.correlationId),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,e.correlationId,o,r,this.performanceClient),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await nS(this.generateResultFromCacheRecord.bind(this),Py,this.logger,this.performanceClient,e.correlationId)(c,e),n]}setCacheOutcome(e,t){var n,r;null===(n=this.serverTelemetryManager)||void 0===n||n.setCacheOutcome(e),null===(r=this.performanceClient)||void 0===r||r.addFields({cacheOutcome:e},t),e!==Jh&&this.logger.info("Token refresh is required due to cache outcome: ".concat(e))}async generateResultFromCacheRecord(e,t){var n;let r;if(null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Py,t.correlationId),e.idToken&&(r=Ug(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||0===t.maxAge){var o;const e=null===(o=r)||void 0===o?void 0:o.auth_time;if(!e)throw ng(Sm);zg(e,t.maxAge)}return s_.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}class R_ extends y_{async acquireToken(e){this.performanceClient.addQueueMeasurement(fy,e.correlationId);const t=this.initializeServerTelemetryManager(Xp),n=await nS(this.getClientConfiguration.bind(this),jy,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),r=new x_(n,this.performanceClient);this.logger.verbose("Silent auth client created");try{const t=(await nS(r.acquireCachedToken.bind(r),Ry,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),t}catch(o){throw o instanceof $b&&o.errorCode===Mb&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),o}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t.correlationId,null===t||void 0===t?void 0:t.account)}}const P_=["prompt"],M_=["scopes"];class O_ extends p_{constructor(e,t,n,r,o,i,a,s,c,l,u,d){super(e,t,n,r,o,i,s,c,d),this.apiId=a,this.accountId=l,this.platformAuthProvider=c,this.nativeStorageManager=u,this.silentCacheClient=new R_(e,this.nativeStorageManager,n,r,o,i,s,c,d);const h=this.platformAuthProvider.getExtensionName();this.skus=h_.makeExtraSkuString({libraryName:bp,libraryVersion:Ik,extensionName:h,extensionVersion:this.platformAuthProvider.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters=s(s({},e.extraParameters),{},{[uw]:this.skus})}async acquireToken(e,t){this.performanceClient.addQueueMeasurement(wy,this.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(wy,this.correlationId),r=oS(),o=this.initializeServerTelemetryManager(this.apiId);try{const a=await this.initializeNativeRequest(e);try{const e=await this.acquireTokensFromCache(this.accountId,a);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),e}catch(i){if(t===mf)throw this.logger.info("MSAL internal Cache does not contain tokens, return error as per cache policy"),n.end({success:!1,brokerErrorCode:"cache_request_failed"}),i;this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const s=await this.platformAuthProvider.sendMessage(a);return await this.handleNativeResponse(s,a,r).then(e=>(n.end({success:!0,isNativeBroker:!0,requestId:e.requestId}),o.clearNativeBrokerErrorCode(),e)).catch(e=>{throw n.end({success:!1,errorCode:e.errorCode,subErrorCode:e.subError}),e})}catch(i){throw i instanceof E_&&o.setNativeBrokerErrorCode(i.errorCode),n.end({success:!1}),i}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:Og.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),ng(Fm);const n=this.browserStorage.getBaseAccountInfo({nativeAccountId:e},this.correlationId);if(!n)throw ng(Fm);try{const e=this.createSilentCacheRequest(t,n),r=await this.silentCacheClient.acquireToken(e),o=s(s({},n),{},{idTokenClaims:null===r||void 0===r?void 0:r.idTokenClaims,idToken:null===r||void 0===r?void 0:r.idToken});return s(s({},r),{},{account:o})}catch(r){throw r}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const n=Object.assign({},(Ea(e),e));delete n.onRedirectNavigate;const r=await this.initializeNativeRequest(n);try{await this.platformAuthProvider.sendMessage(r)}catch(a){if(a instanceof E_){if(this.initializeServerTelemetryManager(this.apiId).setNativeBrokerErrorCode(a.errorCode),I_(a))throw a}}this.browserStorage.setTemporaryCache(Wp,JSON.stringify(r),!0);const o={apiId:Vp,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},i=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(i,o)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const n=this.browserStorage.getCachedNativeRequest();if(!n)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(null===e||void 0===e||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:r}=n,o=it(n,P_);r&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(Wp));const i=oS();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const t=await this.platformAuthProvider.sendMessage(o),n=await this.handleNativeResponse(t,o,i);return this.initializeServerTelemetryManager(this.apiId).clearNativeBrokerErrorCode(),e&&this.correlationId&&this.performanceClient.addFields({isNativeBroker:!0},this.correlationId),n}catch(a){throw a}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,n){var r,o;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=Ug(e.id_token,Gw),a=this.createHomeAccountIdentifier(e,i),s=null===(r=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId},this.correlationId))||void 0===r?void 0:r.homeAccountId;if(null!==(o=t.extraParameters)&&void 0!==o&&o.child_client_id&&e.account.id!==t.accountId)this.logger.info("handleNativeServerResponse: Double broker flow detected, ignoring accountId mismatch");else if(a!==s&&e.account.id!==t.accountId)throw A_(C_);const c=await this.getDiscoveredAuthority({requestAuthority:t.authority}),l=c_(this.browserStorage,c,a,Gw,this.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,this.logger);e.expires_in=Number(e.expires_in);const u=await this.generateAuthenticationResult(e,t,i,l,c.canonicalAuthority,n);return await this.cacheAccount(l,this.correlationId),await this.cacheNativeTokens(e,t,a,i,e.access_token,u.tenantId,n),u}createHomeAccountIdentifier(e,t){return DS.generateHomeAccountId(e.client_info||Hd.EMPTY_STRING,$k,this.logger,this.browserCrypto,t)}generateScopes(e,t){return t?Og.fromString(t):Og.fromString(e)}async generatePopAccessToken(e,t){if(t.tokenType===Fh.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const n=new i_(this.browserCrypto),r={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw ng(Qm);return n.signPopToken(e.access_token,t.keyId,r)}return e.access_token}async generateAuthenticationResult(e,t,n,r,o,i){const a=this.addTelemetryFromNativeResponse(e.properties.MATS),s=this.generateScopes(t.scope,e.scope),c=e.account.properties||{},l=c.UID||n.oid||n.sub||Hd.EMPTY_STRING,u=c.TenantId||n.tid||Hd.EMPTY_STRING,d=qg(r.getAccountInfo(),void 0,n,e.id_token);d.nativeAccountId!==e.account.id&&(d.nativeAccountId=e.account.id);const h=await this.generatePopAccessToken(e,t),p=t.tokenType===Fh.POP?Fh.POP:Fh.BEARER;return{authority:o,uniqueId:l,tenantId:u,scopes:s.asArray(),account:d,idToken:e.id_token,idTokenClaims:n,accessToken:h,fromCache:!!a&&this.isResponseFromCache(a),expiresOn:aS(i+e.expires_in),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}async cacheAccount(e,t){await this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e.getAccountInfo(),t)}cacheNativeTokens(e,t,n,r,o,i,a){const s=lS(n,t.authority,e.id_token||"",t.clientId,r.tid||""),c=a+(t.tokenType===Fh.POP?Hd.SHR_NONCE_VALIDITY:("string"===typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),l=this.generateScopes(e.scope,t.scope),u={idToken:s,accessToken:uS(n,t.authority,o,t.clientId,r.tid||i,l.printScopes(),c,0,Gw,void 0,t.tokenType,void 0,t.keyId)};return this.nativeStorageManager.saveCacheRecord(u,this.correlationId,t.storeInCache)}getExpiresInValue(e,t){return e===Fh.POP?Hd.SHR_NONCE_VALIDITY:("string"===typeof t?parseInt(t,10):t)||0}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.platformAuthProvider.getExtensionId(),extensionVersion:this.platformAuthProvider.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}getMATSFromResponse(e){if(e)try{return JSON.parse(e)}catch(t){this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return"undefined"===typeof e.is_cached?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=await this.getCanonicalAuthority(e),{scopes:n}=e,r=it(e,M_),o=new Og(n||[]);o.appendScopes(Jd);const i=s(s({},r),{},{accountId:this.accountId,clientId:this.config.auth.clientId,authority:t.urlString,scope:o.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:this.getPrompt(e.prompt),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:s(s({},e.extraQueryParameters),e.tokenQueryParameters),extendedExpiryToken:!1,keyId:e.popKid});if(i.signPopToken&&e.popKid)throw Xb(Wb);if(this.handleExtraBrokerParams(i),i.extraParameters=i.extraParameters||{},i.extraParameters.telemetry=Sp,e.authenticationScheme===Fh.POP){const t={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},n=new i_(this.browserCrypto);let r;if(i.keyId)r=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:i.keyId})),i.signPopToken=!1;else{const e=await nS(n.generateCnf.bind(n),nv,this.logger,this.performanceClient,this.correlationId)(t,this.logger);r=e.reqCnfString,i.keyId=e.kid,i.signPopToken=!0}i.reqCnf=r}return this.addRequestSKUs(i),i}async getCanonicalAuthority(e){const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const n=new Gg(t);return n.validateAsUri(),n}getPrompt(e){switch(this.apiId){case Yp:case Xp:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ph}if(e)switch(e){case ph:case hh:case uh:case dh:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e;default:throw this.logger.trace("initializeNativeRequest: prompt = ".concat(e," is not compatible with native flow")),Xb(Bb)}else this.logger.trace("initializeNativeRequest: prompt was not provided")}handleExtraBrokerParams(e){var t;const n=e.extraParameters&&e.extraParameters.hasOwnProperty(dw)&&e.extraParameters.hasOwnProperty(hw)&&e.extraParameters.hasOwnProperty(iw);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[hw],r=e.extraParameters[iw]),e.extraParameters={child_client_id:r,child_redirect_uri:o},null===(t=this.performanceClient)||void 0===t||t.addFields({embeddedClientId:r,embeddedRedirectUri:o},this.correlationId)}}async function N_(e,t,n,r,o){const i=w_(s(s({},e.auth),{},{authority:t}),n,r,o);if(Tw(i,{sku:bp,version:Ik,os:"",cpu:""}),e.auth.protocolMode!==sm&&Ew(i,e.telemetry.application),n.platformBroker&&(function(e){e.set("nativebroker","1")}(i),o.addFields({isPlatformAuthorizeRequest:!0},n.correlationId),n.authenticationScheme===Fh.POP)){const e=new Yk(r,o),t=new i_(e);let a;if(n.popKid)a=e.encodeKid(n.popKid);else{a=(await nS(t.generateCnf.bind(t),nv,r,o,n.correlationId)(n,r)).reqCnfString}Fw(i,a)}return fw(i,n.correlationId,o),i}async function D_(e,t,n,r,o){if(!n.codeChallenge)throw Pg(gg);const i=await nS(N_,Gy,r,o,n.correlationId)(e,t,n,r,o);return mw(i,mh),Aw(i,n.codeChallenge,Hd.S256_CODE_CHALLENGE_METHOD),Dw(i,n.extraQueryParameters||{}),k_(t,i,e.auth.encodeExtraQueryParams,n.extraQueryParameters)}async function L_(e,t,n,r,o,i){if(!r.earJwk)throw Xb(Zv);const a=await N_(t,n,r,o,i);mw(a,gh),function(e,t){e.set("ear_jwk",encodeURIComponent(t)),e.set("ear_jwe_crypto","eyJhbGciOiJkaXIiLCJlbmMiOiJBMjU2R0NNIn0")}(a,r.earJwk);const s=new Map;Dw(s,r.extraQueryParameters||{});return q_(e,k_(n,s,t.auth.encodeExtraQueryParams,r.extraQueryParameters),a)}async function F_(e,t,n,r,o,i){const a=await N_(t,n,r,o,i);mw(a,mh),Aw(a,r.codeChallenge,r.codeChallengeMethod||Hd.S256_CODE_CHALLENGE_METHOD),function(e,t){Object.entries(t).forEach(t=>{let[n,r]=t;r&&e.set(n,r)})}(a,r.authorizePostBodyParameters||{});const s=new Map;Dw(s,r.extraQueryParameters||{});return q_(e,k_(n,s,t.auth.encodeExtraQueryParams,r.extraQueryParameters),a)}function q_(e,t,n){const r=e.createElement("form");return r.method="post",r.action=t,n.forEach((t,n)=>{const o=e.createElement("input");o.hidden=!0,o.name=n,o.value=t,r.appendChild(o)}),e.body.appendChild(r),r}async function U_(e,t,n,r,o,i,a,c,l,u){if(c.verbose("Account id found, calling WAM for token"),!u)throw Xb(zb);const d=new Yk(c,l),h=new O_(r,o,d,c,a,r.system.navigationClient,n,l,u,t,i,e.correlationId),{userRequestState:p}=r_.parseRequestState(d,e.state);return nS(h.acquireToken.bind(h),wy,c,l,e.correlationId)(s(s({},e),{},{state:p,prompt:void 0}))}async function z_(e,t,n,r,o,i,a,c,l,u,d,h){if(t_.removeThrottle(a,o.auth.clientId,e),t.accountId)return nS(U_,Jy,u,d,e.correlationId)(e,t.accountId,r,o,a,c,l,u,d,h);const p=s(s({},e),{},{code:t.code||"",codeVerifier:n}),f=new __(i,a,p,u,d);return await nS(f.handleCodeResponse.bind(f),Qy,u,d,e.correlationId)(t,e)}async function H_(e,t,n,r,o,i,a,s,c,l,u){if(t_.removeThrottle(i,r.auth.clientId,e),S_(t,e.state),!t.ear_jwe)throw Xb(eb);if(!e.earJwk)throw Xb(Zv);const d=JSON.parse(await nS(uk,qv,c,l,e.correlationId)(e.earJwk,t.ear_jwe));if(d.accountId)return nS(U_,Jy,c,l,e.correlationId)(e,d.accountId,n,r,i,a,s,c,l,u);const h=new s_(r.auth.clientId,i,new Yk(c,l),c,null,null,l);h.validateTokenResponse(d);const p={code:"",state:e.state,nonce:e.nonce,client_info:d.client_info,cloud_graph_host_name:d.cloud_graph_host_name,cloud_instance_host_name:d.cloud_instance_host_name,cloud_instance_name:d.cloud_instance_name,msgraph_host:d.msgraph_host};return await nS(h.handleServerTokenResponse.bind(h),ov,c,l,e.correlationId)(d,o,oS(),e,p,void 0,void 0,void 0,void 0)}async function B_(e,t,n){e.addQueueMeasurement(Ev,n);const r=tS(j_,Iv,t,e,n)(e,t,n);return{verifier:r,challenge:await nS(W_,Av,t,e,n)(r,e,t,n)}}function j_(e,t,n){try{const r=new Uint8Array(32);tS(ik,Rv,t,e,n)(r);return jw(r)}catch(r){throw Xb(Xv)}}async function W_(e,t,n,r){t.addQueueMeasurement(Av,r);try{const o=await nS(ok,xv,n,t,r)(e,t,r);return jw(new Uint8Array(o))}catch(o){throw Xb(Xv)}}class K_{constructor(e,t,n,r){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=r,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=n,this.handshakeEvent=n.startMeasurement(bv),this.platformAuthType=Ip}async sendMessage(e){this.logger.trace(this.platformAuthType+" - sendMessage called.");const t={method:Rp,request:e},n={channel:wp,extensionId:this.extensionId,responseId:sk(),body:t};this.logger.trace(this.platformAuthType+" - Sending request to browser extension"),this.logger.tracePii(this.platformAuthType+" - Sending request to browser extension: ".concat(JSON.stringify(n))),this.messageChannel.port1.postMessage(n);const r=await new Promise((e,t)=>{this.resolvers.set(n.responseId,{resolve:e,reject:t})});return this.validatePlatformBrokerResponse(r)}static async createProvider(e,t,n){e.trace("PlatformAuthExtensionHandler - createProvider called.");try{const r=new K_(e,t,n,kp);return await r.sendHandshakeRequest(),r}catch(r){const o=new K_(e,t,n);return await o.sendHandshakeRequest(),o}}async sendHandshakeRequest(){this.logger.trace(this.platformAuthType+" - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:wp,extensionId:this.extensionId,responseId:sk(),body:{method:Ap}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=e=>{this.onChannelMessage(e)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,n)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:n}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),n(Xb(qb)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace(this.platformAuthType+" - onWindowMessage called"),e.source!==window)return;const t=e.data;if(t.channel&&t.channel===wp&&(!t.extensionId||t.extensionId===this.extensionId)&&t.body.method===Ap){const e=this.handshakeResolvers.get(t.responseId);if(!e)return void this.logger.trace(this.platformAuthType+".onWindowMessage - resolver can't be found for request ".concat(t.responseId));this.logger.verbose(t.extensionId?"Extension with id: ".concat(t.extensionId," not installed"):"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),e.reject(Xb(Ub))}}onChannelMessage(e){this.logger.trace(this.platformAuthType+" - onChannelMessage called.");const t=e.data,n=this.resolvers.get(t.responseId),r=this.handshakeResolvers.get(t.responseId);try{const e=t.body.method;if(e===Pp){if(!n)return;const e=t.body.response;if(this.logger.trace(this.platformAuthType+" - Received response from browser extension"),this.logger.tracePii(this.platformAuthType+" - Received response from browser extension: ".concat(JSON.stringify(e))),"Success"!==e.status)n.reject(A_(e.code,e.description,e.ext));else{if(!e.result)throw ap(np,"Event does not contain result.");e.result.code&&e.result.description?n.reject(A_(e.result.code,e.result.description,e.result.ext)):n.resolve(e.result)}this.resolvers.delete(t.responseId)}else if(e===xp){if(!r)return void this.logger.trace(this.platformAuthType+".onChannelMessage - resolver can't be found for request ".concat(t.responseId));clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(this.platformAuthType+" - Received HandshakeResponse from extension: ".concat(this.extensionId)),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),r.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(cE){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii("Error parsing response from WAM Extension: ".concat(cE)),this.logger.errorPii("Unable to parse ".concat(e)),n?n.reject(cE):r&&r.reject(cE)}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw ap(np,"Response missing expected properties.")}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}getExtensionName(){var e;return this.getExtensionId()===kp?"chrome":null!==(e=this.getExtensionId())&&void 0!==e&&e.length?"unknown":void 0}}const G_=["accountId","clientId","authority","scope","redirectUri","correlationId","state","storeInCache","embeddedClientId","extraParameters"];class V_{constructor(e,t,n){this.logger=e,this.performanceClient=t,this.correlationId=n,this.platformAuthType=Ep}static async createProvider(e,t,n){var r;if(e.trace("PlatformAuthDOMHandler: createProvider called"),null!==(r=window.navigator)&&void 0!==r&&r.platformAuthentication){const r=await window.navigator.platformAuthentication.getSupportedContracts(_p);if(null!==r&&void 0!==r&&r.includes(Tp))return e.trace("Platform auth api available in DOM"),new V_(e,t,n)}}getExtensionId(){return _p}getExtensionVersion(){return""}getExtensionName(){return Cp}async sendMessage(e){this.logger.trace(this.platformAuthType+" - Sending request to browser DOM API");try{const t=this.initializePlatformDOMRequest(e),n=await window.navigator.platformAuthentication.executeGetToken(t);return this.validatePlatformBrokerResponse(n)}catch(t){throw this.logger.error(this.platformAuthType+" - executeGetToken DOM API error"),t}}initializePlatformDOMRequest(e){this.logger.trace(this.platformAuthType+" - initializeNativeDOMRequest called");const{accountId:t,clientId:n,authority:r,scope:o,redirectUri:i,correlationId:a,state:c,storeInCache:l,embeddedClientId:u,extraParameters:d}=e,h=it(e,G_),p=this.getDOMExtraParams(h);return{accountId:t,brokerId:this.getExtensionId(),authority:r,clientId:n,correlationId:a||this.correlationId,extraParameters:s(s({},d),p),isSecurityTokenService:!1,redirectUri:i,scope:o,state:c,storeInCache:l,embeddedClientId:u}}validatePlatformBrokerResponse(e){if(e.hasOwnProperty("isSuccess")){if(e.hasOwnProperty("accessToken")&&e.hasOwnProperty("idToken")&&e.hasOwnProperty("clientInfo")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scopes")&&e.hasOwnProperty("expiresIn"))return this.logger.trace(this.platformAuthType+" - platform broker returned successful and valid response"),this.convertToPlatformBrokerResponse(e);if(e.hasOwnProperty("error")){const t=e;if(!1===t.isSuccess&&t.error&&t.error.code)throw this.logger.trace(this.platformAuthType+" - platform broker returned error response"),A_(t.error.code,t.error.description,{error:parseInt(t.error.errorCode),protocol_error:t.error.protocolError,status:t.error.status,properties:t.error.properties})}}throw ap(np,"Response missing expected properties.")}convertToPlatformBrokerResponse(e){var t;this.logger.trace(this.platformAuthType+" - convertToNativeResponse called");return{access_token:e.accessToken,id_token:e.idToken,client_info:e.clientInfo,account:e.account,expires_in:e.expiresIn,scope:e.scopes,state:e.state||"",properties:e.properties||{},extendedLifetimeToken:null!==(t=e.extendedLifetimeToken)&&void 0!==t&&t,shr:e.proofOfPossessionPayload}}getDOMExtraParams(e){const t=Object.entries(e).reduce((e,t)=>{let[n,r]=t;return e[n]=String(r),e},{});return s({},t)}}async function Q_(e,t,n,r){e.trace("getPlatformAuthProvider called",n);const o=function(){let e;try{var t;return e=window[Op],"true"===(null===(t=e)||void 0===t?void 0:t.getItem(Mk))}catch(n){return!1}}();let i;e.trace("Has client allowed platform auth via DOM API: "+o);try{o&&(i=await V_.createProvider(e,t,n)),i||(e.trace("Platform auth via DOM API not available, checking for extension"),i=await K_.createProvider(e,r||2e3,t))}catch(a){e.trace("Platform auth not available",a)}return i}function Y_(e,t,n,r){if(t.trace("isPlatformAuthAllowed called"),!e.system.allowPlatformBroker)return t.trace("isPlatformAuthAllowed: allowPlatformBroker is not enabled, returning false"),!1;if(!n)return t.trace("isPlatformAuthAllowed: Platform auth provider is not initialized, returning false"),!1;if(r)switch(r){case Fh.BEARER:case Fh.POP:return t.trace("isPlatformAuthAllowed: authenticationScheme is supported, returning true"),!0;default:return t.trace("isPlatformAuthAllowed: authenticationScheme is not supported, returning false"),!1}return!0}class J_ extends y_{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=s,this.eventHandler=o}acquireToken(e,t){let n;try{var r;if(n={popupName:this.generatePopupName(e.scopes||Jd,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:null!==(r=e.popupWindowParent)&&void 0!==r?r:window},this.performanceClient.addFields({isAsyncPopup:this.config.system.asyncPopups},this.correlationId),this.config.system.asyncPopups)return this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,n,t);{const r=s(s({},e),{},{httpMethod:g_(e,this.config.auth.protocolMode)});return this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),n.popup=this.openSizedPopup("about:blank",n),this.acquireTokenPopupAsync(r,n,t)}}catch(o){return Promise.reject(o)}}logout(e){try{var t;this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(null===e||void 0===e?void 0:e.popupWindowAttributes)||{},popupWindowParent:null!==(t=null===e||void 0===e?void 0:e.popupWindowParent)&&void 0!==t?t:window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,t,n){this.logger.verbose("acquireTokenPopupAsync called");const r=await nS(this.initializeAuthorizationRequest.bind(this),Wy,this.logger,this.performanceClient,this.correlationId)(e,tf.Popup);t.popup&&Tk(r.authority);const o=Y_(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);return r.platformBroker=o,this.config.auth.protocolMode===cm?this.executeEarFlow(r,t):this.executeCodeFlow(r,t,n)}async executeCodeFlow(e,t,n){const r=e.correlationId,o=this.initializeServerTelemetryManager(Qp),i=n||await nS(B_,Ev,this.logger,this.performanceClient,r)(this.performanceClient,this.logger,r),a=s(s({},e),{},{codeChallenge:i.challenge});try{const n=await nS(this.createAuthCodeClient.bind(this),By,this.logger,this.performanceClient,r)({serverTelemetryManager:o,requestAuthority:a.authority,requestAzureCloudOptions:a.azureCloudOptions,requestExtraQueryParameters:a.extraQueryParameters,account:a.account});if(a.httpMethod===Yd)return await this.executeCodeFlowWithPost(a,t,n,i.verifier);{const o=await nS(D_,Ky,this.logger,this.performanceClient,r)(this.config,n.authority,a,this.logger,this.performanceClient),s=this.initiateAuthRequest(o,t);this.eventHandler.emitEvent(Kf,tf.Popup,{popupWindow:s},null);const c=await this.monitorPopupForHash(s,t.popupWindowParent),l=tS(v_,iv,this.logger,this.performanceClient,this.correlationId)(c,this.config.auth.OIDCOptions.serverResponseType,this.logger);return await nS(z_,$y,this.logger,this.performanceClient,r)(e,l,i.verifier,Qp,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}catch(l){var c;throw null===(c=t.popup)||void 0===c||c.close(),l instanceof ip&&(l.setCorrelationId(this.correlationId),o.cacheFailedRequest(l)),l}}async executeEarFlow(e,t){const n=e.correlationId,r=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,n)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),o=await nS(lk,Fv,this.logger,this.performanceClient,n)(),i=s(s({},e),{},{earJwk:o}),a=t.popup||this.openPopup("about:blank",t);(await L_(a.document,this.config,r,i,this.logger,this.performanceClient)).submit();const c=await nS(this.monitorPopupForHash.bind(this),Uy,this.logger,this.performanceClient,n)(a,t.popupWindowParent),l=tS(v_,iv,this.logger,this.performanceClient,this.correlationId)(c,this.config.auth.OIDCOptions.serverResponseType,this.logger);return nS(H_,Yy,this.logger,this.performanceClient,n)(i,l,Qp,this.config,r,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async executeCodeFlowWithPost(e,t,n,r){const o=e.correlationId,i=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,o)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),a=t.popup||this.openPopup("about:blank",t);(await F_(a.document,this.config,i,e,this.logger,this.performanceClient)).submit();const s=await nS(this.monitorPopupForHash.bind(this),Uy,this.logger,this.performanceClient,o)(a,t.popupWindowParent),c=tS(v_,iv,this.logger,this.performanceClient,this.correlationId)(s,this.config.auth.OIDCOptions.serverResponseType,this.logger);return nS(z_,$y,this.logger,this.performanceClient,o)(e,c,r,Qp,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async logoutPopupAsync(e,t,n,r){this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(Gf,tf.Popup,e);const o=this.initializeServerTelemetryManager(ef);try{await this.clearCacheOnLogout(this.correlationId,e.account);const s=await nS(this.createAuthCodeClient.bind(this),By,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:o,requestAuthority:n,account:e.account||void 0});try{s.authority.endSessionEndpoint}catch(c){var i;if(null!==(i=e.account)&&void 0!==i&&i.homeAccountId&&e.postLogoutRedirectUri&&s.authority.protocolMode===sm){var a;if(this.eventHandler.emitEvent(Vf,tf.Popup,e),r){const e={apiId:ef,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Gg.getAbsoluteUrl(r,bk());await this.navigationClient.navigateInternal(t,e)}return void(null===(a=t.popup)||void 0===a||a.close())}}const l=s.getLogoutUri(e);this.eventHandler.emitEvent(Vf,tf.Popup,e);const u=this.openPopup(l,t);if(this.eventHandler.emitEvent(Kf,tf.Popup,{popupWindow:u},null),await this.monitorPopupForHash(u,t.popupWindowParent).catch(()=>{}),r){const e={apiId:ef,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},t=Gg.getAbsoluteUrl(r,bk());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii("Redirecting main window to: ".concat(t)),await this.navigationClient.navigateInternal(t,e)}else this.logger.verbose("No main window navigation requested")}catch(l){var s;throw null===(s=t.popup)||void 0===s||s.close(),l instanceof ip&&(l.setCorrelationId(this.correlationId),o.cacheFailedRequest(l)),this.eventHandler.emitEvent(Qf,tf.Popup,null,l),this.eventHandler.emitEvent(Yf,tf.Popup),l}this.eventHandler.emitEvent(Yf,tf.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii("Navigate to: ".concat(e)),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),Xb(nb)}monitorPopupForHash(e,t){return new Promise((t,n)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const r=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(r),void n(Xb(db));let o="";try{o=e.location.href}catch(s){}if(!o||"about:blank"===o)return;clearInterval(r);let i="";const a=this.config.auth.OIDCOptions.serverResponseType;e&&(i=a===yh?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),t(i)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let n;if(t.popup?(n=t.popup,this.logger.verbosePii("Navigating popup window to: ".concat(e)),n.location.assign(e)):"undefined"===typeof t.popup&&(this.logger.verbosePii("Opening popup window to: ".concat(e)),n=this.openSizedPopup(e,t)),!n)throw Xb(ub);return n.focus&&n.focus(),this.currentWindow=n,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),n}catch(n){throw this.logger.error("error opening popup "+n.message),Xb(lb)}}openSizedPopup(e,t){var n,r,o,i;let{popupName:a,popupWindowAttributes:s,popupWindowParent:c}=t;const l=c.screenLeft?c.screenLeft:c.screenX,u=c.screenTop?c.screenTop:c.screenY,d=c.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=c.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let p=null===(n=s.popupSize)||void 0===n?void 0:n.width,f=null===(r=s.popupSize)||void 0===r?void 0:r.height,m=null===(o=s.popupPosition)||void 0===o?void 0:o.top,g=null===(i=s.popupPosition)||void 0===i?void 0:i.left;return(!p||p<0||p>d)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),p=mp),(!f||f<0||f>h)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),f=gp),(!m||m<0||m>h)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),m=Math.max(0,h/2-gp/2+u)),(!g||g<0||g>d)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),g=Math.max(0,d/2-mp/2+l)),c.open(e,a,"width=".concat(p,", height=").concat(f,", top=").concat(m,", left=").concat(g,", scrollbars=yes"))}unloadWindow(e){this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow)}generatePopupName(e,t){return"".concat(yp,".").concat(this.config.auth.clientId,".").concat(e.join("-"),".").concat(t,".").concat(this.correlationId)}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return"".concat(yp,".").concat(this.config.auth.clientId,".").concat(t,".").concat(this.correlationId)}}class $_ extends y_{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,a,c,l),this.nativeStorage=s}async acquireToken(e){const t=await nS(this.initializeAuthorizationRequest.bind(this),Wy,this.logger,this.performanceClient,this.correlationId)(e,tf.Redirect);t.platformBroker=Y_(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme);const n=e=>{e.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.resetRequestCache(),this.eventHandler.emitEvent(Jf,tf.Redirect))},r=this.getRedirectStartPage(e.redirectStartPage);this.logger.verbosePii("Redirect start page: ".concat(r)),this.browserStorage.setTemporaryCache(Up,r,!0),window.addEventListener("pageshow",n);try{this.config.auth.protocolMode===cm?await this.executeEarFlow(t):await this.executeCodeFlow(t,e.onRedirectNavigate)}catch(o){throw o instanceof ip&&o.setCorrelationId(this.correlationId),window.removeEventListener("pageshow",n),o}}async executeCodeFlow(e,t){const n=e.correlationId,r=this.initializeServerTelemetryManager(Vp),o=await nS(B_,Ev,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),i=s(s({},e),{},{codeChallenge:o.challenge});this.browserStorage.cacheAuthorizeRequest(i,o.verifier);try{if(i.httpMethod===Yd)return await this.executeCodeFlowWithPost(i);{const n=await nS(this.createAuthCodeClient.bind(this),By,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),o=await nS(D_,Ky,this.logger,this.performanceClient,e.correlationId)(this.config,n.authority,i,this.logger,this.performanceClient);return await this.initiateAuthRequest(o,t)}}catch(a){throw a instanceof ip&&(a.setCorrelationId(this.correlationId),r.cacheFailedRequest(a)),a}}async executeEarFlow(e){const t=e.correlationId,n=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await nS(lk,Fv,this.logger,this.performanceClient,t)(),o=s(s({},e),{},{earJwk:r});this.browserStorage.cacheAuthorizeRequest(o);return(await L_(document,this.config,n,o,this.logger,this.performanceClient)).submit(),new Promise((e,t)=>{setTimeout(()=>{t(Xb(Qb,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async executeCodeFlowWithPost(e){const t=e.correlationId,n=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});this.browserStorage.cacheAuthorizeRequest(e);return(await F_(document,this.config,n,e,this.logger,this.performanceClient)).submit(),new Promise((e,t)=>{setTimeout(()=>{t(Xb(Qb,"failed_to_redirect"))},this.config.system.redirectNavigationTimeout)})}async handleRedirectPromise(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const o=this.initializeServerTelemetryManager(Jp);try{const[i,a]=this.getRedirectResponse(e||"");if(!i)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.resetRequestCache(),"back_forward"!==function(){if("undefined"===typeof window||"undefined"===typeof window.performance||"function"!==typeof window.performance.getEntriesByType)return;const e=window.performance.getEntriesByType("navigation"),t=e.length?e[0]:void 0;return null===t||void 0===t?void 0:t.type}()?r.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(Up,!0)||Hd.EMPTY_STRING,c=Kg(s);if(c===Kg(window.location.href)&&this.config.auth.navigateToLoginRequestUrl){this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&function(e){const t=e.split("#");t.shift(),window.location.hash=t.length>0?t.join("#"):""}(s);return await this.handleResponse(i,t,n,o)}if(!this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(i,t,n,o);if(!vk()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(zp,a,!0);const e={apiId:Jp,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let r=!0;if(s&&"null"!==s)this.logger.verbose("Navigating to loginRequestUrl: ".concat(s)),r=await this.navigationClient.navigateInternal(s,e);else{const t=function(){const e=new Gg(window.location.href).getUrlComponents();return"".concat(e.Protocol,"//").concat(e.HostNameAndPort,"/")}();this.browserStorage.setTemporaryCache(Up,t,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),r=await this.navigationClient.navigateInternal(t,e)}if(!r)return await this.handleResponse(i,t,n,o)}return null}catch(i){throw i instanceof ip&&(i.setCorrelationId(this.correlationId),o.cacheFailedRequest(i)),i}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(t=this.config.auth.OIDCOptions.serverResponseType===yh?window.location.search:window.location.hash);let n=jg(t);if(n){try{b_(n,this.browserCrypto,tf.Redirect)}catch(o){return o instanceof ip&&this.logger.error("Interaction type validation failed due to ".concat(o.errorCode,": ").concat(o.errorMessage)),[null,""]}return yk(window),this.logger.verbose("Hash contains known properties, returning response hash"),[n,t]}const r=this.browserStorage.getTemporaryCache(zp,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(zp)),r&&(n=jg(r),n)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[n,r]):[null,""]}async handleResponse(e,t,n,r){if(!e.state)throw Xb(ob);if(e.ear_jwe){const n=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,t.correlationId)({requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account});return nS(H_,Yy,this.logger,this.performanceClient,t.correlationId)(t,e,Vp,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}const o=await nS(this.createAuthCodeClient.bind(this),By,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority});return nS(z_,$y,this.logger,this.performanceClient,t.correlationId)(t,e,n,Vp,this.config,o,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){this.logger.infoPii("RedirectHandler.initiateAuthRequest: Navigate to: ".concat(e));const n={apiId:Vp,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},r=t||this.config.auth.onRedirectNavigate;if("function"===typeof r){this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback");return!1!==r(e)?(this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void await this.navigationClient.navigateExternal(e,n)):void this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")}return this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void await this.navigationClient.navigateExternal(e,n)}throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Xb(nb)}async logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),n=this.initializeServerTelemetryManager(Zp);try{this.eventHandler.emitEvent(Gf,tf.Redirect,e),await this.clearCacheOnLogout(this.correlationId,t.account);const i={apiId:Zp,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await nS(this.createAuthCodeClient.bind(this),By,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e&&e.authority,requestExtraQueryParameters:null===e||void 0===e?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(a.authority.protocolMode===sm)try{a.authority.endSessionEndpoint}catch(o){var r;if(null!==(r=t.account)&&void 0!==r&&r.homeAccountId)return void this.eventHandler.emitEvent(Vf,tf.Redirect,t)}const s=a.getLogoutUri(t);if(this.eventHandler.emitEvent(Vf,tf.Redirect,t),!e||"function"!==typeof e.onRedirectNavigate)return this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,qp),void await this.navigationClient.navigateExternal(s,i);if(!1!==e.onRedirectNavigate(s))return this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0,qp),void await this.navigationClient.navigateExternal(s,i);this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof ip&&(i.setCorrelationId(this.correlationId),n.cacheFailedRequest(i)),this.eventHandler.emitEvent(Qf,tf.Redirect,null,i),this.eventHandler.emitEvent(Yf,tf.Redirect),i}this.eventHandler.emitEvent(Yf,tf.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return Gg.getAbsoluteUrl(t,bk())}}async function X_(e,t,n,r,o){if(t.addQueueMeasurement(qy,r),!e)throw n.info("Navigate url is empty"),Xb(nb);return o?nS(nC,zy,n,t,r)(e,o,t,r):tS(rC,Hy,n,t,r)(e)}async function Z_(e,t,n,r,o){const i=oC();if(!i.contentDocument)throw"No document associated with iframe!";return(await F_(i.contentDocument,e,t,n,r,o)).submit(),i}async function eC(e,t,n,r,o){const i=oC();if(!i.contentDocument)throw"No document associated with iframe!";return(await L_(i.contentDocument,e,t,n,r,o)).submit(),i}async function tC(e,t,n,r,o,i,a){return r.addQueueMeasurement(Uy,i),new Promise((r,i)=>{t<Ek&&o.warning("system.loadFrameTimeout or system.iframeHashTimeout set to lower (".concat(t,"ms) than the default (").concat(Ek,"ms). This may result in timeouts."));const s=window.setTimeout(()=>{window.clearInterval(c),i(Xb(pb))},t),c=window.setInterval(()=>{let t="";const n=e.contentWindow;try{t=n?n.location.href:""}catch(i){}if(!t||"about:blank"===t)return;let o="";n&&(o=a===yh?n.location.search:n.location.hash),window.clearTimeout(s),window.clearInterval(c),r(o)},n)}).finally(()=>{tS(iC,wv,o,r,i)(e)})}function nC(e,t,n,r){return n.addQueueMeasurement(zy,r),new Promise((n,r)=>{const o=oC();window.setTimeout(()=>{o?(o.src=e,n(o)):r("Unable to load iframe")},t)})}function rC(e){const t=oC();return t.src=e,t}function oC(){const e=document.createElement("iframe");return e.className="msalSilentIframe",e.style.visibility="hidden",e.style.position="absolute",e.style.width=e.style.height="0",e.style.border="0",e.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(e),e}function iC(e){document.body===e.parentNode&&document.body.removeChild(e)}class aC extends y_{constructor(e,t,n,r,o,i,a,s,c,l,u){super(e,t,n,r,o,i,s,l,u),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(my,e.correlationId),e.loginHint||e.sid||e.account&&e.account.username||this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t=s({},e);t.prompt?t.prompt!==ph&&t.prompt!==fh&&(this.logger.warning("SilentIframeClient. Replacing invalid prompt ".concat(t.prompt," with ").concat(ph)),t.prompt=ph):t.prompt=ph;const n=await nS(this.initializeAuthorizationRequest.bind(this),Wy,this.logger,this.performanceClient,e.correlationId)(t,tf.Silent);return n.platformBroker=Y_(this.config,this.logger,this.platformAuthProvider,n.authenticationScheme),Tk(n.authority),this.config.auth.protocolMode===cm?this.executeEarFlow(n):this.executeCodeFlow(n)}async executeCodeFlow(e){let t;const n=this.initializeServerTelemetryManager(this.apiId);try{return t=await nS(this.createAuthCodeClient.bind(this),By,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),await nS(this.silentTokenHelper.bind(this),Fy,this.logger,this.performanceClient,e.correlationId)(t,e)}catch(r){if(r instanceof ip&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),!t||!(r instanceof ip)||r.errorCode!==fp)throw r;return this.performanceClient.addFields({retryError:r.errorCode},this.correlationId),await nS(this.silentTokenHelper.bind(this),Fy,this.logger,this.performanceClient,this.correlationId)(t,e)}}async executeEarFlow(e){const t=e.correlationId,n=await nS(this.getDiscoveredAuthority.bind(this),by,this.logger,this.performanceClient,t)({requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account}),r=await nS(lk,Fv,this.logger,this.performanceClient,t)(),o=s(s({},e),{},{earJwk:r}),i=await nS(eC,qy,this.logger,this.performanceClient,t)(this.config,n,o,this.logger,this.performanceClient),a=this.config.auth.OIDCOptions.serverResponseType,c=await nS(tC,Uy,this.logger,this.performanceClient,t)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,t,a),l=tS(v_,iv,this.logger,this.performanceClient,t)(c,a,this.logger);return nS(H_,Yy,this.logger,this.performanceClient,t)(o,l,this.apiId,this.config,n,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}logout(){return Promise.reject(Xb(vb))}async silentTokenHelper(e,t){const n=t.correlationId;this.performanceClient.addQueueMeasurement(Fy,n);const r=await nS(B_,Ev,this.logger,this.performanceClient,n)(this.performanceClient,this.logger,n),o=s(s({},t),{},{codeChallenge:r.challenge});let i;if(t.httpMethod===Yd)i=await nS(Z_,qy,this.logger,this.performanceClient,n)(this.config,e.authority,o,this.logger,this.performanceClient);else{const t=await nS(D_,Ky,this.logger,this.performanceClient,n)(this.config,e.authority,o,this.logger,this.performanceClient);i=await nS(X_,qy,this.logger,this.performanceClient,n)(t,this.performanceClient,this.logger,n,this.config.system.navigateFrameWait)}const a=this.config.auth.OIDCOptions.serverResponseType,c=await nS(tC,Uy,this.logger,this.performanceClient,n)(i,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,n,a),l=tS(v_,iv,this.logger,this.performanceClient,n)(c,a,this.logger);return nS(z_,$y,this.logger,this.performanceClient,n)(t,l,r.verifier,this.apiId,this.config,e,this.browserStorage,this.nativeStorage,this.eventHandler,this.logger,this.performanceClient,this.platformAuthProvider)}}class sC extends n_{constructor(e,t){super(e,t)}async acquireToken(e){var t,n;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ty,e.correlationId);const r=oS(),o=await nS(this.executeTokenRequest.bind(this),Cy,this.logger,this.performanceClient,e.correlationId)(e,this.authority),i=null===(n=o.headers)||void 0===n?void 0:n[nh],a=new s_(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return a.validateTokenResponse(o.body),nS(a.handleServerTokenResponse.bind(a),ov,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,void 0,void 0,!0,e.forceCache,i)}async acquireTokenByRefreshToken(e){var t;if(!e)throw Pg(pg);if(null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Iy,e.correlationId),!e.account)throw ng(Nm);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await nS(this.acquireTokenWithCachedRefreshToken.bind(this),Ey,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(n){const t=n instanceof xS&&n.errorCode===kS,r=n instanceof e_&&n.errorCode===Bh&&n.subError===jh;if(t||r)return nS(this.acquireTokenWithCachedRefreshToken.bind(this),Ey,this.logger,this.performanceClient,e.correlationId)(e,!1);throw n}return nS(this.acquireTokenWithCachedRefreshToken.bind(this),Ey,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Ey,e.correlationId);const r=tS(this.cacheManager.getRefreshToken.bind(this.cacheManager),Sv,this.logger,this.performanceClient,e.correlationId)(e.account,t,e.correlationId,void 0,this.performanceClient);if(!r)throw PS(kS);var o;if(r.expiresOn&&sS(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw null===(o=this.performanceClient)||void 0===o||o.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),PS(_S);const i=s(s({},e),{},{refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Fh.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:$S}});try{return await nS(this.acquireToken.bind(this),Ty,this.logger,this.performanceClient,e.correlationId)(i)}catch(c){var a;if(c instanceof xS)if(null===(a=this.performanceClient)||void 0===a||a.addFields({rtExpiresOnMs:Number(r.expiresOn)},e.correlationId),c.subError===TS){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const t=this.cacheManager.generateCredentialKey(r);this.cacheManager.removeRefreshToken(t,e.correlationId)}throw c}}async executeTokenRequest(e,t){var n;null===(n=this.performanceClient)||void 0===n||n.addQueueMeasurement(Cy,e.correlationId);const r=this.createTokenQueryParameters(e),o=Gg.appendQueryString(t.tokenEndpoint,r),i=await nS(this.createTokenRequestBody.bind(this),Ay,this.logger,this.performanceClient,e.correlationId)(e),a=this.createTokenRequestHeaders(e.ccsCredential),s=LS(this.config.authOptions.clientId,e);return nS(this.executePostToTokenEndpoint.bind(this),Sy,this.logger,this.performanceClient,e.correlationId)(o,i,a,s,e.correlationId,Sy)}async createTokenRequestBody(e){var t,n,r;null===(t=this.performanceClient)||void 0===t||t.addQueueMeasurement(Ay,e.correlationId);const o=new Map;if(yw(o,e.embeddedClientId||(null===(n=e.tokenBodyParameters)||void 0===n?void 0:n[iw])||this.config.authOptions.clientId),e.redirectUri&&vw(o,e.redirectUri),gw(o,e.scopes,!0,null===(r=this.config.authOptions.authority.options.OIDCOptions)||void 0===r?void 0:r.defaultScopes),Mw(o,kh),Ow(o),Tw(o,this.config.libraryInfo),Ew(o,this.config.telemetry.application),zw(o),this.serverTelemetryManager&&!Jv(this.config)&&Uw(o,this.serverTelemetryManager),function(e,t){e.set("refresh_token",t)}(o,e.refreshToken),this.config.clientCredentials.clientSecret&&xw(o,this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const t=this.config.clientCredentials.clientAssertion;Rw(o,await l_(t.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),Pw(o,t.assertionType)}if(e.authenticationScheme===Fh.POP){const t=new i_(this.cryptoUtils,this.performanceClient);let n;if(e.popKid)n=this.cryptoUtils.encodeKid(e.popKid);else{n=(await nS(t.generateCnf.bind(t),nv,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString}Fw(o,n)}else if(e.authenticationScheme===Fh.SSH){if(!e.sshJwk)throw Pg(wg);qw(o,e.sshJwk)}if((!Mg.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&_w(o,e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case $S:try{kw(o,OS(e.ccsCredential.credential))}catch(i){this.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case XS:ww(o,e.ccsCredential.credential)}return e.embeddedClientId&&Hw(o,this.config.authOptions.clientId,this.config.authOptions.redirectUri),e.tokenBodyParameters&&Dw(o,e.tokenBodyParameters),fw(o,e.correlationId,this.performanceClient),Wg(o)}}class cC extends y_{async acquireToken(e){this.performanceClient.addQueueMeasurement(yy,e.correlationId);const t=await nS(f_,Oy,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),n=s(s({},e),t);e.redirectUri&&(n.redirectUri=this.getRedirectUri(e.redirectUri));const r=this.initializeServerTelemetryManager(Xp),o=await this.createRefreshTokenClient({serverTelemetryManager:r,authorityUrl:n.authority,azureCloudOptions:n.azureCloudOptions,account:n.account});return nS(o.acquireTokenByRefreshToken.bind(o),Iy,this.logger,this.performanceClient,e.correlationId)(n).catch(e=>{throw e.setCorrelationId(this.correlationId),r.cacheFailedRequest(e),e})}logout(){return Promise.reject(Xb(vb))}async createRefreshTokenClient(e){const t=await nS(this.getClientConfiguration.bind(this),jy,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new sC(t,this.performanceClient)}}class lC{constructor(e,t,n,r){this.isBrowserEnvironment="undefined"!==typeof window,this.config=e,this.storage=t,this.logger=n,this.cryptoObj=r}async loadExternalTokens(e,t,n){if(!this.isBrowserEnvironment)throw Xb(Tb);const r=e.correlationId||sk(),o=t.id_token?Ug(t.id_token,Gw):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new bS(bS.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||sk()):void 0,s=await this.loadAccount(e,n.clientInfo||t.client_info||"",r,o,a),c=await this.loadIdToken(t,s.homeAccountId,s.environment,s.realm,r),l=await this.loadAccessToken(e,t,s.homeAccountId,s.environment,s.realm,n,r),u=await this.loadRefreshToken(t,s.homeAccountId,s.environment,r);return this.generateAuthenticationResult(e,{account:s,idToken:c,accessToken:l,refreshToken:u},o,a)}async loadAccount(e,t,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const t=DS.createFromAccountInfo(e.account);return await this.storage.setAccount(t,n),t}if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Xb(Pb);const i=DS.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),a=null===r||void 0===r?void 0:r.tid,s=c_(this.storage,o,i,Gw,n,r,t,o.hostnameAndPort,a,void 0,void 0,this.logger);return await this.storage.setAccount(s,n),s}async loadIdToken(e,t,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=lS(t,n,e.id_token,this.config.auth.clientId,r);return await this.storage.setIdTokenCredential(i,o),i}async loadAccessToken(e,t,n,r,o,i,a){if(!t.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!t.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const s=t.scope?Og.fromString(t.scope):new Og(e.scopes),c=i.expiresOn||t.expires_in+oS(),l=i.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+oS(),u=uS(n,r,t.access_token,this.config.auth.clientId,o,s.printScopes(),c,l,Gw);return await this.storage.setAccessTokenCredential(u,a),u}async loadRefreshToken(e,t,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=dS(t,n,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return await this.storage.setRefreshTokenCredential(o,r),o}generateAuthenticationResult(e,t,n,r){var o,i,a;let s,c="",l=[],u=null;null!==t&&void 0!==t&&t.accessToken&&(c=t.accessToken.secret,l=Og.fromString(t.accessToken.target).asArray(),u=aS(t.accessToken.expiresOn),s=aS(t.accessToken.extendedExpiresOn));const d=t.account;return{authority:r?r.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:l,account:d.getAccountInfo(),idToken:(null===(o=t.idToken)||void 0===o?void 0:o.secret)||"",idTokenClaims:n||{},accessToken:c,fromCache:!0,expiresOn:u,correlationId:e.correlationId||"",requestId:"",extExpiresOn:s,familyId:(null===(i=t.refreshToken)||void 0===i?void 0:i.familyId)||"",tokenType:(null===t||void 0===t||null===(a=t.accessToken)||void 0===a?void 0:a.tokenType)||"",state:e.state||"",cloudGraphHostName:d.cloudGraphHostName||"",msGraphHost:d.msGraphHost||"",fromNativeBroker:!1}}}class uC extends u_{constructor(e){super(e),this.includeRedirectUri=!1}}class dC extends y_{constructor(e,t,n,r,o,i,a,s,c,l){super(e,t,n,r,o,i,s,c,l),this.apiId=a}async acquireToken(e){if(!e.code)throw Xb(Ob);const t=await nS(this.initializeAuthorizationRequest.bind(this),Wy,this.logger,this.performanceClient,e.correlationId)(e,tf.Silent),n=this.initializeServerTelemetryManager(this.apiId);try{const r=s(s({},t),{},{code:e.code}),o=await nS(this.getClientConfiguration.bind(this),jy,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:n,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),i=new uC(o);this.logger.verbose("Auth code client created");const a=new __(i,this.browserStorage,r,this.logger,this.performanceClient);return await nS(a.handleCodeResponseFromServer.bind(a),Vy,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(r){throw r instanceof ip&&(r.setCorrelationId(this.correlationId),n.cacheFailedRequest(r)),r}}logout(){return Promise.reject(Xb(vb))}}function hC(e,t,n){try{_k(e)}catch(r){throw t.end({success:!1},r,n),r}}class pC{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Yk(this.logger,this.performanceClient):rg,this.eventHandler=new JS(this.logger),this.browserStorage=this.isBrowserEnvironment?new QS(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler,function(e){const t=e.cloudDiscoveryMetadata;let n;if(t)try{n=JSON.parse(t)}catch(r){throw Pg(yg)}return{canonicalAuthority:e.authority?wS(e.authority):void 0,knownAuthorities:e.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth)):((e,t,n,r)=>new QS(e,{cacheLocation:Np,cacheRetentionDays:5,temporaryCacheLocation:Np,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},rg,t,n,r))(this.config.auth.clientId,this.logger,this.performanceClient,this.eventHandler);const t={cacheLocation:Np,cacheRetentionDays:5,temporaryCacheLocation:Np,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new QS(this.config.auth.clientId,t,this.browserCrypto,this.logger,this.performanceClient,this.eventHandler),this.tokenCache=new lC(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this)}static async createController(e,t){const n=new pC(e);return await n.initialize(t),n}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e,t){if(this.logger.trace("initialize called"),this.initialized)return void this.logger.info("initialize has already been called, exiting early.");if(!this.isBrowserEnvironment)return this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,void this.eventHandler.emitEvent(Ef);const n=(null===e||void 0===e?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowPlatformBroker,o=this.performanceClient.startMeasurement(Dy,n);if(this.eventHandler.emitEvent(Tf),!t)try{this.logMultipleInstances(o)}catch(i){}if(await nS(this.browserStorage.initialize.bind(this.browserStorage),Ly,this.logger,this.performanceClient,n)(n),r)try{this.platformAuthProvider=await Q_(this.logger,this.performanceClient,n,this.config.system.nativeBrokerHandshakeTimeout)}catch(a){this.logger.verbose(a)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),tS(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),kv,this.logger,this.performanceClient,n)(n)),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(n),this.initialized=!0,this.eventHandler.emitEvent(Ef),o.end({allowPlatformBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),Sk(this.initialized),this.isBrowserEnvironment){const t=e||"";let n=this.redirectResponse.get(t);return"undefined"===typeof n?(n=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,n),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),n}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){var t;if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;if((null===(t=this.browserStorage.getInteractionInProgress())||void 0===t?void 0:t.type)===qp)return this.logger.verbose("handleRedirectPromise removing interaction_in_progress flag and returning null after sign-out"),this.browserStorage.setInteractionInProgress(!1),Promise.resolve(null);const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&this.platformAuthProvider&&!e;let i,a;this.eventHandler.emitEvent(jf,tf.Redirect);try{if(o&&this.platformAuthProvider){i=this.performanceClient.startMeasurement(dy,(null===r||void 0===r?void 0:r.correlationId)||""),this.logger.trace("handleRedirectPromise - acquiring token from native platform"),i.add({isPlatformBrokerRequest:!0});const e=new O_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Jp,this.performanceClient,this.platformAuthProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=nS(e.handleRedirectPromise.bind(e),vv,this.logger,this.performanceClient,i.event.correlationId)(this.performanceClient,i.event.correlationId)}else{const[t,n]=this.browserStorage.getCachedRequest(),r=t.correlationId;i=this.performanceClient.startMeasurement(dy,r),this.logger.trace("handleRedirectPromise - acquiring token from web flow");const o=this.createRedirectClient(r);a=nS(o.handleRedirectPromise.bind(o),yv,this.logger,this.performanceClient,i.event.correlationId)(e,t,n,i)}}catch(s){throw this.browserStorage.resetRequestCache(),s}return a.then(e=>{if(e){this.browserStorage.resetRequestCache();n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(Pf,tf.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(Nf,tf.Redirect,e),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),i.end({success:!0},void 0,e.account)}else i.event.errorCode?i.end({success:!1},void 0):i.discard();return this.eventHandler.emitEvent(Wf,tf.Redirect),e}).catch(e=>{this.browserStorage.resetRequestCache();const t=e;throw n.length>0?this.eventHandler.emitEvent(Df,tf.Redirect,null,t):this.eventHandler.emitEvent(Mf,tf.Redirect,null,t),this.eventHandler.emitEvent(Wf,tf.Redirect),i.end({success:!1},t),e})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const n=this.performanceClient.startMeasurement(uy,t);n.add({scenarioId:e.scenarioId});const r=e.onRedirectNavigate;if(r)e.onRedirectNavigate=t=>{const o="function"===typeof r?r(t):void 0;return n.add({navigateCallbackResult:!1!==o}),n.event=n.end({success:!0},void 0,e.account)||n.event,o};else{const t=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=r=>{const o="function"===typeof t?t(r):void 0;return n.add({navigateCallbackResult:!1!==o}),n.event=n.end({success:!0},void 0,e.account)||n.event,o}}const o=this.getAllAccounts().length>0;try{let r;if(Ck(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,Fp),o?this.eventHandler.emitEvent(Of,tf.Redirect,e):this.eventHandler.emitEvent(Rf,tf.Redirect,e),this.platformAuthProvider&&this.canUsePlatformBroker(e)){r=new O_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Vp,this.performanceClient,this.platformAuthProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,n).catch(r=>{if(n.add({brokerErrorName:r.name,brokerErrorCode:r.errorCode}),r instanceof E_&&I_(r)){this.platformAuthProvider=void 0;return this.createRedirectClient(t).acquireToken(e)}if(r instanceof xS){this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createRedirectClient(t).acquireToken(e)}throw r})}else{r=this.createRedirectClient(t).acquireToken(e)}return await r}catch(i){throw this.browserStorage.resetRequestCache(),2===n.event.status?this.performanceClient.startMeasurement(dy,t).end({success:!1},i,e.account):n.end({success:!1},i,e.account),o?this.eventHandler.emitEvent(Df,tf.Redirect,null,i):this.eventHandler.emitEvent(Mf,tf.Redirect,null,i),i}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(ly,t);n.add({scenarioId:e.scenarioId});try{this.logger.verbose("acquireTokenPopup called",t),hC(this.initialized,n,e.account),this.browserStorage.setInteractionInProgress(!0,Fp)}catch(a){return Promise.reject(a)}const r=this.getAllAccounts();let o;r.length>0?this.eventHandler.emitEvent(Of,tf.Popup,e):this.eventHandler.emitEvent(Rf,tf.Popup,e);const i=this.getPreGeneratedPkceCodes(t);if(this.canUsePlatformBroker(e))n.add({isPlatformBrokerRequest:!0}),o=this.acquireTokenNative(s(s({},e),{},{correlationId:t}),Qp).then(e=>(n.end({success:!0},void 0,e.account),e)).catch(r=>{if(n.add({brokerErrorName:r.name,brokerErrorCode:r.errorCode}),r instanceof E_&&I_(r)){this.platformAuthProvider=void 0;return this.createPopupClient(t).acquireToken(e,i)}if(r instanceof xS){this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow");return this.createPopupClient(t).acquireToken(e,i)}throw r});else{o=this.createPopupClient(t).acquireToken(e,i)}return o.then(e=>(r.length<this.getAllAccounts().length?this.eventHandler.emitEvent(Pf,tf.Popup,e):this.eventHandler.emitEvent(Nf,tf.Popup,e),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length},void 0,e.account),e)).catch(t=>(r.length>0?this.eventHandler.emitEvent(Df,tf.Popup,null,t):this.eventHandler.emitEvent(Mf,tf.Popup,null,t),n.end({success:!1},t,e.account),Promise.reject(t))).finally(async()=>{this.browserStorage.setInteractionInProgress(!1),this.config.system.asyncPopups&&await this.preGeneratePkceCodes(t)})}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var t,n;const r=this.getRequestCorrelationId(e),o=s(s({},e),{},{prompt:e.prompt,correlationId:r});let i;if(this.ssoSilentMeasurement=this.performanceClient.startMeasurement(vy,r),null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({scenarioId:e.scenarioId}),hC(this.initialized,this.ssoSilentMeasurement,e.account),null===(n=this.ssoSilentMeasurement)||void 0===n||n.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",r),this.eventHandler.emitEvent(Ff,tf.Silent,o),this.canUsePlatformBroker(o)){var a;null===(a=this.ssoSilentMeasurement)||void 0===a||a.add({isPlatformBrokerRequest:!0}),i=this.acquireTokenNative(o,Yp).catch(e=>{var t;if(null===(t=this.ssoSilentMeasurement)||void 0===t||t.add({brokerErrorName:e.name,brokerErrorCode:e.errorCode}),e instanceof E_&&I_(e)){this.platformAuthProvider=void 0;return this.createSilentIframeClient(o.correlationId).acquireToken(o)}throw e})}else{i=this.createSilentIframeClient(o.correlationId).acquireToken(o)}return i.then(e=>{var t;return this.eventHandler.emitEvent(qf,tf.Silent,e),null===(t=this.ssoSilentMeasurement)||void 0===t||t.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length},void 0,e.account),e}).catch(t=>{var n;throw this.eventHandler.emitEvent(Uf,tf.Silent,null,t),null===(n=this.ssoSilentMeasurement)||void 0===n||n.end({success:!1},t,e.account),t}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const n=this.performanceClient.startMeasurement(iy,t);hC(this.initialized,n),this.eventHandler.emitEvent(zf,tf.Silent,e),n.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Xb(Db);if(e.code){const r=e.code;let o=this.hybridAuthCodeResponses.get(r);return o?(this.logger.verbose("Existing acquireTokenByCode request found",t),n.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),o=this.acquireTokenByCodeAsync(s(s({},e),{},{correlationId:t})).then(e=>(this.eventHandler.emitEvent(Hf,tf.Silent,e),this.hybridAuthCodeResponses.delete(r),n.end({success:!0,accessTokenSize:e.accessToken.length,idTokenSize:e.idToken.length},void 0,e.account),e)).catch(e=>{throw this.hybridAuthCodeResponses.delete(r),this.eventHandler.emitEvent(Bf,tf.Silent,null,e),n.end({success:!1},e),e}),this.hybridAuthCodeResponses.set(r,o)),await o}if(e.nativeAccountId){if(this.canUsePlatformBroker(e,e.nativeAccountId)){n.add({isPlatformBrokerRequest:!0});const r=await this.acquireTokenNative(s(s({},e),{},{correlationId:t}),$p,e.nativeAccountId).catch(e=>{throw e instanceof E_&&I_(e)&&(this.platformAuthProvider=void 0),n.add({brokerErrorName:e.name,brokerErrorCode:e.errorCode}),e});return n.end({success:!0},void 0,r.account),r}throw Xb(Fb)}throw Xb(Nb)}catch(r){throw this.eventHandler.emitEvent(Bf,tf.Silent,null,r),n.end({success:!1},r),r}}async acquireTokenByCodeAsync(e){var t;this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(gv,e.correlationId),null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement);const n=this.createSilentAuthCodeClient(e.correlationId);return await n.acquireToken(e).then(e=>{var t;return null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!0,fromCache:e.fromCache}),e}).catch(e=>{var t;throw null===(t=this.acquireTokenByCodeAsyncMeasurement)||void 0===t||t.end({success:!1},e),e}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(xy,e.correlationId),t){case ff:case mf:case gf:const t=this.createSilentCacheClient(e.correlationId);return nS(t.acquireToken.bind(t),fy,this.logger,this.performanceClient,e.correlationId)(e);default:throw ng(Bm)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(ay,e.correlationId),t){case ff:case gf:case yf:case vf:const t=this.createSilentRefreshClient(e.correlationId);return nS(t.acquireToken.bind(t),yy,this.logger,this.performanceClient,e.correlationId)(e);default:throw ng(Bm)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(My,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return nS(t.acquireToken.bind(t),my,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect(s({correlationId:t},e))}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);Ck(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0,qp);return this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);_k(this.initialized),this.browserStorage.setInteractionInProgress(!0,qp);return this.createPopupClient(t).logout(e).finally(()=>{this.browserStorage.setInteractionInProgress(!1)})}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment)return void this.logger.info("in non-browser environment, returning early.");const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){const t=this.getRequestCorrelationId();return function(e,t,n,r,o){return e.verbose("getAllAccounts called"),n?t.getAllAccounts(o||{},r):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,t,e)}getAccount(e){const t=this.getRequestCorrelationId();return function(e,t,n,r){const o=n.getAccountInfoFilteredBy(e,r);return o?(t.verbose("getAccount: Account matching provided filter found, returning"),o):(t.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByUsername(e){const t=this.getRequestCorrelationId();return function(e,t,n,r){if(t.trace("getAccountByUsername called"),!e)return t.warning("getAccountByUsername: No username provided"),null;const o=n.getAccountInfoFilteredBy({username:e},r);return o?(t.verbose("getAccountByUsername: Account matching username found, returning"),t.verbosePii("getAccountByUsername: Returning signed-in accounts matching username: ".concat(e)),o):(t.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByHomeId(e){const t=this.getRequestCorrelationId();return function(e,t,n,r){if(t.trace("getAccountByHomeId called"),!e)return t.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=n.getAccountInfoFilteredBy({homeAccountId:e},r);return o?(t.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),t.verbosePii("getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ".concat(e)),o):(t.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}getAccountByLocalId(e){const t=this.getRequestCorrelationId();return function(e,t,n,r){if(t.trace("getAccountByLocalId called"),!e)return t.warning("getAccountByLocalId: No localAccountId provided"),null;const o=n.getAccountInfoFilteredBy({localAccountId:e},r);return o?(t.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),t.verbosePii("getAccountByLocalId: Returning signed-in accounts matching localAccountId: ".concat(e)),o):(t.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,t)}setActiveAccount(e){const t=this.getRequestCorrelationId();!function(e,t,n){t.setActiveAccount(e,n)}(e,this.browserStorage,t)}getActiveAccount(){const e=this.getRequestCorrelationId();return function(e,t){return e.getActiveAccount(t)}(this.browserStorage,e)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const n=DS.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return await this.browserStorage.setAccount(n,e.correlationId),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,n,r){if(this.logger.trace("acquireTokenNative called"),!this.platformAuthProvider)throw Xb(zb);return new O_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.platformAuthProvider,n||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e,r)}canUsePlatformBroker(e,t){if(this.logger.trace("canUsePlatformBroker called"),!this.platformAuthProvider)return this.logger.trace("canUsePlatformBroker: platform broker unavilable, returning false"),!1;if(!Y_(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme))return this.logger.trace("canUsePlatformBroker: isBrokerAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case ph:case hh:case uh:case dh:this.logger.trace("canUsePlatformBroker: prompt is compatible with platform broker flow");break;default:return this.logger.trace("canUsePlatformBroker: prompt = ".concat(e.prompt," is not compatible with platform broker flow, returning false")),!1}return!(!t&&!this.getNativeAccountId(e))||(this.logger.trace("canUsePlatformBroker: nativeAccountId is not available, returning false"),!1)}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new J_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createRedirectClient(e){return new $_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentIframeClient(e){return new aC(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Yp,this.performanceClient,this.nativeInternalStorage,this.platformAuthProvider,e)}createSilentCacheClient(e){return new R_(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentRefreshClient(e){return new cC(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.platformAuthProvider,e)}createSilentAuthCodeClient(e){return new dC(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,$p,this.performanceClient,this.platformAuthProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return kk(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){this.config.cache.cacheLocation===Mp?this.eventHandler.subscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}disableAccountStorageEvents(){this.config.cache.cacheLocation===Mp?this.eventHandler.unsubscribeCrossTab():this.logger.info("Account storage events are only available when cacheLocation is set to localStorage")}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return null!==e&&void 0!==e&&e.correlationId?e.correlationId:this.isBrowserEnvironment?sk():Hd.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect(s({correlationId:t},e||uf))}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup(s({correlationId:t},e||uf))}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),n=this.performanceClient.startMeasurement(sy,t);n.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),hC(this.initialized,n,e.account),this.logger.verbose("acquireTokenSilent called",t);const r=e.account||this.getActiveAccount();if(!r)throw Xb(bb);return this.acquireTokenSilentDeduped(e,r,t).then(r=>(n.end({success:!0,fromCache:r.fromCache,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length},void 0,r.account),s(s({},r),{},{state:e.state,correlationId:t}))).catch(e=>{throw e instanceof ip&&e.setCorrelationId(t),n.end({success:!1},e,r),e})}async acquireTokenSilentDeduped(e,t,n){const r=LS(this.config.auth.clientId,s(s({},e),{},{authority:e.authority||this.config.auth.authority,correlationId:n}),t.homeAccountId),o=JSON.stringify(r),i=this.activeSilentTokenRequests.get(o);if("undefined"===typeof i){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n),this.performanceClient.addFields({deduped:!1},n);const r=nS(this.acquireTokenSilentAsync.bind(this),cy,this.logger,this.performanceClient,n)(s(s({},e),{},{correlationId:n}),t);return this.activeSilentTokenRequests.set(o,r),r.finally(()=>{this.activeSilentTokenRequests.delete(o)})}return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),this.performanceClient.addFields({deduped:!0},n),i}async acquireTokenSilentAsync(e,t){const n=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(cy,e.correlationId),this.eventHandler.emitEvent(Of,tf.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",n);const r=await nS(m_,Ny,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),o=e.cacheLookupPolicy||ff,i=this.acquireTokenSilentNoIframe(r,o).catch(async e=>{const t=function(e,t){const n=!(e instanceof xS&&e.subError!==TS),r=e.errorCode===fp||e.errorCode===Bm,o=n&&r||e.errorCode===kS||e.errorCode===_S,i=wf.includes(t);return o&&i}(e,o);if(t){if(this.activeIframeRequest){if(o!==bf){const[t,n]=this.activeIframeRequest;this.logger.verbose("Iframe request is already in progress, awaiting resolution for request with correlationId: ".concat(n),r.correlationId);const i=this.performanceClient.startMeasurement(gy,r.correlationId);i.add({awaitIframeCorrelationId:n});const a=await t;if(i.end({success:a}),a)return this.logger.verbose("Parallel iframe request with correlationId: ".concat(n," succeeded. Retrying cache and/or RT redemption"),r.correlationId),this.acquireTokenSilentNoIframe(r,o);throw this.logger.info("Iframe request with correlationId: ".concat(n," failed. Interaction is required.")),e}return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",r.correlationId),nS(this.acquireTokenBySilentIframe.bind(this),My,this.logger,this.performanceClient,r.correlationId)(r)}{let e;return this.activeIframeRequest=[new Promise(t=>{e=t}),r.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",r.correlationId),nS(this.acquireTokenBySilentIframe.bind(this),My,this.logger,this.performanceClient,r.correlationId)(r).then(t=>(e(!0),t)).catch(t=>{throw e(!1),t}).finally(()=>{this.activeIframeRequest=void 0})}}throw e});return i.then(t=>(this.eventHandler.emitEvent(Nf,tf.Silent,t),this.performanceClient.addFields({fromCache:t.fromCache},e.correlationId),t)).catch(e=>{throw this.eventHandler.emitEvent(Df,tf.Silent,null,e),e}).finally(()=>{document.removeEventListener("visibilitychange",n)})}async acquireTokenSilentNoIframe(e,t){return Y_(this.config,this.logger,this.platformAuthProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.performanceClient.addFields({isPlatformBrokerRequest:!0},e.correlationId),this.acquireTokenNative(e,Xp,e.account.nativeAccountId,t).catch(async t=>{if(this.performanceClient.addFields({brokerErrorName:t.name,brokerErrorCode:t.errorCode},e.correlationId),t instanceof E_&&I_(t))throw this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.platformAuthProvider=void 0,ng(Bm);throw t})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),t===mf&&this.logger.verbose("acquireTokenSilent - cache lookup policy set to AccessToken, attempting to acquire token from local cache"),nS(this.acquireTokenFromCache.bind(this),xy,this.logger,this.performanceClient,e.correlationId)(e,t).catch(n=>{if(t===mf)throw n;return this.eventHandler.emitEvent(Lf,tf.Silent,e),nS(this.acquireTokenByRefreshToken.bind(this),ay,this.logger,this.performanceClient,e.correlationId)(e,t)}))}async preGeneratePkceCodes(e){return this.logger.verbose("Generating new PKCE codes"),this.pkceCode=await nS(B_,Ev,this.logger,this.performanceClient,e)(this.performanceClient,this.logger,e),Promise.resolve()}getPreGeneratedPkceCodes(e){this.logger.verbose("Attempting to pick up pre-generated PKCE codes");const t=this.pkceCode?s({},this.pkceCode):void 0;return this.pkceCode=void 0,this.logger.verbose("".concat(t?"Found":"Did not find"," pre-generated PKCE codes")),this.performanceClient.addFields({usePreGeneratedPkce:!!t},e),t}logMultipleInstances(e){const t=this.config.auth.clientId;if(!window)return;window.msal=window.msal||{},window.msal.clientIds=window.msal.clientIds||[];window.msal.clientIds.length>0&&this.logger.verbose("There is already an instance of MSAL.js in the window."),window.msal.clientIds.push(t),function(e,t,n){var r;const o=(null===(r=window.msal)||void 0===r?void 0:r.clientIds)||[],i=o.length,a=o.filter(t=>t===e).length;a>1&&n.warning("There is already an instance of MSAL.js in the window with the same client id."),t.add({msalInstanceCount:i,sameClientIdInstanceCount:a})}(t,e,this.logger)}}class fC{static async createPublicClientApplication(e){const t=await async function(e,t){const n=new Uk(e);return await n.initialize(),pC.createController(n,t)}(e);return new fC(e,t)}constructor(e,t){this.isBroker=!1,this.controller=t||new pC(new Uk(e))}async initialize(e){return this.controller.initialize(e,this.isBroker)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}function mC(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var gC;!function(e){e.GET="GET",e.PATCH="PATCH",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE"}(gC||(gC={}));class yC{static validateDependencies(e){if(0===e.size){const e=new Error("Empty requests map, Please provide at least one request.");throw e.name="Empty Requests Error",e}return(e=>{const t=e.entries();let n=t.next();for(;!n.done;){const e=n.value[1];if(void 0!==e.dependsOn&&e.dependsOn.length>0)return!1;n=t.next()}return!0})(e)||(e=>{const t=e.entries();let n=t.next();const r=n.value[1];if(void 0!==r.dependsOn&&r.dependsOn.length>0)return!1;let o=n;for(n=t.next();!n.done;){const e=n.value[1];if(void 0===e.dependsOn||1!==e.dependsOn.length||e.dependsOn[0]!==o.value[1].id)return!1;o=n,n=t.next()}return!0})(e)||(e=>{const t=e.entries();let n=t.next();const r=n.value[1];let o;if(void 0===r.dependsOn||0===r.dependsOn.length)o=r.id;else{if(1!==r.dependsOn.length)return!1;{const t=r.dependsOn[0];if(t===r.id||!e.has(t))return!1;o=t}}for(n=t.next();!n.done;){const e=n.value[1];if((void 0===e.dependsOn||0===e.dependsOn.length)&&o!==e.id)return!1;if(void 0!==e.dependsOn&&0!==e.dependsOn.length){if(1===e.dependsOn.length&&(e.id===o||e.dependsOn[0]!==o))return!1;if(e.dependsOn.length>1)return!1}n=t.next()}return!0})(e)}static getRequestData(e){return mC(this,void 0,void 0,function*(){const t={url:""},n=new RegExp("^https?://");t.url=n.test(e.url)?"/"+e.url.split(/.*?\/\/.*?\//)[1]:e.url,t.method=e.method;const r={};return e.headers.forEach((e,t)=>{r[t]=e}),Object.keys(r).length&&(t.headers=r),e.method!==gC.PATCH&&e.method!==gC.POST&&e.method!==gC.PUT||(t.body=yield yC.getRequestBody(e)),t})}static getRequestBody(e){return mC(this,void 0,void 0,function*(){let t,n=!1;try{const r=e.clone();t=yield r.json(),n=!0}catch(r){}if(!n)try{if("undefined"!==typeof Blob){const n=yield e.blob(),r=new FileReader;t=yield new Promise(e=>{r.addEventListener("load",()=>{const t=r.result,n=new RegExp("^s*data:(.+?/.+?(;.+?=.+?)*)?(;base64)?,(.*)s*$").exec(t);e(n[4])},!1),r.readAsDataURL(n)})}else if("undefined"!==typeof Buffer){t=(yield e.buffer()).toString("base64")}n=!0}catch(r){}return t})}constructor(e){if(this.requests=new Map,"undefined"!==typeof e){const t=yC.requestLimit;if(e.length>t){const e=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(t));throw e.name="Limit Exceeded Error",e}for(const n of e)this.addRequest(n)}}addRequest(e){const t=yC.requestLimit;if(""===e.id){const e=new Error("Id for a request is empty, Please provide an unique id");throw e.name="Empty Id For Request",e}if(this.requests.size===t){const e=new Error("Maximum requests limit exceeded, Max allowed number of requests are ".concat(t));throw e.name="Limit Exceeded Error",e}if(this.requests.has(e.id)){const t=new Error("Adding request with duplicate id ".concat(e.id,", Make the id of the requests unique"));throw t.name="Duplicate RequestId Error",t}return this.requests.set(e.id,e),e.id}removeRequest(e){const t=this.requests.delete(e),n=this.requests.entries();let r=n.next();for(;!r.done;){const t=r.value[1].dependsOn;if("undefined"!==typeof t){const n=t.indexOf(e);-1!==n&&t.splice(n,1),0===t.length&&delete r.value[1].dependsOn}r=n.next()}return t}getContent(){return mC(this,void 0,void 0,function*(){const e=[],t={requests:e},n=this.requests.entries();let r=n.next();if(r.done){const e=new Error("No requests added yet, Please add at least one request.");throw e.name="Empty Payload",e}if(!yC.validateDependencies(this.requests)){const e=new Error("Invalid dependency found, Dependency should be:\n1. Parallel - no individual request states a dependency in the dependsOn property.\n2. Serial - all individual requests depend on the previous individual request.\n3. Same - all individual requests that state a dependency in the dependsOn property, state the same dependency.");throw e.name="Invalid Dependency",e}for(;!r.done;){const t=r.value[1],o=yield yC.getRequestData(t.request);if(void 0!==o.body&&(void 0===o.headers||void 0===o.headers["content-type"])){const e=new Error("Content-type header is not mentioned for request #".concat(t.id,", For request having body, Content-type header should be mentioned"));throw e.name="Invalid Content-type header",e}o.id=t.id,void 0!==t.dependsOn&&t.dependsOn.length>0&&(o.dependsOn=t.dependsOn),e.push(o),r=n.next()}return t.requests=e,t})}addDependency(e,t){if(!this.requests.has(e)){const t=new Error("Dependent ".concat(e," does not exists, Please check the id"));throw t.name="Invalid Dependent",t}if("undefined"!==typeof t&&!this.requests.has(t)){const e=new Error("Dependency ".concat(t," does not exists, Please check the id"));throw e.name="Invalid Dependency",e}if("undefined"!==typeof t){const n=this.requests.get(e);if(void 0===n.dependsOn&&(n.dependsOn=[]),-1!==n.dependsOn.indexOf(t)){const n=new Error("Dependency ".concat(t," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}n.dependsOn.push(t)}else{const n=this.requests.entries();let r,o=n.next();for(;!o.done&&o.value[1].id!==e;)r=o,o=n.next();if("undefined"===typeof r){const e=new Error("Can't add dependency ".concat(t,", There is only a dependent request in the batch"));throw e.name="Invalid Dependency Addition",e}{const t=r.value[0];if(void 0===o.value[1].dependsOn&&(o.value[1].dependsOn=[]),-1!==o.value[1].dependsOn.indexOf(t)){const n=new Error("Dependency ".concat(t," is already added for the request ").concat(e));throw n.name="Duplicate Dependency",n}o.value[1].dependsOn.push(t)}}}removeDependency(e,t){const n=this.requests.get(e);if("undefined"===typeof n||void 0===n.dependsOn||0===n.dependsOn.length)return!1;if("undefined"!==typeof t){const e=n.dependsOn.indexOf(t);return-1!==e&&(n.dependsOn.splice(e,1),!0)}return delete n.dependsOn,!0}}yC.requestLimit=20;const vC=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class bC extends Error{static setGraphClientError(e){let t;return e instanceof Error?t=e:(t=new bC,t.customError=e),t}constructor(e){super(e),Object.setPrototypeOf(this,bC.prototype)}}const wC=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],kC=e=>{const t=e&&e.constructor&&e.constructor.name;if("Buffer"===t||"Blob"===t||"File"===t||"FormData"===t||"string"===typeof e)return e;if("ArrayBuffer"===t)e=Buffer.from(e);else if("Int8Array"===t||"Int16Array"===t||"Int32Array"===t||"Uint8Array"===t||"Uint16Array"===t||"Uint32Array"===t||"Uint8ClampedArray"===t||"Float32Array"===t||"Float64Array"===t||"DataView"===t)e=Buffer.from(e.buffer);else try{e=JSON.stringify(e)}catch(n){throw new Error("Unable to stringify the content")}return e},SC=e=>CC(e),_C=(e,t)=>(t.forEach(e=>TC(e)),CC(e,t)),CC=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vC;if(-1!==(e=e.toLowerCase()).indexOf("https://")){const n=(e=e.replace("https://","")).indexOf(":"),r=e.indexOf("/");let o="";if(-1!==r)return-1!==n&&n<r?(o=e.substring(0,n),t.has(o)):(o=e.substring(0,r),t.has(o))}return!1},TC=e=>{if(-1!==e.indexOf("/"))throw new bC("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class EC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.middlewareOptions=new Map;for(const t of e){const e=t.constructor;this.middlewareOptions.set(e,t)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,t){this.middlewareOptions.set(e,t)}}const IC=(e,t,n)=>{let r=null;if("undefined"!==typeof Request&&e instanceof Request)r=e.headers.get(n);else if("undefined"!==typeof t&&void 0!==t.headers)if("undefined"!==typeof Headers&&t.headers instanceof Headers)r=t.headers.get(n);else if(t.headers instanceof Array){const e=t.headers;for(let t=0,o=e.length;t<o;t++)if(e[t][0]===n){r=e[t][1];break}}else void 0!==t.headers[n]&&(r=t.headers[n]);return r},AC=(e,t,n,r)=>{if("undefined"!==typeof Request&&e instanceof Request)e.headers.set(n,r);else if("undefined"!==typeof t)if(void 0===t.headers)t.headers=new Headers({[n]:r});else if("undefined"!==typeof Headers&&t.headers instanceof Headers)t.headers.set(n,r);else if(t.headers instanceof Array){let e=0;const o=t.headers.length;for(;e<o;e++){const o=t.headers[e];if(o[0]===n){o[1]=r;break}}e===o&&t.headers.push([n,r])}else Object.assign(t.headers,{[n]:r})},xC=(e,t,n,r)=>{"undefined"!==typeof Request&&e instanceof Request?e.headers.append(n,r):"undefined"!==typeof t&&(void 0===t.headers?t.headers=new Headers({[n]:r}):"undefined"!==typeof Headers&&t.headers instanceof Headers?t.headers.append(n,r):t.headers instanceof Array?t.headers.push([n,r]):void 0===t.headers?t.headers={[n]:r}:void 0===t.headers[n]?t.headers[n]=r:t.headers[n]+=", ".concat(r))};class RC{constructor(e,t){this.authenticationProvider=e,this.authenticationProviderOptions=t}}var PC;!function(e){e[e.NONE=0]="NONE",e[e.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",e[e.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",e[e.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"}(PC||(PC={}));class MC{constructor(){this.featureUsage=PC.NONE}static updateFeatureUsageFlag(e,t){let n;e.middlewareControl instanceof EC?n=e.middlewareControl.getMiddlewareOptions(MC):e.middlewareControl=new EC,"undefined"===typeof n&&(n=new MC,e.middlewareControl.setMiddlewareOptions(MC,n)),n.setFeatureUsage(t)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class OC{constructor(e){this.authenticationProvider=e}execute(e){return mC(this,void 0,void 0,function*(){const t="string"===typeof e.request?e.request:e.request.url;if(SC(t)||e.customHosts&&_C(t,e.customHosts)){let t,n,r;e.middlewareControl instanceof EC&&(t=e.middlewareControl.getMiddlewareOptions(RC)),t&&(n=t.authenticationProvider,r=t.authenticationProviderOptions),n||(n=this.authenticationProvider);const o=yield n.getAccessToken(r),i="Bearer ".concat(o);xC(e.request,e.options,OC.AUTHORIZATION_HEADER,i),MC.updateFeatureUsageFlag(e,PC.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[OC.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}OC.AUTHORIZATION_HEADER="Authorization";class NC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NC.DEFAULT_DELAY,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NC.DEFAULT_MAX_RETRIES,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NC.defaultShouldRetry;if(e>NC.MAX_DELAY&&t>NC.MAX_MAX_RETRIES){const e=new Error("Delay and MaxRetries should not be more than ".concat(NC.MAX_DELAY," and ").concat(NC.MAX_MAX_RETRIES));throw e.name="MaxLimitExceeded",e}if(e>NC.MAX_DELAY){const e=new Error("Delay should not be more than ".concat(NC.MAX_DELAY));throw e.name="MaxLimitExceeded",e}if(t>NC.MAX_MAX_RETRIES){const e=new Error("MaxRetries should not be more than ".concat(NC.MAX_MAX_RETRIES));throw e.name="MaxLimitExceeded",e}if(e<0&&t<0){const e=new Error("Delay and MaxRetries should not be negative");throw e.name="MinExpectationNotMet",e}if(e<0){const e=new Error("Delay should not be negative");throw e.name="MinExpectationNotMet",e}if(t<0){const e=new Error("MaxRetries should not be negative");throw e.name="MinExpectationNotMet",e}this.delay=Math.min(e,NC.MAX_DELAY),this.maxRetries=Math.min(t,NC.MAX_MAX_RETRIES),this.shouldRetry=n}getMaxDelay(){return NC.MAX_DELAY}}NC.DEFAULT_DELAY=3,NC.DEFAULT_MAX_RETRIES=3,NC.MAX_DELAY=180,NC.MAX_MAX_RETRIES=10,NC.defaultShouldRetry=()=>!0;class DC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new NC;this.options=e}isRetry(e){return-1!==DC.RETRY_STATUS_CODES.indexOf(e.status)}isBuffered(e,t){const n="string"===typeof e?t.method:e.method;if(n===gC.PUT||n===gC.PATCH||n===gC.POST){if("application/octet-stream"===IC(e,t,"Content-Type"))return!1}return!0}getDelay(e,t,n){const r=()=>Number(Math.random().toFixed(3)),o=void 0!==e.headers?e.headers.get(DC.RETRY_AFTER_HEADER):null;let i;return i=null!==o?Number.isNaN(Number(o))?Math.round((new Date(o).getTime()-Date.now())/1e3):Number(o):t>=2?this.getExponentialBackOffTime(t)+n+r():n+r(),Math.min(i,this.options.getMaxDelay()+r())}getExponentialBackOffTime(e){return Math.round(.5*(Math.pow(2,e)-1))}sleep(e){return mC(this,void 0,void 0,function*(){const t=1e3*e;return new Promise(e=>setTimeout(e,t))})}getOptions(e){let t;return e.middlewareControl instanceof EC&&(t=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),"undefined"===typeof t&&(t=Object.assign(new NC,this.options)),t}executeWithRetry(e,t,n){return mC(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),t<n.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&n.shouldRetry(n.delay,t,e.request,e.options,e.response)){++t,AC(e.request,e.options,DC.RETRY_ATTEMPT_HEADER,t.toString());const r=this.getDelay(e.response,t,n.delay);return yield this.sleep(r),yield this.executeWithRetry(e,t,n)}})}execute(e){return mC(this,void 0,void 0,function*(){const t=this.getOptions(e);return MC.updateFeatureUsageFlag(e,PC.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,t)})}setNext(e){this.nextMiddleware=e}}DC.RETRY_STATUS_CODES=[429,503,504],DC.RETRY_ATTEMPT_HEADER="Retry-Attempt",DC.RETRY_AFTER_HEADER="Retry-After";class LC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:LC.DEFAULT_MAX_REDIRECTS,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LC.defaultShouldRedirect;if(e>LC.MAX_MAX_REDIRECTS){const e=new Error("MaxRedirects should not be more than ".concat(LC.MAX_MAX_REDIRECTS));throw e.name="MaxLimitExceeded",e}if(e<0){const e=new Error("MaxRedirects should not be negative");throw e.name="MinExpectationNotMet",e}this.maxRedirects=e,this.shouldRedirect=t}}LC.DEFAULT_MAX_REDIRECTS=5,LC.MAX_MAX_REDIRECTS=20,LC.defaultShouldRedirect=()=>!0;class FC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new LC;this.options=e}isRedirect(e){return-1!==FC.REDIRECT_STATUS_CODES.indexOf(e.status)}hasLocationHeader(e){return e.headers.has(FC.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(FC.LOCATION_HEADER)}isRelativeURL(e){return-1===e.indexOf("://")}shouldDropAuthorizationHeader(e,t){const n=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,r=n.exec(e);let o,i;null!==r&&(o=r[0]);const a=n.exec(t);return null!==a&&(i=a[0]),"undefined"!==typeof o&&"undefined"!==typeof i&&o!==i}updateRequestUrl(e,t){return mC(this,void 0,void 0,function*(){var n,r;t.request="string"===typeof t.request?e:yield(n=e,r=t.request,mC(void 0,void 0,void 0,function*(){const e=r.headers.get("Content-Type")?yield r.blob():yield Promise.resolve(void 0),{method:t,headers:o,referrer:i,referrerPolicy:a,mode:s,credentials:c,cache:l,redirect:u,integrity:d,keepalive:h,signal:p}=r;return new Request(n,{method:t,headers:o,body:e,referrer:i,referrerPolicy:a,mode:s,credentials:c,cache:l,redirect:u,integrity:d,keepalive:h,signal:p})}))})}getOptions(e){let t;return e.middlewareControl instanceof EC&&(t=e.middlewareControl.getMiddlewareOptions(LC)),"undefined"===typeof t&&(t=Object.assign(new LC,this.options)),t}executeWithRedirect(e,t,n){return mC(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const r=e.response;if(t<n.maxRedirects&&this.isRedirect(r)&&this.hasLocationHeader(r)&&n.shouldRedirect(r)){if(++t,r.status===FC.STATUS_CODE_SEE_OTHER)e.options.method=gC.GET,delete e.options.body;else{const t=this.getLocationHeader(r);!this.isRelativeURL(t)&&this.shouldDropAuthorizationHeader(r.url,t)&&delete e.options.headers[FC.AUTHORIZATION_HEADER],yield this.updateRequestUrl(t,e)}yield this.executeWithRedirect(e,t,n)}})}execute(e){return mC(this,void 0,void 0,function*(){const t=this.getOptions(e);return e.options.redirect=FC.MANUAL_REDIRECT,MC.updateFeatureUsageFlag(e,PC.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,t)})}setNext(e){this.nextMiddleware=e}}FC.REDIRECT_STATUS_CODES=[301,302,303,307,308],FC.STATUS_CODE_SEE_OTHER=303,FC.LOCATION_HEADER="Location",FC.AUTHORIZATION_HEADER="Authorization",FC.MANUAL_REDIRECT="manual";class qC{execute(e){return mC(this,void 0,void 0,function*(){const t="string"===typeof e.request?e.request:e.request.url;if(SC(t)||e.customHosts&&_C(t,e.customHosts)){let t=IC(e.request,e.options,qC.CLIENT_REQUEST_ID_HEADER);t||(t=(()=>{let e="";for(let t=0;t<32;t++)8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=Math.floor(16*Math.random()).toString(16);return e})(),AC(e.request,e.options,qC.CLIENT_REQUEST_ID_HEADER,t));let n,r="".concat(qC.PRODUCT_NAME,"/").concat("3.0.7");if(e.middlewareControl instanceof EC&&(n=e.middlewareControl.getMiddlewareOptions(MC)),n){const e=n.getFeatureUsage();r+=" (".concat(qC.FEATURE_USAGE_STRING,"=").concat(e,")")}xC(e.request,e.options,qC.SDK_VERSION_HEADER,r)}else delete e.options.headers[qC.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[qC.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}qC.CLIENT_REQUEST_ID_HEADER="client-request-id",qC.SDK_VERSION_HEADER="SdkVersion",qC.PRODUCT_NAME="graph-js",qC.FEATURE_USAGE_STRING="featureUsage";var UC;!function(e){e[e.MANUAL=0]="MANUAL",e[e.RANDOM=1]="RANDOM"}(UC||(UC={}));var zC,HC,BC,jC;!function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.RAW="raw",e.STREAM="stream",e.TEXT="text"}(zC||(zC={})),function(e){e.TEXT_HTML="text/html",e.TEXT_XML="text/xml",e.APPLICATION_XML="application/xml",e.APPLICATION_XHTML="application/xhtml+xml"}(HC||(HC={})),function(e){e.TEXT_PLAIN="text/plain",e.APPLICATION_JSON="application/json"}(BC||(BC={})),function(e){e.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",e.IMAGE="^image\\/.+"}(jC||(jC={}));class WC{static parseDocumentResponse(e,t){return"undefined"!==typeof DOMParser?new Promise((n,r)=>{e.text().then(e=>{try{const r=(new DOMParser).parseFromString(e,t);n(r)}catch(o){r(o)}})}):Promise.resolve(e.body)}static convertResponse(e,t){return mC(this,void 0,void 0,function*(){if(204===e.status)return Promise.resolve();let n;const r=e.headers.get("Content-type");switch(t){case zC.ARRAYBUFFER:n=yield e.arrayBuffer();break;case zC.BLOB:n=yield e.blob();break;case zC.DOCUMENT:n=yield WC.parseDocumentResponse(e,HC.TEXT_XML);break;case zC.JSON:n=yield e.json();break;case zC.STREAM:n=yield Promise.resolve(e.body);break;case zC.TEXT:n=yield e.text();break;default:if(null!==r){const t=r.split(";")[0];n=new RegExp(jC.DOCUMENT).test(t)?yield WC.parseDocumentResponse(e,t):new RegExp(jC.IMAGE).test(t)?e.blob():t===BC.TEXT_PLAIN?yield e.text():t===BC.APPLICATION_JSON?yield e.json():Promise.resolve(e.body)}else n=Promise.resolve(e.body)}return n})}static getResponse(e,t,n){return mC(this,void 0,void 0,function*(){if(t===zC.RAW)return Promise.resolve(e);{const r=yield WC.convertResponse(e,t);if(!e.ok)throw r;if("function"!==typeof n)return r;n(null,r)}})}}class KC{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.minValue=e,this.maxValue=t}}class GC{get location(){return this._location}set location(e){this._location=e}get responseBody(){return this._responseBody}set responseBody(e){this._responseBody=e}constructor(e,t){this._location=t,this._responseBody=e}static CreateUploadResult(e,t){return new GC(e,t.get("location"))}}class VC{static createUploadSession(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return mC(this,void 0,void 0,function*(){const o=yield e.api(t).headers(r).post(n);return{url:o.uploadUrl,expiry:new Date(o.expirationDateTime),isCancelled:!1}})}constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(this.DEFAULT_FILE_SIZE=5242880,this.client=e,!t.sliceFile)throw new bC("Please pass the FileUpload object, StreamUpload object or any custom implementation of the FileObject interface");this.file=t,this.file=t,r.rangeSize||(r.rangeSize=this.DEFAULT_FILE_SIZE),this.options=r,this.uploadSession=n,this.nextRange=new KC(0,this.options.rangeSize-1)}parseRange(e){const t=e[0];if("undefined"===typeof t||""===t)return new KC;const n=t.split("-"),r=parseInt(n[0],10);let o=parseInt(n[1],10);return Number.isNaN(o)&&(o=this.file.size-1),new KC(r,o)}updateTaskStatus(e){this.uploadSession.expiry=new Date(e.expirationDateTime),this.nextRange=this.parseRange(e.nextExpectedRanges)}getNextRange(){if(-1===this.nextRange.minValue)return this.nextRange;const e=this.nextRange.minValue;let t=e+this.options.rangeSize-1;return t>=this.file.size&&(t=this.file.size-1),new KC(e,t)}sliceFile(e){if(console.warn("The LargeFileUploadTask.sliceFile() function has been deprecated and moved into the FileObject interface."),this.file.content instanceof ArrayBuffer||this.file.content instanceof Blob||this.file.content instanceof Uint8Array)return this.file.content.slice(e.minValue,e.maxValue+1);throw new bC("The LargeFileUploadTask.sliceFile() function expects only Blob, ArrayBuffer or Uint8Array file content. Please note that the sliceFile() function is deprecated.")}upload(){return mC(this,void 0,void 0,function*(){const e=this.options&&this.options.uploadEventHandlers;for(;!this.uploadSession.isCancelled;){const t=this.getNextRange();if(-1===t.maxValue){const e=new Error("Task with which you are trying to upload is already completed, Please check for your uploaded file");throw e.name="Invalid Session",e}const n=yield this.file.sliceFile(t),r=yield this.uploadSliceGetRawResponse(n,t,this.file.size);if(!r)throw new bC("Something went wrong! Large file upload slice response is null.");const o=yield WC.getResponse(r);if(201===r.status||200===r.status&&o.id)return this.reportProgress(e,t),GC.CreateUploadResult(o,r.headers);const i={expirationDateTime:o.expirationDateTime||o.ExpirationDateTime,nextExpectedRanges:o.NextExpectedRanges||o.nextExpectedRanges};this.updateTaskStatus(i),this.reportProgress(e,t)}})}reportProgress(e,t){e&&e.progress&&e.progress(t,e.extraCallbackParam)}uploadSlice(e,t,n){return mC(this,void 0,void 0,function*(){return yield this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(t.maxValue-t.minValue+1),"Content-Range":"bytes ".concat(t.minValue,"-").concat(t.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).put(e)})}uploadSliceGetRawResponse(e,t,n){return mC(this,void 0,void 0,function*(){return yield this.client.api(this.uploadSession.url).headers({"Content-Length":"".concat(t.maxValue-t.minValue+1),"Content-Range":"bytes ".concat(t.minValue,"-").concat(t.maxValue,"/").concat(n),"Content-Type":"application/octet-stream"}).responseType(zC.RAW).put(e)})}cancel(){return mC(this,void 0,void 0,function*(){const e=yield this.client.api(this.uploadSession.url).responseType(zC.RAW).delete();return 204===e.status&&(this.uploadSession.isCancelled=!0),e})}getStatus(){return mC(this,void 0,void 0,function*(){const e=yield this.client.api(this.uploadSession.url).get();return this.updateTaskStatus(e),e})}resume(){return mC(this,void 0,void 0,function*(){return yield this.getStatus(),yield this.upload()})}getUploadSession(){return this.uploadSession}}class QC{constructor(e,t,n){if(this.content=e,this.name=t,this.size=n,!e||!t||!n)throw new bC("Please provide the upload content, name of the file and size of the file")}sliceFile(e){return this.content.slice(e.minValue,e.maxValue+1)}}const YC=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5242880;const t=62914560;return e>t&&(e=t),(n=e)>327680&&(n=320*Math.floor(n/327680)*1024),n;var n};class JC extends VC{static constructCreateSessionUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:JC.DEFAULT_UPLOAD_PATH;return e=e.trim(),t=t.trim(),""===t&&(t="/"),"/"!==t[0]&&(t="/".concat(t)),"/"!==t[t.length-1]&&(t="".concat(t,"/")),"/me/drive/root:".concat(t.split("/").map(e=>encodeURIComponent(e)).join("/")).concat(encodeURIComponent(e),":/createUploadSession")}static getFileInfo(e,t){let n,r;if("undefined"!==typeof Blob&&e instanceof Blob)n=new File([e],t),r=n.size;else if("undefined"!==typeof File&&e instanceof File)n=e,r=n.size;else if("undefined"!==typeof Uint8Array&&e instanceof Uint8Array){const t=e;r=t.byteLength,n=t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}return{content:n,size:r}}static create(e,t,n){return mC(this,void 0,void 0,function*(){if(!e||!t||!n)throw new bC("Please provide the Graph client instance, file object and OneDriveLargeFileUploadOptions value");const r=n.fileName,o=JC.getFileInfo(t,r),i=new QC(o.content,r,o.size);return this.createTaskWithFileObject(e,i,n)})}static createTaskWithFileObject(e,t,n){return mC(this,void 0,void 0,function*(){if(!e||!t||!n)throw new bC("Please provide the Graph client instance, FileObject interface implementation and OneDriveLargeFileUploadOptions value");const r=n.uploadSessionURL?n.uploadSessionURL:JC.constructCreateSessionUrl(n.fileName,n.path),o={fileName:n.fileName,fileDescription:n.fileDescription,conflictBehavior:n.conflictBehavior},i=yield JC.createUploadSession(e,r,o),a=YC(n.rangeSize);return new JC(e,t,i,{rangeSize:a,uploadEventHandlers:n.uploadEventHandlers})})}static createUploadSession(e,t,n){const r=Object.create(null,{createUploadSession:{get:()=>super.createUploadSession}});return mC(this,void 0,void 0,function*(){const o={item:{"@microsoft.graph.conflictBehavior":(null===n||void 0===n?void 0:n.conflictBehavior)||"rename",name:null===n||void 0===n?void 0:n.fileName,description:null===n||void 0===n?void 0:n.fileDescription}};return r.createUploadSession.call(this,e,t,o)})}constructor(e,t,n,r){super(e,t,n,r)}commit(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"rename";return mC(this,void 0,void 0,function*(){const n={name:this.file.name,"@microsoft.graph.conflictBehavior":t,"@microsoft.graph.sourceUrl":this.uploadSession.url};return yield this.client.api(e).put(n)})}}JC.DEFAULT_UPLOAD_PATH="/";class $C{constructor(e){this.provider=e}getAccessToken(){return mC(this,void 0,void 0,function*(){return new Promise((e,t)=>{this.provider((n,r)=>mC(this,void 0,void 0,function*(){if(r)e(r);else{if(!n){n=new bC("Access token is undefined or empty.\t\t\t\t\t\tPlease provide a valid token.\t\t\t\t\t\tFor more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md")}const e=yield bC.setGraphClientError(n);t(e)}}))})})}}class XC extends Error{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>2?arguments[2]:void 0;super((arguments.length>1?arguments[1]:void 0)||t&&t.message),Object.setPrototypeOf(this,XC.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=t?t.stack:this.stack}}class ZC{static constructError(e,t,n){const r=new XC(t,"",e);return void 0!==e.name&&(r.code=e.name),r.body=e.toString(),r.date=new Date,r.headers=null===n||void 0===n?void 0:n.headers,r}static constructErrorFromResponse(e,t,n){const r=e.error,o=new XC(t,r.message);return o.code=r.code,void 0!==r.innerError&&(o.requestId=r.innerError["request-id"],o.date=new Date(r.innerError.date)),o.body=JSON.stringify(r),o.headers=null===n||void 0===n?void 0:n.headers,o}static getError(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;return mC(this,void 0,void 0,function*(){let o;if(e&&e.error?o=ZC.constructErrorFromResponse(e,t,r):e instanceof Error?o=ZC.constructError(e,t,r):(o=new XC(t),o.body=e),"function"!==typeof n)return o;n(o,null)})}}class eT{constructor(e,t,n){this.parsePath=e=>{if(-1!==e.indexOf("https://")){const t=(e=e.replace("https://","")).indexOf("/");-1!==t&&(this.urlComponents.host="https://"+e.substring(0,t),e=e.substring(t+1,e.length));const n=e.indexOf("/");-1!==n&&(this.urlComponents.version=e.substring(0,n),e=e.substring(n+1,e.length))}"/"===e.charAt(0)&&(e=e.substr(1));const t=e.indexOf("?");if(-1===t)this.urlComponents.path=e;else{this.urlComponents.path=e.substr(0,t);const n=e.substring(t+1,e.length).split("&");for(const e of n)this.parseQueryParameter(e)}},this.httpClient=e,this.config=t,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(n)}addCsvQueryParameter(e,t,n){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let r=[];n.length>1&&"string"===typeof t?r=Array.prototype.slice.call(n):"string"===typeof t?r.push(t):r=r.concat(t),this.urlComponents.oDataQueryParams[e]+=r.join(",")}buildFullUrl(){const e=(e=>{const t=e=>e.replace(/^\/+/,"");return Array.prototype.slice.call(e).reduce((e,n)=>{return[(r=e,r.replace(/\/+$/,"")),t(n)].join("/");var r})})([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,t=[];if(0!==Object.keys(e.oDataQueryParams).length)for(const n in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,n)&&t.push(n+"="+e.oDataQueryParams[n]);if(0!==Object.keys(e.otherURLQueryParams).length)for(const n in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,n)&&t.push(n+"="+e.otherURLQueryParams[n]);if(0!==e.otherURLQueryOptions.length)for(const n of e.otherURLQueryOptions)t.push(n);return t.length>0?"?"+t.join("&"):""}parseQueryParameter(e){if("string"===typeof e)if("?"===e.charAt(0)&&(e=e.substring(1)),-1!==e.indexOf("&")){const t=e.split("&");for(const e of t)this.parseQueryParamenterString(e)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.setURLComponentsQueryParamater(t,e[t]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const t=e.indexOf("="),n=e.substring(0,t),r=e.substring(t+1);this.setURLComponentsQueryParamater(n,r)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,t){if(-1!==wC.indexOf(e)){const n=this.urlComponents.oDataQueryParams[e],r=n&&("$expand"===e||"$select"===e||"$orderby"===e);this.urlComponents.oDataQueryParams[e]=r?n+","+t:t}else this.urlComponents.otherURLQueryParams[e]=t}isValidQueryKeyValuePair(e){const t=e.indexOf("=");if(-1===t)return!1;return!(-1!==e.indexOf("(")&&e.indexOf("(")<t)}updateRequestOptions(e){const t=Object.assign({},e.headers);if(void 0!==this.config.fetchOptions){const t=Object.assign({},this.config.fetchOptions);Object.assign(e,t),void 0!==typeof this.config.fetchOptions.headers&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),void 0!==e.headers&&Object.assign(t,e.headers),Object.assign(t,this._headers),e.headers=t}send(e,t,n){var r;return mC(this,void 0,void 0,function*(){let o;const i=new EC(this._middlewareOptions);this.updateRequestOptions(t);const a=null===(r=this.config)||void 0===r?void 0:r.customHosts;try{o=(yield this.httpClient.sendRequest({request:e,options:t,middlewareControl:i,customHosts:a})).response;return yield WC.getResponse(o,this._responseType,n)}catch(s){if(s instanceof bC)throw s;let e;o&&(e=o.status);throw yield ZC.getError(s,e,n,o)}})}setHeaderContentType(){if(!this._headers)return void this.header("Content-Type","application/json");const e=Object.keys(this._headers);for(const t of e)if("content-type"===t.toLowerCase())return;this.header("Content-Type","application/json")}header(e,t){return this._headers[e]=t,this}headers(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this._headers[t]=e[t]);return this}option(e,t){return this._options[e]=t,this}options(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this._options[t]=e[t]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return mC(this,void 0,void 0,function*(){const t=this.buildFullUrl(),n={method:gC.GET};return yield this.send(t,n,e)})}post(e,t){return mC(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:gC.POST,body:kC(e)};return"FormData"===(e&&e.constructor&&e.constructor.name)?r.headers={}:(this.setHeaderContentType(),r.headers=this._headers),yield this.send(n,r,t)})}create(e,t){return mC(this,void 0,void 0,function*(){return yield this.post(e,t)})}put(e,t){return mC(this,void 0,void 0,function*(){const n=this.buildFullUrl();this.setHeaderContentType();const r={method:gC.PUT,body:kC(e)};return yield this.send(n,r,t)})}patch(e,t){return mC(this,void 0,void 0,function*(){const n=this.buildFullUrl();this.setHeaderContentType();const r={method:gC.PATCH,body:kC(e)};return yield this.send(n,r,t)})}update(e,t){return mC(this,void 0,void 0,function*(){return yield this.patch(e,t)})}delete(e){return mC(this,void 0,void 0,function*(){const t=this.buildFullUrl(),n={method:gC.DELETE};return yield this.send(t,n,e)})}del(e){return mC(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return mC(this,void 0,void 0,function*(){const t=this.buildFullUrl(),n={method:gC.GET};return this.responseType(zC.STREAM),yield this.send(t,n,e)})}putStream(e,t){return mC(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:gC.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(n,r,t)})}}class tT{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t||!t.length){const e=new Error;throw e.name="InvalidMiddlewareChain",e.message="Please provide a default middleware chain or custom middleware chain",e}this.setMiddleware(...t)}setMiddleware(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.length>1?this.parseMiddleWareArray(t):this.middleware=t[0]}parseMiddleWareArray(e){e.forEach((t,n)=>{n<e.length-1&&t.setNext(e[n+1])}),this.middleware=e[0]}sendRequest(e){return mC(this,void 0,void 0,function*(){if("string"===typeof e.request&&void 0===e.options){const e=new Error;throw e.name="InvalidRequestOptions",e.message="Unable to execute the middleware, Please provide valid options for a request",e}return yield this.middleware.execute(e),e})}}class nT{execute(e){return mC(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class rT{static createWithAuthenticationProvider(e){const t=new OC(e),n=new DC(new NC),r=new qC,o=new nT;if(t.setNext(n),"object"===typeof process){const e=new FC(new LC);n.setNext(e),e.setNext(r)}else n.setNext(r);return r.setNext(o),rT.createWithMiddleware(t)}static createWithMiddleware(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tT(...t)}}class oT{static init(e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]="authProvider"===n?new $C(e[n]):e[n]);return oT.initWithMiddleware(t)}static initWithMiddleware(e){return new oT(e)}constructor(e){this.config={baseUrl:"https://graph.microsoft.com/",debugLogging:!1,defaultVersion:"v1.0"},(()=>{if("undefined"===typeof Promise&&"undefined"===typeof fetch){const e=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw e.name="PolyFillNotAvailable",e}if("undefined"===typeof Promise){const e=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}if("undefined"===typeof fetch){const e=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw e.name="PolyFillNotAvailable",e}})();for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.config[n]=e[n]);let t;if(void 0!==e.authProvider&&void 0!==e.middleware){const e=new Error;throw e.name="AmbiguityInInitialization",e.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",e}if(void 0!==e.authProvider)t=rT.createWithAuthenticationProvider(e.authProvider);else{if(void 0===e.middleware){const e=new Error;throw e.name="InvalidMiddlewareChain",e.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",e}t=new tT(...[].concat(e.middleware))}this.httpClient=t}api(e){return new eT(this.httpClient,this.config,e)}}const iT="4a53daad-6722-4d4e-ad09-318c51ad4c50",aT="24369e0d-cf1e-434c-8c7c-7dc57a4e0adf",sT="http://localhost:3000";console.log("\ud83d\udd27 MSAL Config:",{clientId:iT?"".concat(iT.substring(0,8),"..."):"MISSING",tenantId:aT?"".concat(aT.substring(0,8),"..."):"MISSING",redirectUri:sT});const cT={auth:{clientId:iT||"",authority:"https://login.microsoftonline.com/".concat(aT||"common"),redirectUri:sT,postLogoutRedirectUri:sT,navigateToLoginRequestUrl:!1},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!1}},lT=new fC(cT);var uT=n(579);const dT=[{title:"Upcoming School Event: Science Fair 2025",date:"2025-10-30",description:"Join us for the annual Science Fair showcasing projects from all grades. Parents are welcome!",source:"School",link:"#"},{title:"Microsoft Teams Upgrade",date:"2025-10-15",description:"Teams will receive a major update next week with improved performance and new classroom tools.",source:"School",link:"#"},{title:"New Moodle Theme",date:"2025-10-10",description:"Our Moodle platform now has a new, mobile-friendly theme. Try it out at moodle.cecre.net.",source:"School",link:"https://moodle.cecre.net"},{title:"Library Renovation Completed",date:"2025-09-30",description:"Our school library has been renovated with new reading corners and computer stations.",source:"School",link:"#"}],hT=["#FFD1DC","#FFECB3","#C8E6C9","#BBDEFB","#D1C4E9","#FFE0B2","#B2EBF2"],pT=["#3d2a33","#3d3520","#2a3d2f","#2a3648","#352d44","#3d2f20","#203d3d"];function fT(e){let{theme:t="light"}=e;const n=dT.sort((e,t)=>new Date(t.date)-new Date(e.date)).slice(0,4),r="dark"===t,o=r?pT:hT;return(0,uT.jsxs)("div",{style:{maxWidth:900,marginInline:"auto"},children:[(0,uT.jsx)("h3",{className:"section-heading",children:"Noticias"}),(0,uT.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:20},children:n.map((e,t)=>{const n=o[Math.floor(Math.random()*o.length)];return(0,uT.jsxs)("div",{className:"news-card",style:{background:n,borderRadius:16,padding:25,boxShadow:r?"0 4px 10px rgba(0,0,0,0.6)":"0 4px 10px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:220,transition:"transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.boxShadow=r?"0 6px 15px rgba(0,0,0,0.8)":"0 6px 15px rgba(0,0,0,0.25)",e.currentTarget.style.background=function(e,t){const n=parseInt(e.replace("#",""),16),r=Math.round(2.55*t),o=(n>>16)+r,i=(n>>8&255)+r,a=(255&n)+r;return"#"+(16777216+65536*(o<255?o<1?0:o:255)+256*(i<255?i<1?0:i:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)}(n,15)},onMouseLeave:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow=r?"0 4px 10px rgba(0,0,0,0.6)":"0 4px 10px rgba(0,0,0,0.15)",e.currentTarget.style.background=n},children:[(0,uT.jsxs)("div",{children:[(0,uT.jsx)("h4",{style:{fontSize:"1.2rem",marginBottom:6,color:r?"#e9eef5":"#111"},children:e.title}),(0,uT.jsxs)("small",{style:{color:r?"#9ea9b6":"#444",marginBottom:10,display:"block"},children:[new Date(e.date).toLocaleDateString()," \u2022 ",e.source]}),(0,uT.jsx)("p",{style:{fontSize:"0.95rem",color:r?"#c8d1dc":"#333"},children:e.description})]}),(0,uT.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",style:{marginTop:15,color:r?"#6ba3ff":"#004a99",textDecoration:"none",fontWeight:"bold"},children:"Read more \u2192"})]},t)})}),(0,uT.jsx)("div",{style:{textAlign:"center",marginTop:30},children:(0,uT.jsx)("a",{href:"/news",style:{display:"inline-block",padding:"12px 25px",backgroundColor:r?"#4a90e2":"#004a99",color:"#fff",borderRadius:8,textDecoration:"none",fontWeight:"bold",transition:"background 0.3s"},onMouseEnter:e=>e.target.style.backgroundColor=r?"#3b82f6":"#003366",onMouseLeave:e=>e.target.style.backgroundColor=r?"#4a90e2":"#004a99",children:"View All News"})})]})}function mT(){return(0,uT.jsxs)("div",{className:"news-card-skeleton",children:[(0,uT.jsx)("div",{className:"skeleton-line skeleton-title"}),(0,uT.jsx)("div",{className:"skeleton-line skeleton-text"}),(0,uT.jsx)("div",{className:"skeleton-line skeleton-text short"})]})}function gT(e){let{title:t="Error",message:n="Algo sali\xf3 mal. Por favor, intenta nuevamente.",onRetry:r,variant:o="error"}=e;return(0,uT.jsxs)("div",{className:"error-message ".concat(o),children:[(0,uT.jsx)("div",{className:"error-icon",children:{error:"\u26a0\ufe0f",warning:"\u26a1",info:"\u2139\ufe0f"}[o]}),(0,uT.jsxs)("div",{className:"error-content",children:[(0,uT.jsx)("h3",{className:"error-title",children:t}),(0,uT.jsx)("p",{className:"error-text",children:n}),r&&(0,uT.jsx)("button",{className:"error-retry-btn",onClick:r,children:"Reintentar"})]})]})}function yT(e){let{feedUrl:t,maxItems:n=2,theme:r="light"}=e;const[o,i]=(0,ui.useState)([]),[a,s]=(0,ui.useState)(!0),[c,l]=(0,ui.useState)(null),[u,d]=(0,ui.useState)(null),[h,p]=(0,ui.useState)(!1),f=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;const n=document.createElement("div");n.innerHTML=e;return(n.textContent||n.innerText||"").split(" ").slice(0,t).join(" ")+"..."},m=async()=>{try{s(!0),l(null);const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_S3_BUCKET_NAME:"cecre-logs-bucket-v1",REACT_APP_S3_REGION:"us-east-1",REACT_APP_S3_ACCESS_KEY_ID:"AKIA2TTWKQQM4GMOKTVD",REACT_APP_S3_SECRET_ACCESS_KEY:"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",REACT_APP_WORDPRESS_FEED_URL:"https://devocecre.wordpress.com/feed",REACT_APP_MSAL_CLIENT_ID:"4a53daad-6722-4d4e-ad09-318c51ad4c50",REACT_APP_MSAL_TENANT_ID:"24369e0d-cf1e-434c-8c7c-7dc57a4e0adf",REACT_APP_REDIRECT_URI:"http://localhost:3000",REACT_APP_SENTRY_DSN:"https://ac5a8c3d0354c64242373560e6f1c1d0@o4510251906695168.ingest.us.sentry.io/4510251914166272",REACT_APP_SENTRY_ENVIRONMENT:"development",REACT_APP_ENABLE_SENTRY:"true",REACT_APP_GOOGLE_CLIENT_ID:"your-google-client-id-here",REACT_APP_AZURE_CLIENT_ID:"4a53daad-6722-4d4e-ad09-318c51ad4c50",REACT_APP_AZURE_TENANT_ID:"24369e0d-cf1e-434c-8c7c-7dc57a4e0adf"}.REACT_APP_RSS_API_URL||"https://api.rss2json.com/v1/api.json",r=await fetch("".concat(e,"?rss_url=").concat(encodeURIComponent(t)));if(!r.ok)throw new Error("No se pudo cargar el feed RSS");const o=await r.json();if("ok"!==o.status)throw new Error("El servicio de RSS devolvi\xf3 un error");const a=o.items.slice(0,n).map(e=>({title:e.title,pubDate:e.pubDate,snippet:f(e.content,20),fullContent:e.content,link:e.link}));i(a)}catch(cE){console.error("WordPress RSS fetch error:",cE),l(cE.message)}finally{s(!1)}};(0,ui.useEffect)(()=>{m()},[t,n]);const g="dark"===r,y=e=>{const t=new Date(e);return(new Date-t)/864e5<=2};return(0,uT.jsxs)("div",{style:{marginTop:40,maxWidth:700,marginInline:"auto",position:"relative"},children:[(0,uT.jsx)("h3",{className:"section-heading",children:"Devocionales"}),a&&(0,uT.jsx)("div",{children:[...Array(n)].map((e,t)=>(0,uT.jsx)(mT,{},t))}),c&&(0,uT.jsx)(gT,{title:"Error al cargar devocionales",message:"No pudimos cargar los devocionales. ".concat(c),onRetry:m,variant:"warning"}),!a&&!c&&0===o.length&&(0,uT.jsx)(gT,{title:"Sin devocionales",message:"No hay devocionales disponibles en este momento.",variant:"info"}),!a&&!c&&o.length>0&&(0,uT.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:20},onMouseLeave:()=>{p(!1),setTimeout(()=>d(null),400)},children:[o.map((e,t)=>(0,uT.jsxs)("div",{onMouseEnter:()=>(d(t),void p(!0)),className:"wordpress-news-item",style:{background:g?"#263041":"#f9f9f9",borderRadius:12,padding:20,boxShadow:g?"0 3px 8px rgba(0,0,0,0.6)":"0 3px 8px rgba(0,0,0,0.15)",cursor:"pointer",minHeight:150,position:"relative",overflow:"hidden",transition:"transform 0.3s ease, box-shadow 0.3s ease, background 0.3s ease",transform:u===t?"scale(1.03) translateY(-5px)":"scale(1)",zIndex:u===t?10:1},children:[(0,uT.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",gap:10},children:[(0,uT.jsx)("h4",{style:{color:g?"#e9eef5":"#111",flex:1,margin:0},children:e.title}),y(e.pubDate)&&(0,uT.jsx)("span",{style:{background:"#8b5cf6",color:"white",fontSize:"0.7rem",fontWeight:600,padding:"3px 8px",borderRadius:6,textTransform:"uppercase",letterSpacing:"0.5px",flexShrink:0},children:"Nuevo"})]}),(0,uT.jsx)("small",{style:{color:g?"#9ea9b6":"#666",marginBottom:10,marginTop:8,display:"block"},children:new Date(e.pubDate).toLocaleDateString()}),(0,uT.jsx)("p",{style:{color:g?"#c8d1dc":"#333"},children:e.snippet})]},t)),null!==u&&(0,uT.jsxs)("div",{role:h?"dialog":"presentation","aria-hidden":!h,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:g?"rgba(38, 48, 65, 0.98)":"rgba(255,255,255,0.98)",color:g?"#e9eef5":"#111",padding:30,boxSizing:"border-box",overflowY:"auto",zIndex:50,display:"flex",flexDirection:"column",gap:20,borderRadius:12,pointerEvents:h?"auto":"none",animation:h?"slideFadeIn 0.4s forwards":"slideFadeOut 0.4s forwards"},children:[(0,uT.jsx)("h4",{style:{color:g?"#e9eef5":"#111"},children:o[u].title}),(0,uT.jsx)("small",{style:{color:g?"#9ea9b6":"#666",display:"block",marginBottom:10},children:new Date(o[u].pubDate).toLocaleDateString()}),(0,uT.jsx)("div",{style:{color:g?"#c8d1dc":"#333",textAlign:"justify"},dangerouslySetInnerHTML:{__html:o[u].fullContent}}),(0,uT.jsx)("a",{href:o[u].link,target:"_blank",rel:"noreferrer",style:{marginTop:15,display:"inline-block",color:g?"#6ba3ff":"#0066cc"},children:"Lee m\xe1s en WordPress"})]})]}),(0,uT.jsx)("style",{children:"\n        @keyframes slideFadeIn {\n          from { opacity: 0; transform: translateY(-20px); }\n          to { opacity: 1; transform: translateY(0); }\n        }\n        @keyframes slideFadeOut {\n          from { opacity: 1; transform: translateY(0); }\n          to { opacity: 0; transform: translateY(-20px); }\n        }\n      "})]})}const vT=n.p+"static/media/Outlook_512.4bd1a134941c390fe6ad.png";const bT=n.p+"static/media/AWS-Cloud-logo_32.3f895596f846fea018216e3803ae40fd.svg";const wT=n.p+"static/media/10018-icon-service-Azure-A.45b7f956c24cd99812e349f28b8968f9.svg";const kT=n.p+"static/media/shopping-cart.ecb019fe8f1ba04e82422c837a987a87.svg";const ST=n.p+"static/media/Microsoft Entra ID BW icon.6fdb056c2faadbdadc12e5b8a7f29c9a.svg",_T=n.p+"static/media/Excel_512.2b4db4d7ef45b3f9f71e.png",CT=n.p+"static/media/Word_512.7aa0e5fb130768c085b2.png",TT=n.p+"static/media/PowerPoint_512.d06eb668e8fe1020f06b.png",ET=n.p+"static/media/Teams_512.869ae6f39d642d290e9e.png",IT=n.p+"static/media/wootit-logo.295dce84e1314b71397e.PNG";const AT=n.p+"static/media/moodle-svgrepo-com.d8aedbefb73b736a9b3a64ba72e1e8f5.svg",xT=["#FFD1DC","#FFECB3","#C8E6C9","#BBDEFB","#D1C4E9","#FFE0B2","#B2EBF2","#FFD1DC","#FFB3BA","#FFCCD5","#FADADD","#FFE0B2","#FFECB3","#FFF5BA","#FEE1B9","#C8E6C9","#DCEDC8","#E0F2F1","#D0F0C0","#BBDEFB","#B2EBF2","#C5CAE9","#D1C4E9"],RT={work:"Calificaciones y Trabajo",office:"Office",admin:"Administraci\xf3n de Usuarios y Portal"},PT=[{id:"moodle",name:"Moodle",url:"https://moodle.cecre.net",category:"work",color:xT[1],icon:AT},{id:"wootit",name:"WootIt",url:"https://wootit.cr/cecre",category:"work",color:xT[0],icon:IT},{id:"teams",name:"Teams",url:"https://teams.microsoft.com",category:"work",color:xT[3],icon:ET},{id:"outlook",name:"Correo",url:"https://outlook.office.com",category:"work",color:xT[6],icon:vT},{id:"office",name:"Office.com",url:"https://www.office.com",category:"office",color:xT[4],icon:"O",hidden:!0},{id:"word",name:"Word",url:"https://word.office.com",category:"office",color:xT[3],icon:CT},{id:"excel",name:"Excel",url:"https://excel.office.com",category:"office",color:xT[2],icon:_T},{id:"powerpoint",name:"PowerPoint",url:"https://powerpoint.office.com",category:"office",color:xT[5],icon:TT},{id:"entra",name:"Microsoft Entra",url:"https://entra.microsoft.com",category:"admin",color:xT[6],icon:ST},{id:"m365admin",name:"Microsoft 365 Admin Center",url:"https://admin.microsoft.com",category:"admin",color:xT[4],icon:ST},{id:"azure",name:"Azure Portal",url:"https://portal.azure.com",category:"admin",color:xT[3],icon:wT},{id:"AWS",name:"AWS",url:"https://launcher.myapps.microsoft.com/api/signin/b87924f9-2f53-4d21-b261-e356b5ecf26a?tenantId=24369e0d-cf1e-434c-8c7c-7dc57a4e0adf",category:"admin",color:xT[3],icon:bT},{id:"pagos",name:"Pagos en l\xednea",url:"https://pagos.cecre.net",category:"payments",color:xT[18],icon:kT}];let MT={Guest:["wootit","moodle","teams"],Parent:["wootit","moodle","teams","outlook","pagos"],Student:["wootit","moodle","teams","office","word","excel","powerpoint","outlook"],Teacher:["wootit","moodle","teams","office","word","excel","powerpoint","outlook"],Admin:["wootit","moodle","teams","office","word","excel","powerpoint","outlook","m365admin"],AdminBilling:["wootit","moodle","teams","office","word","excel","powerpoint","outlook","m365admin","AWS","pagos"],AdminIT:["wootit","moodle","teams","office","word","excel","powerpoint","outlook","m365admin","azure","AWS"]};function OT(e){return PT.find(t=>t.id===e)}const NT={bucketName:"cecre-logs-bucket-v1",region:"us-east-1",accessKeyId:"AKIA2TTWKQQM4GMOKTVD",secretAccessKey:"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"},DT={maxBatchSize:50,maxWaitTime:3e4,immediateUploadTypes:["AUTH","ERROR"]};let LT=[],FT=null;async function qT(e){if(!e||0===e.length)return!0;if(!NT.bucketName||!NT.accessKeyId||!NT.secretAccessKey)return!1;try{const t=function(){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),i=String(e.getMinutes()).padStart(2,"0"),a=String(e.getSeconds()).padStart(2,"0");return"logs/".concat(t,"/").concat(n,"/").concat(r,"/app-logs-").concat(o,"-").concat(i,"-").concat(a,".json")}(),n={logs:e,metadata:{uploadTimestamp:(new Date).toISOString(),totalLogs:e.length,userAgent:navigator.userAgent,url:window.location.href,sessionId:sessionStorage.getItem("session-id")||"unknown"}};return!!(await fetch("/api/s3-upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({bucketName:NT.bucketName,region:NT.region,key:t,data:n})})).ok}catch(t){return!1}}async function UT(){if(0===LT.length)return;const e=[...LT];LT=[],FT&&(clearTimeout(FT),FT=null);if(!await qT(e)){const t=JSON.parse(sessionStorage.getItem("app-logs-backup")||"[]");t.push(...e),sessionStorage.setItem("app-logs-backup",JSON.stringify(t))}}const zT="AUTH",HT="APP",BT="ERROR";function jT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=s({timestamp:(new Date).toISOString(),type:e,message:t},n),o=JSON.parse(sessionStorage.getItem("app-logs")||"[]");var i;o.push(r),sessionStorage.setItem("app-logs",JSON.stringify(o)),i=r,console.log("Adding log to batch:",i.type,i.message),LT.push(i),DT.immediateUploadTypes.includes(i.type)?(console.log("Immediate upload triggered for:",i.type),UT()):LT.length>=DT.maxBatchSize?(console.log("Batch size reached, uploading:",LT.length),UT()):FT||(console.log("Setting batch timeout for",DT.maxWaitTime,"ms"),FT=setTimeout(()=>{console.log("Batch timeout reached, uploading:",LT.length),UT()},DT.maxWaitTime))}function WT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"error-logs";const t=JSON.parse(sessionStorage.getItem("app-logs")||"[]");if(0===t.length)return void console.warn("No logs to download");const n=(new Date).toISOString().replace(/[:.]/g,"-"),r="".concat(e,"-").concat(n,".json"),o=JSON.stringify(t,null,2),i=new Blob([o],{type:"application/json"}),a=URL.createObjectURL(i),s=document.createElement("a");s.href=a,s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),console.log("Downloaded ".concat(t.length," log entries as ").concat(r))}function KT(e){let{app:t,editMode:n=!1}=e;const r=t.color||"#f0f0f0",o="string"===typeof t.icon&&(t.icon.startsWith("http")||t.icon.startsWith("/")||t.icon.endsWith(".svg")||t.icon.endsWith(".png")||t.icon.endsWith(".jpg"));const i=function(e){if(!e)return null;const t=String(e).trim();return t&&"#"!==t?/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(t)||t.startsWith("/")?t:"https://".concat(t):null}(t.url),a=(0,uT.jsxs)(uT.Fragment,{children:[(0,uT.jsx)("div",{className:"app-icon ".concat(o?"":"emoji"),style:{background:o?"transparent":r},draggable:!1,children:o?(0,uT.jsx)("img",{src:t.icon,alt:"".concat(t.name," icon"),loading:"lazy",style:{width:"100%",height:"100%",objectFit:"cover"},draggable:!1,onError:e=>{e.currentTarget.style.display="none"}}):(0,uT.jsx)("span",{children:t.icon||t.name.slice(0,1)})}),(0,uT.jsx)("div",{className:"app-name",draggable:!1,children:t.name})]});return i?(0,uT.jsx)("a",{className:"app-card",href:i,target:t.target||"_blank",rel:"noopener noreferrer","aria-label":t.name,onClick:e=>{if(n)return e.preventDefault(),e.stopPropagation(),!1;jT(HT,"App clicked",{appId:t.id,appName:t.name,appUrl:t.url,appCategory:t.category})},draggable:!1,style:{cursor:n?"move":"pointer"},children:a}):(0,uT.jsx)("div",{className:"app-card disabled","aria-label":t.name,title:"Link not available",children:a})}sessionStorage.getItem("session-id")||sessionStorage.setItem("session-id","session-".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9)));const GT=ui.memo(KT);function VT(e){let{apps:t,role:n}=e;const[r,o]=(0,ui.useState)(!1),[i,a]=(0,ui.useState)({}),[c,l]=(0,ui.useState)(null),[u,d]=(0,ui.useState)(null),[h,p]=(0,ui.useState)({x:0,y:0}),[f,m]=(0,ui.useState)(!1);(0,ui.useEffect)(()=>{const e=localStorage.getItem("app-order-".concat(n));if(e)try{a(JSON.parse(e))}catch(cE){console.error("Failed to parse saved app order:",cE),g(t)}else g(t)},[t,n]);const g=e=>{const t={};e.forEach(e=>{const n=e.category||"other";t[n]||(t[n]=[]),t[n].push(e)}),a(t)},y=e=>{0===e.clientX&&0===e.clientY||p({x:e.clientX,y:e.clientY})},v=e=>{console.log("\ud83c\udfc1 DRAG END"),l(null),d(null),m(!1)},b=["work","office","admin"].filter(e=>i[e]&&i[e].length>0);return(0,uT.jsxs)("div",{className:"organized-apps-container",children:[(0,uT.jsx)("div",{className:"apps-header",children:(0,uT.jsx)("h3",{className:"section-heading",children:"Aplicaciones"})}),r&&(0,uT.jsx)("p",{className:"edit-mode-hint",children:"Arrastra las aplicaciones para reorganizarlas dentro de cada categor\xeda"}),b.map(e=>(0,uT.jsxs)("div",{className:"app-category-section",children:[(0,uT.jsx)("h4",{className:"category-title",children:RT[e]}),(0,uT.jsx)("div",{className:"apps-grid",children:i[e].map((t,o)=>{const h=(null===c||void 0===c?void 0:c.app.id)===t.id,f=(null===u||void 0===u?void 0:u.app.id)===t.id&&(null===u||void 0===u?void 0:u.category)===e;return(0,uT.jsxs)(ui.Fragment,{children:[f&&c&&(0,uT.jsx)("div",{className:"app-placeholder"}),(0,uT.jsxs)("div",{className:"app-wrapper ".concat(r?"draggable":""," ").concat(h?"is-dragging":""),draggable:r,onDragStart:n=>((e,t,n)=>{if(r){console.log("\ud83d\ude80 DRAG START:",t.name),l({app:t,category:n}),e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain",t.id);try{const t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="1px",t.style.height="1px",document.body.appendChild(t),e.dataTransfer.setDragImage(t,0,0),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},0)}catch(o){console.log("Could not set custom drag image:",o)}m(!0),p({x:e.clientX,y:e.clientY})}else e.preventDefault()})(n,t,e),onDrag:y,onDragEnd:v,onDragEnter:n=>((e,t,n)=>{if(e.preventDefault(),e.stopPropagation(),!r||!c)return;const{app:o,category:i}=c;i===n&&o.id!==t.id&&d({app:t,category:n})})(n,t,e),onDragOver:n=>((e,t,n)=>{if(!r||!c)return;e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move";const{app:o,category:i}=c;i===n&&o.id!==t.id&&d({app:t,category:n})})(n,t,e),onDrop:o=>((e,t,o)=>{if(e.preventDefault(),e.stopPropagation(),!r||!c)return;const{app:u,category:h}=c;if(console.log("\ud83c\udfaf DROP EVENT:",{source:u.name,target:t.name,sourceCategory:h,targetCategory:o}),h!==o)return console.log("\u274c Different categories, aborting"),l(null),d(null),void m(!1);if(u.id===t.id)return console.log("\u274c Same item, aborting"),l(null),d(null),void m(!1);const p=s({},i),f=[...p[h]],g=f.findIndex(e=>e.id===u.id),y=f.findIndex(e=>e.id===t.id);if(-1===g)return void console.log("\u274c Source not found");if(-1===y)return void console.log("\u274c Target not found");console.log("\u2705 Moving ".concat(u.name," from index ").concat(g," to ").concat(y)),console.log("\ud83d\udce6 Before:",f.map(e=>e.name));const[v]=f.splice(g,1),b=g<y?y-1:y;f.splice(b,0,v),console.log("\ud83d\udce6 After:",f.map(e=>e.name)),p[h]=f,a(p),localStorage.setItem("app-order-".concat(n),JSON.stringify(p)),l(null),d(null),m(!1)})(o,t,e),onClick:e=>{r&&(e.preventDefault(),e.stopPropagation())},children:[(0,uT.jsx)(GT,{app:t,editMode:r}),r&&(0,uT.jsx)("div",{className:"drag-handle",title:"Arrastra para mover",children:"\u22ee\u22ee"})]})]},t.id)})})]},e)),f&&c&&(0,uT.jsx)("div",{className:"drag-ghost",style:{left:h.x-60,top:h.y-55},children:(0,uT.jsx)(GT,{app:c.app})})]})}function QT(e){let{user:t,theme:n,setTheme:r}=e;const{instance:o}=om(),[i,a]=(0,ui.useState)(!1),s=(0,ui.useRef)(null);(0,ui.useEffect)(()=>{function e(e){s.current&&!s.current.contains(e.target)&&a(!1)}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const c=((null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.username)||"U").split(" ").map(e=>e[0]).slice(0,2).join("");return(0,uT.jsxs)("div",{className:"user-menu",ref:s,children:[(0,uT.jsxs)("button",{className:"user-menu-trigger","aria-haspopup":"true","aria-expanded":i,onClick:()=>a(e=>!e),title:"Account menu",type:"button",children:[(0,uT.jsxs)("div",{style:{textAlign:"right",lineHeight:1},children:[(0,uT.jsx)("div",{className:"user-name"}),(0,uT.jsx)("div",{className:"user-role",style:{marginTop:4}})]}),(0,uT.jsx)("span",{className:"user-initials",children:c}),(0,uT.jsx)("svg",{className:"caret",width:"12",height:"12",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",style:{marginLeft:8},children:(0,uT.jsx)("path",{d:"M7 10l5 5 5-5z",fill:"currentColor"})})]}),i&&(0,uT.jsxs)("div",{className:"user-menu-dropdown",role:"menu",children:[(0,uT.jsx)("button",{type:"button",className:"user-menu-item",onClick:()=>{a(!1),window.open("https://myaccount.microsoft.com","_blank","noopener,noreferrer")},children:"Mi cuenta"}),(0,uT.jsxs)("div",{className:"user-menu-item theme-row",role:"group","aria-label":"Theme",children:[(0,uT.jsx)("span",{children:"Modo oscuro"}),(0,uT.jsx)("button",{type:"button",className:"theme-toggle-button ".concat("dark"===n?"on":""),"aria-pressed":"dark"===n,title:"Toggle theme",onClick:()=>r("dark"===n?"light":"dark"),children:(0,uT.jsx)("span",{className:"switch-knob"})})]}),(0,uT.jsx)("button",{type:"button",className:"user-menu-item signout",onClick:async()=>{a(!1),jT(zT,"User logout initiated",{username:null===t||void 0===t?void 0:t.username,name:null===t||void 0===t?void 0:t.name,logoutMethod:"redirect"});try{await o.logoutRedirect(),jT(zT,"User logout successful (redirect)",{username:null===t||void 0===t?void 0:t.username,name:null===t||void 0===t?void 0:t.name,logoutMethod:"redirect"})}catch(e){try{await o.logoutPopup(),jT(zT,"User logout successful (popup)",{username:null===t||void 0===t?void 0:t.username,name:null===t||void 0===t?void 0:t.name,logoutMethod:"popup"})}catch(n){jT(zT,"User logout successful (fallback)",{username:null===t||void 0===t?void 0:t.username,name:null===t||void 0===t?void 0:t.name,logoutMethod:"fallback",errors:{redirectError:null===e||void 0===e?void 0:e.message,popupError:null===n||void 0===n?void 0:n.message}}),window.location.assign("https://login.microsoftonline.com/common/oauth2/v2.0/logout")}}},children:"Cerrar sesi\xf3n"})]})]})}const YT={scopes:["User.Read","User.ReadBasic.All"]};function JT(e){let{label:t="Sign in with Microsoft",className:n,style:r}=e;const{instance:o}=om();return(0,uT.jsxs)("button",{onClick:async()=>{jT(zT,"Microsoft sign-in button clicked");try{console.log("\ud83d\ude80 Starting login redirect..."),await o.loginRedirect(s(s({},YT),{},{prompt:"select_account"}))}catch(cE){console.error("\u274c Login failed:",{errorCode:null===cE||void 0===cE?void 0:cE.errorCode,errorMessage:null===cE||void 0===cE?void 0:cE.errorMessage,subError:null===cE||void 0===cE?void 0:cE.subError,fullError:cE}),jT(BT,"Microsoft authentication failed",{error:null===cE||void 0===cE?void 0:cE.message,errorCode:null===cE||void 0===cE?void 0:cE.errorCode,subError:null===cE||void 0===cE?void 0:cE.subError}),alert("Login error: ".concat((null===cE||void 0===cE?void 0:cE.errorMessage)||(null===cE||void 0===cE?void 0:cE.message)))}},className:n,style:s({display:"inline-flex",alignItems:"center",gap:10,padding:"10px 16px",borderRadius:8,border:"1px solid rgba(0,0,0,0.08)",background:"#ffffff",cursor:"pointer",fontWeight:600,color:"#222"},r),"aria-label":t,type:"button",children:[(0,uT.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,uT.jsx)("rect",{x:"1",y:"1",width:"10",height:"10",fill:"#F35325"}),(0,uT.jsx)("rect",{x:"13",y:"1",width:"10",height:"10",fill:"#81BC06"}),(0,uT.jsx)("rect",{x:"1",y:"13",width:"10",height:"10",fill:"#05A6F0"}),(0,uT.jsx)("rect",{x:"13",y:"13",width:"10",height:"10",fill:"#FFBA08"})]}),(0,uT.jsx)("span",{children:t})]})}function $T(e){let{clientId:t="your-google-client-id-here",scope:n="openid email profile",label:r="Sign in with Google",onSuccess:o=()=>{},onError:i=()=>{},className:a,style:c}=e;const l=(0,ui.useRef)(null),[u,d]=(0,ui.useState)(!1);(0,ui.useEffect)(()=>{if(!t)return void console.warn("GoogleSignInButton: REACT_APP_GOOGLE_CLIENT_ID is not set");if(window.google&&window.google.accounts&&window.google.accounts.oauth2)return void d(!0);const e="google-identity";if(document.getElementById(e)){const e=setTimeout(()=>d(Boolean(window.google&&window.google.accounts)),300);return()=>clearTimeout(e)}const n=document.createElement("script");return n.src="https://accounts.google.com/gsi/client",n.id=e,n.async=!0,n.defer=!0,n.onload=()=>d(Boolean(window.google&&window.google.accounts)),n.onerror=()=>{console.error("Failed to load Google Identity script"),i(new Error("Google script load failed"))},document.head.appendChild(n),()=>{}},[t,i]);return(0,uT.jsxs)("button",{onClick:()=>{if(!t)return void i(new Error("Google client id missing"));const e=(()=>{if(!t||!u)return null;if(l.current)return l.current;try{return l.current=window.google.accounts.oauth2.initTokenClient({client_id:t,scope:n,callback:async e=>{if(e&&e.access_token)try{const t=await fetch("https://www.googleapis.com/oauth2/v3/userinfo",{headers:{Authorization:"Bearer ".concat(e.access_token)}}),n=await t.json();o({tokenResponse:e,profile:n})}catch(cE){i(cE)}else i(new Error("No access token returned"))}}),l.current}catch(cE){return i(cE),null}})();e?e.requestAccessToken({prompt:"consent"}):i(new Error("Google token client not available"))},className:a,style:s({display:"inline-flex",alignItems:"center",gap:10,padding:"10px 16px",borderRadius:8,border:"1px solid rgba(0,0,0,0.08)",background:"#fff",cursor:"pointer",fontWeight:600,color:"#222"},c),"aria-label":r,type:"button",children:[(0,uT.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24","aria-hidden":"true",focusable:"false",children:[(0,uT.jsx)("path",{fill:"#EA4335",d:"M12 11.5v3.5h5.1c-.2 1-1.1 3-3.1 4.2l-.1.1 4.5.4C20.3 20 23 16.8 23 12c0-.7-.1-1.4-.2-2H12z"}),(0,uT.jsx)("path",{fill:"#34A853",d:"M6.3 14.3l-1.1.9C3.6 12.8 3 10.5 3 8s.6-4.8 2.2-6.2L8 4.9C7.7 5.7 7.6 6.8 7.6 8s.1 2.3.7 3.3z"}),(0,uT.jsx)("path",{fill:"#FBBC05",d:"M12 4.5c1.6 0 2.8.6 3.6 1.1l2.5-2.5C16.8 1.1 14.5 0 12 0 7.7 0 4.1 2.3 2.2 5.8l2.5 1.9C6.6 6 9 4.5 12 4.5z"}),(0,uT.jsx)("path",{fill:"#4285F4",d:"M23 12c0 .8-.1 1.5-.2 2H12V9.5h6.1c-.4-1.4-1.4-2.6-2.9-3.4l-.1-.1-4.5.4C9.5 7.6 8.3 9.9 8.3 12s1.2 4.4 3.1 5.6c2.1 1.4 4.8 1.4 6.6.2 1.6-1 2.4-2.2 3-3 0 0 0 0 0 0 0 0 0 0 0 0z"})]}),(0,uT.jsx)("span",{children:r})]})}const XT=n.p+"static/media/cecre_logo_test.af87e06b54a3b6a2fe7d.jpeg";function ZT(){const{instance:e}=om();return(0,uT.jsx)("div",{style:{position:"fixed",inset:0,display:"flex",alignItems:"center",justifyContent:"center",background:"transparent",padding:20,zIndex:999},children:(0,uT.jsxs)("div",{style:{width:380,maxWidth:"92%",background:"white",borderRadius:12,padding:24,boxShadow:"0 8px 30px rgba(0,0,0,0.12)",textAlign:"center"},children:[(0,uT.jsx)("img",{src:XT,alt:"Centro Educativo Cristiano Reformado logo",style:{height:84,width:84,margin:"0 auto 12px",borderRadius:12,objectFit:"cover",display:"block"}}),(0,uT.jsx)("div",{style:{fontWeight:700,marginBottom:18},children:"Centro Educativo Cristiano Reformado"}),(0,uT.jsxs)("div",{style:{display:"grid",gap:12},children:[(0,uT.jsx)(JT,{style:{width:"100%"}}),(0,uT.jsx)($T,{clientId:"your-google-client-id-here",onSuccess:e=>{let{profile:t}=e;console.log("Google profile:",t)},onError:e=>{console.error("Google sign-in error:",e)},style:{width:"100%"}})]}),(0,uT.jsx)("div",{style:{marginTop:12},children:(0,uT.jsx)("a",{href:"https://passwordreset.microsoftonline.com",target:"_blank",rel:"noreferrer",style:{color:"#0078d4",fontSize:13,textDecoration:"none"},children:"Forgot your password?"})})]})})}const eE=["CECRESG Admin IT","CECRESG Admin Billing","CECRESG Admins","CECRESG Teachers","CECRESG Students","CECRESG Parents"],tE={"CECRESG Admin IT":"AdminIT","CECRESG Admin Billing":"AdminBilling","CECRESG Admins":"Admin","CECRESG Teachers":"Teacher","CECRESG Students":"Student","CECRESG Parents":"Parent"};function nE(e){var t,n;let{roleOverride:r=null,extras:o=[]}=e;const{accounts:i,inProgress:a,instance:c}=om(),l=i&&i[0]||{},u=null!==(t=null!==(n=null===l||void 0===l?void 0:l.name)&&void 0!==n?n:null===l||void 0===l?void 0:l.username)&&void 0!==t?t:"Usuario",[d,h]=(0,ui.useState)(()=>{const e=localStorage.getItem("portal-theme")||"light";return document.documentElement.setAttribute("data-theme",e),e}),[p,f]=(0,ui.useState)(()=>{try{const e=sessionStorage.getItem("user-groups");return e?JSON.parse(e):[]}catch(e){return[]}}),m=!(null===i||void 0===i||!i.length),g=(0,ui.useMemo)(()=>{const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t)return t;if(!e.length)return"Guest";for(const n of eE)if(e.includes(n))return tE[n];return"Guest"}(p,r);return console.log("\ud83e\udded Detected role:",e,"from groups:",p),e},[p,r]);(0,ui.useEffect)(()=>{localStorage.setItem("portal-theme",d),document.documentElement.setAttribute("data-theme",d)},[d]),(0,ui.useEffect)(()=>{if(m&&null!==i&&void 0!==i&&i.length&&g&&p.length>0){const e=i[0];jT(zT,"Microsoft authentication successful",{username:e.username,name:e.name,role:g,groups:p})}},[m,g,p.length]),(0,ui.useEffect)(()=>{if(m||0!==(null===i||void 0===i?void 0:i.length))m&&sessionStorage.setItem("had-session","true");else{"true"===sessionStorage.getItem("had-session")&&(jT(zT,"User session ended",{reason:"session_expired_or_logout",timestamp:(new Date).toISOString()}),sessionStorage.removeItem("had-session"))}},[m]),(0,ui.useEffect)(()=>{i.length&&0===p.length?(console.log("\ud83d\udd39 Fetching groups for",i[0].username),async function(e,t){console.log("\ud83d\udd0d getUserGroups: Starting group fetch...");const n=oT.init({authProvider:n=>{e.acquireTokenSilent({scopes:["User.Read","User.ReadBasic.All"],account:t}).then(e=>{console.log("\u2705 getUserGroups: Token acquired successfully"),n(null,e.accessToken)}).catch(e=>{console.error("\u274c getUserGroups: Token acquisition failed:",e),n(e,null)})}});try{console.log("\ud83d\udce1 getUserGroups: Calling Microsoft Graph API...");const e=await n.api("/me/memberOf").get();console.log("\ud83d\udce6 getUserGroups: Raw response:",e);const t=e.value.filter(e=>e.displayName).map(e=>e.displayName);return console.log("\u2705 getUserGroups: Successfully retrieved groups:",t),t}catch(cE){console.error("\u274c getUserGroups: Failed to fetch groups:",cE);try{const e=null===t||void 0===t?void 0:t.idTokenClaims;if(null!==e&&void 0!==e&&e.groups&&Array.isArray(e.groups))return console.log("\ud83d\udd04 getUserGroups: Using groups from ID token:",e.groups),e.groups}catch(r){console.error("\u274c getUserGroups: Fallback also failed:",r)}return[]}}(c,i[0]).then(e=>{console.log("\u2705 Groups fetched:",e),f(e),sessionStorage.setItem("user-groups",JSON.stringify(e))}).catch(e=>console.error("\u274c Error fetching groups:",e))):console.log("\u2139\ufe0f Groups already set:",p)},[i,c,p.length]);const y=(0,ui.useMemo)(()=>m?function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Basic",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeCategories:n=null,extraApps:r=[]}=t,o=(MT[e]||MT.Basic).map(OT).filter(Boolean),i=new Map((r||[]).map(e=>[e.id,e]));return[...o.filter(e=>!i.has(e.id)),...r].map(e=>s({},e)).filter(e=>!n||n.includes(e.category)).filter(e=>!e.hidden)}(g,{extraApps:o}):[],[g,o,m]);return m?(0,uT.jsxs)("div",{className:"portal-container","data-theme":d,children:[(0,uT.jsx)(QT,{user:l,theme:d,setTheme:h}),(0,uT.jsxs)("div",{className:"site-title-watermark",children:[(0,uT.jsx)("span",{children:"Centro Educativo"}),(0,uT.jsx)("span",{children:"Cristiano Reformado"})]}),(0,uT.jsx)("header",{className:"portal-header",children:(0,uT.jsxs)("div",{className:"welcome-container",children:[(0,uT.jsx)("img",{src:XT,alt:"CECRE Logo",className:"welcome-logo"}),(0,uT.jsxs)("div",{className:"welcome-text",children:[(0,uT.jsx)("h2",{className:"welcome-message",children:"Bienvenido al portal de CECRE"}),(0,uT.jsx)("p",{className:"welcome-name",children:u})]})]})}),(0,uT.jsxs)("main",{className:"portal-main",children:[(0,uT.jsx)("section",{className:"apps-section","aria-label":"Aplicaciones",children:(0,uT.jsx)(VT,{apps:y,role:g})}),(0,uT.jsxs)("section",{className:"news-section","aria-label":"Noticias y devocionales",children:[(0,uT.jsx)(fT,{theme:d}),(0,uT.jsx)(yT,{feedUrl:"https://devocecre.wordpress.com/feed",maxItems:2,theme:d})]})]})]}):(0,uT.jsx)(ZT,{})}function rE(){const e=im(),{inProgress:t}=om();if(console.log("\ud83d\udd0d Content render:",{isAuthenticated:e,inProgress:t}),t===nf||t===cf||t===rf){const e="dark"===(localStorage.getItem("portal-theme")||"light");return(0,uT.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:e?"#1b2533":"#fafafa",color:e?"#9ea9b6":"#666"},children:(0,uT.jsxs)("div",{style:{textAlign:"center"},children:[(0,uT.jsx)("div",{style:{width:40,height:40,border:"3px solid",borderColor:"currentColor transparent currentColor transparent",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto"}}),(0,uT.jsx)("p",{style:{marginTop:16,fontSize:14},children:"Cargando..."}),(0,uT.jsx)("style",{children:"\n            @keyframes spin {\n              0% { transform: rotate(0deg); }\n              100% { transform: rotate(360deg); }\n            }\n          "})]})})}return(0,uT.jsx)(nE,{isAuthenticated:e})}class oE extends ui.Component{constructor(e){super(e),this.handleDownloadLogs=()=>{WT("error-report")},this.handleRetry=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),window.logEvent&&window.logEvent("ERROR","React Error Boundary caught error",{error:e.message,stack:e.stack,componentStack:t.componentStack})}render(){return this.state.hasError?(0,uT.jsxs)("div",{style:{padding:"20px",margin:"20px",border:"1px solid #ff6b6b",borderRadius:"8px",backgroundColor:"#fff5f5",fontFamily:"Arial, sans-serif"},children:[(0,uT.jsx)("h2",{style:{color:"#d63031",marginTop:0},children:"\xa1Oops! Algo sali\xf3 mal"}),(0,uT.jsx)("p",{style:{color:"#636e72",marginBottom:"20px"},children:"Ha ocurrido un error inesperado. Por favor, descarga los logs y env\xedalos al administrador para que podamos solucionarlo."}),(0,uT.jsxs)("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[(0,uT.jsx)("button",{onClick:this.handleDownloadLogs,style:{padding:"10px 20px",backgroundColor:"#0078d4",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\ud83d\udce5 Descargar logs de error"}),(0,uT.jsx)("button",{onClick:this.handleRetry,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\ud83d\udd04 Intentar de nuevo"}),(0,uT.jsx)("button",{onClick:()=>window.location.reload(),style:{padding:"10px 20px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"\ud83d\udd04 Recargar p\xe1gina"})]}),!1]}):this.props.children}}const iE=oE;const aE=function(){return(0,uT.jsx)(rm,{instance:lT,children:(0,uT.jsx)(iE,{children:(0,uT.jsx)(rE,{})})})},sE=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:o,getLCP:i,getTTFB:a}=t;n(e),r(e),o(e),i(e),a(e)})};zd.createRoot(document.getElementById("root")).render((0,uT.jsx)(ui.StrictMode,{children:(0,uT.jsx)(aE,{})})),sE()})();
//# sourceMappingURL=main.9daa27af.js.map